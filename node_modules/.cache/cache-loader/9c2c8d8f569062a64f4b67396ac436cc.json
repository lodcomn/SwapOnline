{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\core\\swap.app\\StorageFactory.ts","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\core\\swap.app\\StorageFactory.ts","mtime":1614842913746},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5IjsKCnZhciBTdG9yYWdlRmFjdG9yeSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gU3RvcmFnZUZhY3Rvcnkoc3RvcmFnZSkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0b3JhZ2VGYWN0b3J5KTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInByZWZpeCIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJzdG9yYWdlIiwgdm9pZCAwKTsKCiAgICB0aGlzLnByZWZpeCA9ICdzd2FwOic7CiAgICB0aGlzLnN0b3JhZ2UgPSBzdG9yYWdlIHx8IGdsb2JhbC5sb2NhbFN0b3JhZ2U7CgogICAgdHJ5IHsKICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oJ3Rlc3QnLCAndGVzdCcpOwogICAgICB0aGlzLnN0b3JhZ2UuZ2V0SXRlbSgndGVzdCcpOwogICAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbSgndGVzdCcpOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiU3dhcEFwcC5lbnYuU3RvcmFnZUZhY3Rvcnk6ICIuY29uY2F0KGVycikpOwogICAgfQogIH0KCiAgX2NyZWF0ZUNsYXNzKFN0b3JhZ2VGYWN0b3J5LCBbewogICAga2V5OiAic2V0SXRlbSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0SXRlbShrZXksIHZhbHVlKSB7CiAgICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKCIiLmNvbmNhdCh0aGlzLnByZWZpeCkuY29uY2F0KGtleSksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0SXRlbSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SXRlbShrZXkpIHsKICAgICAgdmFyIHZhbHVlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oIiIuY29uY2F0KHRoaXMucHJlZml4KS5jb25jYXQoa2V5KSk7CgogICAgICB0cnkgewogICAgICAgIHJldHVybiBKU09OLnBhcnNlKHZhbHVlKTsKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5lcnJvcigiU3dhcEFwcC5lbnYuc3RvcmFnZS5nZXRJdGVtKCIuY29uY2F0KGtleSwgIikgcGFyc2UgZXJyb3IuIExvb2tzIGxpa2UgdGhlIHZhbHVlIHdhcyBjcmVhdGVkIHcvbyBzZXRJdGVtIG1ldGhvZCIpKTsKICAgICAgICBjb25zb2xlLmVycm9yKGVycik7CiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInJlbW92ZUl0ZW0iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUl0ZW0oa2V5KSB7CiAgICAgIHJldHVybiB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbSgiIi5jb25jYXQodGhpcy5wcmVmaXgpLmNvbmNhdChrZXkpKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBTdG9yYWdlRmFjdG9yeTsKfSgpOwoKZXhwb3J0IGRlZmF1bHQgU3RvcmFnZUZhY3Rvcnk7"},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/core/swap.app/StorageFactory.ts"],"names":["StorageFactory","storage","prefix","global","localStorage","setItem","getItem","removeItem","err","Error","key","value","JSON","stringify","parse","console","error","undefined"],"mappings":";;;;IAAMA,c;AAKJ,0BAAYC,OAAZ,EAAqB;AAAA;;AAAA;;AAAA;;AACnB,SAAKC,MAAL,GAAc,OAAd;AACA,SAAKD,OAAL,GAAeA,OAAO,IAAIE,MAAM,CAACC,YAAjC;;AAEA,QAAI;AACF,WAAKH,OAAL,CAAaI,OAAb,CAAqB,MAArB,EAA6B,MAA7B;AACA,WAAKJ,OAAL,CAAaK,OAAb,CAAqB,MAArB;AACA,WAAKL,OAAL,CAAaM,UAAb,CAAwB,MAAxB;AACD,KAJD,CAKA,OAAOC,GAAP,EAAY;AACV,YAAM,IAAIC,KAAJ,uCAAyCD,GAAzC,EAAN;AACD;AACF;;;;WAED,iBAAQE,GAAR,EAAaC,KAAb,EAAoB;AAClB,WAAKV,OAAL,CAAaI,OAAb,WAAwB,KAAKH,MAA7B,SAAsCQ,GAAtC,GAA6CE,IAAI,CAACC,SAAL,CAAeF,KAAf,CAA7C;AACD;;;WAED,iBAAQD,GAAR,EAAa;AACX,UAAMC,KAAK,GAAG,KAAKV,OAAL,CAAaK,OAAb,WAAwB,KAAKJ,MAA7B,SAAsCQ,GAAtC,EAAd;;AAEA,UAAI;AACF,eAAOE,IAAI,CAACE,KAAL,CAAWH,KAAX,CAAP;AACD,OAFD,CAGA,OAAOH,GAAP,EAAY;AACVO,QAAAA,OAAO,CAACC,KAAR,uCAA6CN,GAA7C;AACAK,QAAAA,OAAO,CAACC,KAAR,CAAcR,GAAd;AACA,eAAOS,SAAP;AACD;AACF;;;WAED,oBAAWP,GAAX,EAAgB;AACd,aAAO,KAAKT,OAAL,CAAaM,UAAb,WAA2B,KAAKL,MAAhC,SAAyCQ,GAAzC,EAAP;AACD;;;;;;AAIH,eAAeV,cAAf","sourcesContent":["class StorageFactory {\r\n\r\n  prefix: string\r\n  storage: any\r\n\r\n  constructor(storage) {\r\n    this.prefix = 'swap:'\r\n    this.storage = storage || global.localStorage\r\n\r\n    try {\r\n      this.storage.setItem('test', 'test')\r\n      this.storage.getItem('test')\r\n      this.storage.removeItem('test')\r\n    }\r\n    catch (err) {\r\n      throw new Error(`SwapApp.env.StorageFactory: ${err}`)\r\n    }\r\n  }\r\n\r\n  setItem(key, value) {\r\n    this.storage.setItem(`${this.prefix}${key}`, JSON.stringify(value))\r\n  }\r\n\r\n  getItem(key) {\r\n    const value = this.storage.getItem(`${this.prefix}${key}`)\r\n\r\n    try {\r\n      return JSON.parse(value)\r\n    }\r\n    catch (err) {\r\n      console.error(`SwapApp.env.storage.getItem(${key}) parse error. Looks like the value was created w/o setItem method`)\r\n      console.error(err)\r\n      return undefined\r\n    }\r\n  }\r\n\r\n  removeItem(key) {\r\n    return this.storage.removeItem(`${this.prefix}${key}`)\r\n  }\r\n}\r\n\r\n\r\nexport default StorageFactory\r\n"]}]}