{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\components\\modals\\BtcMultisignConfirmTx\\BtcMultisignConfirmTx.tsx","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\components\\modals\\BtcMultisignConfirmTx\\BtcMultisignConfirmTx.tsx","mtime":1614842913974},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI7CmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXNzZXJ0VGhpc0luaXRpYWxpemVkIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9nZXRQcm90b3R5cGVPZiI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSI7Cgp2YXIgX2RlYywgX2RlYzIsIF9jbGFzcywgX2NsYXNzMiwgX3RlbXA7CgppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICJAYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvciI7CgpmdW5jdGlvbiBfY3JlYXRlU3VwZXIoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfQoKZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSAidW5kZWZpbmVkIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gImZ1bmN0aW9uIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmltcG9ydCBSZWFjdCwgeyBGcmFnbWVudCB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJzsKaW1wb3J0IGhlbHBlcnMgZnJvbSAnaGVscGVycyc7CmltcG9ydCBhY3Rpb25zIGZyb20gJ3JlZHV4L2FjdGlvbnMnOwppbXBvcnQgTGluayBmcm9tICdsb2NhbF9tb2R1bGVzL3N3LXZhbHVlbGluayc7CmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWRhY3Rpb24nOwppbXBvcnQgY3NzTW9kdWxlcyBmcm9tICdyZWFjdC1jc3MtbW9kdWxlcyc7CmltcG9ydCBkZWZhdWx0U3R5bGVzIGZyb20gJy4uL1N0eWxlcy9kZWZhdWx0LnNjc3MnOwppbXBvcnQgc3R5bGVzIGZyb20gJy4vQnRjTXVsdGlzaWduQ29uZmlybVR4LnNjc3MnOwppbXBvcnQgTW9kYWwgZnJvbSAnY29tcG9uZW50cy9tb2RhbC9Nb2RhbC9Nb2RhbCc7CmltcG9ydCBGaWVsZExhYmVsIGZyb20gJ2NvbXBvbmVudHMvZm9ybXMvRmllbGRMYWJlbC9GaWVsZExhYmVsJzsKaW1wb3J0IElucHV0IGZyb20gJ2NvbXBvbmVudHMvZm9ybXMvSW5wdXQvSW5wdXQnOwppbXBvcnQgQnV0dG9uIGZyb20gJ2NvbXBvbmVudHMvY29udHJvbHMvQnV0dG9uL0J1dHRvbic7CmltcG9ydCBJbmxpbmVMb2FkZXIgZnJvbSAnY29tcG9uZW50cy9sb2FkZXJzL0lubGluZUxvYWRlci9JbmxpbmVMb2FkZXInOwppbXBvcnQgVG9vbHRpcCBmcm9tICdjb21wb25lbnRzL3VpL1Rvb2x0aXAvVG9vbHRpcCc7CmltcG9ydCB7IEZvcm1hdHRlZE1lc3NhZ2UsIGluamVjdEludGwsIGRlZmluZU1lc3NhZ2VzIH0gZnJvbSAncmVhY3QtaW50bCc7CmltcG9ydCByZWRpcmVjdFRvIGZyb20gJ2hlbHBlcnMvcmVkaXJlY3RUbyc7CmltcG9ydCBsc0RhdGFDYWNoZSBmcm9tICdoZWxwZXJzL2xzRGF0YUNhY2hlJzsKdmFyIGxhbmdQcmVmaXggPSAibXVsdGlTaWduQ29uZmlybVR4TW9kYWwiOwp2YXIgbGFuZ0xhYmVscyA9IGRlZmluZU1lc3NhZ2VzKHsKICB0aXRsZTogewogICAgaWQ6ICIiLmNvbmNhdChsYW5nUHJlZml4LCAiX1RpdGxlIiksCiAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxRlx1MDQzRVx1MDQzNFx1MDQ0Mlx1MDQzMlx1MDQzNVx1MDQ0MFx1MDQzNlx1MDQzNFx1MDQzNVx1MDQzRFx1MDQzOFx1MDQzNSBCVEMgTXVsdGlzaWduIFx1MDQ0Mlx1MDQ0MFx1MDQzMFx1MDQzRFx1MDQzN1x1MDQzMFx1MDQzQVx1MDQ0Nlx1MDQzOFx1MDQzOCIKICB9LAogIG5vdGljZVVwOiB7CiAgICBpZDogIiIuY29uY2F0KGxhbmdQcmVmaXgsICJfVXBOb3RpY2UiKSwKICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDFFXHUwNDM3XHUwNDNEXHUwNDMwXHUwNDNBXHUwNDNFXHUwNDNDXHUwNDRDXHUwNDQyXHUwNDM1XHUwNDQxXHUwNDRDIFx1MDQ0MSBcdTA0NDJcdTA0NDBcdTA0MzBcdTA0M0RcdTA0MzdcdTA0MzBcdTA0M0FcdTA0NDZcdTA0MzhcdTA0MzVcdTA0MzkgXHUwNDM4IFx1MDQzRlx1MDQzRVx1MDQzNFx1MDQ0Mlx1MDQzMlx1MDQzNVx1MDQ0MFx1MDQzNFx1MDQzOFx1MDQ0Mlx1MDQzNSBcdTA0MzVcdTA0NTEuIFx1MDQxNVx1MDQ0MVx1MDQzQlx1MDQzOCBcdTA0MzJcdTA0NEIgXHUwNDNGXHUwNDQwXHUwNDNFXHUwNDQyXHUwNDM4XHUwNDMyIFx1MDQ0MVx1MDQzRlx1MDQzOFx1MDQ0MVx1MDQzMFx1MDQzRFx1MDQzOFx1MDQ0RiwgXHUwNDNFXHUwNDQyXHUwNDNDXHUwNDM1XHUwNDNEXHUwNDM4XHUwNDQyXHUwNDM1IFx1MDQ0Mlx1MDQ0MFx1MDQzMFx1MDQzN1x1MDQzMFx1MDQzQVx1MDQ0Nlx1MDQzOFx1MDQ0RSIKICB9LAogIG5vdGljZUZldGNoaW5nOiB7CiAgICBpZDogIiIuY29uY2F0KGxhbmdQcmVmaXgsICJfTm90aWNlRmV0Y2hpbmciKSwKICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDE3XHUwNDMwXHUwNDMzXHUwNDQwXHUwNDQzXHUwNDM3XHUwNDNBXHUwNDMwLi4uIgogIH0sCiAgY29uZmlybVR4OiB7CiAgICBpZDogIiIuY29uY2F0KGxhbmdQcmVmaXgsICJfQ29uZmlybVR4IiksCiAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxRlx1MDQzRVx1MDQzNFx1MDQ0Mlx1MDQzMlx1MDQzNVx1MDQ0MFx1MDQzNFx1MDQzOFx1MDQ0Mlx1MDQ0QyIKICB9LAogIGRpc21hdGNoVHg6IHsKICAgIGlkOiAiIi5jb25jYXQobGFuZ1ByZWZpeCwgIl9EaXNtYXRjaFR4IiksCiAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxRVx1MDQ0Mlx1MDQzQVx1MDQzQlx1MDQzRVx1MDQzRFx1MDQzOFx1MDQ0Mlx1MDQ0QyIKICB9LAogIHlvdUNhbnRTaWduVGhpczogewogICAgaWQ6ICIiLmNvbmNhdChsYW5nUHJlZml4LCAiX1lvdUNhbnRTaWduVGhpc1R4IiksCiAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQyMyBcdTA0MzJcdTA0MzBcdTA0NDEgXHUwNDNEXHUwNDM1XHUwNDQyIFx1MDQzRlx1MDQ0MFx1MDQzMFx1MDQzMiBcdTA0MzRcdTA0M0JcdTA0NEYgXHUwNDNGXHUwNDNFXHUwNDM0XHUwNDNGXHUwNDM4XHUwNDQxXHUwNDM4IFx1MDQ0RFx1MDQ0Mlx1MDQzRVx1MDQzOSBcdTA0NDJcdTA0NDBcdTA0MzBcdTA0M0RcdTA0MzdcdTA0MzBcdTA0M0FcdTA0NDZcdTA0MzhcdTA0MzggKFx1MDQzRlx1MDQ0MFx1MDQzRVx1MDQzMlx1MDQzNVx1MDQ0MFx1MDQ0Q1x1MDQ0Mlx1MDQzNSwgXHUwNDQ3XHUwNDQyXHUwNDNFIFx1MDQ0MyBcdTA0MzJcdTA0MzBcdTA0NDEgXHUwNDQxXHUwNDNFXHUwNDM3XHUwNDM0XHUwNDMwXHUwNDNEIFx1MDQzQ1x1MDQ0M1x1MDQzQlx1MDQ0Q1x1MDQ0Mlx1MDQzOFx1MDQ0MVx1MDQzOFx1MDQzMykiCiAgfSwKICBnb1RvV2FsbGV0OiB7CiAgICBpZDogIiIuY29uY2F0KGxhbmdQcmVmaXgsICJfR29Ub1dhbGxldFBhZ2UiKSwKICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDFFXHUwNDQyXHUwNDNBXHUwNDQwXHUwNDRCXHUwNDQyXHUwNDRDIFx1MDQzQVx1MDQzRVx1MDQ0OFx1MDQzNVx1MDQzQlx1MDQzNVx1MDQzQSIKICB9LAogIGJ1dHRvbkNsb3NlOiB7CiAgICBpZDogIiIuY29uY2F0KGxhbmdQcmVmaXgsICJfQnV0dG9uQ2xvc2UiKSwKICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDE3XHUwNDMwXHUwNDNBXHUwNDQwXHUwNDRCXHUwNDQyXHUwNDRDIgogIH0KfSk7CnZhciBCdGNNdWx0aXNpZ25Db25maXJtVHggPSAoX2RlYyA9IGNvbm5lY3QoZnVuY3Rpb24gKF9yZWYpIHsKICB2YXIgYnRjTXVsdGlzaWdVc2VyRGF0YSA9IF9yZWYudXNlci5idGNNdWx0aXNpZ1VzZXJEYXRhOwogIHJldHVybiB7CiAgICBidGNEYXRhOiBidGNNdWx0aXNpZ1VzZXJEYXRhCiAgfTsKfSksIF9kZWMyID0gY3NzTW9kdWxlcyhfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRlZmF1bHRTdHlsZXMpLCBzdHlsZXMpLCB7CiAgYWxsb3dNdWx0aXBsZTogdHJ1ZQp9KSwgaW5qZWN0SW50bChfY2xhc3MgPSBfZGVjKF9jbGFzcyA9IF9kZWMyKF9jbGFzcyA9IChfdGVtcCA9IF9jbGFzczIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHsKICBfaW5oZXJpdHMoQnRjTXVsdGlzaWduQ29uZmlybVR4LCBfUmVhY3QkQ29tcG9uZW50KTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihCdGNNdWx0aXNpZ25Db25maXJtVHgpOwoKICBmdW5jdGlvbiBCdGNNdWx0aXNpZ25Db25maXJtVHgocHJvcHMpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQnRjTXVsdGlzaWduQ29uZmlybVR4KTsKCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJwcm9wcyIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlR29Ub1dhbGxldCIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuaGFuZGxlQ2xvc2UoKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZUNvbmZpcm0iLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIF90aGlzJHN0YXRlLCB1c2VCYWNrZW5kSWQsIHR4UmF3LCB0eERhdGEsIGZyb20sIHRvLCBhbW91bnQsIG5hbWUsIHNpZ25lZFRYLCBidGNUeElkLCB0eElkLCBiYWNrZW5kSWQsIHR4SW5mb0NhY2hlLCB0eEluZm9Vcmw7CgogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzJHN0YXRlID0gX3RoaXMuc3RhdGUsIHVzZUJhY2tlbmRJZCA9IF90aGlzJHN0YXRlLnR4SWQsIHR4UmF3ID0gX3RoaXMkc3RhdGUudHhSYXcsIHR4RGF0YSA9IF90aGlzJHN0YXRlLnR4RGF0YSwgZnJvbSA9IF90aGlzJHN0YXRlLmZyb20sIHRvID0gX3RoaXMkc3RhdGUuYWRkcmVzcywgYW1vdW50ID0gX3RoaXMkc3RhdGUuYW1vdW50OwogICAgICAgICAgICAgIG5hbWUgPSBfdGhpcy5wcm9wcy5uYW1lOwoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc0NvbmZpcm1pbmc6IHRydWUKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIGFjdGlvbnMuYnRjbXVsdGlzaWcuc2lnbk11bHRpU2lnbih0eFJhdywgdHhEYXRhLndhbGxldCk7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgc2lnbmVkVFggPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgIHJldHVybiBhY3Rpb25zLmJ0Y211bHRpc2lnLmJyb2FkY2FzdFR4KHNpZ25lZFRYKTsKCiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBidGNUeElkID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICB0eElkID0gZmFsc2U7CiAgICAgICAgICAgICAgaWYgKGJ0Y1R4SWQgJiYgYnRjVHhJZC50eGlkKSB0eElkID0gYnRjVHhJZC50eGlkOwoKICAgICAgICAgICAgICBpZiAoIXVzZUJhY2tlbmRJZCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgcmV0dXJuIGFjdGlvbnMubXVsdGlzaWdUeC5jb25maXJtVHgoZnJvbSwgdXNlQmFja2VuZElkLCBzaWduZWRUWCwgdHhJZCk7CgogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIGJhY2tlbmRJZCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIGlmICh0eElkKSB7CiAgICAgICAgICAgICAgICAvLyDQodC+0YXRgNCw0L3Rj9C10Lwg0YLRgNCw0L3Qt9Cw0LrRhtC40Y4g0LIg0LrQtdGICiAgICAgICAgICAgICAgICB0eEluZm9DYWNoZSA9IHsKICAgICAgICAgICAgICAgICAgYW1vdW50OiBhbW91bnQsCiAgICAgICAgICAgICAgICAgIHNlbmRlckFkZHJlc3M6IGZyb20sCiAgICAgICAgICAgICAgICAgIHJlY2VpdmVyQWRkcmVzczogdG8sCiAgICAgICAgICAgICAgICAgIGNvbmZpcm1lZDogZmFsc2UKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBsc0RhdGFDYWNoZS5wdXNoKHsKICAgICAgICAgICAgICAgICAga2V5OiAiVHhJbmZvX2J0Y18iLmNvbmNhdCh0eElkKSwKICAgICAgICAgICAgICAgICAgdGltZTogMzYwMCwKICAgICAgICAgICAgICAgICAgZGF0YTogdHhJbmZvQ2FjaGUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIF90aGlzLmhhbmRsZUNsb3NlKCk7CgogICAgICAgICAgICAgICAgdHhJbmZvVXJsID0gaGVscGVycy50cmFuc2FjdGlvbnMuZ2V0VHhSb3V0ZXIoJ2J0YycsIHR4SWQpOwogICAgICAgICAgICAgICAgcmVkaXJlY3RUbyh0eEluZm9VcmwpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIGlzRXJyb3I6IHRydWUsCiAgICAgICAgICAgICAgICAgIGlzQ29uZmlybWluZzogZmFsc2UKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVSZWplY3QiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciBfdGhpcyRzdGF0ZTIsIHVzZUJhY2tlbmRJZCwgdHhEYXRhLCBmcm9tLCBiYWNrZW5kSWQ7CgogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfdGhpcyRzdGF0ZTIgPSBfdGhpcy5zdGF0ZSwgdXNlQmFja2VuZElkID0gX3RoaXMkc3RhdGUyLnR4SWQsIHR4RGF0YSA9IF90aGlzJHN0YXRlMi50eERhdGEsIGZyb20gPSBfdGhpcyRzdGF0ZTIuZnJvbTsKCiAgICAgICAgICAgICAgaWYgKCF1c2VCYWNrZW5kSWQpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBhY3Rpb25zLm11bHRpc2lnVHgucmVqZWN0VHgoZnJvbSwgdXNlQmFja2VuZElkKTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBiYWNrZW5kSWQgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgICAgX3RoaXMuaGFuZGxlQ2xvc2UoKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlQ2xvc2UiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLAogICAgICAgICAgbmFtZSA9IF90aGlzJHByb3BzLm5hbWUsCiAgICAgICAgICBkYXRhID0gX3RoaXMkcHJvcHMuZGF0YSwKICAgICAgICAgIG9uQ2xvc2UgPSBfdGhpcyRwcm9wcy5vbkNsb3NlOwoKICAgICAgaWYgKHR5cGVvZiBvbkNsb3NlID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgb25DbG9zZSgpOwogICAgICB9CgogICAgICBpZiAodHlwZW9mIGRhdGEub25DbG9zZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIGRhdGEub25DbG9zZSgpOwogICAgICB9CgogICAgICBhY3Rpb25zLm1vZGFscy5jbG9zZShuYW1lKTsKICAgIH0pOwoKICAgIF90aGlzLnN0YXRlID0gewogICAgICBzdGVwOiAiZmV0Y2hnaW4iLAogICAgICBpc0NvbnRyb2xGZXRjaGluZzogdHJ1ZSwKICAgICAgaXNUeEhvbGRlcjogdHJ1ZSwKICAgICAgYWRkcmVzczogIiIsCiAgICAgIGFtb3VudDogIiIsCiAgICAgIGZyb206ICIiCiAgICB9OwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEJ0Y011bHRpc2lnbkNvbmZpcm1UeCwgW3sKICAgIGtleTogImNvbXBvbmVudERpZE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBzZXRUaW1lb3V0KCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIF90aGlzMiRwcm9wcyRkYXRhLCB0eERhdGEsIHR4SWQsIF90eERhdGEsIGFkZHJlc3MsIGZyb20sIGFtb3VudCwgd2FsbGV0LCB0eERhdGFQYXJzZWQ7CgogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMyJHByb3BzJGRhdGEgPSBfdGhpczIucHJvcHMuZGF0YSwgdHhEYXRhID0gX3RoaXMyJHByb3BzJGRhdGEudHhEYXRhLCB0eElkID0gX3RoaXMyJHByb3BzJGRhdGEudHhJZDsKCiAgICAgICAgICAgICAgICBpZiAoIXR4SWQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIGFjdGlvbnMubXVsdGlzaWdUeC5mZXRjaFR4KHR4SWQpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBfdHhEYXRhID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgICBhZGRyZXNzID0gX3R4RGF0YS5kZXN0aW5hdGlvbiwgZnJvbSA9IF90eERhdGEuc2VuZGVyLCBhbW91bnQgPSBfdHhEYXRhLmFtb3VudDsKICAgICAgICAgICAgICAgIHdhbGxldCA9IGFjdGlvbnMuYnRjbXVsdGlzaWcuYWRkcmVzc1RvV2FsbGV0KGZyb20pOwoKICAgICAgICAgICAgICAgIGlmICh3YWxsZXQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMyLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgc3RlcDogImRpbm5lZCIKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIF90aGlzMi5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIHN0ZXA6ICJ0eEluZm8iLAogICAgICAgICAgICAgICAgICB0eElkOiB0eElkLAogICAgICAgICAgICAgICAgICB0eERhdGE6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgX3R4RGF0YSksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgd2FsbGV0OiB3YWxsZXQKICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IGFkZHJlc3MsCiAgICAgICAgICAgICAgICAgIGZyb206IGZyb20sCiAgICAgICAgICAgICAgICAgIGFtb3VudDogYW1vdW50CiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIC8vIEZldGNoaW5nIGZ1bGwgdHggaW5mbyAocmF3VFgpCiAgICAgICAgICAgICAgICAgIGFjdGlvbnMubXVsdGlzaWdUeC5mZXRjaFJhd1R4KGZyb20sIHR4SWQpLnRoZW4oZnVuY3Rpb24gKHR4QXV0aGVkRGF0YSkgewogICAgICAgICAgICAgICAgICAgIGlmICh0eEF1dGhlZERhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbnMuYnRjbXVsdGlzaWcucGFyc2VSYXdUWCh0eEF1dGhlZERhdGEucmF3VHgpLnRoZW4oZnVuY3Rpb24gKHR4RGF0YVBhcnNlZCkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgIHR4UmF3OiB0eEF1dGhlZERhdGEucmF3VHgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgdHhEYXRhOiB0eERhdGFQYXJzZWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNUeEhvbGRlcjogd2FsbGV0LnB1YmxpY0tleS50b1N0cmluZygiSGV4IikgPT09IHR4QXV0aGVkRGF0YS5ob2xkZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNDb250cm9sRmV0Y2hpbmc6IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXA6ICJkaW5uZWQiCiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyMDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxNTsKICAgICAgICAgICAgICAgIHJldHVybiBhY3Rpb25zLmJ0Y211bHRpc2lnLnBhcnNlUmF3VFgodHhEYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIHR4RGF0YVBhcnNlZCA9IF9jb250ZXh0My5zZW50OwoKICAgICAgICAgICAgICAgIGlmICh0eERhdGFQYXJzZWQuaXNPdXIpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMyLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgc3RlcDogImRpbm5lZCIKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIF90aGlzMi5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIHN0ZXA6ICJ0eEluZm8iLAogICAgICAgICAgICAgICAgICB0eFJhdzogdHhEYXRhLAogICAgICAgICAgICAgICAgICB0eERhdGE6IHR4RGF0YVBhcnNlZCwKICAgICAgICAgICAgICAgICAgYWRkcmVzczogdHhEYXRhUGFyc2VkLnRvLAogICAgICAgICAgICAgICAgICBmcm9tOiB0eERhdGFQYXJzZWQuZnJvbSwKICAgICAgICAgICAgICAgICAgYW1vdW50OiB0eERhdGFQYXJzZWQuYW1vdW50CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wczIgPSB0aGlzLnByb3BzLAogICAgICAgICAgbmFtZSA9IF90aGlzJHByb3BzMi5uYW1lLAogICAgICAgICAgaW50bCA9IF90aGlzJHByb3BzMi5pbnRsLAogICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uID0gX3RoaXMkcHJvcHMyLmRhdGEuc2hvd0Nsb3NlQnV0dG9uOwogICAgICB2YXIgX3RoaXMkc3RhdGUzID0gdGhpcy5zdGF0ZSwKICAgICAgICAgIHN0ZXAgPSBfdGhpcyRzdGF0ZTMuc3RlcCwKICAgICAgICAgIHR4RGF0YSA9IF90aGlzJHN0YXRlMy50eERhdGEsCiAgICAgICAgICBpc0NvbmZpcm1pbmcgPSBfdGhpcyRzdGF0ZTMuaXNDb25maXJtaW5nLAogICAgICAgICAgYWRkcmVzcyA9IF90aGlzJHN0YXRlMy5hZGRyZXNzLAogICAgICAgICAgYW1vdW50ID0gX3RoaXMkc3RhdGUzLmFtb3VudCwKICAgICAgICAgIGZyb20gPSBfdGhpcyRzdGF0ZTMuZnJvbSwKICAgICAgICAgIGlzQ29udHJvbEZldGNoaW5nID0gX3RoaXMkc3RhdGUzLmlzQ29udHJvbEZldGNoaW5nLAogICAgICAgICAgaXNUeEhvbGRlciA9IF90aGlzJHN0YXRlMy5pc1R4SG9sZGVyOwogICAgICB2YXIgX3RoaXMkc3RhdGU0ID0gdGhpcy5zdGF0ZSwKICAgICAgICAgIGRlYnVnU2hvd1RYQiA9IF90aGlzJHN0YXRlNC5kZWJ1Z1Nob3dUWEIsCiAgICAgICAgICBkZWJ1Z1Nob3dJbnB1dCA9IF90aGlzJHN0YXRlNC5kZWJ1Z1Nob3dJbnB1dCwKICAgICAgICAgIGRlYnVnU2hvd091dHB1dCA9IF90aGlzJHN0YXRlNC5kZWJ1Z1Nob3dPdXRwdXQ7CiAgICAgIHZhciBsaW5rZWQgPSBMaW5rLmFsbCh0aGlzLCAnYWRkcmVzcycsICdhbW91bnQnLCAnZnJvbScpOwogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTW9kYWwsIHsKICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgIHRpdGxlOiAiIi5jb25jYXQoaW50bC5mb3JtYXRNZXNzYWdlKGxhbmdMYWJlbHMudGl0bGUpKSwKICAgICAgICBvbkNsb3NlOiB0aGlzLmhhbmRsZUNsb3NlLAogICAgICAgIHNob3dDbG9zZUJ1dHRvbjogc2hvd0Nsb3NlQnV0dG9uCiAgICAgIH0sIHN0ZXAgIT09ICJkaW5uZWQiICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwIiwgewogICAgICAgIHN0eWxlTmFtZTogIm5vdGljZSIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgbGFuZ0xhYmVscy5ub3RpY2VVcCkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogImNvbmZpcm1UeE1vZGFsIgogICAgICB9LCBzdGVwID09PSAiZmV0Y2hnaW4iICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwIiwgewogICAgICAgIHN0eWxlTmFtZTogIm5vdGljZSIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgbGFuZ0xhYmVscy5ub3RpY2VGZXRjaGluZykpLCBzdGVwID09PSAiZGlubmVkIiAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGcmFnbWVudCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInAiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAicmVkbm90ZXMiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIGxhbmdMYWJlbHMueW91Q2FudFNpZ25UaGlzKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwgewogICAgICAgIHN0eWxlTmFtZTogImJ1dHRvbkNlbnRlciIsCiAgICAgICAgYmx1ZTogdHJ1ZSwKICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUdvVG9XYWxsZXQKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgbGFuZ0xhYmVscy5nb1RvV2FsbGV0KSkpLCBzdGVwID09PSAidHhJbmZvIiAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGcmFnbWVudCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJoaWdoTGV2ZWwiLAogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICBtYXJnaW5Cb3R0b206ICcyMHB4JwogICAgICAgIH0KICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRmllbGRMYWJlbCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiQnRjTXVsdGlzaWduQ29uZmlybVR4X0Zyb21BZGRyZXNzIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxRVx1MDQzRlx1MDQzQlx1MDQzMFx1MDQ0Mlx1MDQzMCBcdTA0NDEgXHUwNDNBXHUwNDNFXHUwNDQ4XHUwNDM1XHUwNDNCXHUwNDRDXHUwNDNBXHUwNDMwIgogICAgICB9KSwgJyAnKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXQsIHsKICAgICAgICB2YWx1ZUxpbms6IGxpbmtlZC5mcm9tLAogICAgICAgIGRpc2FibGVkOiB0cnVlLAogICAgICAgIHN0eWxlTmFtZTogImlucHV0IGZha2VJbnB1dCIsCiAgICAgICAgd2l0aE1hcmdpbjogdHJ1ZQogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiaGlnaExldmVsIiwKICAgICAgICBzdHlsZTogewogICAgICAgICAgbWFyZ2luQm90dG9tOiAnMjBweCcKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZpZWxkTGFiZWwsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIldpdGhkcm93MTE5NCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJBZGRyZXNzICIKICAgICAgfSksICcgJywgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVG9vbHRpcCwgewogICAgICAgIGlkOiAiV3RIMjAzIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICB0ZXh0QWxpZ246ICdjZW50ZXInCiAgICAgICAgfQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJXVEgyNzUiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTWFrZSBzdXJlIHRoZSB3YWxsZXQgeW91e2JyfWFyZSBzZW5kaW5nIHRoZSBmdW5kcyB0byBzdXBwb3J0cyB7Y3VycmVuY3l9IiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIGJyOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnIiLCBudWxsKSwKICAgICAgICAgIGN1cnJlbmN5OiAiQlRDIgogICAgICAgIH0KICAgICAgfSkpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KElucHV0LCB7CiAgICAgICAgdmFsdWVMaW5rOiBsaW5rZWQuYWRkcmVzcywKICAgICAgICBkaXNhYmxlZDogdHJ1ZSwKICAgICAgICBzdHlsZU5hbWU6ICJpbnB1dCBmYWtlSW5wdXQiLAogICAgICAgIHdpdGhNYXJnaW46IHRydWUKICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogImxvd0xldmVsIiwKICAgICAgICBzdHlsZTogewogICAgICAgICAgbWFyZ2luQm90dG9tOiAnMzBweCcKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwIiwgewogICAgICAgIHN0eWxlTmFtZTogImJhbGFuY2Ugd2FsbGV0QmFsYW5jZSIKICAgICAgfSwgdHhEYXRhLndhbGxldC5iYWxhbmNlLCAiICIsICJCVEMiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRmllbGRMYWJlbCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiV2l0aGRyb3cxMTgiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQW1vdW50ICIKICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogImdyb3VwIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dCwgewogICAgICAgIHN0eWxlTmFtZTogImlucHV0IGZha2VJbnB1dCIsCiAgICAgICAgdmFsdWVMaW5rOiBsaW5rZWQuYW1vdW50LAogICAgICAgIGRpc2FibGVkOiB0cnVlCiAgICAgIH0pKSksIGlzQ29udHJvbEZldGNoaW5nID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJidXR0b25zSG9sZGVyX2ZldGNoaW5nIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChJbmxpbmVMb2FkZXIsIG51bGwpKSA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiYnV0dG9uc0hvbGRlciIKICAgICAgfSwgIWlzVHhIb2xkZXIgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiYnV0dG9uRnVsbCIsCiAgICAgICAgYmx1ZTogdHJ1ZSwKICAgICAgICBkaXNhYmxlZDogaXNDb25maXJtaW5nIHx8IGlzVHhIb2xkZXIsCiAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVDb25maXJtLAogICAgICAgIGZ1bGxXaWR0aDogdHJ1ZQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCBsYW5nTGFiZWxzLmNvbmZpcm1UeCkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHsKICAgICAgICBzdHlsZU5hbWU6ICJidXR0b25GdWxsIiwKICAgICAgICBibHVlOiB0cnVlLAogICAgICAgIGRpc2FibGVkOiBpc0NvbmZpcm1pbmcsCiAgICAgICAgb25DbGljazogaXNUeEhvbGRlciA/IHRoaXMuaGFuZGxlQ2xvc2UgOiB0aGlzLmhhbmRsZVJlamVjdCwKICAgICAgICBmdWxsV2lkdGg6IHRydWUKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgaXNUeEhvbGRlciA/IGxhbmdMYWJlbHMuYnV0dG9uQ2xvc2UgOiBsYW5nTGFiZWxzLmRpc21hdGNoVHgpKSkpKSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQnRjTXVsdGlzaWduQ29uZmlybVR4Owp9KFJlYWN0LkNvbXBvbmVudCksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3MyLCAicHJvcFR5cGVzIiwgewogIG5hbWU6IFByb3BUeXBlcy5zdHJpbmcsCiAgZGF0YTogUHJvcFR5cGVzLm9iamVjdAp9KSwgX3RlbXApKSB8fCBfY2xhc3MpIHx8IF9jbGFzcykgfHwgX2NsYXNzKTsKZXhwb3J0IHsgQnRjTXVsdGlzaWduQ29uZmlybVR4IGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/front/shared/components/modals/BtcMultisignConfirmTx/BtcMultisignConfirmTx.tsx"],"names":["React","Fragment","PropTypes","helpers","actions","Link","connect","cssModules","defaultStyles","styles","Modal","FieldLabel","Input","Button","InlineLoader","Tooltip","FormattedMessage","injectIntl","defineMessages","redirectTo","lsDataCache","langPrefix","langLabels","title","id","defaultMessage","noticeUp","noticeFetching","confirmTx","dismatchTx","youCantSignThis","goToWallet","buttonClose","BtcMultisignConfirmTx","btcMultisigUserData","user","btcData","allowMultiple","props","handleClose","state","useBackendId","txId","txRaw","txData","from","to","address","amount","name","setState","isConfirming","btcmultisig","signMultiSign","wallet","signedTX","broadcastTx","btcTxId","txid","multisigTx","backendId","txInfoCache","senderAddress","receiverAddress","confirmed","push","key","time","data","txInfoUrl","transactions","getTxRouter","isError","rejectTx","onClose","modals","close","step","isControlFetching","isTxHolder","setTimeout","fetchTx","destination","sender","addressToWallet","fetchRawTx","then","txAuthedData","parseRawTX","rawTx","txDataParsed","publicKey","toString","holder","isOur","intl","showCloseButton","debugShowTXB","debugShowInput","debugShowOutput","linked","all","formatMessage","handleGoToWallet","marginBottom","textAlign","br","currency","balance","handleConfirm","handleReject","Component","string","object"],"mappings":"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","sourcesContent":["import React, { Fragment } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport helpers, { constants } from 'helpers'\r\nimport actions from 'redux/actions'\r\nimport Link from 'local_modules/sw-valuelink'\r\nimport { connect } from 'redaction'\r\nimport config from 'app-config'\r\n\r\nimport cssModules from 'react-css-modules'\r\n\r\nimport defaultStyles from '../Styles/default.scss'\r\nimport styles from './BtcMultisignConfirmTx.scss'\r\n\r\nimport { BigNumber } from 'bignumber.js'\r\nimport Modal from 'components/modal/Modal/Modal'\r\nimport FieldLabel from 'components/forms/FieldLabel/FieldLabel'\r\nimport Input from 'components/forms/Input/Input'\r\nimport Button from 'components/controls/Button/Button'\r\nimport InlineLoader from 'components/loaders/InlineLoader/InlineLoader'\r\nimport Tooltip from 'components/ui/Tooltip/Tooltip'\r\nimport { FormattedMessage, injectIntl, defineMessages } from 'react-intl'\r\nimport ReactTooltip from 'react-tooltip'\r\nimport { isMobile } from 'react-device-detect'\r\n\r\nimport links from 'helpers/links'\r\n\r\nimport redirectTo from 'helpers/redirectTo'\r\nimport lsDataCache from 'helpers/lsDataCache'\r\n\r\nconst langPrefix = `multiSignConfirmTxModal`\r\nconst langLabels = defineMessages({\r\n  title: {\r\n    id: `${langPrefix}_Title`,\r\n    defaultMessage: `Подтверждение BTC Multisign транзакции`,\r\n  },\r\n  noticeUp: {\r\n    id: `${langPrefix}_UpNotice`,\r\n    defaultMessage: `Ознакомьтесь с транзакцией и подтвердите её. Если вы против списания, отмените тразакцию`,\r\n  },\r\n  noticeFetching: {\r\n    id: `${langPrefix}_NoticeFetching`,\r\n    defaultMessage: `Загрузка...`,\r\n  },\r\n  confirmTx: {\r\n    id: `${langPrefix}_ConfirmTx`,\r\n    defaultMessage: `Подтвердить`,\r\n  },\r\n  dismatchTx: {\r\n    id: `${langPrefix}_DismatchTx`,\r\n    defaultMessage: `Отклонить`,\r\n  },\r\n  youCantSignThis: {\r\n    id: `${langPrefix}_YouCantSignThisTx`,\r\n    defaultMessage: `У вас нет прав для подписи этой транзакции (проверьте, что у вас создан мультисиг)`,\r\n  },\r\n  goToWallet: {\r\n    id: `${langPrefix}_GoToWalletPage`,\r\n    defaultMessage: `Открыть кошелек`,\r\n  },\r\n  buttonClose: {\r\n    id: `${langPrefix}_ButtonClose`,\r\n    defaultMessage: `Закрыть`,\r\n  },\r\n})\r\n\r\n@injectIntl\r\n@connect(({ user: { btcMultisigUserData } }) => ({\r\n  btcData: btcMultisigUserData,\r\n}))\r\n@cssModules({ ...defaultStyles, ...styles }, { allowMultiple: true })\r\nexport default class BtcMultisignConfirmTx extends React.Component<any, any> {\r\n  props: any\r\n\r\n  static propTypes = {\r\n    name: PropTypes.string,\r\n    data: PropTypes.object,\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      step: `fetchgin`,\r\n      isControlFetching: true,\r\n      isTxHolder: true,\r\n      address: ``,\r\n      amount: ``,\r\n      from: ``,\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    setTimeout(async () => {\r\n      const {\r\n        data: { txData, txId },\r\n      } = this.props\r\n\r\n      if (txId) {\r\n        const txData: any = await actions.multisigTx.fetchTx(txId)\r\n\r\n        const { destination: address, sender: from, amount } = txData\r\n\r\n        const wallet = actions.btcmultisig.addressToWallet(from)\r\n\r\n        if (!wallet) {\r\n          this.setState({\r\n            step: `dinned`,\r\n          })\r\n          return\r\n        }\r\n\r\n        this.setState(\r\n          {\r\n            step: `txInfo`,\r\n            txId,\r\n            txData: {\r\n              ...txData,\r\n              wallet,\r\n            },\r\n            address,\r\n            from,\r\n            amount,\r\n          },\r\n          () => {\r\n            // Fetching full tx info (rawTX)\r\n            actions.multisigTx.fetchRawTx(from, txId).then((txAuthedData: any) => {\r\n              if (txAuthedData) {\r\n                actions.btcmultisig.parseRawTX(txAuthedData.rawTx).then((txDataParsed) => {\r\n                  this.setState({\r\n                    txRaw: txAuthedData.rawTx,\r\n                    txData: txDataParsed,\r\n                    isTxHolder: wallet.publicKey.toString(`Hex`) === txAuthedData.holder,\r\n                    isControlFetching: false,\r\n                  })\r\n                })\r\n              } else {\r\n                this.setState({\r\n                  step: `dinned`,\r\n                })\r\n              }\r\n            })\r\n          }\r\n        )\r\n      } else {\r\n        const txDataParsed = await actions.btcmultisig.parseRawTX(txData)\r\n\r\n        if (!txDataParsed.isOur) {\r\n          this.setState({\r\n            step: `dinned`,\r\n          })\r\n          return\r\n        }\r\n\r\n        this.setState({\r\n          step: `txInfo`,\r\n          txRaw: txData,\r\n          txData: txDataParsed,\r\n          address: txDataParsed.to,\r\n          from: txDataParsed.from,\r\n          amount: txDataParsed.amount,\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  handleGoToWallet = () => {\r\n    this.handleClose()\r\n  }\r\n\r\n  handleConfirm = async () => {\r\n    const { txId: useBackendId, txRaw, txData, from, address: to, amount } = this.state\r\n\r\n    const { name } = this.props\r\n\r\n    this.setState({\r\n      isConfirming: true,\r\n    })\r\n\r\n    const signedTX = await actions.btcmultisig.signMultiSign(txRaw, txData.wallet)\r\n    const btcTxId = await actions.btcmultisig.broadcastTx(signedTX)\r\n    let txId = false\r\n\r\n    if (btcTxId && btcTxId.txid) txId = btcTxId.txid\r\n\r\n    if (useBackendId) {\r\n      const backendId = await actions.multisigTx.confirmTx(from, useBackendId, signedTX, txId)\r\n    }\r\n\r\n    if (txId) {\r\n      // Сохраняем транзакцию в кеш\r\n      const txInfoCache = {\r\n        amount,\r\n        senderAddress: from,\r\n        receiverAddress: to,\r\n        confirmed: false,\r\n      }\r\n\r\n      lsDataCache.push({\r\n        key: `TxInfo_btc_${txId}`,\r\n        time: 3600,\r\n        data: txInfoCache,\r\n      })\r\n\r\n      this.handleClose()\r\n\r\n      const txInfoUrl = helpers.transactions.getTxRouter('btc', txId)\r\n      redirectTo(txInfoUrl)\r\n    } else {\r\n      this.setState({\r\n        isError: true,\r\n        isConfirming: false,\r\n      })\r\n    }\r\n  }\r\n\r\n  handleReject = async () => {\r\n    const { txId: useBackendId, txData, from } = this.state\r\n    if (useBackendId) {\r\n      const backendId = await actions.multisigTx.rejectTx(from, useBackendId)\r\n      this.handleClose()\r\n    }\r\n  }\r\n\r\n  handleClose = () => {\r\n    const { name, data, onClose } = this.props\r\n\r\n    if (typeof onClose === 'function') {\r\n      onClose()\r\n    }\r\n\r\n    if (typeof data.onClose === 'function') {\r\n      data.onClose()\r\n    }\r\n\r\n    actions.modals.close(name)\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      name,\r\n      intl,\r\n      data: { showCloseButton },\r\n    } = this.props\r\n\r\n    const {\r\n      step,\r\n      txData,\r\n      isConfirming,\r\n      address,\r\n      amount,\r\n      from,\r\n      isControlFetching,\r\n      isTxHolder,\r\n    } = this.state\r\n\r\n    const { debugShowTXB, debugShowInput, debugShowOutput } = this.state\r\n\r\n    const linked = Link.all(this, 'address', 'amount', 'from')\r\n\r\n    return (\r\n      <Modal\r\n        name={name}\r\n        title={`${intl.formatMessage(langLabels.title)}`}\r\n        onClose={this.handleClose}\r\n        showCloseButton={showCloseButton}\r\n      >\r\n        {step !== `dinned` && (\r\n          <p styleName=\"notice\">\r\n            <FormattedMessage {...langLabels.noticeUp} />\r\n          </p>\r\n        )}\r\n        <div styleName=\"confirmTxModal\">\r\n          {step === `fetchgin` && (\r\n            <p styleName=\"notice\">\r\n              <FormattedMessage {...langLabels.noticeFetching} />\r\n            </p>\r\n          )}\r\n          {step === `dinned` && (\r\n            <Fragment>\r\n              <p styleName=\"rednotes\">\r\n                <FormattedMessage {...langLabels.youCantSignThis} />\r\n              </p>\r\n              <Button styleName=\"buttonCenter\" blue onClick={this.handleGoToWallet}>\r\n                <FormattedMessage {...langLabels.goToWallet} />\r\n              </Button>\r\n            </Fragment>\r\n          )}\r\n          {step === `txInfo` && (\r\n            <Fragment>\r\n              <div styleName=\"highLevel\" style={{ marginBottom: '20px' }}>\r\n                <FieldLabel>\r\n                  <FormattedMessage\r\n                    id=\"BtcMultisignConfirmTx_FromAddress\"\r\n                    defaultMessage=\"Оплата с кошелька\"\r\n                  />{' '}\r\n                </FieldLabel>\r\n                <Input valueLink={linked.from} disabled styleName=\"input fakeInput\" withMargin />\r\n              </div>\r\n              <div styleName=\"highLevel\" style={{ marginBottom: '20px' }}>\r\n                <FieldLabel>\r\n                  <FormattedMessage id=\"Withdrow1194\" defaultMessage=\"Address \" />{' '}\r\n                  <Tooltip id=\"WtH203\">\r\n                    <div style={{ textAlign: 'center' }}>\r\n                      <FormattedMessage\r\n                        id=\"WTH275\"\r\n                        defaultMessage=\"Make sure the wallet you{br}are sending the funds to supports {currency}\"\r\n                        values={{ br: <br />, currency: `BTC` }}\r\n                      />\r\n                    </div>\r\n                  </Tooltip>\r\n                </FieldLabel>\r\n                <Input valueLink={linked.address} disabled styleName=\"input fakeInput\" withMargin />\r\n              </div>\r\n              <div styleName=\"lowLevel\" style={{ marginBottom: '30px' }}>\r\n                <p styleName=\"balance walletBalance\">\r\n                  {txData.wallet.balance} {`BTC`}\r\n                </p>\r\n                <FieldLabel>\r\n                  <FormattedMessage id=\"Withdrow118\" defaultMessage=\"Amount \" />\r\n                </FieldLabel>\r\n\r\n                <div styleName=\"group\">\r\n                  <Input styleName=\"input fakeInput\" valueLink={linked.amount} disabled />\r\n                </div>\r\n              </div>\r\n              {isControlFetching ? (\r\n                <div styleName=\"buttonsHolder_fetching\">\r\n                  <InlineLoader />\r\n                </div>\r\n              ) : (\r\n                <div styleName=\"buttonsHolder\">\r\n                  {!isTxHolder && (\r\n                    <Button\r\n                      styleName=\"buttonFull\"\r\n                      blue\r\n                      disabled={isConfirming || isTxHolder}\r\n                      onClick={this.handleConfirm}\r\n                      fullWidth\r\n                    >\r\n                      <FormattedMessage {...langLabels.confirmTx} />\r\n                    </Button>\r\n                  )}\r\n                  <Button\r\n                    styleName=\"buttonFull\"\r\n                    blue\r\n                    disabled={isConfirming}\r\n                    onClick={isTxHolder ? this.handleClose : this.handleReject}\r\n                    fullWidth\r\n                  >\r\n                    <FormattedMessage\r\n                      {...(isTxHolder ? langLabels.buttonClose : langLabels.dismatchTx)}\r\n                    />\r\n                  </Button>\r\n                </div>\r\n              )}\r\n            </Fragment>\r\n          )}\r\n        </div>\r\n      </Modal>\r\n    )\r\n  }\r\n}\r\n"]}]}