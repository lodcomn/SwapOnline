{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\common\\web3connect\\index.ts","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\common\\web3connect\\index.ts","mtime":1614852519248},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI7CmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXNzZXJ0VGhpc0luaXRpYWxpemVkIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9nZXRQcm90b3R5cGVPZiI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gIkBiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yIjsKCmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9CgpmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09ICJ1bmRlZmluZWQiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSAiZnVuY3Rpb24iKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfQoKLy8gQHRzLW5vY2hlY2sKaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnZXZlbnRzJzsKaW1wb3J0IHsgQ29ubmVjdG9yRXZlbnQgfSBmcm9tICdAd2ViMy1yZWFjdC90eXBlcyc7CmltcG9ydCBXZWIzIGZyb20gJ3dlYjMnOwppbXBvcnQgU1VQUE9SVEVEX1BST1ZJREVSUyBmcm9tICcuL3Byb3ZpZGVycy9zdXBwb3J0ZWQnOwppbXBvcnQgSU5KRUNURURfVFlQRSBmcm9tICcuL3Byb3ZpZGVycy9JbmplY3RlZFR5cGUnOwppbXBvcnQgZ2V0UHJvdmlkZXJCeU5hbWUgZnJvbSAnLi9wcm92aWRlcnMnOwppbXBvcnQgeyBpc0luamVjdGVkRW5hYmxlZCBhcyBfaXNJbmplY3RlZEVuYWJsZWQgfSBmcm9tICcuL3Byb3ZpZGVycyc7CmltcG9ydCB7IGlzTW9iaWxlIH0gZnJvbSAncmVhY3QtZGV2aWNlLWRldGVjdCc7Cgp2YXIgV2ViM0Nvbm5lY3QgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9FdmVudEVtaXR0ZXIpIHsKICBfaW5oZXJpdHMoV2ViM0Nvbm5lY3QsIF9FdmVudEVtaXR0ZXIpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKFdlYjNDb25uZWN0KTsKCiAgZnVuY3Rpb24gV2ViM0Nvbm5lY3Qob3B0aW9ucykgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBXZWIzQ29ubmVjdCk7CgogICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfY2FjaGVkUHJvdmlkZXIiLCBudWxsKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfY2FjaGVkUHJvdmlkZXJOYW1lIiwgbnVsbCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX2NhY2hlZENoYWluSWQiLCBudWxsKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfY2FjaGVkQWRkcmVzcyIsIG51bGwpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9jYWNoZWRXZWIzIiwgbnVsbCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX2lzQ29ubmVjdGVkIiwgZmFsc2UpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9pc0RBcHBCcm93c2VyIiwgZmFsc2UpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl93ZWIzUlBDIiwgbnVsbCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX3dlYjNDaGFpbklkIiwgbnVsbCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiX2luaXRlZCIsIGZhbHNlKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfd2FsbGV0TG9ja2VkIiwgZmFsc2UpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImdldFByb3ZpZGVycyIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHByb3ZpZGVycyA9IE9iamVjdC5rZXlzKFNVUFBPUlRFRF9QUk9WSURFUlMpLm1hcChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgcmV0dXJuIFNVUFBPUlRFRF9QUk9WSURFUlNba2V5XTsKICAgICAgfSk7CiAgICAgIHJldHVybiBfaXNJbmplY3RlZEVuYWJsZWQoKSA/IHByb3ZpZGVycyA6IHByb3ZpZGVycy5maWx0ZXIoZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICByZXR1cm4gbmFtZSAhPT0gU1VQUE9SVEVEX1BST1ZJREVSUy5JTkpFQ1RFRDsKICAgICAgfSk7CiAgICB9KTsKCiAgICB2YXIgd2ViM1JQQyA9IG9wdGlvbnMud2ViM1JQQywKICAgICAgICB3ZWIzQ2hhaW5JZCA9IG9wdGlvbnMud2ViM0NoYWluSWQ7CiAgICBfdGhpcy5fd2ViM1JQQyA9IHdlYjNSUEM7CiAgICBfdGhpcy5fd2ViM0NoYWluSWQgPSB3ZWIzQ2hhaW5JZDsKCiAgICBfdGhpcy5fY2hlY2tJc0RBcHBCcm93c2VyKCk7IC8vINCf0YDQtdC00YvQtNGD0YnQuNC5INC/0YDQvtCy0LDQudC00LXRgCAo0L/QvtGB0LvQtSDQv9C10YDQtdC30LDQs9GA0YPQt9C60Lgg0LLQvtGB0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INC10LPQvikKCgogICAgdmFyIGNhY2hlZFByb3ZpZGVyTmFtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJXRUIzQ09OTkVDVDpQUk9WSURFUiIpOwoKICAgIGlmIChjYWNoZWRQcm92aWRlck5hbWUpIHsKICAgICAgLy9ACiAgICAgIHZhciBsc1Byb3ZpZGVyID0gZ2V0UHJvdmlkZXJCeU5hbWUoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIGNhY2hlZFByb3ZpZGVyTmFtZSk7CgogICAgICBpZiAobHNQcm92aWRlcikgewogICAgICAgIGxzUHJvdmlkZXIuaXNDb25uZWN0ZWQoKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGlzQ29ubmVjdGVkKSB7CiAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0Nvbm5lY3RlZCkgewogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbHNQcm92aWRlci5Db25uZWN0KCk7CgogICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgaWYgKCFfY29udGV4dC5zZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIF90aGlzLl9jYWNoZWRQcm92aWRlck5hbWUgPSBjYWNoZWRQcm92aWRlck5hbWU7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2NhY2hlZFByb3ZpZGVyID0gbHNQcm92aWRlcjsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX3NldHVwRXZlbnRzKCk7CgogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5fY2FjaGVQcm92aWRlckRhdGEoKTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICBfdGhpcy5faXNDb25uZWN0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIF90aGlzLl9pbml0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgICAgICBfdGhpcy5jbGVhckNhY2hlKCk7CgogICAgICAgICAgICAgICAgICAgIF90aGlzLl9pbml0ZWQgPSB0cnVlOwoKICAgICAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgICB9KSk7CgogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfTsKICAgICAgICB9KCkpOwogICAgICB9IGVsc2UgewogICAgICAgIF90aGlzLmNsZWFyQ2FjaGUoKTsKCiAgICAgICAgX3RoaXMuX2luaXRlZCA9IHRydWU7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIF90aGlzLl9pbml0ZWQgPSB0cnVlOwogICAgfQoKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhXZWIzQ29ubmVjdCwgW3sKICAgIGtleTogImlzTG9ja2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0xvY2tlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3dhbGxldExvY2tlZDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRQcm92aWRlclRpdGxlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQcm92aWRlclRpdGxlKCkgewogICAgICBzd2l0Y2ggKHRoaXMuX2NhY2hlZFByb3ZpZGVyTmFtZSkgewogICAgICAgIGNhc2UgU1VQUE9SVEVEX1BST1ZJREVSUy5XQUxMRVRDT05ORUNUOgogICAgICAgICAgcmV0dXJuICdXYWxsZXQgQ29ubmVjdCc7CgogICAgICAgIGNhc2UgU1VQUE9SVEVEX1BST1ZJREVSUy5JTkpFQ1RFRDoKICAgICAgICAgIHJldHVybiB0aGlzLmdldEluamVjdGVkVGl0bGUoKTsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiAiV2ViMyBwcm92aWRlciI7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRJbmplY3RlZFRpdGxlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbmplY3RlZFRpdGxlKCkgewogICAgICBzd2l0Y2ggKHRoaXMuZ2V0SW5qZWN0ZWRUeXBlKCkpIHsKICAgICAgICBjYXNlIElOSkVDVEVEX1RZUEUuTk9ORToKICAgICAgICAgIHJldHVybiAnTm90IGluc3RhbGxlZCc7CgogICAgICAgIGNhc2UgSU5KRUNURURfVFlQRS5VTktOT1dOOgogICAgICAgICAgcmV0dXJuICdJbmplY3RlZCBXZWIzJzsKCiAgICAgICAgY2FzZSBJTkpFQ1RFRF9UWVBFLk9QRVJBOgogICAgICAgICAgcmV0dXJuICdPcGVyYSBDcnlwdG8gV2FsbGV0JzsKCiAgICAgICAgY2FzZSBJTkpFQ1RFRF9UWVBFLk1FVEFNQVNLOgogICAgICAgICAgcmV0dXJuICdNZXRhTWFzayc7CgogICAgICAgIGNhc2UgSU5KRUNURURfVFlQRS5UUlVTVDoKICAgICAgICAgIHJldHVybiAnVHJ1c3QgV2FsbGV0JzsKCiAgICAgICAgY2FzZSBJTkpFQ1RFRF9UWVBFLkxJUVVBTElUWToKICAgICAgICAgIHJldHVybiAnTGlxdWFsaXR5IFdhbGxldCc7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRQcm92aWRlclR5cGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFByb3ZpZGVyVHlwZSgpIHsKICAgICAgc3dpdGNoICh0aGlzLl9jYWNoZWRQcm92aWRlck5hbWUpIHsKICAgICAgICBjYXNlIFNVUFBPUlRFRF9QUk9WSURFUlMuV0FMTEVUQ09OTkVDVDoKICAgICAgICAgIHJldHVybiBTVVBQT1JURURfUFJPVklERVJTLldBTExFVENPTk5FQ1Q7CgogICAgICAgIGNhc2UgU1VQUE9SVEVEX1BST1ZJREVSUy5JTkpFQ1RFRDoKICAgICAgICAgIHJldHVybiB0aGlzLmdldEluamVjdGVkVHlwZSgpOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuICJOT05FIjsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImdldEluamVjdGVkVHlwZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5qZWN0ZWRUeXBlKCkgewogICAgICBpZiAod2luZG93ICYmIHdpbmRvdy5ldGhlcmV1bSkgewogICAgICAgIGlmICh3aW5kb3cuZXRoZXJldW0uaXNMaXF1YWxpdHkpIHJldHVybiBJTkpFQ1RFRF9UWVBFLkxJUVVBTElUWTsKICAgICAgICBpZiAod2luZG93LmV0aGVyZXVtLmlzVHJ1c3QpIHJldHVybiBJTkpFQ1RFRF9UWVBFLlRSVVNUOwogICAgICAgIGlmICh3aW5kb3cuZXRoZXJldW0uaXNNZXRhTWFzaykgcmV0dXJuIElOSkVDVEVEX1RZUEUuTUVUQU1BU0s7CiAgICAgICAgaWYgKCEhd2luZG93Lm9wciAmJiAhIXdpbmRvdy5vcHIuYWRkb25zIHx8ICEhd2luZG93Lm9wZXJhIHx8IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignIE9QUi8nKSA+PSAwKSByZXR1cm4gSU5KRUNURURfVFlQRS5PUEVSQTsKICAgICAgICByZXR1cm4gSU5KRUNURURfVFlQRS5VTktOT1dOOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBJTkpFQ1RFRF9UWVBFLk5PTkU7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJfY2hlY2tJc0RBcHBCcm93c2VyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfY2hlY2tJc0RBcHBCcm93c2VyKCkgewogICAgICBpZiAoaXNNb2JpbGUpIHsKICAgICAgICBpZiAod2luZG93ICYmIHdpbmRvdy5ldGhlcmV1bSkgewogICAgICAgICAgdGhpcy5faXNEQXBwQnJvd3NlciA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNJbmplY3RlZEVuYWJsZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzSW5qZWN0ZWRFbmFibGVkKCkgewogICAgICByZXR1cm4gX2lzSW5qZWN0ZWRFbmFibGVkKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAib25Jbml0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbkluaXQoY2IpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgd2FpdEluaXQgPSBmdW5jdGlvbiB3YWl0SW5pdCgpIHsKICAgICAgICBpZiAoX3RoaXMyLl9pbml0ZWQpIHsKICAgICAgICAgIGNiKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNldFRpbWVvdXQod2FpdEluaXQsIDEwMCk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgd2FpdEluaXQoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoYXNDYWNoZWRQcm92aWRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFzQ2FjaGVkUHJvdmlkZXIoKSB7CiAgICAgIHZhciBjYWNoZWRQcm92aWRlck5hbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiV0VCM0NPTk5FQ1Q6UFJPVklERVIiKTsKCiAgICAgIGlmIChjYWNoZWRQcm92aWRlck5hbWUpIHsKICAgICAgICAvL0AKICAgICAgICB2YXIgbHNQcm92aWRlciA9IGdldFByb3ZpZGVyQnlOYW1lKHRoaXMsIGNhY2hlZFByb3ZpZGVyTmFtZSk7CiAgICAgICAgaWYgKGxzUHJvdmlkZXIpIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2xlYXJDYWNoZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXJDYWNoZSgpIHsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oIldFQjNDT05ORUNUOlBST1ZJREVSIik7CiAgICAgIHRoaXMuX2NhY2hlZFByb3ZpZGVyTmFtZSA9IG51bGw7CiAgICAgIHRoaXMuX2NhY2hlZFByb3ZpZGVyID0gbnVsbDsKICAgICAgdGhpcy5fY2FjaGVkQ2hhaW5JZCA9IG51bGw7CiAgICAgIHRoaXMuX2NhY2hlZEFkZHJlc3MgPSBudWxsOwogICAgICB0aGlzLl9jYWNoZWRXZWIzID0gbnVsbDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfc2V0dXBFdmVudHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEV2ZW50cygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5fY2FjaGVkUHJvdmlkZXIpIHsKICAgICAgICB0aGlzLl9jYWNoZWRQcm92aWRlci5vbihDb25uZWN0b3JFdmVudC5VcGRhdGUsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmFjY291bnQgJiYgZGF0YS5hY2NvdW50ICE9IF90aGlzMy5fY2FjaGVkQWRkcmVzcykgewogICAgICAgICAgICBfdGhpczMuX2NhY2hlZEFkZHJlc3MgPSBkYXRhLmFjY291bnQ7CgogICAgICAgICAgICBfdGhpczMuZW1pdCgnYWNjb3VudENoYW5nZScpOwoKICAgICAgICAgICAgX3RoaXMzLmVtaXQoJ3VwZGF0ZWQnKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmNoYWluSWQgJiYgZGF0YS5jaGFpbklkICE9PSBfdGhpczMuX2NhY2hlZENoYWluSWQpIHsKICAgICAgICAgICAgX3RoaXMzLl9jYWNoZWRDaGFpbklkID0gZGF0YS5jaGFpbklkOwoKICAgICAgICAgICAgX3RoaXMzLmVtaXQoJ2NoYWluQ2hhbmdlZCcpOwoKICAgICAgICAgICAgX3RoaXMzLmVtaXQoJ3VwZGF0ZWQnKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgdGhpcy5fY2FjaGVkUHJvdmlkZXIub24oQ29ubmVjdG9yRXZlbnQuRGVhY3RpdmF0ZSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMzLmNsZWFyQ2FjaGUoKTsKCiAgICAgICAgICBfdGhpczMuZW1pdCgnZGlzY29ubmVjdCcpOwoKICAgICAgICAgIF90aGlzMy5lbWl0KCd1cGRhdGVkJyk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJfY2FjaGVQcm92aWRlckRhdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9jYWNoZVByb3ZpZGVyRGF0YTIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgX3dlYjNwcm92aWRlcjsKCiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkUHJvdmlkZXIuZ2V0QWNjb3VudCgpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZWRBZGRyZXNzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkUHJvdmlkZXIuZ2V0Q2hhaW5JZCgpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZWRDaGFpbklkID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDg7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkUHJvdmlkZXIuZ2V0UHJvdmlkZXIoKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX3dlYjNwcm92aWRlciA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIHJldHVybiBfd2ViM3Byb3ZpZGVyLmVuYWJsZSgpOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgLy8gQFRvRG8gLSBIYXJkIGZpeCB3YWxsZXRjb25uZWN0CiAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vV2FsbGV0Q29ubmVjdC93YWxsZXRjb25uZWN0LW1vbm9yZXBvL2lzc3Vlcy8zODQKICAgICAgICAgICAgICAgIGlmICh3aW5kb3cpIHsKICAgICAgICAgICAgICAgICAgd2luZG93LnNlbmQgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfd2ViM3Byb3ZpZGVyLnNlbmQoZSwgdCk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVkV2ViMyA9IG5ldyBXZWIzKF93ZWIzcHJvdmlkZXIpOwogICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVkV2ViMy5pc01ldGFtYXNrID0gdHJ1ZTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIF9jYWNoZVByb3ZpZGVyRGF0YSgpIHsKICAgICAgICByZXR1cm4gX2NhY2hlUHJvdmlkZXJEYXRhMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gX2NhY2hlUHJvdmlkZXJEYXRhOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiY29ubmVjdFRvIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfY29ubmVjdFRvID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMocHJvdmlkZXIpIHsKICAgICAgICB2YXIgX2Nvbm5lY3RvcjsKCiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB0aGlzLl93YWxsZXRMb2NrZWQgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICBpZiAoIVNVUFBPUlRFRF9QUk9WSURFUlNbcHJvdmlkZXJdKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb25uZWN0b3IgPSBnZXRQcm92aWRlckJ5TmFtZSh0aGlzLCBwcm92aWRlciwgdHJ1ZSk7CgogICAgICAgICAgICAgICAgaWYgKCFfY29ubmVjdG9yKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBfY29ubmVjdG9yLkNvbm5lY3QoKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgaWYgKCFfY29udGV4dDMuc2VudCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiV0VCM0NPTk5FQ1Q6UFJPVklERVIiLCBwcm92aWRlcik7CiAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZWRQcm92aWRlck5hbWUgPSBwcm92aWRlcjsKICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlZFByb3ZpZGVyID0gX2Nvbm5lY3RvcjsKCiAgICAgICAgICAgICAgICB0aGlzLl9zZXR1cEV2ZW50cygpOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVQcm92aWRlckRhdGEoKTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIHRoaXMuX2lzQ29ubmVjdGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGVkJyk7CiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3VwZGF0ZWQnKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCB0cnVlKTsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIGlmIChfY29ubmVjdG9yLmlzTG9ja2VkKCkpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5fd2FsbGV0TG9ja2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIk5vdCBzdXBwb3J0ZWQgcHJvdmlkZXIgIi5jb25jYXQocHJvdmlkZXIpKTsKCiAgICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMywgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGNvbm5lY3RUbyhfeDIpIHsKICAgICAgICByZXR1cm4gX2Nvbm5lY3RUby5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gY29ubmVjdFRvOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiaXNDb25uZWN0ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzQ29ubmVjdGVkKCkgewogICAgICByZXR1cm4gdGhpcy5fY2FjaGVkUHJvdmlkZXIgPyB0cnVlIDogZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNDb3JyZWN0TmV0d29yayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNDb3JyZWN0TmV0d29yaygpIHsKICAgICAgLy8gQFRvRG8gLSB0ZXN0IE1ldGFtYXNrIGRBcHBCcm93c2VyCiAgICAgIHJldHVybiAiIi5jb25jYXQodGhpcy5fd2ViM0NoYWluSWQpID09PSAiIi5jb25jYXQodGhpcy5fY2FjaGVkQ2hhaW5JZCkgfHwgdGhpcy5fd2ViM0NoYWluSWQgPT09IE51bWJlci5wYXJzZUludCh0aGlzLl9jYWNoZWRDaGFpbklkKSB8fCAiMHgwIi5jb25jYXQodGhpcy5fd2ViM0NoYWluSWQpID09PSAiIi5jb25jYXQodGhpcy5fY2FjaGVkQ2hhaW5JZCkgfHwgIjB4Ii5jb25jYXQodGhpcy5fd2ViM0NoYWluSWQpID09PSAiIi5jb25jYXQodGhpcy5fY2FjaGVkQ2hhaW5JZCkgLy8gT3BlcmEgTW9iaWxlCiAgICAgIDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRXZWIzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRXZWIzKCkgewogICAgICBpZiAodGhpcy5fY2FjaGVkUHJvdmlkZXIpIHsKICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkV2ViMzsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImdldEFkZHJlc3MiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFkZHJlc3MoKSB7CiAgICAgIGlmICh0aGlzLl9jYWNoZWRQcm92aWRlcikgewogICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRBZGRyZXNzOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiRGlzY29ubmVjdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX0Rpc2Nvbm5lY3QgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghdGhpcy5fY2FjaGVkUHJvdmlkZXIpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aGlzLl9pc0Nvbm5lY3RlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFByb3ZpZGVyLkRpc2Nvbm5lY3QoKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgdGhpcy5jbGVhckNhY2hlKCk7CiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Rpc2Nvbm5lY3QnKTsKICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgndXBkYXRlZCcpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBEaXNjb25uZWN0KCkgewogICAgICAgIHJldHVybiBfRGlzY29ubmVjdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gRGlzY29ubmVjdDsKICAgIH0oKQogIH1dKTsKCiAgcmV0dXJuIFdlYjNDb25uZWN0Owp9KEV2ZW50RW1pdHRlcik7CgpleHBvcnQgeyBXZWIzQ29ubmVjdCBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/common/web3connect/index.ts"],"names":["EventEmitter","ConnectorEvent","Web3","SUPPORTED_PROVIDERS","INJECTED_TYPE","getProviderByName","isInjectedEnabled","isMobile","Web3Connect","options","providers","Object","keys","map","key","filter","name","INJECTED","web3RPC","web3ChainId","_web3RPC","_web3ChainId","_checkIsDAppBrowser","cachedProviderName","localStorage","getItem","lsProvider","isConnected","then","Connect","_cachedProviderName","_cachedProvider","_setupEvents","_cacheProviderData","_isConnected","_inited","clearCache","_walletLocked","WALLETCONNECT","getInjectedTitle","getInjectedType","NONE","UNKNOWN","OPERA","METAMASK","TRUST","LIQUALITY","window","ethereum","isLiquality","isTrust","isMetaMask","opr","addons","opera","navigator","userAgent","indexOf","_isDAppBrowser","cb","waitInit","setTimeout","removeItem","_cachedChainId","_cachedAddress","_cachedWeb3","on","Update","data","account","emit","chainId","Deactivate","getAccount","getChainId","getProvider","_web3provider","enable","send","e","t","isMetamask","provider","_connector","setItem","isLocked","Error","Number","parseInt","Disconnect"],"mappings":"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","sourcesContent":["// @ts-nocheck\r\nimport { EventEmitter } from 'events'\r\nimport { ConnectorEvent } from '@web3-react/types'\r\nimport Web3 from 'web3'\r\nimport SUPPORTED_PROVIDERS from './providers/supported'\r\nimport INJECTED_TYPE from './providers/InjectedType'\r\nimport getProviderByName from './providers'\r\nimport { isInjectedEnabled } from './providers'\r\nimport { isMobile } from 'react-device-detect'\r\n\r\n\r\nexport default class Web3Connect extends EventEmitter {\r\n  _cachedProvider = null\r\n  _cachedProviderName = null\r\n  _cachedChainId = null\r\n  _cachedAddress = null\r\n  _cachedWeb3 = null\r\n  _isConnected = false\r\n\r\n  _isDAppBrowser = false\r\n\r\n  _web3RPC = null\r\n  _web3ChainId = null\r\n\r\n  _inited = false\r\n  _walletLocked = false\r\n\r\n  constructor(options) {\r\n    super()\r\n    const {\r\n      web3RPC,\r\n      web3ChainId,\r\n    } = options\r\n\r\n    this._web3RPC = web3RPC\r\n    this._web3ChainId = web3ChainId\r\n\r\n    this._checkIsDAppBrowser()\r\n\r\n    // Предыдущий провайдер (после перезагрузки восстанавливаем его)\r\n    const cachedProviderName = localStorage.getItem(`WEB3CONNECT:PROVIDER`)\r\n    if (cachedProviderName) {\r\n      //@\r\n      const lsProvider = getProviderByName(this, cachedProviderName)\r\n      if (lsProvider) {\r\n        lsProvider.isConnected().then(async (isConnected) => {\r\n          if (isConnected) {\r\n            if (await lsProvider.Connect()) {\r\n              this._cachedProviderName = cachedProviderName\r\n              this._cachedProvider = lsProvider\r\n              this._setupEvents()\r\n              await this._cacheProviderData()\r\n              this._isConnected = true\r\n              this._inited = true\r\n              return\r\n            }\r\n          }\r\n          this.clearCache()\r\n          this._inited = true\r\n        })\r\n      } else {\r\n        this.clearCache()\r\n        this._inited = true\r\n      }\r\n    } else {\r\n      this._inited = true\r\n    }\r\n  }\r\n\r\n  isLocked() {\r\n    return this._walletLocked\r\n  }\r\n\r\n  getProviderTitle() {\r\n    switch (this._cachedProviderName) {\r\n      case SUPPORTED_PROVIDERS.WALLETCONNECT:\r\n        return 'Wallet Connect'\r\n      case SUPPORTED_PROVIDERS.INJECTED:\r\n        return this.getInjectedTitle()\r\n      default:\r\n        return `Web3 provider`\r\n    }\r\n  }\r\n\r\n  getInjectedTitle() {\r\n    switch (this.getInjectedType()) {\r\n      case INJECTED_TYPE.NONE: return 'Not installed'\r\n      case INJECTED_TYPE.UNKNOWN: return 'Injected Web3'\r\n      case INJECTED_TYPE.OPERA: return 'Opera Crypto Wallet'\r\n      case INJECTED_TYPE.METAMASK: return 'MetaMask'\r\n      case INJECTED_TYPE.TRUST: return 'Trust Wallet'\r\n      case INJECTED_TYPE.LIQUALITY: return 'Liquality Wallet'\r\n    }\r\n  }\r\n\r\n  getProviderType() {\r\n     switch (this._cachedProviderName) {\r\n      case SUPPORTED_PROVIDERS.WALLETCONNECT:\r\n        return SUPPORTED_PROVIDERS.WALLETCONNECT\r\n      case SUPPORTED_PROVIDERS.INJECTED:\r\n        return this.getInjectedType()\r\n      default:\r\n        return `NONE`\r\n    }\r\n  }\r\n\r\n  getInjectedType() {\r\n    if (window && window.ethereum) {\r\n      if (window.ethereum.isLiquality) return INJECTED_TYPE.LIQUALITY\r\n      if (window.ethereum.isTrust) return INJECTED_TYPE.TRUST\r\n      if (window.ethereum.isMetaMask) return INJECTED_TYPE.METAMASK\r\n      if ((!!window.opr && !!window.opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0) return INJECTED_TYPE.OPERA\r\n\r\n      return INJECTED_TYPE.UNKNOWN\r\n    } else {\r\n      return INJECTED_TYPE.NONE\r\n    }\r\n  }\r\n\r\n  _checkIsDAppBrowser() {\r\n    if (isMobile) {\r\n\r\n      if (window\r\n        && window.ethereum\r\n      ) {\r\n        this._isDAppBrowser = true\r\n      }\r\n    }\r\n  }\r\n\r\n  isInjectedEnabled() {\r\n    return isInjectedEnabled()\r\n  }\r\n\r\n  onInit(cb) {\r\n    const waitInit = () => {\r\n      if (this._inited) {\r\n        cb()\r\n      } else {\r\n        setTimeout( waitInit, 100 )\r\n      }\r\n    }\r\n    waitInit()\r\n  }\r\n\r\n  hasCachedProvider() {\r\n    const cachedProviderName = localStorage.getItem(`WEB3CONNECT:PROVIDER`)\r\n    if (cachedProviderName) {\r\n      //@\r\n      const lsProvider = getProviderByName(this, cachedProviderName)\r\n      if (lsProvider) return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  clearCache() {\r\n    localStorage.removeItem(`WEB3CONNECT:PROVIDER`)\r\n    this._cachedProviderName = null\r\n    this._cachedProvider = null\r\n    this._cachedChainId = null\r\n    this._cachedAddress = null\r\n    this._cachedWeb3 = null\r\n  }\r\n\r\n  _setupEvents() {\r\n    if (this._cachedProvider) {\r\n      this._cachedProvider.on(ConnectorEvent.Update, (data) => {\r\n        if (data\r\n          && data.account\r\n          && data.account != this._cachedAddress\r\n        ) {\r\n          this._cachedAddress = data.account\r\n          this.emit('accountChange')\r\n          this.emit('updated')\r\n        }\r\n        if (data\r\n          && data.chainId\r\n          && data.chainId !== this._cachedChainId\r\n        ) {\r\n          this._cachedChainId = data.chainId\r\n          this.emit('chainChanged')\r\n          this.emit('updated')\r\n        }\r\n      })\r\n      this._cachedProvider.on(ConnectorEvent.Deactivate, () => {\r\n        this.clearCache()\r\n        this.emit('disconnect')\r\n        this.emit('updated')\r\n      })\r\n    }\r\n  }\r\n\r\n  async _cacheProviderData() {\r\n    this._cachedAddress = await this._cachedProvider.getAccount()\r\n    this._cachedChainId = await this._cachedProvider.getChainId()\r\n    const _web3provider = await this._cachedProvider.getProvider()\r\n    await _web3provider.enable()\r\n\r\n    // @ToDo - Hard fix walletconnect\r\n    // https://github.com/WalletConnect/walletconnect-monorepo/issues/384\r\n    if (window) {\r\n      window.send = (e,t) => {\r\n        return _web3provider.send(e,t)\r\n      }\r\n    }\r\n\r\n    this._cachedWeb3 = new Web3(\r\n      _web3provider\r\n    )\r\n    this._cachedWeb3.isMetamask = true\r\n  }\r\n\r\n  async connectTo(provider) {\r\n    this._walletLocked = false\r\n    if (SUPPORTED_PROVIDERS[provider]) {\r\n      const _connector = getProviderByName(this, provider, true)\r\n      if (_connector) {\r\n        if (await _connector.Connect()) {\r\n          localStorage.setItem(`WEB3CONNECT:PROVIDER`, provider)\r\n          this._cachedProviderName = provider\r\n          this._cachedProvider = _connector\r\n          this._setupEvents()\r\n          await this._cacheProviderData()\r\n          this._isConnected = true\r\n          this.emit('connected')\r\n          this.emit('updated')\r\n          return true\r\n        } else {\r\n          if (_connector.isLocked()) {\r\n            this._walletLocked = true\r\n          }\r\n        }\r\n      }\r\n      return false\r\n    } else {\r\n      throw new Error(`Not supported provider ${provider}`)\r\n    }\r\n  }\r\n\r\n  getProviders = () => {\r\n    const providers = Object.keys(SUPPORTED_PROVIDERS).map((key) => SUPPORTED_PROVIDERS[key])\r\n    return (isInjectedEnabled())\r\n      ? providers\r\n      : providers.filter((name) => name !== SUPPORTED_PROVIDERS.INJECTED)\r\n  }\r\n\r\n  isConnected() {\r\n    return (this._cachedProvider) ? true : false\r\n  }\r\n\r\n  isCorrectNetwork() {\r\n    // @ToDo - test Metamask dAppBrowser\r\n    return (\r\n      `${this._web3ChainId}` === `${this._cachedChainId}`\r\n      || this._web3ChainId === Number.parseInt(this._cachedChainId)\r\n      || `0x0${this._web3ChainId}` === `${this._cachedChainId}`\r\n      || `0x${this._web3ChainId}` === `${this._cachedChainId}` // Opera Mobile\r\n    )\r\n  }\r\n\r\n  getWeb3() {\r\n    if (this._cachedProvider) {\r\n      return this._cachedWeb3\r\n    }\r\n  }\r\n\r\n  getAddress() {\r\n    if (this._cachedProvider) {\r\n      return this._cachedAddress\r\n    }\r\n  }\r\n\r\n  async Disconnect() {\r\n    if (this._cachedProvider) {\r\n      this._isConnected = false\r\n      await this._cachedProvider.Disconnect()\r\n      this.clearCache()\r\n      this.emit('disconnect')\r\n      this.emit('updated')\r\n    }\r\n  }\r\n}\r\n"]}]}