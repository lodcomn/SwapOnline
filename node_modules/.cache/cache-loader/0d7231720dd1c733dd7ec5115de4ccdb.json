{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\components\\modals\\WithdrawBtcSms\\WithdrawBtcSms.tsx","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\components\\modals\\WithdrawBtcSms\\WithdrawBtcSms.tsx","mtime":1614842914032},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI7CmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXNzZXJ0VGhpc0luaXRpYWxpemVkIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9nZXRQcm90b3R5cGVPZiI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSI7Cgp2YXIgX2RlYywgX2RlYzIsIF9jbGFzcywgX2NsYXNzMiwgX3RlbXA7CgppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICJAYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvciI7CgpmdW5jdGlvbiBfY3JlYXRlU3VwZXIoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfQoKZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSAidW5kZWZpbmVkIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gImZ1bmN0aW9uIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmltcG9ydCBSZWFjdCwgeyBGcmFnbWVudCB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJzsKaW1wb3J0IGhlbHBlcnMsIHsgY29uc3RhbnRzIH0gZnJvbSAnaGVscGVycyc7CmltcG9ydCBhY3Rpb25zIGZyb20gJ3JlZHV4L2FjdGlvbnMnOwppbXBvcnQgTGluayBmcm9tICdsb2NhbF9tb2R1bGVzL3N3LXZhbHVlbGluayc7CmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWRhY3Rpb24nOwppbXBvcnQgY3NzTW9kdWxlcyBmcm9tICdyZWFjdC1jc3MtbW9kdWxlcyc7CmltcG9ydCBzdHlsZXMgZnJvbSAnLi4vV2l0aGRyYXdNb2RhbC9XaXRoZHJhd01vZGFsLnNjc3MnOwppbXBvcnQgb3duU3R5bGUgZnJvbSAnLi9XaXRoZHJhd0J0Y1Ntcy5zY3NzJzsKaW1wb3J0IE1vZGFsIGZyb20gJ2NvbXBvbmVudHMvbW9kYWwvTW9kYWwvTW9kYWwnOwppbXBvcnQgRmllbGRMYWJlbCBmcm9tICdjb21wb25lbnRzL2Zvcm1zL0ZpZWxkTGFiZWwvRmllbGRMYWJlbCc7CmltcG9ydCBJbnB1dCBmcm9tICdjb21wb25lbnRzL2Zvcm1zL0lucHV0L0lucHV0JzsKaW1wb3J0IEJ1dHRvbiBmcm9tICdjb21wb25lbnRzL2NvbnRyb2xzL0J1dHRvbi9CdXR0b24nOwppbXBvcnQgeyBGb3JtYXR0ZWRNZXNzYWdlLCBpbmplY3RJbnRsLCBkZWZpbmVNZXNzYWdlcyB9IGZyb20gJ3JlYWN0LWludGwnOwppbXBvcnQgSW52b2ljZUluZm9CbG9jayBmcm9tICdjb21wb25lbnRzL0ludm9pY2VJbmZvQmxvY2svSW52b2ljZUluZm9CbG9jayc7CmltcG9ydCByZWRpcmVjdFRvIGZyb20gJ2hlbHBlcnMvcmVkaXJlY3RUbyc7CmltcG9ydCBsc0RhdGFDYWNoZSBmcm9tICdoZWxwZXJzL2xzRGF0YUNhY2hlJzsKaW1wb3J0IE1uZW1vbmljSW5wdXQgZnJvbSAnY29tcG9uZW50cy9mb3Jtcy9NbmVtb25pY0lucHV0L01uZW1vbmljSW5wdXQnOwp2YXIgaXNEYXJrID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oY29uc3RhbnRzLmxvY2FsU3RvcmFnZS5pc0RhcmspOwp2YXIgV2l0aGRyYXdNb2RhbE11bHRpc2lnID0gKF9kZWMgPSBjb25uZWN0KGZ1bmN0aW9uIChfcmVmKSB7CiAgdmFyIGRhc2hib2FyZE1vZGFsc0FsbG93ZWQgPSBfcmVmLnVpLmRhc2hib2FyZE1vZGFsc0FsbG93ZWQ7CiAgcmV0dXJuIHsKICAgIGRhc2hib2FyZFZpZXc6IGRhc2hib2FyZE1vZGFsc0FsbG93ZWQKICB9Owp9KSwgX2RlYzIgPSBjc3NNb2R1bGVzKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3R5bGVzKSwgb3duU3R5bGUpLCB7CiAgYWxsb3dNdWx0aXBsZTogdHJ1ZQp9KSwgaW5qZWN0SW50bChfY2xhc3MgPSBfZGVjKF9jbGFzcyA9IF9kZWMyKF9jbGFzcyA9IChfdGVtcCA9IF9jbGFzczIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHsKICBfaW5oZXJpdHMoV2l0aGRyYXdNb2RhbE11bHRpc2lnLCBfUmVhY3QkQ29tcG9uZW50KTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihXaXRoZHJhd01vZGFsTXVsdGlzaWcpOwoKICBmdW5jdGlvbiBXaXRoZHJhd01vZGFsTXVsdGlzaWcocHJvcHMpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgV2l0aGRyYXdNb2RhbE11bHRpc2lnKTsKCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJwcm9wcyIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZ290b1NtcyIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIHNtc1N0YXR1czogJ3NlbmRlZCcsCiAgICAgICAgc3RlcDogJ2NvbmZpcm0nCiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAib25GaW5pc2hXaXRoZHJhdyIsIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodHhJZCkgewogICAgICAgIHZhciBfdGhpcyRwcm9wcywgX3RoaXMkcHJvcHMkZGF0YSwgX3RoaXMkcHJvcHMkZGF0YSRzZW5kLCB0bywgYW1vdW50LCBhZGRyZXNzLCBpbnZvaWNlLCBvblJlYWR5LCBuYW1lLCB0eEluZm9DYWNoZSwgdHhJbmZvVXJsOwoKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMkcHJvcHMgPSBfdGhpcy5wcm9wcywgX3RoaXMkcHJvcHMkZGF0YSA9IF90aGlzJHByb3BzLmRhdGEsIF90aGlzJHByb3BzJGRhdGEkc2VuZCA9IF90aGlzJHByb3BzJGRhdGEuc2VuZE9wdGlvbnMsIHRvID0gX3RoaXMkcHJvcHMkZGF0YSRzZW5kLnRvLCBhbW91bnQgPSBfdGhpcyRwcm9wcyRkYXRhJHNlbmQuYW1vdW50LCBhZGRyZXNzID0gX3RoaXMkcHJvcHMkZGF0YS53YWxsZXQuYWRkcmVzcywgaW52b2ljZSA9IF90aGlzJHByb3BzJGRhdGEuaW52b2ljZSwgb25SZWFkeSA9IF90aGlzJHByb3BzJGRhdGEub25SZWFkeSwgbmFtZSA9IF90aGlzJHByb3BzLm5hbWU7CiAgICAgICAgICAgICAgICBhY3Rpb25zLmxvYWRlci5oaWRlKCk7CgogICAgICAgICAgICAgICAgaWYgKCFpbnZvaWNlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBhY3Rpb25zLmludm9pY2VzLm1hcmtJbnZvaWNlKGludm9pY2UuaWQsICdyZWFkeScsIHR4SWQsIGFkZHJlc3MpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAvLyDQodC+0YXRgNCw0L3Rj9C10Lwg0YLRgNCw0L3Qt9Cw0LrRhtC40Y4g0LIg0LrQtdGICiAgICAgICAgICAgICAgICB0eEluZm9DYWNoZSA9IHsKICAgICAgICAgICAgICAgICAgYW1vdW50OiBhbW91bnQsCiAgICAgICAgICAgICAgICAgIHNlbmRlckFkZHJlc3M6IGFkZHJlc3MsCiAgICAgICAgICAgICAgICAgIHJlY2VpdmVyQWRkcmVzczogdG8sCiAgICAgICAgICAgICAgICAgIGNvbmZpcm1lZDogZmFsc2UKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBsc0RhdGFDYWNoZS5wdXNoKHsKICAgICAgICAgICAgICAgICAga2V5OiAiVHhJbmZvX2J0Y18iLmNvbmNhdCh0eElkKSwKICAgICAgICAgICAgICAgICAgdGltZTogMzYwMCwKICAgICAgICAgICAgICAgICAgZGF0YTogdHhJbmZvQ2FjaGUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgaXNTaGlwcGVkOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgZXJyb3I6IGZhbHNlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAob25SZWFkeSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7CiAgICAgICAgICAgICAgICAgIG9uUmVhZHkoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0eEluZm9VcmwgPSBoZWxwZXJzLnRyYW5zYWN0aW9ucy5nZXRUeFJvdXRlcignYnRjJywgdHhJZCk7CiAgICAgICAgICAgICAgICByZWRpcmVjdFRvKHR4SW5mb1VybCk7CiAgICAgICAgICAgICAgICBhY3Rpb25zLm1vZGFscy5jbG9zZShuYW1lKTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZUNvbmZpcm1TTVMiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGlzU2hpcHBlZDogdHJ1ZSwKICAgICAgICAgICAgICAgIGVycm9yOiBmYWxzZSwKICAgICAgICAgICAgICAgIGlzQ29uZmlybWluZzogdHJ1ZQogICAgICAgICAgICAgIH0sIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICAgICAgICAgIHZhciBjb2RlLCByZXN1bHQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgY29kZSA9IF90aGlzLnN0YXRlLmNvZGU7CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjdGlvbnMuYnRjbXVsdGlzaWcuY29uZmlybVNNU1Byb3RlY3RlZChjb2RlKTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0My5zZW50OwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQudHhJRCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm9uRmluaXNoV2l0aGRyYXcocmVzdWx0LnR4SUQpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0LmVycm9yICYmIHJlc3VsdC5lcnJvciA9PSAnRmFpbCBicm9hZGNhc3QnICYmIHJlc3VsdC5yYXdUWCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9ucy5idGMuYnJvYWRjYXN0VHgocmVzdWx0LnJhd1RYKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3JlZjYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihfcmVmNSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0eGlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHhpZCA9IF9yZWY1LnR4aWQ7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR4aWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMub25GaW5pc2hXaXRoZHJhdyh0eGlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm9hZGNhc3RFcnJvcjogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXdUeDogcmVzdWx0LnJhd1RYLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU2hpcHBlZDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNDb25maXJtaW5nOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICJXaXRoZHJhd1NNU19Ccm9hZGNhc3RFcnJvciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxRFx1MDQzNSBcdTA0NDNcdTA0MzRcdTA0MzBcdTA0M0JcdTA0M0VcdTA0NDFcdTA0NEMgXHUwNDNFXHUwNDQyXHUwNDNGXHUwNDQwXHUwNDMwXHUwNDMyXHUwNDM4XHUwNDQyXHUwNDRDIFx1MDQ0Mlx1MDQ0MFx1MDQzMFx1MDQzRFx1MDQzN1x1MDQzMFx1MDQzQVx1MDQ0Nlx1MDQzOFx1MDQ0RSBcdTA0MzIgXHUwNDQxXHUwNDM1XHUwNDQyXHUwNDRDICh7ZXJyb3JUZXh0fSkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yVGV4dDogInVua25vd24iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY2LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC5lcnJvciAmJiByZXN1bHQuZXJyb3IgPT09ICJTTVMgY29kZSBub3QgdmFsaWQiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1NoaXBwZWQ6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQ29uZmlybWluZzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAiV2l0aGRyYXdTTVNfTm90VmFsaWRTbXNDb2RlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDEyXHUwNDRCIFx1MDQzMlx1MDQzMlx1MDQzNVx1MDQzQlx1MDQzOCBcdTA0M0RcdTA0MzUgXHUwNDMyXHUwNDM1XHUwNDQwXHUwNDNEXHUwNDRCXHUwNDM5IFx1MDQzRlx1MDQ0MFx1MDQzRVx1MDQzMlx1MDQzNVx1MDQ0MFx1MDQzRVx1MDQ0N1x1MDQzRFx1MDQ0Qlx1MDQzOSBcdTA0M0FcdTA0M0VcdTA0MzQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTaGlwcGVkOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0NvbmZpcm1pbmc6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogIldpdGhkcmF3U01TX1Vua25vd25FcnJvciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxRFx1MDQzNSBcdTA0MzhcdTA0MzdcdTA0MzJcdTA0MzVcdTA0NDFcdTA0NDJcdTA0M0RcdTA0MzBcdTA0NEYgXHUwNDNFXHUwNDQ4XHUwNDM4XHUwNDMxXHUwNDNBXHUwNDMwLiBcdTA0MUZcdTA0M0VcdTA0M0ZcdTA0NDBcdTA0M0VcdTA0MzFcdTA0NDNcdTA0MzlcdTA0NDJcdTA0MzUgXHUwNDNGXHUwNDNFXHUwNDM3XHUwNDM2XHUwNDM1IFx1MDQzOFx1MDQzQlx1MDQzOCBcdTA0MzhcdTA0NDFcdTA0M0ZcdTA0M0VcdTA0M0JcdTA0NENcdTA0MzdcdTA0NDNcdTA0MzlcdTA0NDJcdTA0MzUgXHUwNDQxXHUwNDM1XHUwNDNBXHUwNDQwXHUwNDM1XHUwNDQyXHUwNDNEXHUwNDQzXHUwNDRFIFx1MDQ0NFx1MDQ0MFx1MDQzMFx1MDQzN1x1MDQ0MyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgICAgICAgICB9KSkpOwoKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTQpOwogICAgfSkpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVNbmVtb25pY1NpZ24iLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdGhpcyRzdGF0ZSA9IF90aGlzLnN0YXRlLAogICAgICAgICAgbW5lbW9uaWMgPSBfdGhpcyRzdGF0ZS5tbmVtb25pYywKICAgICAgICAgIHJhd1R4ID0gX3RoaXMkc3RhdGUucmF3VHg7CgogICAgICBpZiAoIW1uZW1vbmljIHx8ICFhY3Rpb25zLmJ0Yy52YWxpZGF0ZU1uZW1vbmljV29yZHMobW5lbW9uaWMudHJpbSgpKSkgewogICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgIGVycm9yOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgIGlkOiAiV2l0aGRyYXdTTVNfTm90VmFsaWRNbmVtb25pYyIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDIxXHUwNDM1XHUwNDNBXHUwNDQwXHUwNDM1XHUwNDQyXHUwNDNEXHUwNDMwXHUwNDRGIFx1MDQ0NFx1MDQ0MFx1MDQzMFx1MDQzN1x1MDQzMCBcdTA0M0RcdTA0MzUgXHUwNDMyXHUwNDMwXHUwNDNCXHUwNDM4XHUwNDM0XHUwNDNEXHUwNDMwIgogICAgICAgICAgfSkKICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoIWFjdGlvbnMuYnRjbXVsdGlzaWcuY2hlY2tTbXNNbmVtb25pYyhtbmVtb25pYy50cmltKCkpKSB7CiAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgZXJyb3I6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgaWQ6ICJXaXRoZHJhd1NNU19Xcm9uZ01uZW1vbmljIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MURcdTA0MzUgXHUwNDNGXHUwNDQwXHUwNDMwXHUwNDMyXHUwNDM4XHUwNDNCXHUwNDRDXHUwNDNEXHUwNDMwXHUwNDRGIFx1MDQ0MVx1MDQzNVx1MDQzQVx1MDQ0MFx1MDQzNVx1MDQ0Mlx1MDQzRFx1MDQzMFx1MDQ0RiBcdTA0NDRcdTA0NDBcdTA0MzBcdTA0MzdcdTA0MzAiCiAgICAgICAgICB9KQogICAgICAgIH0pOwoKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBpc1NoaXBwZWQ6IHRydWUsCiAgICAgICAgZXJyb3I6IGZhbHNlLAogICAgICAgIGJyb2FkY2FzdEVycm9yOiBmYWxzZQogICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgYWN0aW9ucy5idGNtdWx0aXNpZy5zaWduU21zTW5lbW9uaWNBbmRCdWlsZChyYXdUeCwgbW5lbW9uaWMudHJpbSgpKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIF9yZWY3ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYodHhIZXgpIHsKICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3NpZ25lZCcsIHR4SGV4KTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgdHhIZXg6IHR4SGV4CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGFjdGlvbnMuYnRjLmJyb2FkY2FzdFR4KHR4SGV4KS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWY5ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoX3JlZjgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR4aWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4aWQgPSBfcmVmOC50eGlkOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHhpZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMub25GaW5pc2hXaXRoZHJhdyh0eGlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm9hZGNhc3RFcnJvcjogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTaGlwcGVkOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogIldpdGhkcmF3U01TX0Jyb2FkY2FzdEVycm9yIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxRFx1MDQzNSBcdTA0NDNcdTA0MzRcdTA0MzBcdTA0M0JcdTA0M0VcdTA0NDFcdTA0NEMgXHUwNDNFXHUwNDQyXHUwNDNGXHUwNDQwXHUwNDMwXHUwNDMyXHUwNDM4XHUwNDQyXHUwNDRDIFx1MDQ0Mlx1MDQ0MFx1MDQzMFx1MDQzRFx1MDQzN1x1MDQzMFx1MDQzQVx1MDQ0Nlx1MDQzOFx1MDQ0RSBcdTA0MzIgXHUwNDQxXHUwNDM1XHUwNDQyXHUwNDRDICh7ZXJyb3JUZXh0fSkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JUZXh0OiAidW5rbm93biIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY5LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0oKSlbImNhdGNoIl0oZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3JUZXh0ID0gZS5yZXMgPyBlLnJlcy50ZXh0IDogZS5tZXNzYWdlOwoKICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICAgICAgYnJvYWRjYXN0RXJyb3I6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGlzU2hpcHBlZDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICJXaXRoZHJhd1NNU19Ccm9hZGNhc3RFcnJvciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MURcdTA0MzUgXHUwNDQzXHUwNDM0XHUwNDMwXHUwNDNCXHUwNDNFXHUwNDQxXHUwNDRDIFx1MDQzRVx1MDQ0Mlx1MDQzRlx1MDQ0MFx1MDQzMFx1MDQzMlx1MDQzOFx1MDQ0Mlx1MDQ0QyBcdTA0NDJcdTA0NDBcdTA0MzBcdTA0M0RcdTA0MzdcdTA0MzBcdTA0M0FcdTA0NDZcdTA0MzhcdTA0NEUgXHUwNDMyIFx1MDQ0MVx1MDQzNVx1MDQ0Mlx1MDQ0QyAoe2Vycm9yVGV4dH0pIiwKICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yVGV4dDogZXJyb3JUZXh0CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgICAgICB9KSk7CgogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDMpIHsKICAgICAgICAgICAgcmV0dXJuIF9yZWY3LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9OwogICAgICAgIH0oKSlbImNhdGNoIl0oZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdmYWlsIHNpZ24gdHggYnkgbW5lbW9uaWMnKTsKCiAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgIGlzU2hpcHBlZDogZmFsc2UsCiAgICAgICAgICAgIGVycm9yOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgICAgaWQ6ICJXaXRoZHJhd1NNU19GYWlsU2lnbkJ5TW5lbW9uaWMiLAogICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDFEXHUwNDM1IFx1MDQ0M1x1MDQzNFx1MDQzMFx1MDQzQlx1MDQzRVx1MDQ0MVx1MDQ0QyBcdTA0M0ZcdTA0M0VcdTA0MzRcdTA0M0ZcdTA0MzhcdTA0NDFcdTA0MzBcdTA0NDJcdTA0NEMgXHUwNDQyXHUwNDQwXHUwNDMwXHUwNDNEXHUwNDM3XHUwNDMwXHUwNDNBXHUwNDQ2XHUwNDM4XHUwNDRFIgogICAgICAgICAgICB9KQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlU3dpdGNoVG9NbmVtb25pYyIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIHN0ZXA6ICdtbmVtb25pY1NpZ24nCiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlU3dpdGNoVG9TbXMiLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBzdGVwOiAnY29uZmlybScKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVFcnJvciIsIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgY29uc29sZS5lcnJvcihlcnIpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlQ2xvc2UiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBuYW1lID0gX3RoaXMucHJvcHMubmFtZTsKICAgICAgYWN0aW9ucy5tb2RhbHMuY2xvc2UobmFtZSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVNbmVtb25pY0NoYW5nZSIsIGZ1bmN0aW9uIChtbmVtb25pYykgewogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgbW5lbW9uaWM6IG1uZW1vbmljCiAgICAgIH0pOwogICAgfSk7CgogICAgdmFyIF9wcm9wcyRkYXRhID0gcHJvcHMuZGF0YSwKICAgICAgICB3YWxsZXQgPSBfcHJvcHMkZGF0YS53YWxsZXQsCiAgICAgICAgX2ludm9pY2UgPSBfcHJvcHMkZGF0YS5pbnZvaWNlLAogICAgICAgIHNlbmRPcHRpb25zID0gX3Byb3BzJGRhdGEuc2VuZE9wdGlvbnMsCiAgICAgICAgYmVmb3JlQmFsYW5jZXMgPSBfcHJvcHMkZGF0YS5iZWZvcmVCYWxhbmNlczsKICAgIF90aGlzLnN0YXRlID0gewogICAgICBzdGVwOiAnY29uZmlybScsCiAgICAgIGlzU2hpcHBlZDogZmFsc2UsCiAgICAgIGNvZGU6ICcnLAogICAgICBtaW51czogJycsCiAgICAgIGVycm9yOiBmYWxzZSwKICAgICAgc21zQ29uZmlybWVkOiBmYWxzZSwKICAgICAgbW5lbW9uaWM6ICcnLAogICAgICBicm9hZGNhc3RFcnJvcjogZmFsc2UsCiAgICAgIHNlbmRTbXNUaW1lb3V0OiAwLAogICAgICBzZW5kU21zVGltZW91dFRpbWVyOiBmYWxzZQogICAgfTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhXaXRoZHJhd01vZGFsTXVsdGlzaWcsIFt7CiAgICBrZXk6ICJjb21wb25lbnRXaWxsVW5tb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7CiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5zdGF0ZS5zZW5kU21zVGltZW91dFRpbWVyKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wb25lbnREaWRNb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgaXNTaGlwcGVkOiB0cnVlLAogICAgICAgIHN0ZXA6ICdjb25maXJtJywKICAgICAgICBzZW5kU21zU3RhdHVzOiAnc2VuZGluZycKICAgICAgfSwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KCkgewogICAgICAgIHZhciBfdGhpczIkcHJvcHMkZGF0YSwgd2FsbGV0LCBzZW5kT3B0aW9ucywgaW52b2ljZSwgb25SZWFkeSwgcmVzdWx0OwoKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMiRwcm9wcyRkYXRhID0gX3RoaXMyLnByb3BzLmRhdGEsIHdhbGxldCA9IF90aGlzMiRwcm9wcyRkYXRhLndhbGxldCwgc2VuZE9wdGlvbnMgPSBfdGhpczIkcHJvcHMkZGF0YS5zZW5kT3B0aW9ucywgaW52b2ljZSA9IF90aGlzMiRwcm9wcyRkYXRhLmludm9pY2UsIG9uUmVhZHkgPSBfdGhpczIkcHJvcHMkZGF0YS5vblJlYWR5OwogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGFjdGlvbnMuYnRjbXVsdGlzaWcuc2VuZFNNU1Byb3RlY3RlZChzZW5kT3B0aW9ucyk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0Ny5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlbmRTTVNQcm90ZWN0ZWQgcmVzdWx0JywgcmVzdWx0KTsKCiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC5hbnN3ZXIgPT09ICdvaycpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICBpc1NoaXBwZWQ6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIHJhd1R4OiByZXN1bHQucmF3VHggPyByZXN1bHQucmF3VHggOiBudWxsLAogICAgICAgICAgICAgICAgICAgIHNlbmRTbXNTdGF0dXM6ICdzZW5kZWQnCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICBpc1NoaXBwZWQ6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIHNlbmRTbXNTdGF0dXM6ICdvZmZsaW5lJywKICAgICAgICAgICAgICAgICAgICByYXdUeDogcmVzdWx0LnJhd1R4ID8gcmVzdWx0LnJhd1R4IDogbnVsbAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU3KTsKICAgICAgfSkpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgdmFyIF90aGlzJHN0YXRlMiA9IHRoaXMuc3RhdGUsCiAgICAgICAgICBjb2RlID0gX3RoaXMkc3RhdGUyLmNvZGUsCiAgICAgICAgICBpc1NoaXBwZWQgPSBfdGhpcyRzdGF0ZTIuaXNTaGlwcGVkLAogICAgICAgICAgaXNDb25maXJtaW5nID0gX3RoaXMkc3RhdGUyLmlzQ29uZmlybWluZywKICAgICAgICAgIGVycm9yID0gX3RoaXMkc3RhdGUyLmVycm9yLAogICAgICAgICAgbW5lbW9uaWMgPSBfdGhpcyRzdGF0ZTIubW5lbW9uaWMsCiAgICAgICAgICBzdGVwID0gX3RoaXMkc3RhdGUyLnN0ZXAsCiAgICAgICAgICBzZW5kU21zVGltZW91dCA9IF90aGlzJHN0YXRlMi5zZW5kU21zVGltZW91dCwKICAgICAgICAgIHNlbmRTbXNTdGF0dXMgPSBfdGhpcyRzdGF0ZTIuc2VuZFNtc1N0YXR1czsKICAgICAgdmFyIF90aGlzJHByb3BzMiA9IHRoaXMucHJvcHMsCiAgICAgICAgICBuYW1lID0gX3RoaXMkcHJvcHMyLm5hbWUsCiAgICAgICAgICBfdGhpcyRwcm9wczIkZGF0YSA9IF90aGlzJHByb3BzMi5kYXRhLAogICAgICAgICAgY3VycmVuY3kgPSBfdGhpcyRwcm9wczIkZGF0YS53YWxsZXQuY3VycmVuY3ksCiAgICAgICAgICBpbnZvaWNlID0gX3RoaXMkcHJvcHMyJGRhdGEuaW52b2ljZSwKICAgICAgICAgIHRva2VuSXRlbXMgPSBfdGhpcyRwcm9wczIudG9rZW5JdGVtcywKICAgICAgICAgIGl0ZW1zID0gX3RoaXMkcHJvcHMyLml0ZW1zLAogICAgICAgICAgaW50bCA9IF90aGlzJHByb3BzMi5pbnRsLAogICAgICAgICAgcG9ydGFsVUkgPSBfdGhpcyRwcm9wczIucG9ydGFsVUk7CiAgICAgIHZhciBsaW5rZWQgPSBMaW5rLmFsbCh0aGlzLCAnY29kZScpOwogICAgICB2YXIgbGFiZWxzID0gZGVmaW5lTWVzc2FnZXMoewogICAgICAgIHdpdGhkcm93TW9kYWw6IHsKICAgICAgICAgIGlkOiAnd2l0aGRyb3dUaXRsZTI3MScsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlNlbmQiCiAgICAgICAgfSwKICAgICAgICBzbXNQbGFjZWhvbGRlcjogewogICAgICAgICAgaWQ6ICd3aXRoZHJhd1NNU0NvZGVQbGFjZWhvbGRlcicsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0VudGVyIFNNUy1jb2RlJwogICAgICAgIH0sCiAgICAgICAgbW5lbW9uaWNQbGFjZWhvbGRlcjogewogICAgICAgICAgaWQ6ICdyZWdpc3RlclNNU01QbGFjZUhvbGRlcicsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIjEyIFx1MDQ0MVx1MDQzQlx1MDQzRVx1MDQzMiIKICAgICAgICB9CiAgICAgIH0pOwogICAgICB2YXIgZm9ybVJlbmRlciA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZyYWdtZW50LCBudWxsLCBpbnZvaWNlICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEludm9pY2VJbmZvQmxvY2ssIHsKICAgICAgICBpbnZvaWNlRGF0YTogaW52b2ljZQogICAgICB9KSwgc3RlcCA9PT0gJ21uZW1vbmljU2lnbicgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwIiwgewogICAgICAgIHN0eWxlTmFtZTogIm5vdGljZSBkYXNoYm9hcmRWaWV3Tm90aWNlIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJXaXRoZHJhd1NNU19NbmVtb25pY1NpZ25DYXB0aW9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxRlx1MDQzRVx1MDQzNFx1MDQ0Mlx1MDQzMlx1MDQzNVx1MDQ0MFx1MDQzNlx1MDQzNFx1MDQzNVx1MDQzRFx1MDQzOFx1MDQzNSBcdTA0NDJcdTA0NDBcdTA0MzBcdTA0M0RcdTA0MzdcdTA0MzBcdTA0M0FcdTA0NDZcdTA0MzhcdTA0MzggXHUwNDQxXHUwNDM1XHUwNDNBXHUwNDQwXHUwNDM1XHUwNDQyXHUwNDNEXHUwNDNFXHUwNDM5IFx1MDQ0NFx1MDQ0MFx1MDQzMFx1MDQzN1x1MDQzRVx1MDQzOSIKICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogImhpZ2hMZXZlbCIsCiAgICAgICAgY2xhc3NOYW1lOiAieW0taGlkZS1jb250ZW50IgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGaWVsZExhYmVsLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJyZWdpc3RlclNNU01vZGFsV29yZHMiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDIxXHUwNDM1XHUwNDNBXHUwNDQwXHUwNDM1XHUwNDQyXHUwNDNEXHUwNDMwXHUwNDRGIFx1MDQ0NFx1MDQ0MFx1MDQzMFx1MDQzN1x1MDQzMCAoMTIgXHUwNDQxXHUwNDNCXHUwNDNFXHUwNDMyKToiCiAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTW5lbW9uaWNJbnB1dCwgewogICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZU1uZW1vbmljQ2hhbmdlLAogICAgICAgIGZ1bGxXaWR0aDogdHJ1ZQogICAgICB9KSksIGVycm9yICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAicmVkbm90ZXMiCiAgICAgIH0sIGVycm9yKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiYnV0dG9uRnVsbCIsCiAgICAgICAgYmlnOiB0cnVlLAogICAgICAgIGJsdWU6IHRydWUsCiAgICAgICAgZnVsbFdpZHRoOiB0cnVlLAogICAgICAgIGRpc2FibGVkOiBpc1NoaXBwZWQsCiAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVNbmVtb25pY1NpZ24KICAgICAgfSwgaXNTaGlwcGVkID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiV2l0aGRyYXdNb2RhbDExMjEyIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlByb2Nlc3NpbmcgLi4uIgogICAgICB9KSA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogImJ0Y1NNU1Byb3RlY3RlZFNpZ25CeU1uZW1vbmljIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxOFx1MDQ0MVx1MDQzRlx1MDQzRVx1MDQzQlx1MDQ0Q1x1MDQzN1x1MDQzRVx1MDQzMlx1MDQzMFx1MDQ0Mlx1MDQ0QyBcdTA0NDFcdTA0MzVcdTA0M0FcdTA0NDBcdTA0MzVcdTA0NDJcdTA0M0RcdTA0NDNcdTA0NEUgXHUwNDQ0XHUwNDQwXHUwNDMwXHUwNDM3XHUwNDQzIgogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJociIsIG51bGwpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicCIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJub3RpY2UgbW5lbW9uaWNVc2VOb3RlIGRhc2hib2FyZFZpZXdOb3RpY2UiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIldpdGhkcmF3U01TX1VzZVNNU05vdGUiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDIyXHUwNDMwXHUwNDNBLVx1MDQzNlx1MDQzNSBcdTA0MzJcdTA0NEIgXHUwNDNDXHUwNDNFXHUwNDM2XHUwNDM1XHUwNDQyXHUwNDM1IFx1MDQzOFx1MDQ0MVx1MDQzRlx1MDQzRVx1MDQzQlx1MDQ0Q1x1MDQzN1x1MDQzRVx1MDQzMlx1MDQzMFx1MDQ0Mlx1MDQ0QyBcdTA0NDFcdTA0M0NcdTA0NDEtXHUwNDNBXHUwNDNFXHUwNDM0LCBcdTA0M0VcdTA0NDJcdTA0M0ZcdTA0NDBcdTA0MzBcdTA0MzJcdTA0M0JcdTA0MzVcdTA0M0RcdTA0M0RcdTA0NEJcdTA0MzkgXHUwNDNEXHUwNDMwIFx1MDQzRlx1MDQ0MFx1MDQzOFx1MDQzMlx1MDQ0Rlx1MDQzN1x1MDQzMFx1MDQzRFx1MDQzRFx1MDQ0Qlx1MDQzOSBcdTA0M0RcdTA0M0VcdTA0M0NcdTA0MzVcdTA0NDAgXHUwNDQyXHUwNDM1XHUwNDNCXHUwNDM1XHUwNDQ0XHUwNDNFXHUwNDNEXHUwNDMwIgogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwgewogICAgICAgIHN0eWxlTmFtZTogInVzZUF1dGhNZXRob2RCdXR0b24iLAogICAgICAgIGJsdWU6IHRydWUsCiAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVTd2l0Y2hUb1NtcwogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJXaXRoZHJhd1NNU19Vc2VTTVMiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDE4XHUwNDQxXHUwNDNGXHUwNDNFXHUwNDNCXHUwNDRDXHUwNDM3XHUwNDNFXHUwNDMyXHUwNDMwXHUwNDQyXHUwNDRDIFx1MDQ0MVx1MDQzQ1x1MDQ0MS1cdTA0M0FcdTA0M0VcdTA0MzQiCiAgICAgIH0pKSksIHN0ZXAgPT09ICdjb25maXJtJyAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGcmFnbWVudCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJoaWdoTGV2ZWwgc21zQ29kZUhvbGRlciIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRmllbGRMYWJlbCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiV2l0aGRyb3cyMjIzIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlNNUyBjb2RlIgogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KElucHV0LCB7CiAgICAgICAgc3R5bGVOYW1lOiAiaW5wdXQiLAogICAgICAgIHZhbHVlTGluazogbGlua2VkLmNvZGUsCiAgICAgICAgcGF0dGVybjogIjAtOSIsCiAgICAgICAgcGxhY2Vob2xkZXI6ICIiLmNvbmNhdChpbnRsLmZvcm1hdE1lc3NhZ2UobGFiZWxzLnNtc1BsYWNlaG9sZGVyKSkKICAgICAgfSkpLCBlcnJvciAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogInNtc1NlcnZlclN0YXR1cyBoYXNFcnJvciIKICAgICAgfSwgZXJyb3IpLCBpc0NvbmZpcm1pbmcgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJzbXNTZXJ2ZXJTdGF0dXMiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIldpdGhkcmF3U01TX1Ntc0NvbmZpcm1pbmciLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDFGXHUwNDNFXHUwNDM0XHUwNDQyXHUwNDMyXHUwNDM1XHUwNDQwXHUwNDM2XHUwNDM0XHUwNDM1XHUwNDNEXHUwNDM4XHUwNDM1IFx1MDQ0Mlx1MDQ0MFx1MDQzMFx1MDQzRFx1MDQzN1x1MDQzMFx1MDQzQVx1MDQ0Nlx1MDQzOFx1MDQzOCIKICAgICAgfSkpLCAhZXJyb3IgJiYgc2VuZFNtc1N0YXR1cyA9PT0gJ3NlbmRpbmcnICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAic21zU2VydmVyU3RhdHVzIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJXaXRoZHJhd1NNU19TbXNTZW5kaW5nIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxRVx1MDQ0Mlx1MDQzRlx1MDQ0MFx1MDQzMFx1MDQzMlx1MDQzQVx1MDQzMCBcdTA0M0ZcdTA0NDBcdTA0M0VcdTA0MzJcdTA0MzVcdTA0NDBcdTA0M0VcdTA0NDdcdTA0M0RcdTA0M0VcdTA0MzNcdTA0M0UgXHUwNDNBXHUwNDNFXHUwNDM0XHUwNDMwIgogICAgICB9KSksICFlcnJvciAmJiAhaXNTaGlwcGVkICYmIHNlbmRTbXNTdGF0dXMgPT09ICdzZW5kZWQnICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAic21zU2VydmVyU3RhdHVzIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJXaXRoZHJhd1NNU19TbXNTZW5kZWQiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDFBXHUwNDNFXHUwNDM0IFx1MDQzRVx1MDQ0Mlx1MDQzRlx1MDQ0MFx1MDQzMFx1MDQzMlx1MDQzQlx1MDQzNVx1MDQzRCIKICAgICAgfSkpLCAhZXJyb3IgJiYgIWlzU2hpcHBlZCAmJiBzZW5kU21zU3RhdHVzID09PSAnb2ZmbGluZScgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJzbXNTZXJ2ZXJTdGF0dXMgaGFzRXJyb3IiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIldpdGhkcmF3U01TX1NlcnZlck9mZmxpbmUiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDIxXHUwNDM1XHUwNDQwXHUwNDMyXHUwNDM1XHUwNDQwIFx1MDQzMFx1MDQzMlx1MDQ0Mlx1MDQzRVx1MDQ0MFx1MDQzOFx1MDQzN1x1MDQzMFx1MDQ0Nlx1MDQzOFx1MDQzOCBcdTA0M0RcdTA0MzUgXHUwNDM0XHUwNDNFXHUwNDQxXHUwNDQyXHUwNDQzXHUwNDNGXHUwNDM1XHUwNDNEIgogICAgICB9KSksIGxpbmtlZC5jb2RlLmVycm9yICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAic21zU2VydmVyU3RhdHVzIGhhc0Vycm9yIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJXaXRoZHJhd01vZGFsMjIyNSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTb21ldGhpbmcgd2VudCB3cm9uZywgZW50ZXIgeW91ciBjdXJyZW50IGNvZGUgcGxlYXNlIgogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwgewogICAgICAgIHN0eWxlTmFtZTogImJ1dHRvbkZ1bGwgY29uZmlybVNtc0NvZGUiLAogICAgICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgICAgICBkaXNhYmxlZDogaXNTaGlwcGVkIHx8IHNlbmRTbXNTdGF0dXMgPT09ICdzZW5kaW5nJyB8fCBzZW5kU21zU3RhdHVzID09PSAnb2ZmbGluZScsCiAgICAgICAgYmlnOiB0cnVlLAogICAgICAgIGJsdWU6IHRydWUsCiAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVDb25maXJtU01TCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIldpdGhkcm93MjIyNCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJDb25maXJtIgogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJociIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJtYXJnaW5IciIKICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwIiwgewogICAgICAgIHN0eWxlTmFtZTogIm5vdGljZSBtbmVtb25pY1VzZU5vdGUgZGFzaGJvYXJkVmlld05vdGljZSIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiV2l0aGRyYXdTTVNfTW5lbW9uaWNOb3RlIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxNVx1MDQ0MVx1MDQzQlx1MDQzOCBcdTA0NDMgXHUwNDMyXHUwNDMwXHUwNDQxIFx1MDQzRFx1MDQzNVx1MDQ0MiBcdTA0MzRcdTA0M0VcdTA0NDFcdTA0NDJcdTA0NDNcdTA0M0ZcdTA0MzAgXHUwNDNBIFx1MDQ0Mlx1MDQzNVx1MDQzQlx1MDQzNVx1MDQ0NFx1MDQzRVx1MDQzRFx1MDQ0MyBcdTA0MzhcdTA0M0JcdTA0MzggXHUwNDNEXHUwNDM1IFx1MDQzRlx1MDQzRVx1MDQzQlx1MDQ0M1x1MDQ0N1x1MDQzMFx1MDQzNVx1MDQ0Mlx1MDQ0MVx1MDQ0RiBcdTA0M0ZcdTA0M0VcdTA0M0JcdTA0NDNcdTA0NDdcdTA0MzhcdTA0NDJcdTA0NEMgXHUwNDNBXHUwNDNFXHUwNDM0LCBcdTA0MzJcdTA0NEIgXHUwNDNDXHUwNDNFXHUwNDM2XHUwNDM1XHUwNDQyXHUwNDM1IFx1MDQzMlx1MDQzRVx1MDQ0MVx1MDQzRlx1MDQzRVx1MDQzQlx1MDQ0Q1x1MDQzN1x1MDQzRVx1MDQzMlx1MDQzMFx1MDQ0Mlx1MDQ0QyBcdTA0NDFcdTA0MzVcdTA0M0FcdTA0NDBcdTA0MzVcdTA0NDJcdTA0M0RcdTA0M0VcdTA0MzkgXHUwNDQ0XHUwNDQwXHUwNDMwXHUwNDM3XHUwNDNFXHUwNDM5IgogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwgewogICAgICAgIHN0eWxlTmFtZTogInVzZUF1dGhNZXRob2RCdXR0b24iLAogICAgICAgIGJsdWU6IHRydWUsCiAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVTd2l0Y2hUb01uZW1vbmljCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIldpdGhkcmF3U01TX1VzZU1uZW1vbmljIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxOFx1MDQ0MVx1MDQzRlx1MDQzRVx1MDQzQlx1MDQ0Q1x1MDQzN1x1MDQzRVx1MDQzMlx1MDQzMFx1MDQ0Mlx1MDQ0QyBcdTA0NDFcdTA0MzVcdTA0M0FcdTA0NDBcdTA0MzVcdTA0NDJcdTA0M0RcdTA0NDNcdTA0NEUgXHUwNDQ0XHUwNDQwXHUwNDMwXHUwNDM3XHUwNDQzIgogICAgICB9KSkpKTsKICAgICAgcmV0dXJuIHBvcnRhbFVJID8gZm9ybVJlbmRlciA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE1vZGFsLCB7CiAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICB0aXRsZTogIiIuY29uY2F0KGludGwuZm9ybWF0TWVzc2FnZShsYWJlbHMud2l0aGRyb3dNb2RhbCksICcgJykuY29uY2F0KGN1cnJlbmN5LnRvVXBwZXJDYXNlKCkpCiAgICAgIH0sIGZvcm1SZW5kZXIpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFdpdGhkcmF3TW9kYWxNdWx0aXNpZzsKfShSZWFjdC5Db21wb25lbnQpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzMiwgInByb3BUeXBlcyIsIHsKICBuYW1lOiBQcm9wVHlwZXMuc3RyaW5nLAogIGRhdGE6IFByb3BUeXBlcy5vYmplY3QKfSksIF90ZW1wKSkgfHwgX2NsYXNzKSB8fCBfY2xhc3MpIHx8IF9jbGFzcyk7CmV4cG9ydCB7IFdpdGhkcmF3TW9kYWxNdWx0aXNpZyBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/front/shared/components/modals/WithdrawBtcSms/WithdrawBtcSms.tsx"],"names":["React","Fragment","PropTypes","helpers","constants","actions","Link","connect","cssModules","styles","ownStyle","Modal","FieldLabel","Input","Button","FormattedMessage","injectIntl","defineMessages","InvoiceInfoBlock","redirectTo","lsDataCache","MnemonicInput","isDark","localStorage","getItem","WithdrawModalMultisig","dashboardModalsAllowed","ui","dashboardView","allowMultiple","props","setState","smsStatus","step","txId","data","sendOptions","to","amount","address","wallet","invoice","onReady","name","loader","hide","invoices","markInvoice","id","txInfoCache","senderAddress","receiverAddress","confirmed","push","key","time","isShipped","error","Function","txInfoUrl","transactions","getTxRouter","modals","close","isConfirming","code","state","btcmultisig","confirmSMSProtected","result","txID","onFinishWithdraw","console","log","rawTX","btc","broadcastTx","then","txid","broadcastError","rawTx","errorText","mnemonic","validateMnemonicWords","trim","checkSmsMnemonic","signSmsMnemonicAndBuild","txHex","e","res","text","message","err","beforeBalances","minus","smsConfirmed","sendSmsTimeout","sendSmsTimeoutTimer","clearInterval","sendSmsStatus","sendSMSProtected","answer","currency","tokenItems","items","intl","portalUI","linked","all","labels","withdrowModal","defaultMessage","smsPlaceholder","mnemonicPlaceholder","formRender","handleMnemonicChange","handleMnemonicSign","handleSwitchToSms","formatMessage","handleConfirmSMS","handleSwitchToMnemonic","toUpperCase","Component","string","object"],"mappings":"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","sourcesContent":["import React, { Fragment } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport helpers, { constants } from 'helpers'\r\nimport actions from 'redux/actions'\r\nimport Link from 'local_modules/sw-valuelink'\r\nimport { connect } from 'redaction'\r\nimport config from 'app-config'\r\n\r\nimport cssModules from 'react-css-modules'\r\nimport styles from '../WithdrawModal/WithdrawModal.scss'\r\nimport ownStyle from './WithdrawBtcSms.scss'\r\n\r\nimport { BigNumber } from 'bignumber.js'\r\nimport Modal from 'components/modal/Modal/Modal'\r\nimport FieldLabel from 'components/forms/FieldLabel/FieldLabel'\r\nimport Input from 'components/forms/Input/Input'\r\nimport Button from 'components/controls/Button/Button'\r\nimport Tooltip from 'components/ui/Tooltip/Tooltip'\r\nimport { FormattedMessage, injectIntl, defineMessages } from 'react-intl'\r\nimport ReactTooltip from 'react-tooltip'\r\nimport { isMobile } from 'react-device-detect'\r\nimport InvoiceInfoBlock from 'components/InvoiceInfoBlock/InvoiceInfoBlock'\r\n\r\nimport typeforce from 'swap.app/util/typeforce'\r\n// import { isCoinAddress } from 'swap.app/util/typeforce'\r\nimport minAmount from 'helpers/constants/minAmount'\r\nimport { inputReplaceCommaWithDot } from 'helpers/domUtils'\r\nimport QrReader from 'components/QrReader'\r\n\r\nimport redirectTo from 'helpers/redirectTo'\r\nimport AdminFeeInfoBlock from 'components/AdminFeeInfoBlock/AdminFeeInfoBlock'\r\nimport lsDataCache from 'helpers/lsDataCache'\r\nimport MnemonicInput from 'components/forms/MnemonicInput/MnemonicInput'\r\n\r\nconst isDark = localStorage.getItem(constants.localStorage.isDark)\r\n\r\n@injectIntl\r\n@connect(({ ui: { dashboardModalsAllowed } }) => ({\r\n  dashboardView: dashboardModalsAllowed,\r\n}))\r\n@cssModules({ ...styles, ...ownStyle }, { allowMultiple: true })\r\nexport default class WithdrawModalMultisig extends React.Component<any, any> {\r\n  props: any\r\n\r\n  static propTypes = {\r\n    name: PropTypes.string,\r\n    data: PropTypes.object,\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    const { wallet, invoice, sendOptions, beforeBalances } = props.data\r\n\r\n    this.state = {\r\n      step: 'confirm',\r\n      isShipped: false,\r\n      code: '',\r\n      minus: '',\r\n      error: false,\r\n      smsConfirmed: false,\r\n      mnemonic: '',\r\n      broadcastError: false,\r\n      sendSmsTimeout: 0,\r\n      sendSmsTimeoutTimer: false,\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.state.sendSmsTimeoutTimer)\r\n  }\r\n\r\n  gotoSms = () => {\r\n    this.setState({\r\n      smsStatus: 'sended',\r\n      step: 'confirm',\r\n    })\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState(\r\n      {\r\n        isShipped: true,\r\n        step: 'confirm',\r\n        sendSmsStatus: 'sending',\r\n      },\r\n      async () => {\r\n        const {\r\n          data: { wallet, sendOptions, invoice, onReady },\r\n        } = this.props\r\n\r\n        const result = await actions.btcmultisig.sendSMSProtected(sendOptions)\r\n\r\n        console.log('sendSMSProtected result', result)\r\n        if (result && result.answer === 'ok') {\r\n          this.setState({\r\n            isShipped: false,\r\n            rawTx: result.rawTx ? result.rawTx : null,\r\n            sendSmsStatus: 'sended',\r\n          })\r\n        } else {\r\n          this.setState({\r\n            isShipped: false,\r\n            sendSmsStatus: 'offline',\r\n            rawTx: result.rawTx ? result.rawTx : null,\r\n          })\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  onFinishWithdraw = async (txId) => {\r\n    const {\r\n      data: {\r\n        sendOptions: { to, amount },\r\n        wallet: { address },\r\n        invoice,\r\n        onReady,\r\n      },\r\n      name,\r\n    } = this.props\r\n\r\n    actions.loader.hide()\r\n\r\n    if (invoice) {\r\n      await actions.invoices.markInvoice(invoice.id, 'ready', txId, address)\r\n    }\r\n\r\n    // Сохраняем транзакцию в кеш\r\n    const txInfoCache = {\r\n      amount,\r\n      senderAddress: address,\r\n      receiverAddress: to,\r\n      confirmed: false,\r\n    }\r\n\r\n    lsDataCache.push({\r\n      key: `TxInfo_btc_${txId}`,\r\n      time: 3600,\r\n      data: txInfoCache,\r\n    })\r\n\r\n    this.setState({\r\n      isShipped: false,\r\n      error: false,\r\n    })\r\n\r\n    if (onReady instanceof Function) {\r\n      onReady()\r\n    }\r\n\r\n    const txInfoUrl = helpers.transactions.getTxRouter('btc', txId)\r\n    redirectTo(txInfoUrl)\r\n\r\n    actions.modals.close(name)\r\n  }\r\n\r\n  handleConfirmSMS = async () => {\r\n    this.setState(\r\n      {\r\n        isShipped: true,\r\n        error: false,\r\n        isConfirming: true,\r\n      },\r\n      async () => {\r\n        const { code } = this.state\r\n\r\n        const result = await actions.btcmultisig.confirmSMSProtected(code)\r\n        if (result && result.txID) {\r\n          this.onFinishWithdraw(result.txID)\r\n        } else {\r\n          console.log(result)\r\n          if (result && result.error && result.error == 'Fail broadcast' && result.rawTX) {\r\n            actions.btc.broadcastTx(result.rawTX).then(async ({ txid }) => {\r\n              if (txid) {\r\n                this.onFinishWithdraw(txid)\r\n              } else {\r\n                this.setState({\r\n                  broadcastError: true,\r\n                  rawTx: result.rawTX,\r\n                  isShipped: false,\r\n                  isConfirming: false,\r\n                  error: (\r\n                    <FormattedMessage\r\n                      id=\"WithdrawSMS_BroadcastError\"\r\n                      defaultMessage=\"Не удалось отправить транзакцию в сеть ({errorText})\"\r\n                      values={{ errorText: `unknown` }}\r\n                    />\r\n                  ),\r\n                })\r\n              }\r\n            })\r\n          } else {\r\n            if (result && result.error && result.error === `SMS code not valid`) {\r\n              this.setState({\r\n                isShipped: false,\r\n                isConfirming: false,\r\n                error: (\r\n                  <FormattedMessage\r\n                    id=\"WithdrawSMS_NotValidSmsCode\"\r\n                    defaultMessage=\"Вы ввели не верный проверочный код\"\r\n                  />\r\n                ),\r\n              })\r\n            } else {\r\n              this.setState({\r\n                isShipped: false,\r\n                isConfirming: false,\r\n                error: (\r\n                  <FormattedMessage\r\n                    id=\"WithdrawSMS_UnknownError\"\r\n                    defaultMessage=\"Не известная ошибка. Попробуйте позже или используйте секретную фразу\"\r\n                  />\r\n                ),\r\n              })\r\n            }\r\n          }\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  handleMnemonicSign = () => {\r\n    const { mnemonic, rawTx } = this.state\r\n\r\n    if (!mnemonic || !actions.btc.validateMnemonicWords(mnemonic.trim())) {\r\n      this.setState({\r\n        error: (\r\n          <FormattedMessage\r\n            id=\"WithdrawSMS_NotValidMnemonic\"\r\n            defaultMessage=\"Секретная фраза не валидна\"\r\n          />\r\n        ),\r\n      })\r\n      return\r\n    }\r\n    if (!actions.btcmultisig.checkSmsMnemonic(mnemonic.trim())) {\r\n      this.setState({\r\n        error: (\r\n          <FormattedMessage\r\n            id=\"WithdrawSMS_WrongMnemonic\"\r\n            defaultMessage=\"Не правильная секретная фраза\"\r\n          />\r\n        ),\r\n      })\r\n      return\r\n    }\r\n\r\n    this.setState(\r\n      {\r\n        isShipped: true,\r\n        error: false,\r\n        broadcastError: false,\r\n      },\r\n      () => {\r\n        actions.btcmultisig\r\n          .signSmsMnemonicAndBuild(rawTx, mnemonic.trim())\r\n          .then(async (txHex) => {\r\n            console.log('signed', txHex)\r\n            this.setState({\r\n              txHex,\r\n            })\r\n            actions.btc\r\n              .broadcastTx(txHex)\r\n              .then(async ({ txid }) => {\r\n                if (txid) {\r\n                  this.onFinishWithdraw(txid)\r\n                } else {\r\n                  this.setState({\r\n                    broadcastError: true,\r\n                    isShipped: false,\r\n                    error: (\r\n                      <FormattedMessage\r\n                        id=\"WithdrawSMS_BroadcastError\"\r\n                        defaultMessage=\"Не удалось отправить транзакцию в сеть ({errorText})\"\r\n                        values={{ errorText: `unknown` }}\r\n                      />\r\n                    ),\r\n                  })\r\n                }\r\n              })\r\n              .catch((e) => {\r\n                console.error(e)\r\n                const errorText = e.res ? e.res.text : e.message\r\n                this.setState({\r\n                  broadcastError: true,\r\n                  isShipped: false,\r\n                  error: (\r\n                    <FormattedMessage\r\n                      id=\"WithdrawSMS_BroadcastError\"\r\n                      defaultMessage=\"Не удалось отправить транзакцию в сеть ({errorText})\"\r\n                      values={{ errorText }}\r\n                    />\r\n                  ),\r\n                })\r\n              })\r\n          })\r\n          .catch((e) => {\r\n            console.log('fail sign tx by mnemonic')\r\n            this.setState({\r\n              isShipped: false,\r\n              error: (\r\n                <FormattedMessage\r\n                  id=\"WithdrawSMS_FailSignByMnemonic\"\r\n                  defaultMessage=\"Не удалось подписать транзакцию\"\r\n                />\r\n              ),\r\n            })\r\n          })\r\n      }\r\n    )\r\n  }\r\n\r\n  handleSwitchToMnemonic = () => {\r\n    this.setState({\r\n      step: 'mnemonicSign',\r\n    })\r\n  }\r\n\r\n  handleSwitchToSms = () => {\r\n    this.setState({\r\n      step: 'confirm',\r\n    })\r\n  }\r\n\r\n  handleError = (err) => {\r\n    console.error(err)\r\n  }\r\n\r\n  handleClose = () => {\r\n    const { name } = this.props\r\n\r\n    actions.modals.close(name)\r\n  }\r\n\r\n  handleMnemonicChange = (mnemonic) => {\r\n    this.setState({\r\n      mnemonic,\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      code,\r\n      isShipped,\r\n      isConfirming,\r\n      error,\r\n      mnemonic,\r\n      step,\r\n      sendSmsTimeout,\r\n      sendSmsStatus,\r\n    } = this.state\r\n\r\n    const {\r\n      name,\r\n      data: {\r\n        wallet: { currency },\r\n        invoice,\r\n      },\r\n      tokenItems,\r\n      items,\r\n      intl,\r\n      portalUI,\r\n    } = this.props\r\n\r\n    const linked = Link.all(this, 'code')\r\n\r\n    const labels = defineMessages({\r\n      withdrowModal: {\r\n        id: 'withdrowTitle271',\r\n        defaultMessage: `Send`,\r\n      },\r\n      smsPlaceholder: {\r\n        id: 'withdrawSMSCodePlaceholder',\r\n        defaultMessage: 'Enter SMS-code',\r\n      },\r\n      mnemonicPlaceholder: {\r\n        id: 'registerSMSMPlaceHolder',\r\n        defaultMessage: `12 слов`,\r\n      },\r\n    })\r\n\r\n    const formRender = (\r\n      <Fragment>\r\n        {invoice && <InvoiceInfoBlock invoiceData={invoice} />}\r\n        {step === 'mnemonicSign' && (\r\n          <Fragment>\r\n            <p styleName=\"notice dashboardViewNotice\">\r\n              <FormattedMessage\r\n                id=\"WithdrawSMS_MnemonicSignCaption\"\r\n                defaultMessage=\"Подтверждение транзакции секретной фразой\"\r\n              />\r\n            </p>\r\n            <div styleName=\"highLevel\" className=\"ym-hide-content\">\r\n              <FieldLabel>\r\n                <FormattedMessage\r\n                  id=\"registerSMSModalWords\"\r\n                  defaultMessage=\"Секретная фраза (12 слов):\"\r\n                />\r\n              </FieldLabel>\r\n              <MnemonicInput onChange={this.handleMnemonicChange} fullWidth={true} />\r\n            </div>\r\n            {error && <div styleName=\"rednotes\">{error}</div>}\r\n            <Button\r\n              styleName=\"buttonFull\"\r\n              big\r\n              blue\r\n              fullWidth\r\n              disabled={isShipped}\r\n              onClick={this.handleMnemonicSign}\r\n            >\r\n              {isShipped ? (\r\n                <FormattedMessage id=\"WithdrawModal11212\" defaultMessage=\"Processing ...\" />\r\n              ) : (\r\n                <FormattedMessage\r\n                  id=\"btcSMSProtectedSignByMnemonic\"\r\n                  defaultMessage=\"Использовать секретную фразу\"\r\n                />\r\n              )}\r\n            </Button>\r\n            <hr />\r\n            <p styleName=\"notice mnemonicUseNote dashboardViewNotice\">\r\n              <FormattedMessage\r\n                id=\"WithdrawSMS_UseSMSNote\"\r\n                defaultMessage=\"Так-же вы можете использовать смс-код, отправленный на привязанный номер телефона\"\r\n              />\r\n            </p>\r\n            <Button styleName=\"useAuthMethodButton\" blue onClick={this.handleSwitchToSms}>\r\n              <FormattedMessage id=\"WithdrawSMS_UseSMS\" defaultMessage=\"Использовать смс-код\" />\r\n            </Button>\r\n          </Fragment>\r\n        )}\r\n\r\n        {step === 'confirm' && (\r\n          <Fragment>\r\n            <div styleName=\"highLevel smsCodeHolder\">\r\n              <FieldLabel>\r\n                <FormattedMessage id=\"Withdrow2223\" defaultMessage=\"SMS code\" />\r\n              </FieldLabel>\r\n              <Input\r\n                styleName=\"input\"\r\n                valueLink={linked.code}\r\n                pattern=\"0-9\"\r\n                placeholder={`${intl.formatMessage(labels.smsPlaceholder)}`}\r\n              />\r\n            </div>\r\n            {error && <div styleName=\"smsServerStatus hasError\">{error}</div>}\r\n            {isConfirming && (\r\n              <div styleName=\"smsServerStatus\">\r\n                <FormattedMessage\r\n                  id=\"WithdrawSMS_SmsConfirming\"\r\n                  defaultMessage=\"Подтверждение транзакции\"\r\n                />\r\n              </div>\r\n            )}\r\n            {!error && sendSmsStatus === 'sending' && (\r\n              <div styleName=\"smsServerStatus\">\r\n                <FormattedMessage\r\n                  id=\"WithdrawSMS_SmsSending\"\r\n                  defaultMessage=\"Отправка проверочного кода\"\r\n                />\r\n              </div>\r\n            )}\r\n            {!error && !isShipped && sendSmsStatus === 'sended' && (\r\n              <div styleName=\"smsServerStatus\">\r\n                <FormattedMessage id=\"WithdrawSMS_SmsSended\" defaultMessage=\"Код отправлен\" />\r\n              </div>\r\n            )}\r\n            {!error && !isShipped && sendSmsStatus === 'offline' && (\r\n              <div styleName=\"smsServerStatus hasError\">\r\n                <FormattedMessage\r\n                  id=\"WithdrawSMS_ServerOffline\"\r\n                  defaultMessage=\"Сервер авторизации не доступен\"\r\n                />\r\n              </div>\r\n            )}\r\n            {linked.code.error && (\r\n              <div styleName=\"smsServerStatus hasError\">\r\n                <FormattedMessage\r\n                  id=\"WithdrawModal2225\"\r\n                  defaultMessage=\"Something went wrong, enter your current code please\"\r\n                />\r\n              </div>\r\n            )}\r\n            <Button\r\n              styleName=\"buttonFull confirmSmsCode\"\r\n              fullWidth\r\n              disabled={isShipped || sendSmsStatus === 'sending' || sendSmsStatus === 'offline'}\r\n              big\r\n              blue\r\n              onClick={this.handleConfirmSMS}\r\n            >\r\n              <FormattedMessage id=\"Withdrow2224\" defaultMessage=\"Confirm\" />\r\n            </Button>\r\n            <hr styleName=\"marginHr\" />\r\n            <p styleName=\"notice mnemonicUseNote dashboardViewNotice\">\r\n              <FormattedMessage\r\n                id=\"WithdrawSMS_MnemonicNote\"\r\n                defaultMessage=\"Если у вас нет доступа к телефону или не получается получить код, вы можете воспользовать секретной фразой\"\r\n              />\r\n            </p>\r\n            <Button styleName=\"useAuthMethodButton\" blue onClick={this.handleSwitchToMnemonic}>\r\n              <FormattedMessage\r\n                id=\"WithdrawSMS_UseMnemonic\"\r\n                defaultMessage=\"Использовать секретную фразу\"\r\n              />\r\n            </Button>\r\n          </Fragment>\r\n        )}\r\n      </Fragment>\r\n    )\r\n\r\n    return portalUI ? (\r\n      formRender\r\n    ) : (\r\n      <Modal\r\n        name={name}\r\n        title={`${intl.formatMessage(labels.withdrowModal)}${' '}${currency.toUpperCase()}`}\r\n      >\r\n        {formRender}\r\n      </Modal>\r\n    )\r\n  }\r\n}\r\n"]}]}