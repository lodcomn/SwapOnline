{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\pages\\Multisign\\Btc\\Btc.tsx","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\pages\\Multisign\\Btc\\Btc.tsx","mtime":1614852456817},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI7CmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXNzZXJ0VGhpc0luaXRpYWxpemVkIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9nZXRQcm90b3R5cGVPZiI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSI7Cgp2YXIgX2RlYywgX2RlYzIsIF9jbGFzcywgX2NsYXNzMiwgX3RlbXA7CgppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICJAYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvciI7CgpmdW5jdGlvbiBfY3JlYXRlU3VwZXIoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfQoKZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSAidW5kZWZpbmVkIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gImZ1bmN0aW9uIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH0KCi8vIEB0cy1ub2NoZWNrCmltcG9ydCBSZWFjdCwgeyBGcmFnbWVudCwgUHVyZUNvbXBvbmVudCB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJzsKaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlZGFjdGlvbic7CmltcG9ydCB7IGNvbnN0YW50cyB9IGZyb20gJ2hlbHBlcnMnOwppbXBvcnQgeyBsb2NhbGlzZWRVcmwgfSBmcm9tICdoZWxwZXJzL2xvY2FsZSc7CmltcG9ydCB7IEZvcm1hdHRlZE1lc3NhZ2UsIGluamVjdEludGwgfSBmcm9tICdyZWFjdC1pbnRsJzsKaW1wb3J0IGFjdGlvbnMgZnJvbSAncmVkdXgvYWN0aW9ucyc7CmltcG9ydCB7IGxpbmtzIH0gZnJvbSAnaGVscGVycyc7CmltcG9ydCB7IGdldEZ1bGxPcmlnaW4gfSBmcm9tICdoZWxwZXJzL2xpbmtzJzsKaW1wb3J0IEJ1dHRvbiBmcm9tICdjb21wb25lbnRzL2NvbnRyb2xzL0J1dHRvbi9CdXR0b24nOwppbXBvcnQgQ1NTTW9kdWxlcyBmcm9tICdyZWFjdC1jc3MtbW9kdWxlcyc7CmltcG9ydCBzdHlsZXMgZnJvbSAnLi9CdGMuc2Nzcyc7CmltcG9ydCBTd2FwQXBwIGZyb20gJ3N3YXAuYXBwJzsKdmFyIEJ0YyA9IChfZGVjID0gY29ubmVjdChmdW5jdGlvbiAoX3JlZikgewogIHZhciBidGNEYXRhID0gX3JlZi51c2VyLmJ0Y0RhdGE7CiAgcmV0dXJuIHsKICAgIGRhdGE6IGJ0Y0RhdGEKICB9Owp9KSwgX2RlYzIgPSBDU1NNb2R1bGVzKHN0eWxlcywgewogIGFsbG93TXVsdGlwbGU6IHRydWUKfSksIF9kZWMoX2NsYXNzID0gaW5qZWN0SW50bChfY2xhc3MgPSBfZGVjMihfY2xhc3MgPSAoX3RlbXAgPSBfY2xhc3MyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUHVyZUNvbXBvbmVudCkgewogIF9pbmhlcml0cyhCdGMsIF9QdXJlQ29tcG9uZW50KTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihCdGMpOwoKICBmdW5jdGlvbiBCdGMocHJvcHMpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQnRjKTsKCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJ0aW1lcldhaXRPbmxpbmVKb2luIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJjb25uZWN0V2FsbGV0IiwgZnVuY3Rpb24gKGFjdGlvbikgewogICAgICB2YXIgX3RoaXMkc3RhdGUgPSBfdGhpcy5zdGF0ZSwKICAgICAgICAgIHByaXZhdGVLZXkgPSBfdGhpcyRzdGF0ZS5wcml2YXRlS2V5LAogICAgICAgICAgcHVibGljS2V5ID0gX3RoaXMkc3RhdGUucHVibGljS2V5OwogICAgICBhY3Rpb25zLmJ0Y211bHRpc2lnLmFkZEJ0Y011bHRpc2lnS2V5KHB1YmxpY0tleSwgdHJ1ZSk7CiAgICAgIGFjdGlvbnMuY29yZS5tYXJrQ29pbkFzVmlzaWJsZSgnQlRDIChNdWx0aXNpZyknLCB0cnVlKTsKCiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBhY3Rpb246IGFjdGlvbiA9PT0gJ2pvaW4nID8gJ2xpbmtyZWFkeScgOiAncmVhZHknCiAgICAgIH0pOwoKICAgICAgaWYgKGFjdGlvbiA9PT0gJ2pvaW4nKSB7CiAgICAgICAgYWN0aW9ucy5tb2RhbHMub3Blbihjb25zdGFudHMubW9kYWxzLk11bHRpc2lnbkpvaW5MaW5rLCB7CiAgICAgICAgICBhY3Rpb246ICJjb25uZWN0IiwKICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiBjYWxsYmFjaygpIHsKICAgICAgICAgICAgX3RoaXMuaGFuZGxlR29Ub1dhbGxldCgpOwogICAgICAgICAgfSwKICAgICAgICAgIHNob3dDbG9zZUJ1dHRvbjogZmFsc2UKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlT25saW5lV2FsbGV0Q29ubmVjdCIsIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoX2RhdGEpIHsKICAgICAgICB2YXIgZnJvbVBlZXIsIGRhdGEsIHBlZXI7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdidGMgbXVsdGlzaWcgam9pbiByZWFkeScsIF9kYXRhKTsKICAgICAgICAgICAgICAgIGZyb21QZWVyID0gX2RhdGEuZnJvbVBlZXIsIGRhdGEgPSBfZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgcGVlciA9IF90aGlzLnN0YXRlLnBlZXI7CgogICAgICAgICAgICAgICAgaWYgKGZyb21QZWVyID09PSBwZWVyKSB7CiAgICAgICAgICAgICAgICAgIFN3YXBBcHAuc2hhcmVkKCkuc2VydmljZXMucm9vbS51bnN1YnNjcmliZSgnYnRjIG11bHRpc2lnIGpvaW4gcmVhZHknLCBfdGhpcy5oYW5kbGVPbmxpbmVXYWxsZXRDb25uZWN0KTsKICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KF90aGlzLnRpbWVyV2FpdE9ubGluZUpvaW4pOwoKICAgICAgICAgICAgICAgICAgX3RoaXMuY29ubmVjdFdhbGxldCgncmVhZHknKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlQWRkV2FsbGV0IiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICB2YXIgX3RoaXMkc3RhdGUyLCBhY3Rpb24sIG15UHVibGljS2V5LCBwdWJsaWNLZXksIHBlZXI7CgogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfdGhpcyRzdGF0ZTIgPSBfdGhpcy5zdGF0ZSwgYWN0aW9uID0gX3RoaXMkc3RhdGUyLmFjdGlvbiwgbXlQdWJsaWNLZXkgPSBfdGhpcyRzdGF0ZTIubXlQdWJsaWNLZXksIHB1YmxpY0tleSA9IF90aGlzJHN0YXRlMi5wdWJsaWNLZXksIHBlZXIgPSBfdGhpcyRzdGF0ZTIucGVlcjsgLy9JZiBwZWVyIGlzIG9ubGluZSAtIHRyeSBjb25uZWN0IHZpYSBwdWJzdWJSb29tCgogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIHdhaXRDcmVhdGVXYWxsZXQ6IHRydWUKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgYWN0aW9ucy5wdWJzdWJSb29tLndhaXRQZWVyKHBlZXIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnb25saW5lam9pbicKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIFN3YXBBcHAuc2hhcmVkKCkuc2VydmljZXMucm9vbS5zdWJzY3JpYmUoJ2J0YyBtdWx0aXNpZyBqb2luIHJlYWR5JywgX3RoaXMuaGFuZGxlT25saW5lV2FsbGV0Q29ubmVjdCk7CiAgICAgICAgICAgICAgICBTd2FwQXBwLnNoYXJlZCgpLnNlcnZpY2VzLnJvb20uc2VuZE1lc3NhZ2VQZWVyKHBlZXIsIHsKICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdidGMgbXVsdGlzaWcgam9pbicsCiAgICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICBwdWJsaWNLZXk6IG15UHVibGljS2V5LAogICAgICAgICAgICAgICAgICAgIGNoZWNrS2V5OiBwdWJsaWNLZXkKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfdGhpcy50aW1lcldhaXRPbmxpbmVKb2luID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIFN3YXBBcHAuc2hhcmVkKCkuc2VydmljZXMucm9vbS51bnN1YnNjcmliZSgnYnRjIG11bHRpc2lnIGpvaW4gcmVhZHknLCBfdGhpcy5oYW5kbGVPbmxpbmVXYWxsZXRDb25uZWN0KTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLmNvbm5lY3RXYWxsZXQoYWN0aW9uKTsKICAgICAgICAgICAgICAgIH0sIDEwMDAwKTsKICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5jb25uZWN0V2FsbGV0KGFjdGlvbik7CiAgICAgICAgICAgICAgfSwgMTAwMDApOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIpOwogICAgfSkpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVTYXZlTW5lbW9uaWMiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGFjdGlvbnMubW9kYWxzLm9wZW4oY29uc3RhbnRzLm1vZGFscy5TYXZlTW5lbW9uaWNNb2RhbCwgewogICAgICAgICAgICAgICAgb25DbG9zZTogZnVuY3Rpb24gb25DbG9zZSgpIHsKICAgICAgICAgICAgICAgICAgdmFyIG1uZW1vbmljID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oY29uc3RhbnRzLnByaXZhdGVLZXlOYW1lcy50d2VudHl3b3Jkcyk7CiAgICAgICAgICAgICAgICAgIHZhciBtbmVtb25pY1NhdmVkID0gbW5lbW9uaWMgPT09ICItIjsKCiAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICBtbmVtb25pY1NhdmVkOiBtbmVtb25pY1NhdmVkCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTMpOwogICAgfSkpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVHb1RvV2FsbGV0IiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICB2YXIgX3RoaXMkcHJvcHMsIGhpc3RvcnksIGxvY2FsZSwgX2FjdGlvbnMkdXNlciRnZXRBdXRoLCBhZGRyZXNzOwoKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX3RoaXMkcHJvcHMgPSBfdGhpcy5wcm9wcywgaGlzdG9yeSA9IF90aGlzJHByb3BzLmhpc3RvcnksIGxvY2FsZSA9IF90aGlzJHByb3BzLmludGwubG9jYWxlOwogICAgICAgICAgICAgIF9hY3Rpb25zJHVzZXIkZ2V0QXV0aCA9IGFjdGlvbnMudXNlci5nZXRBdXRoRGF0YSgnYnRjTXVsdGlzaWdVc2VyJyksIGFkZHJlc3MgPSBfYWN0aW9ucyR1c2VyJGdldEF1dGguYWRkcmVzczsKICAgICAgICAgICAgICBoaXN0b3J5LnB1c2gobG9jYWxpc2VkVXJsKGxvY2FsZSwgIi9idGMvIi5jb25jYXQoYWRkcmVzcykpKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU0KTsKICAgIH0pKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlQ29uZmlybSIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgdmFyIF90aGlzJHN0YXRlMywgdHhSYXcsIGludm9pY2UsIHNpZ25lZFRYLCB0eElEOwoKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX3RoaXMkc3RhdGUzID0gX3RoaXMuc3RhdGUsIHR4UmF3ID0gX3RoaXMkc3RhdGUzLnR4UmF3LCBpbnZvaWNlID0gX3RoaXMkc3RhdGUzLmludm9pY2U7CgogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGlzQ29uZmlybWluZzogdHJ1ZQogICAgICAgICAgICAgIH0pOyAvL0AKCgogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gYWN0aW9ucy5idGNtdWx0aXNpZy5zaWduTXVsdGlTaWduKHR4UmF3KTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBzaWduZWRUWCA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gYWN0aW9ucy5idGNtdWx0aXNpZy5icm9hZGNhc3RUeChzaWduZWRUWCk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgdHhJRCA9IF9jb250ZXh0NS5zZW50OwoKICAgICAgICAgICAgICBpZiAoIWludm9pY2UpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgcmV0dXJuIGFjdGlvbnMuaW52b2ljZXMubWFya0ludm9pY2UoaW52b2ljZSwgJ3JlYWR5JywgdHhJRCk7CgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIHR4SUQ6IHR4SUQsCiAgICAgICAgICAgICAgICBhY3Rpb246ICdjb25maXJtcmVhZHknCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTUpOwogICAgfSkpKTsKCiAgICBjb25zb2xlLmxvZygnQnRjIG11bHNpZ24gY29ubmVjdGVkJyk7CgogICAgdmFyIF9tbmVtb25pYyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGNvbnN0YW50cy5wcml2YXRlS2V5TmFtZXMudHdlbnR5d29yZHMpOwoKICAgIHZhciBfbW5lbW9uaWNTYXZlZCA9IF9tbmVtb25pYyA9PT0gIi0iOwoKICAgIF90aGlzLnRpbWVyV2FpdE9ubGluZUpvaW4gPSBmYWxzZTsKICAgIF90aGlzLnN0YXRlID0gewogICAgICBhY3Rpb246ICdub25lJywKICAgICAgd2FsbGV0OiB7fSwKICAgICAgd2FsbGV0QmFsYW5jZTogMCwKICAgICAgcHVibGljS2V5OiAnJywKICAgICAgbW5lbW9uaWNTYXZlZDogX21uZW1vbmljU2F2ZWQsCiAgICAgIGFkZFdhbGxldEVuYWJsZWQ6IGZhbHNlCiAgICB9OwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEJ0YywgW3sKICAgIGtleTogImNvbXBvbmVudFdpbGxNb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2NvbXBvbmVudFdpbGxNb3VudCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgICB2YXIgX3RoaXMkcHJvcHMyLCBfdGhpcyRwcm9wczIkbWF0Y2gkcGEsIGFjdGlvbiwgZGF0YSwgcGVlciwgbG9jYWxlLCBoaXN0b3J5LCBwYXRobmFtZSwgcHJpdmF0ZUtleSwgcHVibGljS2V5LCB3YWxsZXREYXRhLCBiYWxhbmNlLCBteVB1YmxpY0tleSwgdHhSYXcsIGludm9pY2UsIGRhdGFQYXJ0czsKCiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpcyRwcm9wczIgPSB0aGlzLnByb3BzLCBfdGhpcyRwcm9wczIkbWF0Y2gkcGEgPSBfdGhpcyRwcm9wczIubWF0Y2gucGFyYW1zLCBhY3Rpb24gPSBfdGhpcyRwcm9wczIkbWF0Y2gkcGEuYWN0aW9uLCBkYXRhID0gX3RoaXMkcHJvcHMyJG1hdGNoJHBhLmRhdGEsIHBlZXIgPSBfdGhpcyRwcm9wczIkbWF0Y2gkcGEucGVlciwgbG9jYWxlID0gX3RoaXMkcHJvcHMyLmludGwubG9jYWxlLCBoaXN0b3J5ID0gX3RoaXMkcHJvcHMyLmhpc3RvcnksIHBhdGhuYW1lID0gX3RoaXMkcHJvcHMyLmxvY2F0aW9uLnBhdGhuYW1lLCBwcml2YXRlS2V5ID0gX3RoaXMkcHJvcHMyLmRhdGEucHJpdmF0ZUtleTsKCiAgICAgICAgICAgICAgICBpZiAoISghYWN0aW9uIHx8IFsnam9pbicsICdjb25uZWN0JywgJ2NvbmZpcm0nLCAnY29uZmlybWludm9pY2UnXS5pbmRleE9mKGFjdGlvbi50b0xvd2VyQ2FzZSgpKSA9PT0gLTEpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaGlzdG9yeS5wdXNoKGxvY2FsaXNlZFVybChsb2NhbGUsIGxpbmtzLm5vdEZvdW5kKSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIGFjdGlvbiA9IGFjdGlvbi50b0xvd2VyQ2FzZSgpOwoKICAgICAgICAgICAgICAgIGlmICghKGFjdGlvbiA9PT0gJ2pvaW4nIHx8IGFjdGlvbiA9PT0gJ2Nvbm5lY3QnKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoIShkYXRhICYmIGRhdGEubGVuZ3RoID09IDY2KSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBwdWJsaWNLZXkgPSBkYXRhOwogICAgICAgICAgICAgICAgd2FsbGV0RGF0YSA9IGFjdGlvbnMuYnRjbXVsdGlzaWcubG9naW5fVVNFUihwcml2YXRlS2V5LCBwdWJsaWNLZXksIHRydWUpOwoKICAgICAgICAgICAgICAgIGlmICh3YWxsZXREYXRhKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGhpc3RvcnkucHVzaChsb2NhbGlzZWRVcmwobG9jYWxlLCBsaW5rcy5ub3RGb3VuZCkpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIHJldHVybiBhY3Rpb25zLmJ0Y211bHRpc2lnLmZldGNoQmFsYW5jZSh3YWxsZXREYXRhLmFkZHJlc3MpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgYmFsYW5jZSA9IF9jb250ZXh0Ni5zZW50OwogICAgICAgICAgICAgICAgbXlQdWJsaWNLZXkgPSB0aGlzLnByb3BzLmRhdGEucHVibGljS2V5LnRvU3RyaW5nKCdoZXgnKTsKICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICBhY3Rpb246IGFjdGlvbiwKICAgICAgICAgICAgICAgICAgd2FsbGV0OiB3YWxsZXREYXRhLAogICAgICAgICAgICAgICAgICB3YWxsZXRCYWxhbmNlOiBiYWxhbmNlLAogICAgICAgICAgICAgICAgICBwZWVyOiBwZWVyLAogICAgICAgICAgICAgICAgICBwcml2YXRlS2V5OiBwcml2YXRlS2V5LAogICAgICAgICAgICAgICAgICBwdWJsaWNLZXk6IHB1YmxpY0tleSwKICAgICAgICAgICAgICAgICAgbXlQdWJsaWNLZXk6IG15UHVibGljS2V5LAogICAgICAgICAgICAgICAgICBqb2luTGluazogIiIuY29uY2F0KGdldEZ1bGxPcmlnaW4oKSkuY29uY2F0KGxpbmtzLm11bHRpc2lnbiwgIi9idGMvY29ubmVjdC8iKS5jb25jYXQobXlQdWJsaWNLZXkpCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGFjdGlvbnMucHVic3ViUm9vbS5vblJlYWR5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICBhZGRXYWxsZXRFbmFibGVkOiB0cnVlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgICBoaXN0b3J5LnB1c2gobG9jYWxpc2VkVXJsKGxvY2FsZSwgbGlua3Mubm90Rm91bmQpKTsKCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgIGlmICghKGFjdGlvbiA9PT0gJ2NvbmZpcm0nIHx8IGFjdGlvbiA9PT0gJ2NvbmZpcm1pbnZvaWNlJykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA0NjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCEoZGF0YSAmJiBkYXRhLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA0NjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdHhSYXcgPSBkYXRhOwogICAgICAgICAgICAgICAgaW52b2ljZSA9IGZhbHNlOwoKICAgICAgICAgICAgICAgIGlmIChhY3Rpb24gPT09ICdjb25maXJtaW52b2ljZScpIHsKICAgICAgICAgICAgICAgICAgZGF0YVBhcnRzID0gZGF0YS5zcGxpdCgnfCcpOwoKICAgICAgICAgICAgICAgICAgaWYgKGRhdGFQYXJ0cy5sZW5ndGggPT09IDIpIHsKICAgICAgICAgICAgICAgICAgICBpbnZvaWNlID0gZGF0YVBhcnRzWzBdOwogICAgICAgICAgICAgICAgICAgIHR4UmF3ID0gZGF0YVBhcnRzWzFdOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdCYWQgdHggcmF3IGFuZCBpbnZvaWNlaWQgZGF0YScpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCEodHhSYXcubGVuZ3RoID09PSA2NCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAzMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIGFjdGlvbnMubW9kYWxzLm9wZW4oY29uc3RhbnRzLm1vZGFscy5CdGNNdWx0aXNpZ25Db25maXJtVHgsIHsKICAgICAgICAgICAgICAgICAgICB0eElkOiB0eFJhdywKICAgICAgICAgICAgICAgICAgICBzaG93Q2xvc2VCdXR0b246IHRydWUsCiAgICAgICAgICAgICAgICAgICAgb25DbG9zZTogZnVuY3Rpb24gb25DbG9zZSgpIHsKICAgICAgICAgICAgICAgICAgICAgIGhpc3RvcnkucHVzaChsb2NhbGlzZWRVcmwobG9jYWxlLCBsaW5rcy5ob21lKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0sIDEwMCk7CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDQ2OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgICAgICBfY29udGV4dDYucHJldiA9IDMwOwogICAgICAgICAgICAgICAgX2NvbnRleHQ2LnQwID0gdGhpczsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni50MSA9IGFjdGlvbjsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMzU7CiAgICAgICAgICAgICAgICByZXR1cm4gYWN0aW9ucy5idGNtdWx0aXNpZy5wYXJzZVJhd1RYKHR4UmF3KTsKCiAgICAgICAgICAgICAgY2FzZSAzNToKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni50MiA9IF9jb250ZXh0Ni5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQ2LnQzID0gaW52b2ljZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni50NCA9IHR4UmF3OwogICAgICAgICAgICAgICAgX2NvbnRleHQ2LnQ1ID0gewogICAgICAgICAgICAgICAgICBhY3Rpb246IF9jb250ZXh0Ni50MSwKICAgICAgICAgICAgICAgICAgdHhEYXRhOiBfY29udGV4dDYudDIsCiAgICAgICAgICAgICAgICAgIGludm9pY2U6IF9jb250ZXh0Ni50MywKICAgICAgICAgICAgICAgICAgdHhSYXc6IF9jb250ZXh0Ni50NAogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBfY29udGV4dDYudDYgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGFjdGlvbnMubW9kYWxzLm9wZW4oY29uc3RhbnRzLm1vZGFscy5CdGNNdWx0aXNpZ25Db25maXJtVHgsIHsKICAgICAgICAgICAgICAgICAgICAgIHR4RGF0YTogdHhSYXcsCiAgICAgICAgICAgICAgICAgICAgICBzaG93Q2xvc2VCdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgb25DbG9zZTogZnVuY3Rpb24gb25DbG9zZSgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5wdXNoKGxvY2FsaXNlZFVybChsb2NhbGUsIGxpbmtzLmhvbWUpKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSwgMTAwKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgX2NvbnRleHQ2LnQwLnNldFN0YXRlLmNhbGwoX2NvbnRleHQ2LnQwLCBfY29udGV4dDYudDUsIF9jb250ZXh0Ni50Nik7CgogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA0NjsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDQzOgogICAgICAgICAgICAgICAgX2NvbnRleHQ2LnByZXYgPSA0MzsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni50NyA9IF9jb250ZXh0NlsiY2F0Y2giXSgzMCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQmFkIHR4IHJhdyBkYXRhJyk7CgogICAgICAgICAgICAgIGNhc2UgNDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYsIHRoaXMsIFtbMzAsIDQzXV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7CiAgICAgICAgcmV0dXJuIF9jb21wb25lbnRXaWxsTW91bnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGNvbXBvbmVudFdpbGxNb3VudDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudFdpbGxVbm1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfY29tcG9uZW50V2lsbFVubW91bnQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNygpIHsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIFN3YXBBcHAuc2hhcmVkKCkuc2VydmljZXMucm9vbS51bnN1YnNjcmliZSgnYnRjIG11bHRpc2lnIGpvaW4gcmVhZHknLCB0aGlzLmhhbmRsZU9ubGluZVdhbGxldENvbm5lY3QpOwogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJXYWl0T25saW5lSm9pbik7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNywgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkgewogICAgICAgIHJldHVybiBfY29tcG9uZW50V2lsbFVubW91bnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGNvbXBvbmVudFdpbGxVbm1vdW50OwogICAgfSgpCiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzJHN0YXRlNCA9IHRoaXMuc3RhdGUsCiAgICAgICAgICBhY3Rpb24gPSBfdGhpcyRzdGF0ZTQuYWN0aW9uLAogICAgICAgICAgd2FsbGV0ID0gX3RoaXMkc3RhdGU0LndhbGxldCwKICAgICAgICAgIHdhbGxldEJhbGFuY2UgPSBfdGhpcyRzdGF0ZTQud2FsbGV0QmFsYW5jZSwKICAgICAgICAgIGpvaW5MaW5rID0gX3RoaXMkc3RhdGU0LmpvaW5MaW5rLAogICAgICAgICAgYWRkV2FsbGV0RW5hYmxlZCA9IF90aGlzJHN0YXRlNC5hZGRXYWxsZXRFbmFibGVkLAogICAgICAgICAgd2FpdENyZWF0ZVdhbGxldCA9IF90aGlzJHN0YXRlNC53YWl0Q3JlYXRlV2FsbGV0LAogICAgICAgICAgZGVidWdTaG93VFhCID0gX3RoaXMkc3RhdGU0LmRlYnVnU2hvd1RYQiwKICAgICAgICAgIGRlYnVnU2hvd0lucHV0ID0gX3RoaXMkc3RhdGU0LmRlYnVnU2hvd0lucHV0LAogICAgICAgICAgZGVidWdTaG93T3V0cHV0ID0gX3RoaXMkc3RhdGU0LmRlYnVnU2hvd091dHB1dCwKICAgICAgICAgIG1uZW1vbmljU2F2ZWQgPSBfdGhpcyRzdGF0ZTQubW5lbW9uaWNTYXZlZDsKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzZWN0aW9uIiwgbnVsbCwgYWN0aW9uID09PSAnb25saW5lam9pbicgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJoMSIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIkJUQ01TX0NyZWF0ZVdhbGxldFRpdGxlIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQyMVx1MDQzRVx1MDQzN1x1MDQzNFx1MDQzMFx1MDQzRFx1MDQzOFx1MDQzNSBCVEMtbXVsdGlzaWduYXR1cmUgXHUwNDNBXHUwNDNFXHUwNDQ4XHUwNDM1XHUwNDNCXHUwNDRDXHUwNDNBXHUwNDMwIgogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJoMyIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIkJUQ01TX1dhaXRPdGhlclNpZGUiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDFFXHUwNDM2XHUwNDM4XHUwNDM0XHUwNDMwXHUwNDNEXHUwNDM4XHUwNDM1IFx1MDQzMlx1MDQ0Mlx1MDQzRVx1MDQ0MFx1MDQzRVx1MDQzOSBcdTA0NDFcdTA0NDJcdTA0M0VcdTA0NDBcdTA0M0VcdTA0M0RcdTA0NEIuLi4iCiAgICAgIH0pKSksIChhY3Rpb24gPT09ICdqb2luJyB8fCBhY3Rpb24gPT09ICdjb25uZWN0JykgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJoMSIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIkJUQ01TX0NyZWF0ZVdhbGxldFRpdGxlIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQyMVx1MDQzRVx1MDQzN1x1MDQzNFx1MDQzMFx1MDQzRFx1MDQzOFx1MDQzNSBCVEMtbXVsdGlzaWduYXR1cmUgXHUwNDNBXHUwNDNFXHUwNDQ4XHUwNDM1XHUwNDNCXHUwNDRDXHUwNDNBXHUwNDMwIgogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgibGFiZWwiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJCVENNU19XYWxsZXRBZGRyZXNzIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxMFx1MDQzNFx1MDQ0MFx1MDQzNVx1MDQ0MSBcdTA0M0FcdTA0M0VcdTA0NDhcdTA0MzVcdTA0M0JcdTA0NENcdTA0M0FcdTA0MzA6IgogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzdHJvbmciLCBudWxsLCB3YWxsZXQuYWRkcmVzcykpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImxhYmVsIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiQlRDTVNfV2FsbGV0QmFsYW5jZSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MTFcdTA0MzBcdTA0M0JcdTA0MzBcdTA0M0RcdTA0NDEiCiAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN0cm9uZyIsIG51bGwsICIgIiwgd2FsbGV0QmFsYW5jZSwgIiBCVEMiKSksIG1uZW1vbmljU2F2ZWQgPyAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgYWRkV2FsbGV0RW5hYmxlZCA/IHdhaXRDcmVhdGVXYWxsZXQgPyAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHsKICAgICAgICBicmFuZDogdHJ1ZQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJCVENNU19DcmVhdGVXYWxsZXRXYWl0IiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQyMVx1MDQzRVx1MDQzN1x1MDQzNFx1MDQzMFx1MDQzRFx1MDQzOFx1MDQzNSBcdTA0M0FcdTA0M0VcdTA0NDhcdTA0MzVcdTA0M0JcdTA0NENcdTA0M0FcdTA0MzAuLi4gXHUwNDFGXHUwNDNFXHUwNDM0XHUwNDNFXHUwNDM2XHUwNDM0XHUwNDM4XHUwNDQyXHUwNDM1IFx1MDQzRFx1MDQzNVx1MDQzQ1x1MDQzRFx1MDQzRVx1MDQzM1x1MDQzRSIKICAgICAgfSkpIDogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7CiAgICAgICAgYnJhbmQ6IHRydWUsCiAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVBZGRXYWxsZXQKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiQlRDTVNfQ3JlYXRlV2FsbGV0QWRkIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxNFx1MDQzRVx1MDQzMVx1MDQzMFx1MDQzMlx1MDQzOFx1MDQ0Mlx1MDQ0QyBcdTA0NERcdTA0NDJcdTA0M0VcdTA0NDIgXHUwNDNBXHUwNDNFXHUwNDQ4XHUwNDM1XHUwNDNCXHUwNDM1XHUwNDNBIgogICAgICB9KSkgOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHsKICAgICAgICBicmFuZDogdHJ1ZQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJCVENNU19DcmVhdGVXYWxsZXRMb2FkaW5nIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxN1x1MDQzMFx1MDQzM1x1MDQ0MFx1MDQ0M1x1MDQzN1x1MDQzQVx1MDQzMC4uLiBcdTA0MUZcdTA0M0VcdTA0MzRcdTA0M0VcdTA0MzZcdTA0MzRcdTA0MzhcdTA0NDJcdTA0MzUgXHUwNDNEXHUwNDM1XHUwNDNDXHUwNDNEXHUwNDNFXHUwNDMzXHUwNDNFIgogICAgICB9KSkpIDogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3Ryb25nIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiQlRDTVNfWW91TmVlZFNhdmVNbmVtb25pYyIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MTRcdTA0M0JcdTA0NEYgXHUwNDMwXHUwNDNBXHUwNDQyXHUwNDM4XHUwNDMyXHUwNDMwXHUwNDQ2XHUwNDM4XHUwNDM4IGJ0Yy1tdWx0aXNpZyBcdTA0MzJcdTA0NEIgXHUwNDM0XHUwNDNFXHUwNDNCXHUwNDM2XHUwNDNEXHUwNDRCIFx1MDQ0MVx1MDQzRVx1MDQ0NVx1MDQ0MFx1MDQzMFx1MDQzRFx1MDQzOFx1MDQ0Mlx1MDQ0QyAxMiBcdTA0NDFcdTA0M0JcdTA0M0VcdTA0MzIiCiAgICAgIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgibGFiZWwiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJCVENNU19TYXZlWW91ck1uZW1vbmljIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxRlx1MDQzRVx1MDQzNlx1MDQzMFx1MDQzQlx1MDQ0M1x1MDQzOVx1MDQ0MVx1MDQ0Mlx1MDQzMCBcdTA0NDFcdTA0M0VcdTA0NDVcdTA0NDBcdTA0MzBcdTA0M0RcdTA0MzhcdTA0NDJcdTA0MzUgXHUwNDQxXHUwNDMyXHUwNDNFXHUwNDRFIFx1MDQ0MVx1MDQzNVx1MDQzQVx1MDQ0MFx1MDQzNVx1MDQ0Mlx1MDQzRFx1MDQ0M1x1MDQ0RSBcdTA0NDRcdTA0NDBcdTA0MzBcdTA0MzdcdTA0NDMuIgogICAgICB9KSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHsKICAgICAgICBicmFuZDogdHJ1ZSwKICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZVNhdmVNbmVtb25pYwogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJCVENNU19TYXZlTW5lbW9uaWNCdXR0b24iLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDIxXHUwNDNFXHUwNDQ1XHUwNDQwXHUwNDMwXHUwNDNEXHUwNDM4XHUwNDQyXHUwNDRDIFx1MDQ0MVx1MDQzNVx1MDQzQVx1MDQ0MFx1MDQzNVx1MDQ0Mlx1MDQzRFx1MDQ0M1x1MDQ0RSBcdTA0NDRcdTA0NDBcdTA0MzBcdTA0MzdcdTA0NDMiCiAgICAgIH0pKSkpLCAhbW5lbW9uaWNTYXZlZCAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogImRlc2NyaXRvblRleHQiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIkJUQ01TX0NyZWF0ZVdhbGxldExvYWRpbmdfZGVzY3JvcHRpbyIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJGdW5kcyBzZW50IHRvIHRoaXMgd2FsbGV0IGNhbm5vdCBiZSBzcGVudCB3aXRob3V0IHlvdXIgY29uZmlybWF0aW9uIChwbGVhc2Ugc2F2ZSB5b3VyIHByaXZhdGUgMTIgd29yZHMgcGFzc3BocmFzZSkiCiAgICAgIH0pKSwKICAgICAgLyphY3Rpb249PSdjb25maXJtJyB8fCovCiAgICAgIGFjdGlvbiA9PT0gJ2NvbmZpcm1pbnZvaWNlJyAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGcmFnbWVudCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImgxIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiQlRDTVNfQ29uZmlybVR4VGl0bGUiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDFGXHUwNDNFXHUwNDM0XHUwNDQyXHUwNDMyXHUwNDM1XHUwNDQwXHUwNDM2XHUwNDM0XHUwNDM1XHUwNDNEXHUwNDM4XHUwNDM1IFx1MDQ0Mlx1MDQ0MFx1MDQzMFx1MDQzRFx1MDQzN1x1MDQzMFx1MDQzQVx1MDQ0Nlx1MDQzOFx1MDQzOCIKICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiaDMiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgewogICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7CiAgICAgICAgICBfdGhpczMuc2V0U3RhdGUoewogICAgICAgICAgICBkZWJ1Z1Nob3dJbnB1dDogIWRlYnVnU2hvd0lucHV0CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIkJUQ01TX0NvbmZpcm1UeElucHV0cyIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MTJcdTA0NDVcdTA0M0VcdTA0MzRcdTA0NEIgXHUwNDQyXHUwNDQwXHUwNDMwXHUwNDNEXHUwNDM3XHUwNDMwXHUwNDNBXHUwNDQ2XHUwNDM4XHUwNDM4IgogICAgICB9KSkpLCBkZWJ1Z1Nob3dJbnB1dCAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicHJlIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImNvZGUiLCBudWxsLCBKU09OLnN0cmluZ2lmeSh0aGlzLnN0YXRlLnR4RGF0YS5pbnB1dCwgbnVsbCwgNCkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImgzIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsKICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkgewogICAgICAgICAgX3RoaXMzLnNldFN0YXRlKHsKICAgICAgICAgICAgZGVidWdTaG93T3V0cHV0OiAhZGVidWdTaG93T3V0cHV0CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIkJUQ01TX0NvbmZpcm1UeE91dHB1dHMiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDEyXHUwNDRCXHUwNDQ1XHUwNDNFXHUwNDM0XHUwNDRCIFx1MDQ0Mlx1MDQ0MFx1MDQzMFx1MDQzRFx1MDQzN1x1MDQzMFx1MDQzQVx1MDQ0Nlx1MDQzOFx1MDQzOCIKICAgICAgfSkpKSwgZGVidWdTaG93T3V0cHV0ICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwcmUiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiY29kZSIsIG51bGwsIEpTT04uc3RyaW5naWZ5KHRoaXMuc3RhdGUudHhEYXRhLm91dHB1dCwgbnVsbCwgNCkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiY29kZSIsIG51bGwsIEpTT04uc3RyaW5naWZ5KHRoaXMuc3RhdGUudHhEYXRhLCBudWxsLCA0KSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7CiAgICAgICAgYnJhbmQ6IHRydWUsCiAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVDb25maXJtCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIkJUQ01TX0NvbmZpcm1UeFNpZ24iLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDFGXHUwNDNFXHUwNDM0XHUwNDNGXHUwNDM4XHUwNDQxXHUwNDMwXHUwNDQyXHUwNDRDIFx1MDQ0Mlx1MDQ0MFx1MDQzMFx1MDQzRFx1MDQzN1x1MDQzMFx1MDQzQVx1MDQ0Nlx1MDQzOFx1MDQ0RSIKICAgICAgfSkpKSksIGFjdGlvbiA9PT0gJ2NvbmZpcm1yZWFkeScgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIkJUQ01TX0NvbmZpcm1UeFRpdGxlIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxRlx1MDQzRVx1MDQzNFx1MDQ0Mlx1MDQzMlx1MDQzNVx1MDQ0MFx1MDQzNlx1MDQzNFx1MDQzNVx1MDQzRFx1MDQzOFx1MDQzNSBcdTA0NDJcdTA0NDBcdTA0MzBcdTA0M0RcdTA0MzdcdTA0MzBcdTA0M0FcdTA0NDZcdTA0MzhcdTA0MzgiCiAgICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiaDIiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJCVENNU19Db25maXJtVHhSZWFkeSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MjJcdTA0NDBcdTA0MzBcdTA0M0RcdTA0MzdcdTA0MzBcdTA0M0FcdTA0NDZcdTA0MzhcdTA0NEYgXHUwNDNGXHUwNDNFXHUwNDM0XHUwNDNGXHUwNDM4XHUwNDQxXHUwNDMwXHUwNDNEXHUwNDMwIFx1MDQzOCBcdTA0M0VcdTA0NDJcdTA0M0ZcdTA0NDBcdTA0MzBcdTA0MzJcdTA0M0JcdTA0MzVcdTA0M0RcdTA0MzAgXHUwNDMyIFx1MDQzMVx1MDQzQlx1MDQzRVx1MDQzQVx1MDQ0N1x1MDQzNVx1MDQzOVx1MDQzRCIKICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7CiAgICAgICAgYnJhbmQ6IHRydWUsCiAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVHb1RvV2FsbGV0CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIkJUQ01TX0NvbmZpcm1UeEdvVG9XYWxsZXQiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDFGXHUwNDM1XHUwNDQwXHUwNDM1XHUwNDM5XHUwNDQyXHUwNDM4IFx1MDQzMiBcdTA0M0FcdTA0M0VcdTA0NDhcdTA0MzVcdTA0M0JcdTA0MzVcdTA0M0EiCiAgICAgIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwcmUiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiY29kZSIsIG51bGwsIEpTT04uc3RyaW5naWZ5KHRoaXMuc3RhdGUudHhJRCwgbnVsbCwgNCkpKSksIChhY3Rpb24gPT09ICdsaW5rcmVhZHknIHx8IGFjdGlvbiA9PT0gJ3JlYWR5JykgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJoMSIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIkJUQ01TX0NyZWF0ZVdhbGxldFRpdGxlIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQyMVx1MDQzRVx1MDQzN1x1MDQzNFx1MDQzMFx1MDQzRFx1MDQzOFx1MDQzNSBCVEMtbXVsdGlzaWduYXR1cmUgXHUwNDNBXHUwNDNFXHUwNDQ4XHUwNDM1XHUwNDNCXHUwNDRDXHUwNDNBXHUwNDMwIgogICAgICB9KSksIGFjdGlvbiA9PT0gJ2xpbmtyZWFkeScgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImgyIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiQlRDTVNfQ3JlYXRlV2FsbGV0TGlua1JlYWR5IiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxQVx1MDQzRVx1MDQ0OFx1MDQzNVx1MDQzQlx1MDQzNVx1MDQzQSBcdTA0NDFcdTA0M0VcdTA0MzdcdTA0MzRcdTA0MzBcdTA0M0QuIFx1MDQxRVx1MDQ0Mlx1MDQzRlx1MDQ0MFx1MDQzMFx1MDQzMlx1MDQ0Q1x1MDQ0Mlx1MDQzNSBcdTA0NERcdTA0NDJcdTA0NDMgXHUwNDQxXHUwNDQxXHUwNDRCXHUwNDNCXHUwNDNBXHUwNDQzIFx1MDQzMlx1MDQ0Mlx1MDQzRVx1MDQ0MFx1MDQzRVx1MDQzQ1x1MDQ0MyBcdTA0MzJcdTA0M0JcdTA0MzBcdTA0MzRcdTA0MzVcdTA0M0JcdTA0NENcdTA0NDZcdTA0NDMgXHUwNDM0XHUwNDNCXHUwNDRGIFx1MDQzRlx1MDQzRVx1MDQzNFx1MDQ0Mlx1MDQzMlx1MDQzNVx1MDQ0MFx1MDQzNlx1MDQzNFx1MDQzNVx1MDQzRFx1MDQzOFx1MDQ0RiIKICAgICAgfSkpLCBhY3Rpb24gPT09ICdyZWFkeScgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImgyIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiQlRDTVNfQ3JlYXRlV2FsbGV0UmVhZHkiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDFBXHUwNDNFXHUwNDQ4XHUwNDM1XHUwNDNCXHUwNDM1XHUwNDNBIFx1MDQ0MVx1MDQzRVx1MDQzN1x1MDQzNFx1MDQzMFx1MDQzRCIKICAgICAgfSkpLCBhY3Rpb24gPT09ICdsaW5rcmVhZHknICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgam9pbkxpbmspLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7CiAgICAgICAgYnJhbmQ6IHRydWUsCiAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVHb1RvV2FsbGV0CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIkJUQ01TX0NyZWF0ZVdhbGxldFJlYWR5QnV0dG9uIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxM1x1MDQzRVx1MDQ0Mlx1MDQzRVx1MDQzMlx1MDQzRS4gXHUwNDFFXHUwNDQyXHUwNDNBXHUwNDQwXHUwNDRCXHUwNDQyXHUwNDRDIFx1MDQzQVx1MDQzRVx1MDQ0OFx1MDQzNVx1MDQzQlx1MDQzNVx1MDQzQSIKICAgICAgfSkpKSkpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEJ0YzsKfShQdXJlQ29tcG9uZW50KSwgX2RlZmluZVByb3BlcnR5KF9jbGFzczIsICJwcm9wVHlwZXMiLCB7CiAgaGlzdG9yeTogUHJvcFR5cGVzLm9iamVjdCwKICBsb2NhdGlvbjogUHJvcFR5cGVzLm9iamVjdCwKICBpbnRsOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQKfSksIF90ZW1wKSkgfHwgX2NsYXNzKSB8fCBfY2xhc3MpIHx8IF9jbGFzcyk7CmV4cG9ydCB7IEJ0YyBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/front/shared/pages/Multisign/Btc/Btc.tsx"],"names":["React","Fragment","PureComponent","PropTypes","connect","constants","localisedUrl","FormattedMessage","injectIntl","actions","links","getFullOrigin","Button","CSSModules","styles","SwapApp","Btc","btcData","user","data","allowMultiple","props","action","state","privateKey","publicKey","btcmultisig","addBtcMultisigKey","core","markCoinAsVisible","setState","modals","open","MultisignJoinLink","callback","handleGoToWallet","showCloseButton","_data","console","log","fromPeer","peer","shared","services","room","unsubscribe","handleOnlineWalletConnect","clearTimeout","timerWaitOnlineJoin","connectWallet","myPublicKey","waitCreateWallet","pubsubRoom","waitPeer","subscribe","sendMessagePeer","event","checkKey","setTimeout","SaveMnemonicModal","onClose","mnemonic","localStorage","getItem","privateKeyNames","twentywords","mnemonicSaved","history","locale","intl","getAuthData","address","push","txRaw","invoice","isConfirming","signMultiSign","signedTX","broadcastTx","txID","invoices","markInvoice","wallet","walletBalance","addWalletEnabled","match","params","pathname","location","indexOf","toLowerCase","notFound","length","walletData","login_USER","fetchBalance","balance","toString","joinLink","multisign","onReady","dataParts","split","BtcMultisignConfirmTx","txId","home","parseRawTX","txData","debugShowTXB","debugShowInput","debugShowOutput","handleAddWallet","handleSaveMnemonic","JSON","stringify","input","output","handleConfirm","object","isRequired"],"mappings":"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","sourcesContent":["// @ts-nocheck\r\nimport React, { Fragment, PureComponent } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { isMobile } from 'react-device-detect'\r\nimport { connect } from 'redaction'\r\nimport { constants } from 'helpers'\r\nimport { localisedUrl } from 'helpers/locale'\r\nimport { FormattedMessage, injectIntl } from 'react-intl'\r\nimport { withRouter } from 'react-router-dom'\r\nimport actions from 'redux/actions'\r\nimport { links } from 'helpers'\r\nimport { getFullOrigin } from 'helpers/links'\r\nimport Button from 'components/controls/Button/Button'\r\n\r\nimport moment from 'moment'\r\n\r\nimport CSSModules from 'react-css-modules'\r\nimport styles from './Btc.scss'\r\nimport SwapApp from 'swap.app'\r\nimport config from 'app-config'\r\n\r\n@connect(({ user: { btcData } }) => {\r\n  return {\r\n    data: btcData,\r\n  }\r\n})\r\n@injectIntl\r\n@CSSModules(styles, { allowMultiple: true })\r\nexport default class Btc extends PureComponent<any, any> {\r\n  timerWaitOnlineJoin: any\r\n\r\n  static propTypes = {\r\n    history: PropTypes.object,\r\n    location: PropTypes.object,\r\n    intl: PropTypes.object.isRequired,\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    console.log('Btc mulsign connected')\r\n\r\n    const mnemonic = localStorage.getItem(constants.privateKeyNames.twentywords)\r\n    const mnemonicSaved = mnemonic === `-`\r\n\r\n    this.timerWaitOnlineJoin = false\r\n    this.state = {\r\n      action: 'none',\r\n      wallet: {},\r\n      walletBalance: 0,\r\n      publicKey: '',\r\n      mnemonicSaved,\r\n      addWalletEnabled: false,\r\n    }\r\n  }\r\n\r\n  async componentWillMount() {\r\n    let {\r\n      match: {\r\n        params: { action, data, peer },\r\n      },\r\n      intl: { locale },\r\n      history,\r\n      location: { pathname },\r\n      data: { privateKey },\r\n    } = this.props\r\n\r\n    if (\r\n      !action ||\r\n      ['join', 'connect', 'confirm', 'confirminvoice'].indexOf(action.toLowerCase()) === -1\r\n    ) {\r\n      history.push(localisedUrl(locale, links.notFound))\r\n      return\r\n    }\r\n\r\n    action = action.toLowerCase()\r\n\r\n    if (action === 'join' || action === 'connect') {\r\n      if (data && data.length == 66) {\r\n        const publicKey = data\r\n        const walletData = actions.btcmultisig.login_USER(privateKey, publicKey, true)\r\n\r\n        if (!walletData) {\r\n          history.push(localisedUrl(locale, links.notFound))\r\n          return\r\n        }\r\n\r\n        const balance = await actions.btcmultisig.fetchBalance(walletData.address)\r\n        const myPublicKey = this.props.data.publicKey.toString('hex')\r\n\r\n        this.setState({\r\n          action,\r\n          wallet: walletData,\r\n          walletBalance: balance,\r\n          peer,\r\n          privateKey,\r\n          publicKey,\r\n          myPublicKey,\r\n          joinLink: `${getFullOrigin()}${links.multisign}/btc/connect/${myPublicKey}`,\r\n        })\r\n        actions.pubsubRoom.onReady(() => {\r\n          this.setState({\r\n            addWalletEnabled: true,\r\n          })\r\n        })\r\n      } else {\r\n        history.push(localisedUrl(locale, links.notFound))\r\n      }\r\n    }\r\n    if (action === 'confirm' || action === 'confirminvoice') {\r\n      if (data && data.length) {\r\n        let txRaw = data\r\n        let invoice = false\r\n        if (action === 'confirminvoice') {\r\n          const dataParts = data.split('|')\r\n          if (dataParts.length === 2) {\r\n            invoice = dataParts[0]\r\n            txRaw = dataParts[1]\r\n          } else {\r\n            console.log('Bad tx raw and invoiceid data')\r\n          }\r\n        }\r\n        if (txRaw.length === 64) {\r\n          setTimeout(() => {\r\n            actions.modals.open(constants.modals.BtcMultisignConfirmTx, {\r\n              txId: txRaw,\r\n              showCloseButton: true,\r\n              onClose: () => {\r\n                history.push(localisedUrl(locale, links.home))\r\n              },\r\n            })\r\n          }, 100)\r\n        } else {\r\n          try {\r\n            this.setState(\r\n              {\r\n                action,\r\n                txData: await actions.btcmultisig.parseRawTX(txRaw),\r\n                invoice,\r\n                txRaw: txRaw,\r\n              },\r\n              () => {\r\n                setTimeout(() => {\r\n                  actions.modals.open(constants.modals.BtcMultisignConfirmTx, {\r\n                    txData: txRaw,\r\n                    showCloseButton: false,\r\n                    onClose: () => {\r\n                      history.push(localisedUrl(locale, links.home))\r\n                    },\r\n                  })\r\n                }, 100)\r\n              }\r\n            )\r\n          } catch (e) {\r\n            console.log('Bad tx raw data')\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  async componentWillUnmount() {\r\n    SwapApp.shared().services.room.unsubscribe(\r\n      'btc multisig join ready',\r\n      this.handleOnlineWalletConnect\r\n    )\r\n    clearTimeout(this.timerWaitOnlineJoin)\r\n  }\r\n\r\n  connectWallet = (action) => {\r\n    const { privateKey, publicKey } = this.state\r\n    actions.btcmultisig.addBtcMultisigKey(publicKey, true)\r\n\r\n    actions.core.markCoinAsVisible('BTC (Multisig)', true)\r\n\r\n    this.setState({\r\n      action: action === 'join' ? 'linkready' : 'ready',\r\n    })\r\n    if (action === 'join') {\r\n      actions.modals.open(constants.modals.MultisignJoinLink, {\r\n        action: `connect`,\r\n        callback: () => {\r\n          this.handleGoToWallet()\r\n        },\r\n        showCloseButton: false,\r\n      })\r\n    }\r\n  }\r\n\r\n  handleOnlineWalletConnect = async (_data) => {\r\n    console.log('btc multisig join ready', _data)\r\n    const { fromPeer, data } = _data\r\n    const { peer } = this.state\r\n    if (fromPeer === peer) {\r\n      SwapApp.shared().services.room.unsubscribe(\r\n        'btc multisig join ready',\r\n        this.handleOnlineWalletConnect\r\n      )\r\n      clearTimeout(this.timerWaitOnlineJoin)\r\n      this.connectWallet('ready')\r\n    }\r\n  }\r\n\r\n  handleAddWallet = async () => {\r\n    const { action, myPublicKey, publicKey, peer } = this.state\r\n\r\n    //If peer is online - try connect via pubsubRoom\r\n\r\n    this.setState({\r\n      waitCreateWallet: true,\r\n    })\r\n\r\n    actions.pubsubRoom.waitPeer(\r\n      peer,\r\n      () => {\r\n        this.setState({\r\n          action: 'onlinejoin',\r\n        })\r\n        SwapApp.shared().services.room.subscribe(\r\n          'btc multisig join ready',\r\n          this.handleOnlineWalletConnect\r\n        )\r\n        SwapApp.shared().services.room.sendMessagePeer(peer, {\r\n          event: 'btc multisig join',\r\n          data: {\r\n            publicKey: myPublicKey,\r\n            checkKey: publicKey,\r\n          },\r\n        })\r\n        this.timerWaitOnlineJoin = setTimeout(() => {\r\n          SwapApp.shared().services.room.unsubscribe(\r\n            'btc multisig join ready',\r\n            this.handleOnlineWalletConnect\r\n          )\r\n          this.connectWallet(action)\r\n        }, 10000)\r\n      },\r\n      () => {\r\n        this.connectWallet(action)\r\n      },\r\n      10000\r\n    )\r\n  }\r\n\r\n  handleSaveMnemonic = async () => {\r\n    actions.modals.open(constants.modals.SaveMnemonicModal, {\r\n      onClose: () => {\r\n        const mnemonic = localStorage.getItem(constants.privateKeyNames.twentywords)\r\n        const mnemonicSaved = mnemonic === `-`\r\n\r\n        this.setState({\r\n          mnemonicSaved,\r\n        })\r\n      },\r\n    })\r\n  }\r\n\r\n  handleGoToWallet = async () => {\r\n    const {\r\n      history,\r\n      intl: { locale },\r\n    } = this.props\r\n\r\n    const { address } = actions.user.getAuthData('btcMultisigUser')\r\n    history.push(localisedUrl(locale, `/btc/${address}`))\r\n  }\r\n\r\n  handleConfirm = async () => {\r\n    const { txRaw, invoice } = this.state\r\n    this.setState({ isConfirming: true })\r\n    //@\r\n    const signedTX = await actions.btcmultisig.signMultiSign(txRaw)\r\n    const txID = await actions.btcmultisig.broadcastTx(signedTX)\r\n    if (invoice) {\r\n      // @ToDo - payer address\r\n      //@\r\n      await actions.invoices.markInvoice(invoice, 'ready', txID)\r\n    }\r\n    this.setState({\r\n      txID,\r\n      action: 'confirmready',\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      action,\r\n\r\n      wallet,\r\n      walletBalance,\r\n      joinLink,\r\n      addWalletEnabled,\r\n      waitCreateWallet,\r\n\r\n      debugShowTXB,\r\n      debugShowInput,\r\n      debugShowOutput,\r\n\r\n      mnemonicSaved,\r\n    } = this.state\r\n\r\n    return (\r\n      <section>\r\n        {action === 'onlinejoin' && (\r\n          <Fragment>\r\n            <h1>\r\n              <FormattedMessage\r\n                id=\"BTCMS_CreateWalletTitle\"\r\n                defaultMessage=\"Создание BTC-multisignature кошелька\"\r\n              />\r\n            </h1>\r\n            <h3>\r\n              <FormattedMessage\r\n                id=\"BTCMS_WaitOtherSide\"\r\n                defaultMessage=\"Ожидание второй стороны...\"\r\n              />\r\n            </h3>\r\n          </Fragment>\r\n        )}\r\n        {(action === 'join' || action === 'connect') && (\r\n          <Fragment>\r\n            <h1>\r\n              <FormattedMessage\r\n                id=\"BTCMS_CreateWalletTitle\"\r\n                defaultMessage=\"Создание BTC-multisignature кошелька\"\r\n              />\r\n            </h1>\r\n\r\n            <div>\r\n              <label>\r\n                <FormattedMessage id=\"BTCMS_WalletAddress\" defaultMessage=\"Адрес кошелька:\" />\r\n              </label>\r\n              <strong>{wallet.address}</strong>\r\n            </div>\r\n            <div>\r\n              <label>\r\n                <FormattedMessage id=\"BTCMS_WalletBalance\" defaultMessage=\"Баланс\" />\r\n              </label>\r\n              <strong> {walletBalance} BTC</strong>\r\n            </div>\r\n            {mnemonicSaved ? (\r\n              <>\r\n                {addWalletEnabled ? (\r\n                  waitCreateWallet ? (\r\n                    <Button brand>\r\n                      <FormattedMessage\r\n                        id=\"BTCMS_CreateWalletWait\"\r\n                        defaultMessage=\"Создание кошелька... Подождите немного\"\r\n                      />\r\n                    </Button>\r\n                  ) : (\r\n                    <Button brand onClick={this.handleAddWallet}>\r\n                      <FormattedMessage\r\n                        id=\"BTCMS_CreateWalletAdd\"\r\n                        defaultMessage=\"Добавить этот кошелек\"\r\n                      />\r\n                    </Button>\r\n                  )\r\n                ) : (\r\n                  <Button brand>\r\n                    <FormattedMessage\r\n                      id=\"BTCMS_CreateWalletLoading\"\r\n                      defaultMessage=\"Загрузка... Подождите немного\"\r\n                    />\r\n                  </Button>\r\n                )}\r\n              </>\r\n            ) : (\r\n              <>\r\n                <div>\r\n                  <strong>\r\n                    <FormattedMessage\r\n                      id=\"BTCMS_YouNeedSaveMnemonic\"\r\n                      defaultMessage=\"Для активации btc-multisig вы должны сохранить 12 слов\"\r\n                    />\r\n                  </strong>\r\n                </div>\r\n                <div>\r\n                  <label>\r\n                    <FormattedMessage\r\n                      id=\"BTCMS_SaveYourMnemonic\"\r\n                      defaultMessage=\"Пожалуйста сохраните свою секретную фразу.\"\r\n                    />\r\n                  </label>\r\n                </div>\r\n                <Button brand onClick={this.handleSaveMnemonic}>\r\n                  <FormattedMessage\r\n                    id=\"BTCMS_SaveMnemonicButton\"\r\n                    defaultMessage=\"Сохранить секретную фразу\"\r\n                  />\r\n                </Button>\r\n              </>\r\n            )}\r\n          </Fragment>\r\n        )}\r\n        {!mnemonicSaved && (\r\n          <div styleName=\"descritonText\">\r\n            <FormattedMessage\r\n              id=\"BTCMS_CreateWalletLoading_descroptio\"\r\n              defaultMessage=\"Funds sent to this wallet cannot be spent without your confirmation (please save your private 12 words passphrase)\"\r\n            />\r\n          </div>\r\n        )}\r\n        {\r\n          /*action=='confirm' ||*/ action === 'confirminvoice' && (\r\n            <Fragment>\r\n              <h1>\r\n                <FormattedMessage\r\n                  id=\"BTCMS_ConfirmTxTitle\"\r\n                  defaultMessage=\"Подтверждение транзакции\"\r\n                />\r\n              </h1>\r\n              <h3>\r\n                <button\r\n                  onClick={() => {\r\n                    this.setState({ debugShowInput: !debugShowInput })\r\n                  }}\r\n                >\r\n                  <FormattedMessage id=\"BTCMS_ConfirmTxInputs\" defaultMessage=\"Входы транзакции\" />\r\n                </button>\r\n              </h3>\r\n              {debugShowInput && (\r\n                <pre>\r\n                  <code>{JSON.stringify(this.state.txData.input, null, 4)}</code>\r\n                </pre>\r\n              )}\r\n              <h3>\r\n                <button\r\n                  onClick={() => {\r\n                    this.setState({ debugShowOutput: !debugShowOutput })\r\n                  }}\r\n                >\r\n                  <FormattedMessage\r\n                    id=\"BTCMS_ConfirmTxOutputs\"\r\n                    defaultMessage=\"Выходы транзакции\"\r\n                  />\r\n                </button>\r\n              </h3>\r\n              {debugShowOutput && (\r\n                <pre>\r\n                  <code>{JSON.stringify(this.state.txData.output, null, 4)}</code>\r\n                  <code>{JSON.stringify(this.state.txData, null, 4)}</code>\r\n                </pre>\r\n              )}\r\n              <div>\r\n                <Button brand onClick={this.handleConfirm}>\r\n                  <FormattedMessage\r\n                    id=\"BTCMS_ConfirmTxSign\"\r\n                    defaultMessage=\"Подписать транзакцию\"\r\n                  />\r\n                </Button>\r\n              </div>\r\n            </Fragment>\r\n          )\r\n        }\r\n        {action === 'confirmready' && (\r\n          <Fragment>\r\n            <FormattedMessage id=\"BTCMS_ConfirmTxTitle\" defaultMessage=\"Подтверждение транзакции\" />\r\n            <h2>\r\n              <FormattedMessage\r\n                id=\"BTCMS_ConfirmTxReady\"\r\n                defaultMessage=\"Транзакция подписана и отправлена в блокчейн\"\r\n              />\r\n            </h2>\r\n            <div>\r\n              <Button brand onClick={this.handleGoToWallet}>\r\n                <FormattedMessage\r\n                  id=\"BTCMS_ConfirmTxGoToWallet\"\r\n                  defaultMessage=\"Перейти в кошелек\"\r\n                />\r\n              </Button>\r\n            </div>\r\n            <pre>\r\n              <code>{JSON.stringify(this.state.txID, null, 4)}</code>\r\n            </pre>\r\n          </Fragment>\r\n        )}\r\n        {(action === 'linkready' || action === 'ready') && (\r\n          <Fragment>\r\n            <h1>\r\n              <FormattedMessage\r\n                id=\"BTCMS_CreateWalletTitle\"\r\n                defaultMessage=\"Создание BTC-multisignature кошелька\"\r\n              />\r\n            </h1>\r\n            {action === 'linkready' && (\r\n              <h2>\r\n                <FormattedMessage\r\n                  id=\"BTCMS_CreateWalletLinkReady\"\r\n                  defaultMessage=\"Кошелек создан. Отправьте эту ссылку второму владельцу для подтверждения\"\r\n                />\r\n              </h2>\r\n            )}\r\n            {action === 'ready' && (\r\n              <h2>\r\n                <FormattedMessage id=\"BTCMS_CreateWalletReady\" defaultMessage=\"Кошелек создан\" />\r\n              </h2>\r\n            )}\r\n            {action === 'linkready' && <span>{joinLink}</span>}\r\n            <div>\r\n              <Button brand onClick={this.handleGoToWallet}>\r\n                <FormattedMessage\r\n                  id=\"BTCMS_CreateWalletReadyButton\"\r\n                  defaultMessage=\"Готово. Открыть кошелек\"\r\n                />\r\n              </Button>\r\n            </div>\r\n          </Fragment>\r\n        )}\r\n      </section>\r\n    )\r\n  }\r\n}\r\n"]}]}