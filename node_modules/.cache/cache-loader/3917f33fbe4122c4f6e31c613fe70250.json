{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\components\\modals\\AddCustomERC20\\AddCustomERC20.tsx","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\components\\modals\\AddCustomERC20\\AddCustomERC20.tsx","mtime":1614842913968},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI7CmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXNzZXJ0VGhpc0luaXRpYWxpemVkIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9nZXRQcm90b3R5cGVPZiI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSI7Cgp2YXIgX2RlYywgX2NsYXNzLCBfdGVtcDsKCmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gIkBiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yIjsKCmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9CgpmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09ICJ1bmRlZmluZWQiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSAiZnVuY3Rpb24iKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKaW1wb3J0IFJlYWN0LCB7IEZyYWdtZW50IH0gZnJvbSAncmVhY3QnOwppbXBvcnQgcmVxdWVzdCBmcm9tICdjb21tb24vdXRpbHMvcmVxdWVzdCc7CmltcG9ydCBhY3Rpb25zIGZyb20gJ3JlZHV4L2FjdGlvbnMnOwppbXBvcnQgTGluayBmcm9tICdsb2NhbF9tb2R1bGVzL3N3LXZhbHVlbGluayc7CmltcG9ydCBjb25maWcgZnJvbSAnYXBwLWNvbmZpZyc7CmltcG9ydCBjc3NNb2R1bGVzIGZyb20gJ3JlYWN0LWNzcy1tb2R1bGVzJzsKaW1wb3J0IHN0eWxlcyBmcm9tICcuLi9TdHlsZXMvZGVmYXVsdC5zY3NzJzsKaW1wb3J0IG93blN0eWxlIGZyb20gJy4vQWRkQ3VzdG9tRVJDMjAuc2Nzcyc7CmltcG9ydCBNb2RhbCBmcm9tICdjb21wb25lbnRzL21vZGFsL01vZGFsL01vZGFsJzsKaW1wb3J0IEZpZWxkTGFiZWwgZnJvbSAnY29tcG9uZW50cy9mb3Jtcy9GaWVsZExhYmVsL0ZpZWxkTGFiZWwnOwppbXBvcnQgSW5wdXQgZnJvbSAnY29tcG9uZW50cy9mb3Jtcy9JbnB1dC9JbnB1dCc7CmltcG9ydCBCdXR0b24gZnJvbSAnY29tcG9uZW50cy9jb250cm9scy9CdXR0b24vQnV0dG9uJzsKaW1wb3J0IHsgRm9ybWF0dGVkTWVzc2FnZSwgaW5qZWN0SW50bCwgZGVmaW5lTWVzc2FnZXMgfSBmcm9tICdyZWFjdC1pbnRsJzsKaW1wb3J0IHR5cGVmb3JjZSBmcm9tICdzd2FwLmFwcC91dGlsL3R5cGVmb3JjZSc7CmltcG9ydCBXZWIzIGZyb20gJ3dlYjMnOwp2YXIgZXRoZXJzY2FuQXBpID0gY29uZmlnLmFwaS5ldGhlcnNjYW4gaW5zdGFuY2VvZiBBcnJheSA/IGNvbmZpZy5hcGkuZXRoZXJzY2FuWzBdIDogY29uZmlnLmFwaS5ldGhlcnNjYW47CnZhciBzZXJ2aWNlVVJMID0gIiIuY29uY2F0KGV0aGVyc2NhbkFwaSwgIj9hcGlrZXk9IikuY29uY2F0KGNvbmZpZy5hcGkuZXRoZXJzY2FuX0FwaUtleSwgIiZtb2R1bGU9cHJveHkmYWN0aW9uPWV0aF9jYWxsIik7CnZhciBuYW1lU2lnbmF0dXJlID0gJzB4MDZmZGRlMDMnOwp2YXIgZGVjaW1hbHNTaWduYXR1cmUgPSAnMHgzMTNjZTU2Nyc7CnZhciBzeW1ib2xTaWduYXR1cmUgPSAnMHg5NWQ4OWI0MSc7CnZhciBBZGRDdXN0b21FUkMyMCA9IChfZGVjID0gY3NzTW9kdWxlcyhfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0eWxlcyksIG93blN0eWxlKSwgewogIGFsbG93TXVsdGlwbGU6IHRydWUKfSksIGluamVjdEludGwoX2NsYXNzID0gX2RlYyhfY2xhc3MgPSAoX3RlbXAgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHsKICBfaW5oZXJpdHMoQWRkQ3VzdG9tRVJDMjAsIF9SZWFjdCRDb21wb25lbnQpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKEFkZEN1c3RvbUVSQzIwKTsKCiAgZnVuY3Rpb24gQWRkQ3VzdG9tRVJDMjAocHJvcHMpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQWRkQ3VzdG9tRVJDMjApOwoKICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInByb3BzIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJzdGF0ZSIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlU3VibWl0IiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciB0b2tlbkFkZHJlc3MsIHRva2VuVGl0bGUsIHRva2VuU3ltYm9sLCB0b2tlbkRlY2ltYWxzOwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHRva2VuQWRkcmVzcyA9IF90aGlzLnN0YXRlLnRva2VuQWRkcmVzczsKCiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgaXNTaGlwcGVkOiB0cnVlCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZXROYW1lKHRva2VuQWRkcmVzcyk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgdG9rZW5UaXRsZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdldFN5bWJvbCh0b2tlbkFkZHJlc3MpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIHRva2VuU3ltYm9sID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdldERlY2ltYWxzKHRva2VuQWRkcmVzcyk7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIHRva2VuRGVjaW1hbHMgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICBpZiAodG9rZW5TeW1ib2wpIHsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgdG9rZW5UaXRsZTogdG9rZW5UaXRsZSwKICAgICAgICAgICAgICAgICAgdG9rZW5TeW1ib2w6IHRva2VuU3ltYm9sLAogICAgICAgICAgICAgICAgICB0b2tlbkRlY2ltYWxzOiB0b2tlbkRlY2ltYWxzLAogICAgICAgICAgICAgICAgICBzdGVwOiAnY29uZmlybScsCiAgICAgICAgICAgICAgICAgIGlzU2hpcHBlZDogZmFsc2UKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIG5vdEZvdW5kOiB0cnVlLAogICAgICAgICAgICAgICAgICBpc1NoaXBwZWQ6IGZhbHNlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgIG5vdEZvdW5kOiBmYWxzZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0sIDUwMDApOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVDb25maXJtIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICB2YXIgX3RoaXMkc3RhdGUsIHRva2VuQWRkcmVzcywgdG9rZW5TeW1ib2wsIHRva2VuRGVjaW1hbHM7CgogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfdGhpcyRzdGF0ZSA9IF90aGlzLnN0YXRlLCB0b2tlbkFkZHJlc3MgPSBfdGhpcyRzdGF0ZS50b2tlbkFkZHJlc3MsIHRva2VuU3ltYm9sID0gX3RoaXMkc3RhdGUudG9rZW5TeW1ib2wsIHRva2VuRGVjaW1hbHMgPSBfdGhpcyRzdGF0ZS50b2tlbkRlY2ltYWxzOwogICAgICAgICAgICAgIGFjdGlvbnMudG9rZW4uQWRkQ3VzdG9tRVJDMjAodG9rZW5BZGRyZXNzLCB0b2tlblN5bWJvbCwgdG9rZW5EZWNpbWFscyk7CiAgICAgICAgICAgICAgYWN0aW9ucy5jb3JlLm1hcmtDb2luQXNWaXNpYmxlKHRva2VuU3ltYm9sLnRvVXBwZXJDYXNlKCksIHRydWUpOwoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBzdGVwOiAncmVhZHknCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMik7CiAgICB9KSkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZVJlYWR5IiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CgogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMyk7CiAgICB9KSkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZUVycm9yIiwgZnVuY3Rpb24gKGVycikgewogICAgICBjb25zb2xlLmVycm9yKGVycik7CiAgICB9KTsKCiAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgc3RlcDogJ2VudGVyQWRkcmVzcycsCiAgICAgIHRva2VuQWRkcmVzczogJycsCiAgICAgIHRva2VuVGl0bGU6ICcnLAogICAgICB0b2tlblN5bWJvbDogJycsCiAgICAgIHRva2VuRGVjaW1hbHM6IDAsCiAgICAgIG5vdEZvdW5kOiBmYWxzZSwKICAgICAgaXNTaGlwcGVkOiBmYWxzZQogICAgfTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhBZGRDdXN0b21FUkMyMCwgW3sKICAgIGtleTogImdldE5hbWUiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXROYW1lID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoYWRkcmVzcykgewogICAgICAgIHZhciByZXNwb25zZSwgaGV4U3ltYm9sLCBzeW1ib2w7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdC5nZXQoIiIuY29uY2F0KHNlcnZpY2VVUkwsICImdG89IikuY29uY2F0KGFkZHJlc3MsICImZGF0YT0iKS5jb25jYXQobmFtZVNpZ25hdHVyZSkpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgICAgaGV4U3ltYm9sID0gcmVzcG9uc2UucmVzdWx0OwogICAgICAgICAgICAgICAgc3ltYm9sID0gV2ViMy51dGlscy50b1V0ZjgoaGV4U3ltYm9sKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBzeW1ib2wucmVwbGFjZSgvXFcvZywgJycpKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0TmFtZShfeCkgewogICAgICAgIHJldHVybiBfZ2V0TmFtZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0TmFtZTsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImdldFN5bWJvbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldFN5bWJvbCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KGFkZHJlc3MpIHsKICAgICAgICB2YXIgcmVzcG9uc2UsIGhleFN5bWJvbCwgc3ltYm9sOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3QuZ2V0KCIiLmNvbmNhdChzZXJ2aWNlVVJMLCAiJnRvPSIpLmNvbmNhdChhZGRyZXNzLCAiJmRhdGE9IikuY29uY2F0KHN5bWJvbFNpZ25hdHVyZSkpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgICAgaGV4U3ltYm9sID0gcmVzcG9uc2UucmVzdWx0OwogICAgICAgICAgICAgICAgc3ltYm9sID0gV2ViMy51dGlscy50b1V0ZjgoaGV4U3ltYm9sKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iLCBzeW1ib2wucmVwbGFjZSgvXFcvZywgJycpKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0U3ltYm9sKF94MikgewogICAgICAgIHJldHVybiBfZ2V0U3ltYm9sLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXRTeW1ib2w7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJnZXREZWNpbWFscyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldERlY2ltYWxzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoYWRkcmVzcykgewogICAgICAgIHZhciByZXNwb25zZSwgaGV4RGVjaW1hbHMsIGRlY2ltYWxzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3QuZ2V0KCIiLmNvbmNhdChzZXJ2aWNlVVJMLCAiJnRvPSIpLmNvbmNhdChhZGRyZXNzLCAiJmRhdGE9IikuY29uY2F0KGRlY2ltYWxzU2lnbmF0dXJlKSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQ2LnNlbnQ7CiAgICAgICAgICAgICAgICBoZXhEZWNpbWFscyA9IHJlc3BvbnNlLnJlc3VsdDsKICAgICAgICAgICAgICAgIGRlY2ltYWxzID0gV2ViMy51dGlscy5oZXhUb051bWJlcihoZXhEZWNpbWFscyk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIiwgZGVjaW1hbHMpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXREZWNpbWFscyhfeDMpIHsKICAgICAgICByZXR1cm4gX2dldERlY2ltYWxzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXREZWNpbWFsczsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImFkZHJlc3NJc0NvcnJlY3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZHJlc3NJc0NvcnJlY3QoKSB7CiAgICAgIHZhciB0b2tlbkFkZHJlc3MgPSB0aGlzLnN0YXRlLnRva2VuQWRkcmVzczsKICAgICAgcmV0dXJuIHR5cGVmb3JjZS5pc0NvaW5BZGRyZXNzLkVUSCh0b2tlbkFkZHJlc3MpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMkc3RhdGUyID0gdGhpcy5zdGF0ZSwKICAgICAgICAgIHN0ZXAgPSBfdGhpcyRzdGF0ZTIuc3RlcCwKICAgICAgICAgIHRva2VuQWRkcmVzcyA9IF90aGlzJHN0YXRlMi50b2tlbkFkZHJlc3MsCiAgICAgICAgICB0b2tlblRpdGxlID0gX3RoaXMkc3RhdGUyLnRva2VuVGl0bGUsCiAgICAgICAgICB0b2tlblN5bWJvbCA9IF90aGlzJHN0YXRlMi50b2tlblN5bWJvbCwKICAgICAgICAgIHRva2VuRGVjaW1hbHMgPSBfdGhpcyRzdGF0ZTIudG9rZW5EZWNpbWFscywKICAgICAgICAgIGlzU2hpcHBlZCA9IF90aGlzJHN0YXRlMi5pc1NoaXBwZWQsCiAgICAgICAgICBub3RGb3VuZCA9IF90aGlzJHN0YXRlMi5ub3RGb3VuZDsKICAgICAgdmFyIF90aGlzJHByb3BzID0gdGhpcy5wcm9wcywKICAgICAgICAgIG5hbWUgPSBfdGhpcyRwcm9wcy5uYW1lLAogICAgICAgICAgaW50bCA9IF90aGlzJHByb3BzLmludGw7CiAgICAgIHZhciBsaW5rZWQgPSBMaW5rLmFsbCh0aGlzLCAndG9rZW5BZGRyZXNzJyk7CiAgICAgIHZhciBpc0Rpc2FibGVkID0gIXRva2VuQWRkcmVzcyB8fCBpc1NoaXBwZWQgfHwgIXRoaXMuYWRkcmVzc0lzQ29ycmVjdCgpOwogICAgICB2YXIgbG9jYWxlTGFiZWwgPSBkZWZpbmVNZXNzYWdlcyh7CiAgICAgICAgdGl0bGU6IHsKICAgICAgICAgIGlkOiAnY3VzdG9tRVJDMjBfVGl0bGUnLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdBZGQgbmV3IEVSQzIwJwogICAgICAgIH0sCiAgICAgICAgYWRkcmVzc1BsYWNlaG9sZGVyOiB7CiAgICAgICAgICBpZDogJ2N1c3RvbUVSQzIwX2FkZHJlc3NQbGFjZWhvbGRlcicsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0VudGVyIHRva2VuIGFkZHJlc3MnCiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE1vZGFsLCB7CiAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICB0aXRsZTogIiIuY29uY2F0KGludGwuZm9ybWF0TWVzc2FnZShsb2NhbGVMYWJlbC50aXRsZSkpCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiZXJjMjBNb2RhbEhvbGRlciIKICAgICAgfSwgc3RlcCA9PT0gJ2VudGVyQWRkcmVzcycgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiaGlnaExldmVsIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGaWVsZExhYmVsLCB7CiAgICAgICAgaW5Sb3c6IHRydWUKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIGZvbnRTaXplOiAnMTZweCcKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogImN1c3RvbUVSQzIwX0FkZHJlc3MiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiZXJjMjAgYWRkcmVzcyIKICAgICAgfSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXQsIHsKICAgICAgICB2YWx1ZUxpbms6IGxpbmtlZC50b2tlbkFkZHJlc3MsCiAgICAgICAgZm9jdXNPbkluaXQ6IHRydWUsCiAgICAgICAgcGF0dGVybjogIjAtOWEtekEtWjoiLAogICAgICAgIHBsYWNlaG9sZGVyOiBpbnRsLmZvcm1hdE1lc3NhZ2UobG9jYWxlTGFiZWwuYWRkcmVzc1BsYWNlaG9sZGVyKQogICAgICB9KSwgbm90Rm91bmQgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJyZWRub3RlIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJjdXN0b21FUkMyMF9Ob3RGb3VuZCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJUaGlzIGlzIG5vdCBFUkMyMCBhZGRyZXNzIgogICAgICB9KSksIHRva2VuQWRkcmVzcyAmJiAhdGhpcy5hZGRyZXNzSXNDb3JyZWN0KCkgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJyZWRub3RlIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJjdXN0b21FUkMyMF9JbmNvcnJlY3RBZGRyZXNzIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkludmFsaWQgZXJjMjAgYWRkcmVzcyIKICAgICAgfSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiYnV0dG9uRnVsbE1hcmdpbiIsCiAgICAgICAgYnJhbmQ6IHRydWUsCiAgICAgICAgZnVsbFdpZHRoOiB0cnVlLAogICAgICAgIGRpc2FibGVkOiBpc0Rpc2FibGVkLAogICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlU3VibWl0CiAgICAgIH0sIGlzU2hpcHBlZCA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZyYWdtZW50LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJjdXN0b21FUkMyMF9Qcm9jZXNzaW5nIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlByb2Nlc3NpbmcgLi4uIgogICAgICB9KSkgOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGcmFnbWVudCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiY3VzdG9tRVJDMjBfTmV4dFN0ZXAiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTlx1MDQzNXh0IgogICAgICB9KSkpKSwgc3RlcCA9PT0gJ2NvbmZpcm0nICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZyYWdtZW50LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogImxvd0xldmVsIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGaWVsZExhYmVsLCB7CiAgICAgICAgaW5Sb3c6IHRydWUKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgICAgc3R5bGVOYW1lOiAidGl0bGUiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogImN1c3RvbUVSQzIwX0FkZHJlc3MiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiZXJjMjAgYWRkcmVzcyIKICAgICAgfSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJmYWtlSW5wdXQiCiAgICAgIH0sIHRva2VuQWRkcmVzcykpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogImxvd0xldmVsIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGaWVsZExhYmVsLCB7CiAgICAgICAgaW5Sb3c6IHRydWUKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgICAgc3R5bGVOYW1lOiAidGl0bGUiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogImN1c3RvbUVSQzIwX1Rva2VuVGl0bGUiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiVGl0bGUiCiAgICAgIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiZmFrZUlucHV0IgogICAgICB9LCB0b2tlblRpdGxlKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAibG93TGV2ZWwiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZpZWxkTGFiZWwsIHsKICAgICAgICBpblJvdzogdHJ1ZQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJ0aXRsZSIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiY3VzdG9tRVJDMjBfVG9rZW5TeW1ib2wiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiU3ltYm9sIgogICAgICB9KSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogImZha2VJbnB1dCIKICAgICAgfSwgdG9rZW5TeW1ib2wpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJsb3dMZXZlbCIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRmllbGRMYWJlbCwgewogICAgICAgIGluUm93OiB0cnVlCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgewogICAgICAgIHN0eWxlTmFtZTogInRpdGxlIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJjdXN0b21FUkMyMF9Ub2tlbkRlY2ltYWxzIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkRlY2ltYWxzIgogICAgICB9KSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogImZha2VJbnB1dCIKICAgICAgfSwgdG9rZW5EZWNpbWFscykpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHsKICAgICAgICBzdHlsZU5hbWU6ICJidXR0b25GdWxsTWFyZ2luIiwKICAgICAgICBicmFuZDogdHJ1ZSwKICAgICAgICBmdWxsV2lkdGg6IHRydWUsCiAgICAgICAgZGlzYWJsZWQ6IGlzRGlzYWJsZWQsCiAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVDb25maXJtCiAgICAgIH0sIGlzU2hpcHBlZCA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZyYWdtZW50LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJjdXN0b21FUkMyMF9Qcm9jZXNzaW5nIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlByb2Nlc3NpbmcgLi4uIgogICAgICB9KSkgOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGcmFnbWVudCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiY3VzdG9tRVJDMjBfQ29uZmlybVN0ZXAiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQWRkIHRoaXMgdG9rZW4iCiAgICAgIH0pKSkpLCBzdGVwID09PSAncmVhZHknICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZyYWdtZW50LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiaDQiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAicmVhZHlUaXRsZSIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiY3VzdG9tRVJDMjBfUmVhZHlNZXNzYWdlIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlRva2VuIGFkZGVkIHN1Y2Nlc3NmdWxseSIKICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHsKICAgICAgICBzdHlsZU5hbWU6ICJidXR0b25GdWxsTWFyZ2luIiwKICAgICAgICBicmFuZDogdHJ1ZSwKICAgICAgICBmdWxsV2lkdGg6IHRydWUsCiAgICAgICAgZGlzYWJsZWQ6IGlzRGlzYWJsZWQsCiAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVSZWFkeQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGcmFnbWVudCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiY3VzdG9tRVJDMjBfUmVhZHkiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRG9uZSIKICAgICAgfSkpKSkpKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBBZGRDdXN0b21FUkMyMDsKfShSZWFjdC5Db21wb25lbnQpLCBfdGVtcCkpIHx8IF9jbGFzcykgfHwgX2NsYXNzKTsKZXhwb3J0IHsgQWRkQ3VzdG9tRVJDMjAgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/front/shared/components/modals/AddCustomERC20/AddCustomERC20.tsx"],"names":["React","Fragment","request","actions","Link","config","cssModules","styles","ownStyle","Modal","FieldLabel","Input","Button","FormattedMessage","injectIntl","defineMessages","typeforce","Web3","etherscanApi","api","etherscan","Array","serviceURL","etherscan_ApiKey","nameSignature","decimalsSignature","symbolSignature","AddCustomERC20","allowMultiple","props","tokenAddress","state","setState","isShipped","getName","tokenTitle","getSymbol","tokenSymbol","getDecimals","tokenDecimals","step","notFound","setTimeout","token","core","markCoinAsVisible","toUpperCase","window","location","reload","err","console","error","address","get","response","hexSymbol","result","symbol","utils","toUtf8","replace","hexDecimals","decimals","hexToNumber","isCoinAddress","ETH","name","intl","linked","all","isDisabled","addressIsCorrect","localeLabel","title","id","defaultMessage","addressPlaceholder","formatMessage","fontSize","handleSubmit","handleConfirm","handleReady","Component"],"mappings":"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","sourcesContent":["import React, { Fragment } from 'react'\r\nimport request from 'common/utils/request'\r\nimport actions from 'redux/actions'\r\nimport Link from 'local_modules/sw-valuelink'\r\nimport config from 'app-config'\r\n\r\nimport cssModules from 'react-css-modules'\r\nimport styles from '../Styles/default.scss'\r\nimport ownStyle from './AddCustomERC20.scss'\r\n\r\nimport Modal from 'components/modal/Modal/Modal'\r\nimport FieldLabel from 'components/forms/FieldLabel/FieldLabel'\r\nimport Input from 'components/forms/Input/Input'\r\nimport Button from 'components/controls/Button/Button'\r\nimport { FormattedMessage, injectIntl, defineMessages } from 'react-intl'\r\n\r\nimport typeforce from 'swap.app/util/typeforce'\r\nimport Web3 from 'web3'\r\n\r\ntype AddCustomERC20Props = {\r\n  name: string\r\n  style: IUniversalObj\r\n  history: IUniversalObj\r\n  intl: IUniversalObj\r\n}\r\n\r\ntype AddCustomERC20State = {\r\n  step: string\r\n  tokenAddress: string\r\n  tokenTitle: string\r\n  tokenSymbol: string\r\n  tokenDecimals: number\r\n  notFound: boolean\r\n  isShipped: boolean\r\n}\r\n\r\nconst etherscanApi = (config.api.etherscan instanceof Array) ? config.api.etherscan[0] : config.api.etherscan\r\nconst serviceURL = `${etherscanApi}?apikey=${config.api.etherscan_ApiKey}&module=proxy&action=eth_call`\r\n\r\n\r\nconst nameSignature = '0x06fdde03'\r\nconst decimalsSignature = '0x313ce567'\r\nconst symbolSignature = '0x95d89b41'\r\n\r\n@injectIntl\r\n@cssModules({ ...styles, ...ownStyle }, { allowMultiple: true })\r\nexport default class AddCustomERC20 extends React.Component<any, any> {\r\n  \r\n  props: AddCustomERC20Props\r\n  state: AddCustomERC20State\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      step: 'enterAddress',\r\n      tokenAddress: '',\r\n      tokenTitle: '',\r\n      tokenSymbol: '',\r\n      tokenDecimals: 0,\r\n      notFound: false,\r\n      isShipped: false,\r\n    }\r\n  }\r\n\r\n  async getName(address) {\r\n    const response: any = await request.get(`${serviceURL}&to=${address}&data=${nameSignature}`)\r\n    const hexSymbol = response.result\r\n    const symbol = Web3.utils.toUtf8(hexSymbol)\r\n\r\n    return symbol.replace(/\\W/g, '')\r\n  }\r\n\r\n  async getSymbol(address) {\r\n    const response: any = await request.get(`${serviceURL}&to=${address}&data=${symbolSignature}`)\r\n    const hexSymbol = response.result\r\n    const symbol = Web3.utils.toUtf8(hexSymbol)\r\n\r\n    return symbol.replace(/\\W/g, '')\r\n  }\r\n\r\n  async getDecimals(address) {\r\n    const response: any = await request.get(`${serviceURL}&to=${address}&data=${decimalsSignature}`)\r\n    const hexDecimals = response.result\r\n    const decimals = Web3.utils.hexToNumber(hexDecimals)\r\n\r\n    return decimals\r\n  }\r\n\r\n  handleSubmit = async () => {\r\n    const { tokenAddress } = this.state\r\n\r\n    this.setState({\r\n      isShipped: true,\r\n    })\r\n\r\n    const tokenTitle = await this.getName(tokenAddress)\r\n    const tokenSymbol = await this.getSymbol(tokenAddress)\r\n    const tokenDecimals = await this.getDecimals(tokenAddress)\r\n\r\n    if (tokenSymbol) {\r\n      this.setState({\r\n        tokenTitle,\r\n        tokenSymbol,\r\n        tokenDecimals,\r\n        step: 'confirm',\r\n        isShipped: false,\r\n      })\r\n    } else {\r\n      this.setState({\r\n        notFound: true,\r\n        isShipped: false,\r\n      })\r\n      setTimeout(() => {\r\n        this.setState({\r\n          notFound: false,\r\n        })\r\n      }, 5000)\r\n    }\r\n  }\r\n\r\n  handleConfirm = async () => {\r\n    const { tokenAddress, tokenSymbol, tokenDecimals } = this.state\r\n    actions.token.AddCustomERC20(tokenAddress, tokenSymbol, tokenDecimals)\r\n    actions.core.markCoinAsVisible(tokenSymbol.toUpperCase(), true)\r\n\r\n    this.setState({\r\n      step: 'ready',\r\n    })\r\n  }\r\n\r\n  handleReady = async () => {\r\n    window.location.reload()\r\n  }\r\n\r\n  addressIsCorrect() {\r\n    const { tokenAddress } = this.state\r\n    return typeforce.isCoinAddress.ETH(tokenAddress)\r\n  }\r\n\r\n  handleError = (err) => {\r\n    console.error(err)\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      step,\r\n      tokenAddress,\r\n      tokenTitle,\r\n      tokenSymbol,\r\n      tokenDecimals,\r\n      isShipped,\r\n      notFound,\r\n    } = this.state\r\n\r\n    const {\r\n      name,\r\n      intl,\r\n    } = this.props\r\n\r\n    const linked = Link.all(this, 'tokenAddress')\r\n\r\n    const isDisabled = !tokenAddress || isShipped || !this.addressIsCorrect()\r\n\r\n    const localeLabel = defineMessages({\r\n      title: {\r\n        id: 'customERC20_Title',\r\n        defaultMessage: 'Add new ERC20',\r\n      },\r\n      addressPlaceholder: {\r\n        id: 'customERC20_addressPlaceholder',\r\n        defaultMessage: 'Enter token address',\r\n      },\r\n    })\r\n\r\n    return (\r\n      <Modal\r\n        name={name}\r\n        title={`${intl.formatMessage(localeLabel.title)}`}\r\n      >\r\n        <div styleName=\"erc20ModalHolder\">\r\n          {step === 'enterAddress' && (\r\n            <Fragment>\r\n              <div styleName=\"highLevel\">\r\n                <FieldLabel inRow>\r\n                  <span style={{ fontSize: '16px' }}>\r\n                    <FormattedMessage id=\"customERC20_Address\" defaultMessage=\"erc20 address\" />\r\n                  </span>\r\n                </FieldLabel>\r\n                <Input\r\n                  valueLink={linked.tokenAddress}\r\n                  focusOnInit\r\n                  pattern=\"0-9a-zA-Z:\"\r\n                  placeholder={intl.formatMessage(localeLabel.addressPlaceholder)}\r\n                />\r\n                {notFound && (\r\n                  <div styleName=\"rednote\">\r\n                    <FormattedMessage\r\n                      id=\"customERC20_NotFound\"\r\n                      defaultMessage=\"This is not ERC20 address\"\r\n                    />\r\n                  </div>\r\n                )}\r\n                {tokenAddress && !this.addressIsCorrect() && (\r\n                  <div styleName=\"rednote\">\r\n                    <FormattedMessage\r\n                      id=\"customERC20_IncorrectAddress\"\r\n                      defaultMessage=\"Invalid erc20 address\"\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <Button\r\n                styleName=\"buttonFullMargin\"\r\n                brand\r\n                fullWidth\r\n                disabled={isDisabled}\r\n                onClick={this.handleSubmit}\r\n              >\r\n                {isShipped ? (\r\n                  <Fragment>\r\n                    <FormattedMessage id=\"customERC20_Processing\" defaultMessage=\"Processing ...\" />\r\n                  </Fragment>\r\n                ) : (\r\n                  <Fragment>\r\n                    <FormattedMessage id=\"customERC20_NextStep\" defaultMessage=\"Nеxt\" />\r\n                  </Fragment>\r\n                )}\r\n              </Button>\r\n            </Fragment>\r\n          )}\r\n          {step === 'confirm' && (\r\n            <Fragment>\r\n              <div styleName=\"lowLevel\">\r\n                <FieldLabel inRow>\r\n                  <span styleName=\"title\">\r\n                    <FormattedMessage id=\"customERC20_Address\" defaultMessage=\"erc20 address\" />\r\n                  </span>\r\n                </FieldLabel>\r\n                <div styleName=\"fakeInput\">{tokenAddress}</div>\r\n              </div>\r\n              <div styleName=\"lowLevel\">\r\n                <FieldLabel inRow>\r\n                  <span styleName=\"title\">\r\n                    <FormattedMessage\r\n                      id=\"customERC20_TokenTitle\"\r\n                      defaultMessage=\"Title\"\r\n                    />\r\n                  </span>\r\n                </FieldLabel>\r\n                <div styleName=\"fakeInput\">{tokenTitle}</div>\r\n              </div>\r\n              <div styleName=\"lowLevel\">\r\n                <FieldLabel inRow>\r\n                  <span styleName=\"title\">\r\n                    <FormattedMessage id=\"customERC20_TokenSymbol\" defaultMessage=\"Symbol\" />\r\n                  </span>\r\n                </FieldLabel>\r\n                <div styleName=\"fakeInput\">{tokenSymbol}</div>\r\n              </div>\r\n              <div styleName=\"lowLevel\">\r\n                <FieldLabel inRow>\r\n                  <span styleName=\"title\">\r\n                    <FormattedMessage\r\n                      id=\"customERC20_TokenDecimals\"\r\n                      defaultMessage=\"Decimals\"\r\n                    />\r\n                  </span>\r\n                </FieldLabel>\r\n                <div styleName=\"fakeInput\">{tokenDecimals}</div>\r\n              </div>\r\n              <Button\r\n                styleName=\"buttonFullMargin\"\r\n                brand\r\n                fullWidth\r\n                disabled={isDisabled}\r\n                onClick={this.handleConfirm}\r\n              >\r\n                {isShipped ? (\r\n                  <Fragment>\r\n                    <FormattedMessage id=\"customERC20_Processing\" defaultMessage=\"Processing ...\" />\r\n                  </Fragment>\r\n                ) : (\r\n                  <Fragment>\r\n                    <FormattedMessage\r\n                      id=\"customERC20_ConfirmStep\"\r\n                      defaultMessage=\"Add this token\"\r\n                    />\r\n                  </Fragment>\r\n                )}\r\n              </Button>\r\n            </Fragment>\r\n          )}\r\n          {step === 'ready' && (\r\n            <Fragment>\r\n              <h4 styleName=\"readyTitle\">\r\n                <FormattedMessage\r\n                  id=\"customERC20_ReadyMessage\"\r\n                  defaultMessage=\"Token added successfully\"\r\n                />\r\n              </h4>\r\n              <Button\r\n                styleName=\"buttonFullMargin\"\r\n                brand\r\n                fullWidth\r\n                disabled={isDisabled}\r\n                onClick={this.handleReady}\r\n              >\r\n                <Fragment>\r\n                  <FormattedMessage id=\"customERC20_Ready\" defaultMessage=\"Done\" />\r\n                </Fragment>\r\n              </Button>\r\n            </Fragment>\r\n          )}\r\n        </div>\r\n      </Modal>\r\n    )\r\n  }\r\n}\r\n"]}]}