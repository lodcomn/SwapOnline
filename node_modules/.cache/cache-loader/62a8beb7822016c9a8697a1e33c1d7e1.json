{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\core\\swap.flows\\turbo\\Taker.ts","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\core\\swap.flows\\turbo\\Taker.ts","mtime":1614842913761},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI7CmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXNzZXJ0VGhpc0luaXRpYWxpemVkIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZ2V0IjsKaW1wb3J0IF9nZXRQcm90b3R5cGVPZiBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2dldFByb3RvdHlwZU9mIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IiOwoKZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH0KCmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7IGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gInVuZGVmaW5lZCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09ICJmdW5jdGlvbiIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9CgppbXBvcnQgZGVidWcgZnJvbSAnZGVidWcnOwppbXBvcnQgeyBGbG93IH0gZnJvbSAnc3dhcC5zd2FwJzsKCnZhciBUdXJib1Rha2VyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfRmxvdykgewogIF9pbmhlcml0cyhUdXJib1Rha2VyLCBfRmxvdyk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoVHVyYm9UYWtlcik7CgogIGZ1bmN0aW9uIFR1cmJvVGFrZXIoc3dhcCkgewogICAgdmFyIF90aGlzU3VwZXIsIF90aGlzU3VwZXIyLCBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVHVyYm9UYWtlcik7CgogICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBzd2FwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJfZmxvd05hbWUiLCAnVHVyYm9UYWtlcicpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm15U3dhcCIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAicGFydGljaXBhbnRTd2FwIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJzdGF0ZSIsIHZvaWQgMCk7CgogICAgY29uc29sZS5sb2coJ0NyZWF0ZSBUYWtlciBmbG93IChzd2FwKSwgPScsIHN3YXApOwogICAgX3RoaXMuc3RlcE51bWJlcnMgPSB7CiAgICAgICdzaWduJzogMSwKICAgICAgJ2NoZWNrLWJhbGFuY2UnOiAyLAogICAgICAnc2VuZC10YWtlci10eCc6IDMsCiAgICAgICd3YWl0LW1ha2VyLXR4JzogNCwKICAgICAgJ2ZpbmlzaCc6IDUsCiAgICAgICdlbmQnOiA2CiAgICB9OwogICAgX3RoaXMubXlTd2FwID0gc3dhcC5vd25lclN3YXA7CiAgICBfdGhpcy5wYXJ0aWNpcGFudFN3YXAgPSBzd2FwLnBhcnRpY2lwYW50U3dhcDsKICAgIF90aGlzLnN0YXRlID0gewogICAgICBzdGVwOiAwLAogICAgICBpc1NpZ25GZXRjaGluZzogZmFsc2UsCiAgICAgIGlzTWVTaWduZWQ6IGZhbHNlLAogICAgICBpc0JhbGFuY2VGZXRjaGluZzogZmFsc2UsCiAgICAgIGlzQmFsYW5jZUVub3VnaDogdHJ1ZSwKICAgICAgdGFrZXJUeEhhc2g6IG51bGwsCiAgICAgIGlzVGFrZXJUeFBlbmRlZDogZmFsc2UsCiAgICAgIG1ha2VyVHhIYXNoOiBudWxsLAogICAgICBpc01ha2VyVHhQZW5kZWQ6IGZhbHNlLAogICAgICBpc1N0b3BwZWRTd2FwOiBmYWxzZSwKICAgICAgaXNGaW5pc2hlZDogZmFsc2UKICAgIH07CgogICAgdmFyIGZsb3cgPSBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKTsKCiAgICB2YXIgcm9vbSA9IGZsb3cuc3dhcC5yb29tOwogICAgcm9vbS5vbmNlKCdyZXF1ZXN0IHdpdGhkcmF3JywgZnVuY3Rpb24gKCkgewogICAgICBmbG93LnNldFN0YXRlKHsvL3dpdGhkcmF3UmVxdWVzdEluY29taW5nOiB0cnVlLAogICAgICB9KTsKICAgIH0pOwoKICAgIF9nZXQoKF90aGlzU3VwZXIgPSBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgX2dldFByb3RvdHlwZU9mKFR1cmJvVGFrZXIucHJvdG90eXBlKSksICJfcGVyc2lzdFN0YXRlIiwgX3RoaXNTdXBlcikuY2FsbChfdGhpc1N1cGVyKTsKCiAgICBfZ2V0KChfdGhpc1N1cGVyMiA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBfZ2V0UHJvdG90eXBlT2YoVHVyYm9UYWtlci5wcm90b3R5cGUpKSwgIl9wZXJzaXN0U3RlcHMiLCBfdGhpc1N1cGVyMikuY2FsbChfdGhpc1N1cGVyMik7CgogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFR1cmJvVGFrZXIsIFt7CiAgICBrZXk6ICJfZ2V0U3RlcHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRTdGVwcygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgZmxvdyA9IHRoaXM7CiAgICAgIHZhciBzd2FwID0gdGhpcy5zd2FwOwogICAgICB2YXIgcm9vbSA9IHRoaXMuc3dhcC5yb29tOwogICAgICB2YXIgbXlTd2FwID0gdGhpcy5teVN3YXA7CiAgICAgIHZhciBwYXJ0aWNpcGFudFN3YXAgPSB0aGlzLnBhcnRpY2lwYW50U3dhcDsKICAgICAgcmV0dXJuIFsvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgX2Zsb3ckc3RhdGUsIGlzU2lnbkZldGNoaW5nLCBpc01lU2lnbmVkOwoKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlRha2VyIFN0ZXAgMTogJ3NpZ24nIik7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGhpcy5zd2FwID0nLCBzd2FwKTsgLy9mbG93LnN3YXAucHJvY2Vzc01ldGFtYXNrKCkKCiAgICAgICAgICAgICAgICBfZmxvdyRzdGF0ZSA9IGZsb3cuc3RhdGUsIGlzU2lnbkZldGNoaW5nID0gX2Zsb3ckc3RhdGUuaXNTaWduRmV0Y2hpbmcsIGlzTWVTaWduZWQgPSBfZmxvdyRzdGF0ZS5pc01lU2lnbmVkOwoKICAgICAgICAgICAgICAgIGlmICghKGlzU2lnbkZldGNoaW5nIHx8IGlzTWVTaWduZWQpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB0cnVlKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgZmxvdy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIGlzU2lnbkZldGNoaW5nOiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJvb20ub24oJ3JlcXVlc3Qgc2lnbicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgcm9vbS5zZW5kTWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdzd2FwIHNpZ24nCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByb29tLnNlbmRNZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdzd2FwIHNpZ24nCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGZsb3cuZmluaXNoU3RlcCh7CiAgICAgICAgICAgICAgICAgIGlzTWVTaWduZWQ6IHRydWUKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgc3RlcDogJ3NpZ24nCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHRydWUpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlRha2VyIFN0ZXAgMjogJ2NoZWNrLWJhbGFuY2UnIik7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGhpcy5zd2FwID0nLCBzd2FwKTsgLy8ganVzdCB0ZXN0CgogICAgICAgICAgICAgICAgLypjb25zdCBiMSA9IGF3YWl0IG15U3dhcC5mZXRjaEJhbGFuY2Uoc3dhcC5wYXJ0aWNpcGFudFtzd2FwLmJ1eUN1cnJlbmN5LnRvTG93ZXJDYXNlKCldLmFkZHJlc3MpDQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2IxPScsIGIxKQ0KICAgICAgICAgICAgICAgICAgY29uc3QgYjIgPSBhd2FpdCBwYXJ0aWNpcGFudFN3YXAuZmV0Y2hCYWxhbmNlKHN3YXAucGFydGljaXBhbnRbc3dhcC5zZWxsQ3VycmVuY3kudG9Mb3dlckNhc2UoKV0uYWRkcmVzcykNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYjI9JywgYjIpKi8KCiAgICAgICAgICAgICAgICAvKmNvbnN0IHsgc2VsbEFtb3VudCB9ID0gdGhpcy5zd2FwDQogICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsNCiAgICAgICAgICAgICAgICAgIGlzQmFsYW5jZUZldGNoaW5nOiB0cnVlLA0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICBjb25zdCBiYWxhbmNlID0gYXdhaXQgdGhpcy5ldGhTd2FwLmZldGNoQmFsYW5jZSgNCiAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLmdldE15RXRoQWRkcmVzcygpDQogICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgIGNvbnN0IGlzRW5vdWdoTW9uZXkgPSBzZWxsQW1vdW50LmlzTGVzc1RoYW5PckVxdWFsVG8oYmFsYW5jZSkNCiAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRlRGF0YSA9IHsNCiAgICAgICAgICAgICAgICAgIGlzQmFsYW5jZUZldGNoaW5nOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgIGlzQmFsYW5jZUVub3VnaDogaXNFbm91Z2hNb25leSwNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICBpZiAoaXNFbm91Z2hNb25leSkgew0KICAgICAgICAgICAgICAgICAgdGhpcy5maW5pc2hTdGVwKHN0YXRlRGF0YSwgeyBzdGVwOiAnY2hlY2stYmFsYW5jZScgfSkNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZURhdGEsIHRydWUpDQogICAgICAgICAgICAgICAgfSovCiAgICAgICAgICAgICAgICAvL3JldHVybiB0cnVlCiAgICAgICAgICAgICAgICAvL3RlbXAKCiAgICAgICAgICAgICAgICBfdGhpczIuZmluaXNoU3RlcCh7CiAgICAgICAgICAgICAgICAgIGlzQmFsYW5jZUVub3VnaDogdHJ1ZQogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICBzdGVwOiAnY2hlY2stYmFsYW5jZScKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSksIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgYW1vdW50LCB0bywgdXNlZFN3YXAsIHR4SGFzaDsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJUYWtlciBTdGVwIDM6ICdzZW5kLXRha2VyLXR4JyIpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3RoaXMuc3dhcCA9Jywgc3dhcCk7IC8vIHNlbmQgdHgKCiAgICAgICAgICAgICAgICBhbW91bnQgPSBzd2FwLnNlbGxBbW91bnQ7CiAgICAgICAgICAgICAgICB0byA9IHN3YXAucGFydGljaXBhbnRbc3dhcC5zZWxsQ3VycmVuY3kudG9Mb3dlckNhc2UoKV0uYWRkcmVzczsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJTZW5kICIuY29uY2F0KGFtb3VudCwgIiAiKS5jb25jYXQoc3dhcC5zZWxsQ3VycmVuY3ksICIgdG8gbWFrZXIgYWRkcmVzcyBcIiIpLmNvbmNhdCh0bywgIlwiLi4uIikpOwoKICAgICAgICAgICAgICAgIGlmIChteVN3YXAuX3N3YXBOYW1lID09PSBzd2FwLnNlbGxDdXJyZW5jeS50b1VwcGVyQ2FzZSgpKSB7CiAgICAgICAgICAgICAgICAgIHVzZWRTd2FwID0gbXlTd2FwOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChwYXJ0aWNpcGFudFN3YXAuX3N3YXBOYW1lID09PSBzd2FwLnNlbGxDdXJyZW5jeS50b1VwcGVyQ2FzZSgpKSB7CiAgICAgICAgICAgICAgICAgIHVzZWRTd2FwID0gcGFydGljaXBhbnRTd2FwOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICh1c2VkU3dhcCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIk5vIHN3YXAgZm9yICIuY29uY2F0KHN3YXAuc2VsbEN1cnJlbmN5KSk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU3dhcCBmb3VuZCEnLCB1c2VkU3dhcCk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgcmV0dXJuIHVzZWRTd2FwLnNlbmRUcmFuc2FjdGlvbih7CiAgICAgICAgICAgICAgICAgIHRvOiB0bywKICAgICAgICAgICAgICAgICAgYW1vdW50OiBhbW91bnQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgdHhIYXNoID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiU2VuZGVkISB0eEhhc2ggPSAiLmNvbmNhdCh0eEhhc2gpKTsKICAgICAgICAgICAgICAgIHJvb20uc2VuZE1lc3NhZ2UoewogICAgICAgICAgICAgICAgICBldmVudDogJ3Rha2VyIHR4IHNlbmRlZCcsCiAgICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICB0eEhhc2g6IHR4SGFzaAogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGZsb3cuZmluaXNoU3RlcCh7CiAgICAgICAgICAgICAgICAgIHRha2VyVHhIYXNoOiB0eEhhc2gsCiAgICAgICAgICAgICAgICAgIGlzVGFrZXJUeFBlbmRlZDogdHJ1ZSAvLyB0b2RvIGxhdGVyCgogICAgICAgICAgICAgICAgfSwgJ3NlbmQtdGFrZXItdHgnKTsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSwgZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnNvbGUubG9nKCJUYWtlciBTdGVwIDQ6ICd3YWl0LW1ha2VyLXR4JyIpOwogICAgICAgIGNvbnNvbGUubG9nKCd0aGlzLnN3YXAgPScsIHN3YXApOwogICAgICAgIHJvb20ub25jZSgnbWFrZXIgdHggc2VuZGVkJywgZnVuY3Rpb24gKF9yZWY0KSB7CiAgICAgICAgICB2YXIgdHhIYXNoID0gX3JlZjQudHhIYXNoOwogICAgICAgICAgY29uc29sZS5sb2coIlJFQ0VJVkVEIGZyb20gbWFrZXI6IHR4IGhhc2ggPSIsIHR4SGFzaCk7CiAgICAgICAgICBjb25zb2xlLmxvZygnQ2hlY2sgbWFrZXIgdHguLi4nKTsgLy8gdG9kbzogdHggY2hlY2sKICAgICAgICAgIC8vLi4uIHx8IHRoaXMuc3RvcFN3YXBQcm9jZXNzKCkKCiAgICAgICAgICBjb25zb2xlLmxvZygnTWFrZXIgdHggaXMgT0shJyk7CiAgICAgICAgICBmbG93LmZpbmlzaFN0ZXAoewogICAgICAgICAgICBtYWtlclR4SGFzaDogdHhIYXNoLAogICAgICAgICAgICBpc01ha2VyVHhQZW5kZWQ6IHRydWUgLy8gdG9kbyBsYXRlcgoKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgc3RlcDogJ3dhaXQtbWFrZXItdHgnCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnNvbGUubG9nKCJUYWtlciBTdGVwIDU6ICdmaW5pc2gnIik7CiAgICAgICAgLypyb29tLm9uY2UoJ3JlcXVlc3Qgc3dhcCBmaW5pc2hlZCcsICgpID0+IHsNCiAgICAgICAgICBjb25zdCB7IGJ0Y1N3YXBXaXRoZHJhd1RyYW5zYWN0aW9uSGFzaCB9ID0gZmxvdy5zdGF0ZQ0KICAgICAgICAgICAgcm9vbS5zZW5kTWVzc2FnZSh7DQogICAgICAgICAgICBldmVudDogJ3N3YXAgZmluaXNoZWQnLA0KICAgICAgICAgICAgZGF0YTogew0KICAgICAgICAgICAgICBidGNTd2FwV2l0aGRyYXdUcmFuc2FjdGlvbkhhc2gsDQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0pDQogICAgICAgIH0pDQogICAgICAgICovCgogICAgICAgIGZsb3cuZmluaXNoU3RlcCh7CiAgICAgICAgICBpc0ZpbmlzaGVkOiB0cnVlCiAgICAgICAgfSwgewogICAgICAgICAgc3RlcDogJ2ZpbmlzaCcKICAgICAgICB9KTsKICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnNvbGUubG9nKCJUYWtlciBTdGVwIDY6ICdlbmQnIik7IC8vIEZpbmlzaGVkIQogICAgICB9XTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzdG9wU3dhcFByb2Nlc3MiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHN0b3BTd2FwUHJvY2VzcygpIHsKICAgICAgdmFyIGZsb3cgPSB0aGlzOwogICAgICBkZWJ1Zygnc3dhcC5jb3JlOmZsb3cnKSgnU3dhcCB3YXMgc3RvcHBlZCcpOwogICAgICBmbG93LnNldFN0YXRlKHsKICAgICAgICBpc1N0b3BwZWRTd2FwOiB0cnVlCiAgICAgIH0sIHRydWUpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFR1cmJvVGFrZXI7Cn0oRmxvdyk7CgpfZGVmaW5lUHJvcGVydHkoVHVyYm9UYWtlciwgImdldE5hbWUiLCBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuICdUdXJib1Rha2VyJzsKfSk7CgpleHBvcnQgeyBUdXJib1Rha2VyIGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/core/swap.flows/turbo/Taker.ts"],"names":["debug","Flow","TurboTaker","swap","console","log","stepNumbers","mySwap","ownerSwap","participantSwap","state","step","isSignFetching","isMeSigned","isBalanceFetching","isBalanceEnough","takerTxHash","isTakerTxPended","makerTxHash","isMakerTxPended","isStoppedSwap","isFinished","flow","room","once","setState","on","sendMessage","event","finishStep","amount","sellAmount","to","participant","sellCurrency","toLowerCase","address","_swapName","toUpperCase","usedSwap","Error","sendTransaction","txHash","data"],"mappings":"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","sourcesContent":["import debug from 'debug'\r\nimport SwapApp, { constants, util } from 'swap.app'\r\nimport { Flow } from 'swap.swap'\r\n\r\n\r\nexport default class TurboTaker extends Flow {\r\n\r\n  _flowName = 'TurboTaker'\r\n  static getName = () => 'TurboTaker'\r\n\r\n  mySwap: any\r\n  participantSwap: any\r\n\r\n  state: {\r\n    step: 0 | 1 | 2 | 3 | 4 | 5 | 6,\r\n\r\n    isSignFetching: boolean,\r\n    isMeSigned: boolean,\r\n\r\n    isBalanceFetching: boolean,\r\n    isBalanceEnough: boolean,\r\n\r\n    takerTxHash: null | string\r\n    isTakerTxPended: boolean\r\n\r\n    makerTxHash: null | string\r\n    isMakerTxPended: boolean\r\n\r\n    isStoppedSwap: boolean,\r\n    isFinished: boolean,\r\n  }\r\n\r\n  constructor(swap) {\r\n    super(swap)\r\n    console.log('Create Taker flow (swap), =', swap)\r\n\r\n    this.stepNumbers = {\r\n      'sign': 1,\r\n      'check-balance': 2,\r\n      'send-taker-tx': 3,\r\n      'wait-maker-tx': 4,\r\n      'finish': 5,\r\n      'end': 6\r\n    }\r\n\r\n    this.mySwap = swap.ownerSwap\r\n    this.participantSwap = swap.participantSwap\r\n\r\n    this.state = {\r\n      step: 0,\r\n\r\n      isSignFetching: false,\r\n      isMeSigned: false,\r\n\r\n      isBalanceFetching: false,\r\n      isBalanceEnough: true,\r\n\r\n      takerTxHash: null,\r\n      isTakerTxPended: false,\r\n\r\n      makerTxHash: null,\r\n      isMakerTxPended: false,\r\n\r\n      isStoppedSwap: false,\r\n      isFinished: false,\r\n    }\r\n\r\n    const flow = this\r\n    const room = flow.swap.room\r\n\r\n    room.once('request withdraw', () => {\r\n      flow.setState({\r\n        //withdrawRequestIncoming: true,\r\n      })\r\n    })\r\n\r\n    super._persistState()\r\n    super._persistSteps()\r\n  }\r\n\r\n  _getSteps() {\r\n    const flow = this\r\n    const swap = this.swap\r\n    const room = this.swap.room\r\n\r\n    const mySwap = this.mySwap\r\n    const participantSwap = this.participantSwap\r\n\r\n    return [\r\n\r\n      async () => {\r\n        console.log(`Taker Step 1: 'sign'`)\r\n        console.log('this.swap =', swap)\r\n\r\n        //flow.swap.processMetamask()\r\n\r\n        const { isSignFetching, isMeSigned } = flow.state\r\n\r\n        if (isSignFetching || isMeSigned) {\r\n          return true\r\n        }\r\n\r\n        flow.setState({\r\n          isSignFetching: true,\r\n        })\r\n\r\n        room.on('request sign', () => {\r\n          room.sendMessage({\r\n            event: 'swap sign',\r\n          })\r\n        })\r\n\r\n        room.sendMessage({\r\n          event: 'swap sign',\r\n        })\r\n\r\n        flow.finishStep({\r\n          isMeSigned: true,\r\n        }, { step: 'sign' })\r\n\r\n        return true\r\n      },\r\n\r\n\r\n      async () => {\r\n        console.log(`Taker Step 2: 'check-balance'`)\r\n        console.log('this.swap =', swap)\r\n\r\n        // just test\r\n\r\n        /*const b1 = await mySwap.fetchBalance(swap.participant[swap.buyCurrency.toLowerCase()].address)\r\n        console.log('b1=', b1)\r\n\r\n        const b2 = await participantSwap.fetchBalance(swap.participant[swap.sellCurrency.toLowerCase()].address)\r\n        console.log('b2=', b2)*/\r\n\r\n\r\n\r\n        /*const { sellAmount } = this.swap\r\n\r\n        this.setState({\r\n          isBalanceFetching: true,\r\n        })\r\n\r\n        const balance = await this.ethSwap.fetchBalance(\r\n          this.app.getMyEthAddress()\r\n        )\r\n        const isEnoughMoney = sellAmount.isLessThanOrEqualTo(balance)\r\n\r\n        const stateData = {\r\n          isBalanceFetching: false,\r\n          isBalanceEnough: isEnoughMoney,\r\n        }\r\n\r\n        if (isEnoughMoney) {\r\n          this.finishStep(stateData, { step: 'check-balance' })\r\n        } else {\r\n          this.setState(stateData, true)\r\n        }*/\r\n\r\n        //return true\r\n\r\n        //temp\r\n        this.finishStep({\r\n          isBalanceEnough: true,\r\n        }, { step: 'check-balance' })\r\n      },\r\n\r\n\r\n      async () => {\r\n        console.log(`Taker Step 3: 'send-taker-tx'`)\r\n        console.log('this.swap =', swap)\r\n\r\n        // send tx\r\n\r\n        const amount = swap.sellAmount\r\n        const to = swap.participant[swap.sellCurrency.toLowerCase()].address\r\n\r\n        console.log(`Send ${amount} ${swap.sellCurrency} to maker address \"${to}\"...`)\r\n\r\n        let usedSwap\r\n        if (mySwap._swapName === swap.sellCurrency.toUpperCase()) {\r\n          usedSwap = mySwap\r\n        }\r\n        if (participantSwap._swapName === swap.sellCurrency.toUpperCase()) {\r\n          usedSwap = participantSwap\r\n        }\r\n        if (!usedSwap) {\r\n          throw new Error(`No swap for ${swap.sellCurrency}`)\r\n        } else {\r\n          console.log('Swap found!', usedSwap)\r\n        }\r\n\r\n        const txHash = await usedSwap.sendTransaction({ to, amount })\r\n\r\n        console.log(`Sended! txHash = ${txHash}`)\r\n\r\n        room.sendMessage({\r\n          event: 'taker tx sended',\r\n          data: {\r\n            txHash,\r\n          }\r\n        })\r\n\r\n        flow.finishStep({\r\n          takerTxHash: txHash,\r\n          isTakerTxPended: true, // todo later\r\n        }, 'send-taker-tx')\r\n      },\r\n\r\n\r\n      () => {\r\n        console.log(`Taker Step 4: 'wait-maker-tx'`)\r\n        console.log('this.swap =', swap)\r\n\r\n        room.once('maker tx sended', ({ txHash }) => {\r\n          console.log(`RECEIVED from maker: tx hash =`, txHash)\r\n          console.log('Check maker tx...')\r\n          // todo: tx check\r\n          //... || this.stopSwapProcess()\r\n          console.log('Maker tx is OK!')\r\n          \r\n          flow.finishStep({\r\n            makerTxHash: txHash,\r\n            isMakerTxPended: true, // todo later\r\n          }, { step: 'wait-maker-tx' })\r\n        })\r\n      },\r\n\r\n\r\n      () => {\r\n        console.log(`Taker Step 5: 'finish'`)\r\n        /*room.once('request swap finished', () => {\r\n          const { btcSwapWithdrawTransactionHash } = flow.state\r\n\r\n          room.sendMessage({\r\n            event: 'swap finished',\r\n            data: {\r\n              btcSwapWithdrawTransactionHash,\r\n            },\r\n          })\r\n        })\r\n        */\r\n        flow.finishStep({\r\n          isFinished: true,\r\n        }, { step: 'finish' })\r\n      },\r\n\r\n\r\n      () => {\r\n        console.log(`Taker Step 6: 'end'`)\r\n        // Finished!\r\n      }\r\n    ]\r\n  }\r\n\r\n  stopSwapProcess() {\r\n    const flow = this\r\n\r\n    debug('swap.core:flow')('Swap was stopped')\r\n\r\n    flow.setState({\r\n      isStoppedSwap: true,\r\n    }, true)\r\n  }\r\n\r\n}\r\n"]}]}