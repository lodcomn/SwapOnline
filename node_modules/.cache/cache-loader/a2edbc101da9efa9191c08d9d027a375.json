{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\pages\\Exchange\\Orders\\Pair.ts","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\pages\\Exchange\\Orders\\Pair.ts","mtime":1614852659596},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5IjsKLy8gQHRzLW5vY2hlY2sKaW1wb3J0IEJpZ051bWJlciBmcm9tICdiaWdudW1iZXIuanMnOwppbXBvcnQgVE9LRU5fREVDSU1BTFMgZnJvbSAnaGVscGVycy9jb25zdGFudHMvVE9LRU5fREVDSU1BTFMnOwppbXBvcnQgVFJBREVfVElDS0VSUyBmcm9tICdoZWxwZXJzL2NvbnN0YW50cy9UUkFERV9USUNLRVJTJzsKaW1wb3J0IFBBSVJfVFlQRVMgZnJvbSAnaGVscGVycy9jb25zdGFudHMvUEFJUl9UWVBFUyc7CmltcG9ydCBjb25maWcgZnJvbSAnYXBwLWNvbmZpZyc7CnZhciBpc1dpZGdldEJ1aWxkID0gY29uZmlnICYmIGNvbmZpZy5pc1dpZGdldDsKY29uc29sZS5sb2coJ1RPS0VOX0RFQ0lNQUxTJywgVE9LRU5fREVDSU1BTFMpOwpjb25zb2xlLmxvZygnVFJBREVfVElDS0VSUycsIFRSQURFX1RJQ0tFUlMpOwp2YXIgUEFJUl9CSUQgPSBQQUlSX1RZUEVTLkJJRDsKdmFyIFBBSVJfQVNLID0gUEFJUl9UWVBFUy5BU0s7Cgp2YXIgX2lzQXNrID0gZnVuY3Rpb24gaXNBc2sodHlwZSkgewogIHJldHVybiB0eXBlID09PSBQQUlSX1RZUEVTLkFTSzsKfTsKCnZhciBfaXNCaWQgPSBmdW5jdGlvbiBpc0JpZCh0eXBlKSB7CiAgcmV0dXJuIHR5cGUgPT09IFBBSVJfVFlQRVMuQklEOwp9OwoKdmFyIGZpbHRlcmVkRGVjaW1hbHMgPSBmdW5jdGlvbiBmaWx0ZXJlZERlY2ltYWxzKF9yZWYpIHsKICB2YXIgYW1vdW50ID0gX3JlZi5hbW91bnQsCiAgICAgIGN1cnJlbmN5ID0gX3JlZi5jdXJyZW5jeTsKICByZXR1cm4gbmV3IEJpZ051bWJlcihhbW91bnQpLmRlY2ltYWxQbGFjZXMoVE9LRU5fREVDSU1BTFNbY3VycmVuY3ldIHx8IDApLnRvU3RyaW5nKCk7Cn07CgpleHBvcnQgdmFyIHBhcnNlVGlja2VyID0gZnVuY3Rpb24gcGFyc2VUaWNrZXIob3JkZXIpIHsKICB2YXIgYnV5ID0gb3JkZXIuYnV5Q3VycmVuY3ksCiAgICAgIHNlbGwgPSBvcmRlci5zZWxsQ3VycmVuY3k7CiAgdmFyIEJTID0gIiIuY29uY2F0KGJ1eSwgIi0iKS5jb25jYXQoc2VsbCkudG9VcHBlckNhc2UoKTsgLy8gYnV5cyBFVEgsIHNlbGxzIEJUQywgQklECgogIHZhciBTQiA9ICIiLmNvbmNhdChzZWxsLCAiLSIpLmNvbmNhdChidXkpLnRvVXBwZXJDYXNlKCk7IC8vIHNlbGxzIEVUSCA9IEFTSwoKICBpZiAoVFJBREVfVElDS0VSUy5pbmNsdWRlcyhCUykpIHsKICAgIHJldHVybiB7CiAgICAgIHRpY2tlcjogQlMsCiAgICAgIHR5cGU6IFBBSVJfQklECiAgICB9OwogIH0KCiAgaWYgKFRSQURFX1RJQ0tFUlMuaW5jbHVkZXMoU0IpKSB7CiAgICByZXR1cm4gewogICAgICB0aWNrZXI6IFNCLAogICAgICB0eXBlOiBQQUlSX0FTSwogICAgfTsKICB9CgogIGlmICghaXNXaWRnZXRCdWlsZCkgewogICAgY29uc29sZS53YXJuKCJQYXJzZVRpY2tlckVycm9yOiBObyBzdWNoIHRpY2tlcnM6ICIuY29uY2F0KEJTLCAiLCIpLmNvbmNhdChTQikpOwogIH0KCiAgcmV0dXJuIHsKICAgIHRpY2tlcjogJ25vbmUnLAogICAgdHlwZTogUEFJUl9CSUQKICB9Owp9OwpleHBvcnQgdmFyIHBhcnNlUGFpciA9IGZ1bmN0aW9uIHBhcnNlUGFpcihzdHIpIHsKICBpZiAoIXN0cikgewogICAgdGhyb3cgbmV3IEVycm9yKCJFbXB0eSBzdHJpbmc6ICIuY29uY2F0KHN0cikpOwogIH0KCiAgaWYgKHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoIlBhcnNlVGlja2VyRXJyb3I6IE5vdCBhIHN0cmluZzogIi5jb25jYXQoc3RyKSk7CiAgfQoKICB2YXIgdG9rZW5zID0gc3RyLnNwbGl0KCctJyk7CgogIGlmICh0b2tlbnMubGVuZ3RoICE9PSAyKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoIlBhcnNlVGlja2VyRXJyb3I6IFdyb25nIHRva2VuczogIi5jb25jYXQoc3RyKSk7CiAgfQoKICBpZiAoIVRSQURFX1RJQ0tFUlMuaW5jbHVkZXMoc3RyKSkgewogICAgc3RyID0gdG9rZW5zLnJldmVyc2UoKS5qb2luKCctJyk7CiAgfQoKICBpZiAoIVRSQURFX1RJQ0tFUlMuaW5jbHVkZXMoc3RyKSkgewogICAgdGhyb3cgbmV3IEVycm9yKCJQYXJzZVRpY2tlckVycm9yOiBUaWNrZXIgbm90IGZvdW5kOiAiLmNvbmNhdChzdHIpKTsKICB9CgogIHZhciBNQUlOID0gdG9rZW5zWzBdLnRvVXBwZXJDYXNlKCk7CiAgdmFyIEJBU0UgPSB0b2tlbnNbMV0udG9VcHBlckNhc2UoKTsKICByZXR1cm4gewogICAgTUFJTjogTUFJTiwKICAgIEJBU0U6IEJBU0UKICB9Owp9OwoKdmFyIFBhaXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFBhaXIoX3JlZjIpIHsKICAgIHZhciBwcmljZSA9IF9yZWYyLnByaWNlLAogICAgICAgIGFtb3VudCA9IF9yZWYyLmFtb3VudCwKICAgICAgICB0aWNrZXIgPSBfcmVmMi50aWNrZXIsCiAgICAgICAgdHlwZSA9IF9yZWYyLnR5cGU7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBhaXIpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicHJpY2UiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYW1vdW50Iiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInRpY2tlciIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJtYWluIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImJhc2UiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidHlwZSIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ0b3RhbCIsIHZvaWQgMCk7CgogICAgdGhpcy5wcmljZSA9IG5ldyBCaWdOdW1iZXIocHJpY2UpOwogICAgdGhpcy5hbW91bnQgPSBuZXcgQmlnTnVtYmVyKGFtb3VudCk7CgogICAgdmFyIF9wYXJzZVBhaXIgPSBwYXJzZVBhaXIodGlja2VyKSwKICAgICAgICBNQUlOID0gX3BhcnNlUGFpci5NQUlOLAogICAgICAgIEJBU0UgPSBfcGFyc2VQYWlyLkJBU0U7CgogICAgaWYgKCFNQUlOIHx8ICFCQVNFKSB0aHJvdyBuZXcgRXJyb3IoIkNyZWF0ZU9yZGVyRXJyb3I6IE5vIGN1cnJlbmN5OiAiLmNvbmNhdChNQUlOLCAiLSIpLmNvbmNhdChCQVNFKSk7CiAgICB0aGlzLnRpY2tlciA9IHRpY2tlcjsKICAgIHRoaXMubWFpbiA9IE1BSU47CiAgICB0aGlzLmJhc2UgPSBCQVNFOwogICAgdGhpcy50eXBlID0gdHlwZSA9PT0gUEFJUl9UWVBFUy5CSUQgPyBQQUlSX1RZUEVTLkJJRCA6IFBBSVJfVFlQRVMuQVNLOwogICAgdGhpcy50b3RhbCA9IHRoaXMucHJpY2UudGltZXModGhpcy5hbW91bnQpOwogIH0KICAvKg0KICAqIDEwIEVUSCAtPiAxIEJUQw0KICAqDQogICogdGlja2VyOiBFVEgtQlRDDQogICoNCiAgKiBTbyB3ZSBhcmUgb24gRVRIIG1hcmtldCwgdGh1czoNCiAgKiAgIC0gQVNLIG9yZGVycyBhcmUgU0VMTCBFVEggKGZvciBCVEMpLA0KICAqICAgLSBCSUQgb3JkZXJzIGFyZSBCVVkgRVRIIChmb3IgQlRDKQ0KICAqDQogICogVGhpcyBvcmRlciBpcyBTRUxMSU5HIEVUSCwgdG8gaXQncyBBU0sNCiAgKiB0eXBlOiBCSUQgPSB0cnVlLCBBU0sgPSBmYWxzZQ0KICAqDQogICogUHJpY2UgaXMgYWxzbyBjYWxjdWxhdGVkIGluIEJUQywgd2hpbGUgYW1vdW50IGluIEVUSA0KICAqIHByaWNlOiAwLjENCiAgKiBhbW91bnQ6IDEwDQogICoNCiAgKg0KICAqIFNvLCBmb3IgdHlwZSA9IEFTSw0KICAqDQogICogYnV5Q3VycmVuY3k6IEJUQyA9IGJhc2UNCiAgKiBzZWxsQ3VycmVuY3k6IEVUSCA9IG1haW4NCiAgKiBidXlBbW91bnQ6IDEgQlRDID0gKDAuMSBCVEMvRVRIKSAqIDEwIEVUSCA9IHByaWNlICogYW1vdW50DQogICogc2VsbEFtb3VudDogMTAgRVRIID0gMTAgRVRIID0gYW1vdW50DQogICoNCiAgKi8KCgogIF9jcmVhdGVDbGFzcyhQYWlyLCBbewogICAga2V5OiAidG9PcmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdG9PcmRlcigpIHsKICAgICAgdmFyIHRpY2tlciA9IHRoaXMudGlja2VyLAogICAgICAgICAgdHlwZSA9IHRoaXMudHlwZSwKICAgICAgICAgIHByaWNlID0gdGhpcy5wcmljZSwKICAgICAgICAgIGFtb3VudCA9IHRoaXMuYW1vdW50OwogICAgICBjb25zb2xlLmxvZygiY3JlYXRlIG9yZGVyICIuY29uY2F0KHRoaXMpKTsKCiAgICAgIHZhciBfcGFyc2VQYWlyMiA9IHBhcnNlUGFpcih0aWNrZXIpLAogICAgICAgICAgTUFJTiA9IF9wYXJzZVBhaXIyLk1BSU4sCiAgICAgICAgICBCQVNFID0gX3BhcnNlUGFpcjIuQkFTRTsgLy9ACgoKICAgICAgaWYgKCFNQUlOIHx8ICFCQVNFKSB0aHJvdyBuZXcgRXJyb3IoIkNyZWF0ZU9yZGVyRXJyb3I6IE5vIGN1cnJlbmN5OiAiLmNvbmNhdChtYWluLCAiLSIpLmNvbmNhdChiYXNlKSk7CiAgICAgIGlmICghW1BBSVJfQVNLLCBQQUlSX0JJRF0uaW5jbHVkZXModHlwZSkpIHRocm93IG5ldyBFcnJvcigiQ3JlYXRlT3JkZXJFcnJvcjogV3Jvbmcgb3JkZXIgdHlwZTogIi5jb25jYXQodHlwZSkpOwogICAgICB2YXIgYmFzZSA9IHsKICAgICAgICBjdXJyZW5jeTogQkFTRSwKICAgICAgICBhbW91bnQ6IGFtb3VudC50aW1lcyhwcmljZSkKICAgICAgfTsKICAgICAgdmFyIG1haW4gPSB7CiAgICAgICAgY3VycmVuY3k6IE1BSU4sCiAgICAgICAgYW1vdW50OiBhbW91bnQKICAgICAgfTsKICAgICAgdmFyIGJ1eSA9IHR5cGUgPT09IFBBSVJfQVNLID8gYmFzZSA6IG1haW47CiAgICAgIHZhciBzZWxsID0gdHlwZSA9PT0gUEFJUl9BU0sgPyBtYWluIDogYmFzZTsKICAgICAgcmV0dXJuIHsKICAgICAgICBidXlDdXJyZW5jeTogYnV5LmN1cnJlbmN5LAogICAgICAgIHNlbGxDdXJyZW5jeTogc2VsbC5jdXJyZW5jeSwKICAgICAgICBidXlBbW91bnQ6IGZpbHRlcmVkRGVjaW1hbHMoYnV5KSwKICAgICAgICBzZWxsQW1vdW50OiBmaWx0ZXJlZERlY2ltYWxzKHNlbGwpLAogICAgICAgIGV4Y2hhbmdlUmF0ZTogcHJpY2UgLy8gaXNBc2sodHlwZSkgPyBwcmljZSA6IDEvcHJpY2UKCiAgICAgIH07CiAgICB9CiAgfSwgewogICAga2V5OiAidG9TdHJpbmciLAogICAgdmFsdWU6IGZ1bmN0aW9uIHRvU3RyaW5nKCkgewogICAgICB2YXIgdHlwZSA9IHRoaXMudHlwZSA9PT0gUEFJUl9UWVBFUy5CSUQgPyAnYmlkJyA6ICdhc2snOwogICAgICByZXR1cm4gIiIuY29uY2F0KHR5cGUsICIgXHQiKS5jb25jYXQodGhpcy50aWNrZXIsICIgXHQiKS5jb25jYXQodGhpcy5wcmljZS5kcCg4KSwgIiBcdCIpLmNvbmNhdCh0aGlzLmFtb3VudCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNCaWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzQmlkKCkgewogICAgICByZXR1cm4gX2lzQmlkKHRoaXMudHlwZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNBc2siLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzQXNrKCkgewogICAgICByZXR1cm4gX2lzQXNrKHRoaXMudHlwZSk7CiAgICB9CiAgfV0sIFt7CiAgICBrZXk6ICJmcm9tT3JkZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZyb21PcmRlcihvcmRlcikgewogICAgICB2YXIgYnV5Q3VycmVuY3kgPSBvcmRlci5idXlDdXJyZW5jeSwKICAgICAgICAgIHNlbGxDdXJyZW5jeSA9IG9yZGVyLnNlbGxDdXJyZW5jeSwKICAgICAgICAgIGJ1eUFtb3VudCA9IG9yZGVyLmJ1eUFtb3VudCwKICAgICAgICAgIHNlbGxBbW91bnQgPSBvcmRlci5zZWxsQW1vdW50OwoKICAgICAgdmFyIF9wYXJzZVRpY2tlciA9IHBhcnNlVGlja2VyKG9yZGVyKSwKICAgICAgICAgIHRpY2tlciA9IF9wYXJzZVRpY2tlci50aWNrZXIsCiAgICAgICAgICB0eXBlID0gX3BhcnNlVGlja2VyLnR5cGU7CgogICAgICBpZiAodGlja2VyID09PSAnbm9uZScpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gQVNLIG1lYW5zIHNlbGxDdXJyZW5jeSBpcyBFVEgsIHRoZW4gc2VsbCBpcyBtYWluCgoKICAgICAgdmFyIG1haW5BbW91bnQgPSBuZXcgQmlnTnVtYmVyKHR5cGUgPT09IFBBSVJfQVNLID8gc2VsbEFtb3VudCA6IGJ1eUFtb3VudCk7CiAgICAgIHZhciBiYXNlQW1vdW50ID0gbmV3IEJpZ051bWJlcih0eXBlID09PSBQQUlSX0FTSyA/IGJ1eUFtb3VudCA6IHNlbGxBbW91bnQpOwogICAgICByZXR1cm4gbmV3IFBhaXIoewogICAgICAgIHRpY2tlcjogdGlja2VyLAogICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgcHJpY2U6IGJhc2VBbW91bnQuZGl2KG1haW5BbW91bnQpLAogICAgICAgIGFtb3VudDogbWFpbkFtb3VudAogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjaGVjayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2hlY2sob3JkZXIsIHRpY2tlcikgewogICAgICB0cnkgewogICAgICAgIHZhciBwYWlyID0gUGFpci5mcm9tT3JkZXIob3JkZXIpOwoKICAgICAgICB2YXIgX3BhcnNlUGFpcjMgPSBwYXJzZVBhaXIodGlja2VyLnRvVXBwZXJDYXNlKCkpLAogICAgICAgICAgICBNQUlOID0gX3BhcnNlUGFpcjMuTUFJTiwKICAgICAgICAgICAgQkFTRSA9IF9wYXJzZVBhaXIzLkJBU0U7CgogICAgICAgIHJldHVybiBwYWlyLnRpY2tlciA9PT0gIiIuY29uY2F0KE1BSU4sICItIikuY29uY2F0KEJBU0UpOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wYXJlT3JkZXJzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wYXJlT3JkZXJzKG9yZGVyMSwgb3JkZXIyKSB7CiAgICAgIHZhciBwYWlyMSA9IFBhaXIuZnJvbU9yZGVyKG9yZGVyMSk7CiAgICAgIHZhciBwYWlyMiA9IFBhaXIuZnJvbU9yZGVyKG9yZGVyMik7CiAgICAgIHJldHVybiBwYWlyMS5wcmljZS5jb21wYXJlZFRvKHBhaXIyLnByaWNlKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBQYWlyOwp9KCk7CgpleHBvcnQgeyBQYWlyIGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/front/shared/pages/Exchange/Orders/Pair.ts"],"names":["BigNumber","TOKEN_DECIMALS","TRADE_TICKERS","PAIR_TYPES","config","isWidgetBuild","isWidget","console","log","PAIR_BID","BID","PAIR_ASK","ASK","isAsk","type","isBid","filteredDecimals","amount","currency","decimalPlaces","toString","parseTicker","order","buy","buyCurrency","sell","sellCurrency","BS","toUpperCase","SB","includes","ticker","warn","parsePair","str","Error","tokens","split","length","reverse","join","MAIN","BASE","Pair","price","main","base","total","times","buyAmount","sellAmount","exchangeRate","dp","mainAmount","baseAmount","div","pair","fromOrder","err","order1","order2","pair1","pair2","comparedTo"],"mappings":"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","sourcesContent":["// @ts-nocheck\r\nimport BigNumber from 'bignumber.js'\r\n\r\nimport TOKEN_DECIMALS from 'helpers/constants/TOKEN_DECIMALS'\r\nimport TRADE_TICKERS from 'helpers/constants/TRADE_TICKERS'\r\nimport PAIR_TYPES from 'helpers/constants/PAIR_TYPES'\r\nimport config from 'app-config'\r\n\r\n\r\nconst isWidgetBuild = config && config.isWidget\r\n\r\nconsole.log('TOKEN_DECIMALS', TOKEN_DECIMALS)\r\nconsole.log('TRADE_TICKERS', TRADE_TICKERS)\r\n\r\nconst PAIR_BID = PAIR_TYPES.BID\r\nconst PAIR_ASK = PAIR_TYPES.ASK\r\n\r\nconst isAsk = (type) => (type === PAIR_TYPES.ASK)\r\nconst isBid = (type) => (type === PAIR_TYPES.BID)\r\n\r\nconst filteredDecimals = ({ amount, currency }) =>\r\n  new BigNumber(amount).decimalPlaces(TOKEN_DECIMALS[currency] || 0).toString()\r\n\r\nexport const parseTicker = (order) => {\r\n  const { buyCurrency: buy, sellCurrency: sell } = order\r\n\r\n  const BS = `${buy}-${sell}`.toUpperCase() // buys ETH, sells BTC, BID\r\n  const SB = `${sell}-${buy}`.toUpperCase() // sells ETH = ASK\r\n\r\n  if (TRADE_TICKERS.includes(BS)) {\r\n\r\n    return {\r\n      ticker: BS,\r\n      type: PAIR_BID,\r\n    }\r\n  }\r\n\r\n  if (TRADE_TICKERS.includes(SB)) {\r\n\r\n    return {\r\n      ticker: SB,\r\n      type: PAIR_ASK,\r\n    }\r\n  }\r\n\r\n  if (!isWidgetBuild) {\r\n    console.warn(`ParseTickerError: No such tickers: ${BS},${SB}`)\r\n  }\r\n\r\n  return { ticker: 'none', type: PAIR_BID }\r\n}\r\n\r\nexport const parsePair = (str) => {\r\n\r\n  if (!str) {\r\n    throw new Error(`Empty string: ${str}`)\r\n  }\r\n\r\n  if (typeof str !== 'string') {\r\n    throw new Error(`ParseTickerError: Not a string: ${str}`)\r\n  }\r\n\r\n  const tokens = str.split('-')\r\n\r\n  if (tokens.length !== 2) {\r\n    throw new Error(`ParseTickerError: Wrong tokens: ${str}`)\r\n  }\r\n\r\n  if (!TRADE_TICKERS.includes(str)) {\r\n    str = tokens.reverse().join('-')\r\n  }\r\n\r\n  if (!TRADE_TICKERS.includes(str)) {\r\n    throw new Error(`ParseTickerError: Ticker not found: ${str}`)\r\n  }\r\n\r\n  const MAIN = tokens[0].toUpperCase()\r\n  const BASE = tokens[1].toUpperCase()\r\n\r\n  return {\r\n    MAIN,\r\n    BASE,\r\n  }\r\n}\r\n\r\nexport default class Pair {\r\n  price: any\r\n  amount: any\r\n  ticker: any\r\n  main: any\r\n  base: any\r\n  type: any\r\n  total: any\r\n\r\n  constructor({ price, amount, ticker, type }) {\r\n    this.price = new BigNumber(price)\r\n    this.amount = new BigNumber(amount)\r\n\r\n    const { MAIN, BASE } = parsePair(ticker)\r\n    if (!MAIN || !BASE) throw new Error(`CreateOrderError: No currency: ${MAIN}-${BASE}`)\r\n\r\n    this.ticker = ticker\r\n    this.main = MAIN\r\n    this.base = BASE\r\n    this.type = type === PAIR_TYPES.BID ? PAIR_TYPES.BID : PAIR_TYPES.ASK\r\n    this.total = this.price.times(this.amount)\r\n  }\r\n\r\n  /*\r\n  * 10 ETH -> 1 BTC\r\n  *\r\n  * ticker: ETH-BTC\r\n  *\r\n  * So we are on ETH market, thus:\r\n  *   - ASK orders are SELL ETH (for BTC),\r\n  *   - BID orders are BUY ETH (for BTC)\r\n  *\r\n  * This order is SELLING ETH, to it's ASK\r\n  * type: BID = true, ASK = false\r\n  *\r\n  * Price is also calculated in BTC, while amount in ETH\r\n  * price: 0.1\r\n  * amount: 10\r\n  *\r\n  *\r\n  * So, for type = ASK\r\n  *\r\n  * buyCurrency: BTC = base\r\n  * sellCurrency: ETH = main\r\n  * buyAmount: 1 BTC = (0.1 BTC/ETH) * 10 ETH = price * amount\r\n  * sellAmount: 10 ETH = 10 ETH = amount\r\n  *\r\n  */\r\n  toOrder() {\r\n    const { ticker, type, price, amount } = this\r\n\r\n    console.log(`create order ${this}`)\r\n    const { MAIN, BASE } = parsePair(ticker)\r\n    //@\r\n    if (!MAIN || !BASE) throw new Error(`CreateOrderError: No currency: ${main}-${base}`)\r\n\r\n    if (![PAIR_ASK, PAIR_BID].includes(type)) throw new Error(`CreateOrderError: Wrong order type: ${type}`)\r\n\r\n    const base = { currency: BASE, amount: amount.times(price) }\r\n    const main = { currency: MAIN, amount }\r\n\r\n    const buy = (type === PAIR_ASK) ? base : main\r\n    const sell = (type === PAIR_ASK) ? main : base\r\n\r\n    return {\r\n      buyCurrency: buy.currency,\r\n      sellCurrency: sell.currency,\r\n      buyAmount: filteredDecimals(buy),\r\n      sellAmount: filteredDecimals(sell),\r\n      exchangeRate: price, // isAsk(type) ? price : 1/price\r\n    }\r\n  }\r\n\r\n  static fromOrder(order) {\r\n    const { buyCurrency, sellCurrency, buyAmount, sellAmount } = order\r\n    const { ticker, type } = parseTicker(order)\r\n\r\n    if (ticker === 'none') {\r\n      return\r\n    }\r\n\r\n    // ASK means sellCurrency is ETH, then sell is main\r\n    const mainAmount = new BigNumber(type === PAIR_ASK ? sellAmount : buyAmount)\r\n    const baseAmount = new BigNumber(type === PAIR_ASK ? buyAmount : sellAmount)\r\n\r\n    return new Pair({\r\n      ticker,\r\n      type,\r\n      price: baseAmount.div(mainAmount),\r\n      amount: mainAmount,\r\n    })\r\n  }\r\n\r\n  toString() {\r\n    const type = this.type === PAIR_TYPES.BID ? 'bid' : 'ask'\r\n    return `${type} \\t${this.ticker} \\t${this.price.dp(8)} \\t${this.amount}`\r\n  }\r\n\r\n  static check(order, ticker) {\r\n    try {\r\n      const pair = Pair.fromOrder(order)\r\n      const { MAIN, BASE } = parsePair(ticker.toUpperCase())\r\n\r\n      return pair.ticker === `${MAIN}-${BASE}`\r\n    } catch (err) {\r\n      return false\r\n    }\r\n  }\r\n\r\n  static compareOrders(order1, order2) {\r\n    const pair1 = Pair.fromOrder(order1)\r\n    const pair2 = Pair.fromOrder(order2)\r\n\r\n    return pair1.price.comparedTo(pair2.price)\r\n  }\r\n\r\n  isBid() {\r\n    return isBid(this.type)\r\n  }\r\n\r\n  isAsk() {\r\n    return isAsk(this.type)\r\n  }\r\n}\r\n"]}]}