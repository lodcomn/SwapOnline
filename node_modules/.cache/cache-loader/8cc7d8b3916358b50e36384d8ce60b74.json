{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\pages\\Exchange\\AddressSelect\\AddressSelect.tsx","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\pages\\Exchange\\AddressSelect\\AddressSelect.tsx","mtime":1614842914159},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMiOwppbXBvcnQgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4gZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjsKaW1wb3J0IF9nZXRQcm90b3R5cGVPZiBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2dldFByb3RvdHlwZU9mIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL3RvQ29uc3VtYWJsZUFycmF5IjsKCnZhciBfZGVjLCBfZGVjMiwgX2NsYXNzLCBfdGVtcDsKCmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9CgpmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09ICJ1bmRlZmluZWQiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSAiZnVuY3Rpb24iKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCwgRnJhZ21lbnQgfSBmcm9tICdyZWFjdCc7CmltcG9ydCB7IHdpdGhSb3V0ZXIgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJzsKaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlZGFjdGlvbic7CmltcG9ydCBMaW5rIGZyb20gJ2xvY2FsX21vZHVsZXMvc3ctdmFsdWVsaW5rJzsKaW1wb3J0IHN0eWxlcyBmcm9tICcuL0FkZHJlc3NTZWxlY3Quc2Nzcyc7CmltcG9ydCBjc3NNb2R1bGVzIGZyb20gJ3JlYWN0LWNzcy1tb2R1bGVzJzsKaW1wb3J0IHsgRm9ybWF0dGVkTWVzc2FnZSwgZGVmaW5lTWVzc2FnZXMsIGluamVjdEludGwgfSBmcm9tICdyZWFjdC1pbnRsJzsKaW1wb3J0IElucHV0IGZyb20gJ2NvbXBvbmVudHMvZm9ybXMvSW5wdXQvSW5wdXQnOwppbXBvcnQgRHJvcERvd24gZnJvbSAnY29tcG9uZW50cy91aS9Ecm9wRG93bi9Ecm9wRG93bic7CmltcG9ydCBBZGRyZXNzIGZyb20gJ2NvbXBvbmVudHMvdWkvQWRkcmVzcy9BZGRyZXNzJzsKaW1wb3J0IHsgQWRkcmVzc0Zvcm1hdCB9IGZyb20gJ2RvbWFpbi9hZGRyZXNzJzsKaW1wb3J0IG1ldGFtYXNrIGZyb20gJ2hlbHBlcnMvbWV0YW1hc2snOwppbXBvcnQgeyBCdXR0b24gfSBmcm9tICdjb21wb25lbnRzL2NvbnRyb2xzJzsKaW1wb3J0IGV0aFRva2VuIGZyb20gJ2hlbHBlcnMvZXRoVG9rZW4nOwppbXBvcnQgT3B0aW9uIGZyb20gJy4vT3B0aW9uL09wdGlvbic7CmltcG9ydCB7IGxpbmtzIH0gZnJvbSAnaGVscGVycyc7CmltcG9ydCB7IGxvY2FsaXNlZFVybCB9IGZyb20gJ2hlbHBlcnMvbG9jYWxlJzsKaW1wb3J0IGFjdGlvbnMgZnJvbSAncmVkdXgvYWN0aW9ucyc7CmltcG9ydCBmZWVkYmFjayBmcm9tICdzaGFyZWQvaGVscGVycy9mZWVkYmFjayc7CmltcG9ydCB3ZWIzSWNvbnMgZnJvbSAnc2hhcmVkL2ltYWdlcyc7CmltcG9ydCB7IGlzTW9iaWxlIH0gZnJvbSAncmVhY3QtZGV2aWNlLWRldGVjdCc7CmltcG9ydCBRclJlYWRlciBmcm9tICdjb21wb25lbnRzL1FyUmVhZGVyJzsKaW1wb3J0IGljb25JbnRlcm5hbCBmcm9tICcuLi8uLi8uLi9pbWFnZXMvbG9nby9sb2dvLWJsYWNrLnN2Zyc7CmltcG9ydCBpY29uQ3VzdG9tIGZyb20gJy4uLy4uLy4uL2ltYWdlcy9jdXN0b20uc3ZnJzsKaW1wb3J0IHsgQWRkcmVzc1R5cGUsIEFkZHJlc3NSb2xlIH0gZnJvbSAnZG9tYWluL2FkZHJlc3MnOwppbXBvcnQgeyBDT0lOX0RBVEEsIENPSU5fTU9ERUwgfSBmcm9tICdzd2FwLmFwcC9jb25zdGFudHMvQ09JTlMnOwp2YXIgbGFuZ0xhYmVscyA9IGRlZmluZU1lc3NhZ2VzKHsKICBsYWJlbFNwZWNpZnlBZGRyZXNzOiB7CiAgICBpZDogJ0V4Y2hhbmdlX1NwZWNpZnlBZGRyZXNzJywKICAgIGRlZmF1bHRNZXNzYWdlOiAnU2VsZWN0Li4uJwogIH0sCiAgb3B0aW9uSW50ZXJuYWw6IHsKICAgIGlkOiAnRXhjaGFuZ2VfSW50ZXJuYWxBZGRyZXNzT3B0aW9uJywKICAgIGRlZmF1bHRNZXNzYWdlOiAnSW50ZXJuYWwnCiAgfSwKICBvcHRpb25JbnRlcm5hbERpc2FibGVkOiB7CiAgICBpZDogJ0V4Y2hhbmdlX0ludGVybmFsQWRkcmVzc09wdGlvbkRpc2FibGVkJywKICAgIGRlZmF1bHRNZXNzYWdlOiAnSW50ZXJuYWwgKGluc3VmZmljaWVudCBiYWxhbmNlKScKICB9LAogIG9wdGlvbkludGVybmFsQ3JlYXRlOiB7CiAgICBpZDogJ0V4Y2hhbmdlX0ludGVybmFsQ3JlYXRlJywKICAgIGRlZmF1bHRNZXNzYWdlOiAnQ3JlYXRlIHdhbGxldCcKICB9LAogIG9wdGlvbkNvbm5lY3Q6IHsKICAgIGlkOiAnRXhjaGFuZ2VfQ29ubmVjdEFkZHJlc3NPcHRpb24nLAogICAgZGVmYXVsdE1lc3NhZ2U6ICdDb25uZWN0IFdhbGxldCcKICB9LAogIG9wdGlvbkN1c3RvbTogewogICAgaWQ6ICdFeGNoYW5nZV9DdXN0b21BZGRyZXNzT3B0aW9uJywKICAgIGRlZmF1bHRNZXNzYWdlOiAnRXh0ZXJuYWwgd2FsbGV0JwogIH0sCiAgcGxhY2Vob2xkZXJBZGRyZXNzOiB7CiAgICBpZDogJ0V4Y2hhbmdlX1BsYWNlaG9sZGVyRW50ZXJBZGRyZXNzJywKICAgIGRlZmF1bHRNZXNzYWdlOiAnRW50ZXIgdGhlIHJlY2VpdmluZyB3YWxsZXQgYWRkcmVzcycKICB9LAogIGNvbm5lY3RNZXRhbWFzazogewogICAgaWQ6ICdDb21tb25UZXh0Q29ubmVjdCcsCiAgICBkZWZhdWx0TWVzc2FnZTogJ0Nvbm5lY3QnCiAgfQp9KTsKdmFyIEFkZHJlc3NTZWxlY3QgPSAoX2RlYyA9IGNvbm5lY3QoZnVuY3Rpb24gKF9yZWYpIHsKICB2YXIgaGlkZGVuQ29pbnNMaXN0ID0gX3JlZi5jb3JlLmhpZGRlbkNvaW5zTGlzdCwKICAgICAgX3JlZiR1c2VyID0gX3JlZi51c2VyLAogICAgICBidGNEYXRhID0gX3JlZiR1c2VyLmJ0Y0RhdGEsCiAgICAgIGV0aERhdGEgPSBfcmVmJHVzZXIuZXRoRGF0YSwKICAgICAgZ2hvc3REYXRhID0gX3JlZiR1c2VyLmdob3N0RGF0YSwKICAgICAgbmV4dERhdGEgPSBfcmVmJHVzZXIubmV4dERhdGEsCiAgICAgIHRva2Vuc0RhdGEgPSBfcmVmJHVzZXIudG9rZW5zRGF0YTsKICB2YXIgYWxsRGF0YSA9IFtidGNEYXRhLCBldGhEYXRhLCBnaG9zdERhdGEsIG5leHREYXRhXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KE9iamVjdC5rZXlzKHRva2Vuc0RhdGEpLm1hcChmdW5jdGlvbiAoaykgewogICAgcmV0dXJuIHRva2Vuc0RhdGFba107CiAgfSkpKS5tYXAoZnVuY3Rpb24gKF9yZWYyKSB7CiAgICB2YXIgYWNjb3VudCA9IF9yZWYyLmFjY291bnQsCiAgICAgICAga2V5UGFpciA9IF9yZWYyLmtleVBhaXIsCiAgICAgICAgZGF0YSA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmMiwgWyJhY2NvdW50IiwgImtleVBhaXIiXSk7CgogICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe30sIGRhdGEpOwogIH0pOwogIHJldHVybiB7CiAgICBhbGxEYXRhOiBhbGxEYXRhLAogICAgaGlkZGVuQ29pbnNMaXN0OiBoaWRkZW5Db2luc0xpc3QKICB9Owp9KSwgX2RlYzIgPSBjc3NNb2R1bGVzKHN0eWxlcywgewogIGFsbG93TXVsdGlwbGU6IHRydWUKfSksIGluamVjdEludGwoX2NsYXNzID0gd2l0aFJvdXRlcihfY2xhc3MgPSBfZGVjKF9jbGFzcyA9IF9kZWMyKF9jbGFzcyA9IChfdGVtcCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0NvbXBvbmVudCkgewogIF9pbmhlcml0cyhBZGRyZXNzU2VsZWN0LCBfQ29tcG9uZW50KTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihBZGRyZXNzU2VsZWN0KTsKCiAgZnVuY3Rpb24gQWRkcmVzc1NlbGVjdChwcm9wcykgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBZGRyZXNzU2VsZWN0KTsKCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJ0b2dnbGVTY2FuIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgaXNTY2FuQWN0aXZlID0gX3RoaXMuc3RhdGUuaXNTY2FuQWN0aXZlOwoKICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBpc1NjYW5BY3RpdmU6ICFpc1NjYW5BY3RpdmUKICAgICAgICB9OwogICAgICB9KTsKICAgIH0pOwoKICAgIHZhciBjdXJyZW5jeSA9IHByb3BzLmN1cnJlbmN5LAogICAgICAgIF9wcm9wcyRoYXNFcnJvciA9IHByb3BzLmhhc0Vycm9yLAogICAgICAgIGhhc0Vycm9yID0gX3Byb3BzJGhhc0Vycm9yID09PSB2b2lkIDAgPyBmYWxzZSA6IF9wcm9wcyRoYXNFcnJvciwKICAgICAgICBfcHJvcHMkc2VsZWN0ZWRUeXBlID0gcHJvcHMuc2VsZWN0ZWRUeXBlLAogICAgICAgIHNlbGVjdGVkVHlwZSA9IF9wcm9wcyRzZWxlY3RlZFR5cGUgPT09IHZvaWQgMCA/IGZhbHNlIDogX3Byb3BzJHNlbGVjdGVkVHlwZTsKICAgIF90aGlzLnN0YXRlID0gewogICAgICBjdXJyZW5jeTogY3VycmVuY3ksCiAgICAgIGhhc0Vycm9yOiBoYXNFcnJvciwKICAgICAgc2VsZWN0ZWRUeXBlOiBzZWxlY3RlZFR5cGUgfHwgJ3BsYWNlaG9sZGVyJywKICAgICAgd2FsbGV0QWRkcmVzc0ZvY3VzZWQ6IGZhbHNlLAogICAgICBjdXN0b21BZGRyZXNzOiAnJywKICAgICAgaXNNZXRhbWFza0Nvbm5lY3RlZDogbWV0YW1hc2suaXNDb25uZWN0ZWQoKSwKICAgICAgbWV0YW1hc2tBZGRyZXNzOiBtZXRhbWFzay5nZXRBZGRyZXNzKCksCiAgICAgIGlzU2NhbkFjdGl2ZTogZmFsc2UKICAgIH07CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoQWRkcmVzc1NlbGVjdCwgW3sKICAgIGtleTogImdldFRpY2tlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGlja2VyKCkgewogICAgICByZXR1cm4gdGhpcy5wcm9wcy5jdXJyZW5jeS50b1VwcGVyQ2FzZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEludGVybmFsQWRkcmVzcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW50ZXJuYWxBZGRyZXNzKCkgewogICAgICB2YXIgYWxsRGF0YSA9IHRoaXMucHJvcHMuYWxsRGF0YTsKICAgICAgdmFyIHRpY2tlciA9IHRoaXMuZ2V0VGlja2VyKCk7CiAgICAgIHZhciBpbnRlcm5hbEFkZHJlc3M7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFsbERhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgaXRlbSA9IGFsbERhdGFbaV07CgogICAgICAgIGlmICh0aWNrZXIgPT09IGl0ZW0uY3VycmVuY3kgJiYgaXRlbS5hZGRyZXNzKSB7CiAgICAgICAgICBpbnRlcm5hbEFkZHJlc3MgPSBpdGVtLmFkZHJlc3M7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBpbnRlcm5hbEFkZHJlc3M7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNDdXJyZW5jeUluSW50ZXJuYWxXYWxsZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzQ3VycmVuY3lJbkludGVybmFsV2FsbGV0KCkgewogICAgICB2YXIgaGlkZGVuQ29pbnNMaXN0ID0gdGhpcy5wcm9wcy5oaWRkZW5Db2luc0xpc3Q7CiAgICAgIHZhciB0aWNrZXIgPSB0aGlzLmdldFRpY2tlcigpOwogICAgICB2YXIgaW50ZXJuYWxBZGRyZXNzID0gdGhpcy5nZXRJbnRlcm5hbEFkZHJlc3MoKTsKICAgICAgdmFyIHJlc3VsdCA9IHRydWU7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhpZGRlbkNvaW5zTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBoaWRkZW5Db2luID0gaGlkZGVuQ29pbnNMaXN0W2ldOwoKICAgICAgICBpZiAoaGlkZGVuQ29pbiA9PT0gdGlja2VyIHx8IGludGVybmFsQWRkcmVzcyAmJiBoaWRkZW5Db2luLmluY2x1ZGVzKCIiLmNvbmNhdCh0aWNrZXIsICI6IikuY29uY2F0KGludGVybmFsQWRkcmVzcykpKSB7CiAgICAgICAgICByZXN1bHQgPSBmYWxzZTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoYW5kbGVGb2N1c0FkZHJlc3MiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUZvY3VzQWRkcmVzcygpIHsKICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgd2FsbGV0QWRkcmVzc0ZvY3VzZWQ6IHRydWUKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAib25XZWIzVXBkYXRlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25XZWIzVXBkYXRlZCgpIHsKICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgaXNNZXRhbWFza0Nvbm5lY3RlZDogbWV0YW1hc2suaXNDb25uZWN0ZWQoKSwKICAgICAgICBtZXRhbWFza0FkZHJlc3M6IG1ldGFtYXNrLmdldEFkZHJlc3MoKQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wb25lbnREaWRNb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7CiAgICAgIG1ldGFtYXNrLndlYjNjb25uZWN0Lm9uKCd1cGRhdGVkJywgdGhpcy5vbldlYjNVcGRhdGVkLmJpbmQodGhpcykpOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudFdpbGxVbm1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHsKICAgICAgbWV0YW1hc2sud2ViM2Nvbm5lY3Qub2ZmKCd1cGRhdGVkJywgdGhpcy5vbldlYjNVcGRhdGVkKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb21wb25lbnREaWRVcGRhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHsKICAgICAgdmFyIF90aGlzJHByb3BzID0gdGhpcy5wcm9wcywKICAgICAgICAgIG5ld0N1cnJlbmN5ID0gX3RoaXMkcHJvcHMuY3VycmVuY3ksCiAgICAgICAgICBzZWxlY3RlZFR5cGUgPSBfdGhpcyRwcm9wcy5zZWxlY3RlZFR5cGUsCiAgICAgICAgICBfdGhpcyRwcm9wcyRoYXNFcnJvciA9IF90aGlzJHByb3BzLmhhc0Vycm9yLAogICAgICAgICAgaGFzRXJyb3IgPSBfdGhpcyRwcm9wcyRoYXNFcnJvciA9PT0gdm9pZCAwID8gZmFsc2UgOiBfdGhpcyRwcm9wcyRoYXNFcnJvcjsKICAgICAgdmFyIF90aGlzJHN0YXRlID0gdGhpcy5zdGF0ZSwKICAgICAgICAgIG9sZEN1cnJlbmN5ID0gX3RoaXMkc3RhdGUuY3VycmVuY3ksCiAgICAgICAgICBvbGRTZWxlY3RlZFR5cGUgPSBfdGhpcyRzdGF0ZS5zZWxlY3RlZFR5cGUsCiAgICAgICAgICBfdGhpcyRzdGF0ZSRoYXNFcnJvciA9IF90aGlzJHN0YXRlLmhhc0Vycm9yLAogICAgICAgICAgb2xkSGFzRXJyb3IgPSBfdGhpcyRzdGF0ZSRoYXNFcnJvciA9PT0gdm9pZCAwID8gZmFsc2UgOiBfdGhpcyRzdGF0ZSRoYXNFcnJvcjsKCiAgICAgIGlmIChuZXdDdXJyZW5jeSAhPT0gb2xkQ3VycmVuY3kgfHwgaGFzRXJyb3IgIT09IG9sZEhhc0Vycm9yKSB7CiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICBjdXJyZW5jeTogbmV3Q3VycmVuY3ksCiAgICAgICAgICBoYXNFcnJvcjogaGFzRXJyb3IsCiAgICAgICAgICBzZWxlY3RlZFR5cGU6IHNlbGVjdGVkVHlwZSwKICAgICAgICAgIGN1c3RvbUFkZHJlc3M6ICcnCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJoYW5kbGVCbHVyQWRkcmVzcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQmx1ckFkZHJlc3ModmFsdWUpIHsKICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgd2FsbGV0QWRkcmVzc0ZvY3VzZWQ6IGZhbHNlCiAgICAgIH0pOyAvLyB0b2RvOiB2YWxpZGF0ZSB2YWx1ZQoKICAgICAgLyoNCiAgICAgIGlmIChnZXRDdXJyZW5jeSA9PT0gImJ0YyIpIHsNCiAgICAgICAgcmV0dXJuIHV0aWwudHlwZWZvcmNlLmlzQ29pbkFkZHJlc3MuQlRDKGN1c3RvbVdhbGxldCkNCiAgICAgIH0NCiAgICAgIHJldHVybiB1dGlsLnR5cGVmb3JjZS5pc0NvaW5BZGRyZXNzLkVUSChjdXN0b21XYWxsZXQpOw0KICAgICAgKi8KCiAgICAgIHRoaXMuYXBwbHlBZGRyZXNzKHsKICAgICAgICB0eXBlOiBBZGRyZXNzVHlwZS5DdXN0b20sCiAgICAgICAgdmFsdWU6IHZhbHVlCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImdvXHUwNDIxcmVhdGVXYWxsZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdv0KFyZWF0ZVdhbGxldCgpIHsKICAgICAgdmFyIF90aGlzJHByb3BzMiA9IHRoaXMucHJvcHMsCiAgICAgICAgICBoaXN0b3J5ID0gX3RoaXMkcHJvcHMyLmhpc3RvcnksCiAgICAgICAgICBsb2NhbGUgPSBfdGhpcyRwcm9wczIuaW50bC5sb2NhbGU7CiAgICAgIHZhciB0aWNrZXIgPSB0aGlzLmdldFRpY2tlcigpOwogICAgICBmZWVkYmFjay5leGNoYW5nZUZvcm0ucmVkaXJlY3RlZENyZWF0ZVdhbGxldCh0aWNrZXIpOwogICAgICB2YXIgdXJsID0gbG9jYWxpc2VkVXJsKGxvY2FsZSwgIiIuY29uY2F0KGxpbmtzLmNyZWF0ZVdhbGxldCwgIi8iKS5jb25jYXQodGlja2VyKSk7CiAgICAgIGhpc3RvcnkucHVzaCh1cmwpOwogICAgfQogIH0sIHsKICAgIGtleTogImhhbmRsZUNvbm5lY3RNZXRhbWFzayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ29ubmVjdE1ldGFtYXNrKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIG1ldGFtYXNrLmNvbm5lY3QoewogICAgICAgIGRvbnRSZWRpcmVjdDogdHJ1ZQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChpc0Nvbm5lY3RlZCkgewogICAgICAgIGlmICghaXNDb25uZWN0ZWQpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIF90aGlzMi5zZXRTdGF0ZSh7CiAgICAgICAgICBpc01ldGFtYXNrQ29ubmVjdGVkOiB0cnVlLAogICAgICAgICAgbWV0YW1hc2tBZGRyZXNzOiBtZXRhbWFzay5nZXRBZGRyZXNzKCkKICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczIuYXBwbHlBZGRyZXNzKHsKICAgICAgICAgICAgdHlwZTogQWRkcmVzc1R5cGUuTWV0YW1hc2ssCiAgICAgICAgICAgIHZhbHVlOiBtZXRhbWFzay5nZXRBZGRyZXNzKCkKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdNZXRhbWFzayByZWplY3RlZCcsIGVycm9yKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaGFuZGxlU2NhbkVycm9yIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVTY2FuRXJyb3IoZXJyKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoJ1NjYW4gZXJyb3InLCBlcnIpOwogICAgfQogIH0sIHsKICAgIGtleTogImhhbmRsZVNjYW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVNjYW4oZGF0YSkgewogICAgICBpZiAoZGF0YSkgewogICAgICAgIHZhciBhZGRyZXNzID0gZGF0YS5pbmNsdWRlcygnOicpID8gZGF0YS5zcGxpdCgnOicpWzFdIDogZGF0YTsKICAgICAgICB0aGlzLnRvZ2dsZVNjYW4oKTsKICAgICAgICB0aGlzLmFwcGx5QWRkcmVzcyh7CiAgICAgICAgICB0eXBlOiBBZGRyZXNzVHlwZS5DdXN0b20sCiAgICAgICAgICB2YWx1ZTogYWRkcmVzcwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiaGFuZGxlT3B0aW9uU2VsZWN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVPcHRpb25TZWxlY3Qob3B0aW9uKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIG9sZFNlbGVjdGVkVHlwZSA9IHRoaXMuc3RhdGUuc2VsZWN0ZWRUeXBlOwogICAgICB2YXIgc2VsZWN0ZWRUeXBlID0gb3B0aW9uLnZhbHVlLAogICAgICAgICAgZG9udFNlbGVjdCA9IG9wdGlvbi5kb250U2VsZWN0OwoKICAgICAgaWYgKHNlbGVjdGVkVHlwZSA9PT0gJ0ludGVybmFsQWRkcmVzc0NyZWF0ZScpIHsKICAgICAgICB0aGlzLmdv0KFyZWF0ZVdhbGxldCgpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgc2VsZWN0ZWRUeXBlOiBkb250U2VsZWN0ID8gb2xkU2VsZWN0ZWRUeXBlIDogc2VsZWN0ZWRUeXBlCiAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoIXNlbGVjdGVkVHlwZSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIHZhbHVlOwoKICAgICAgICBpZiAoc2VsZWN0ZWRUeXBlID09PSBBZGRyZXNzVHlwZS5JbnRlcm5hbCkgewogICAgICAgICAgdmFsdWUgPSBfdGhpczMuZ2V0SW50ZXJuYWxBZGRyZXNzKCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoc2VsZWN0ZWRUeXBlID09PSBBZGRyZXNzVHlwZS5NZXRhbWFzaykgewogICAgICAgICAgdmFsdWUgPSBtZXRhbWFzay5nZXRBZGRyZXNzKCk7CiAgICAgICAgfQogICAgICAgIC8qaWYgKHNlbGVjdGVkVHlwZSA9PT0gQWRkcmVzc1R5cGUuQ3VzdG9tKSB7DQogICAgICAgIC8vIGFwcGx5IGFkZHJlc3MgaW5wdXQgYmx1ciAvIHFyU2Nhbg0KICAgICAgICByZXR1cm4NCiAgICAgICAgfSovCgoKICAgICAgICBpZiAoc2VsZWN0ZWRUeXBlID09PSBBZGRyZXNzVHlwZS5NZXRhbWFzayAmJiAhbWV0YW1hc2suaXNDb25uZWN0ZWQoKSkgewogICAgICAgICAgX3RoaXMzLmhhbmRsZUNvbm5lY3RNZXRhbWFzaygpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczMuYXBwbHlBZGRyZXNzKHsKICAgICAgICAgICAgdHlwZTogc2VsZWN0ZWRUeXBlLAogICAgICAgICAgICB2YWx1ZTogdmFsdWUKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiYXBwbHlBZGRyZXNzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhcHBseUFkZHJlc3MoYWRkcmVzcykgewogICAgICB2YXIgX3RoaXMkcHJvcHMzID0gdGhpcy5wcm9wcywKICAgICAgICAgIG9uQ2hhbmdlID0gX3RoaXMkcHJvcHMzLm9uQ2hhbmdlLAogICAgICAgICAgY3VycmVuY3kgPSBfdGhpcyRwcm9wczMuY3VycmVuY3k7CiAgICAgIHZhciB0eXBlID0gYWRkcmVzcy50eXBlLAogICAgICAgICAgdmFsdWUgPSBhZGRyZXNzLnZhbHVlOwoKICAgICAgaWYgKHR5cGVvZiBvbkNoYW5nZSAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgb25DaGFuZ2UoewogICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeSwKICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgIHZhbHVlOiB2YWx1ZQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB2YXIgX3RoaXMkcHJvcHM0ID0gdGhpcy5wcm9wcywKICAgICAgICAgIGN1cnJlbmN5ID0gX3RoaXMkcHJvcHM0LmN1cnJlbmN5LAogICAgICAgICAgaXNEYXJrID0gX3RoaXMkcHJvcHM0LmlzRGFyaywKICAgICAgICAgIGxhYmVsID0gX3RoaXMkcHJvcHM0LmxhYmVsLAogICAgICAgICAgaGlkZGVuQ29pbnNMaXN0ID0gX3RoaXMkcHJvcHM0LmhpZGRlbkNvaW5zTGlzdCwKICAgICAgICAgIGFsbERhdGEgPSBfdGhpcyRwcm9wczQuYWxsRGF0YSwKICAgICAgICAgIHJvbGUgPSBfdGhpcyRwcm9wczQucm9sZTsKICAgICAgdmFyIF90aGlzJHN0YXRlMiA9IHRoaXMuc3RhdGUsCiAgICAgICAgICBzZWxlY3RlZFR5cGUgPSBfdGhpcyRzdGF0ZTIuc2VsZWN0ZWRUeXBlLAogICAgICAgICAgd2FsbGV0QWRkcmVzc0ZvY3VzZWQgPSBfdGhpcyRzdGF0ZTIud2FsbGV0QWRkcmVzc0ZvY3VzZWQsCiAgICAgICAgICBpc01ldGFtYXNrQ29ubmVjdGVkID0gX3RoaXMkc3RhdGUyLmlzTWV0YW1hc2tDb25uZWN0ZWQsCiAgICAgICAgICBtZXRhbWFza0FkZHJlc3MgPSBfdGhpcyRzdGF0ZTIubWV0YW1hc2tBZGRyZXNzLAogICAgICAgICAgaXNTY2FuQWN0aXZlID0gX3RoaXMkc3RhdGUyLmlzU2NhbkFjdGl2ZSwKICAgICAgICAgIGhhc0Vycm9yID0gX3RoaXMkc3RhdGUyLmhhc0Vycm9yOwogICAgICB2YXIgdGlja2VyID0gdGhpcy5nZXRUaWNrZXIoKTsKCiAgICAgIHZhciBfYWN0aW9ucyRjb3JlJGdldFdhbGwgPSBhY3Rpb25zLmNvcmUuZ2V0V2FsbGV0KHsKICAgICAgICBjdXJyZW5jeTogY3VycmVuY3ksCiAgICAgICAgYWRkcmVzc1R5cGU6IEFkZHJlc3NUeXBlLkludGVybmFsCiAgICAgIH0pLAogICAgICAgICAgaW50ZXJuYWxCYWxhbmNlID0gX2FjdGlvbnMkY29yZSRnZXRXYWxsLmJhbGFuY2U7CgogICAgICB2YXIgaXNJbnRlcm5hbE9wdGlvbkRpc2FibGVkID0gcm9sZSA9PT0gQWRkcmVzc1JvbGUuU2VuZCAmJiAoIWludGVybmFsQmFsYW5jZSB8fCBpbnRlcm5hbEJhbGFuY2UgPT09IDApOwogICAgICB2YXIgaXNNZXRhbWFza09wdGlvbiA9IGV0aFRva2VuLmlzRXRoT3JFdGhUb2tlbih7CiAgICAgICAgbmFtZTogY3VycmVuY3kKICAgICAgfSk7CiAgICAgIHZhciBpc01ldGFtYXNrSW5zdGFsbGVkID0gbWV0YW1hc2suaXNFbmFibGVkKCk7IC8vIEZvcmJpZCBgQ3VzdG9tIGFkZHJlc3NgIG9wdGlvbiB3aGVuIHVzaW5nIGV0aGVyZXVtL3Rva2VucwogICAgICAvLyBiZWNhdXNlIHlvdSBuZWVkIHRvIG1ha2UgYSByZXF1ZXN0IHRvIHRoZSBjb250cmFjdAoKICAgICAgdmFyIGlzQ3VzdG9tQWRkcmVzc09wdGlvbiA9ICFldGhUb2tlbi5pc0V0aE9yRXRoVG9rZW4oewogICAgICAgIG5hbWU6IGN1cnJlbmN5CiAgICAgIH0pOwogICAgICB2YXIgaXNDdXN0b21PcHRpb25JbnB1dEhpZGRlbiA9IHJvbGUgPT09IEFkZHJlc3NSb2xlLlNlbmQgJiYgQ09JTl9EQVRBW3RpY2tlcl0gJiYgQ09JTl9EQVRBW3RpY2tlcl0ubW9kZWwgPT09IENPSU5fTU9ERUwuVVRYTzsKICAgICAgdmFyIHdlYjNJY29uID0gbWV0YW1hc2suaXNDb25uZWN0ZWQoKSA/IHdlYjNJY29uc1ttZXRhbWFzay53ZWIzY29ubmVjdC5nZXRQcm92aWRlclR5cGUoKV0gfHwgZmFsc2UgOiB3ZWIzSWNvbnNbbWV0YW1hc2sud2ViM2Nvbm5lY3QuZ2V0SW5qZWN0ZWRUeXBlKCldIHx8IGZhbHNlOwogICAgICB2YXIgb3B0aW9ucyA9IFt7CiAgICAgICAgdmFsdWU6ICdwbGFjZWhvbGRlcicsCiAgICAgICAgdGl0bGU6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIGxhbmdMYWJlbHMubGFiZWxTcGVjaWZ5QWRkcmVzcyksCiAgICAgICAgZGlzYWJsZWQ6IHRydWUsCiAgICAgICAgaGlkZGVuOiB0cnVlCiAgICAgIH1dLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5pc0N1cnJlbmN5SW5JbnRlcm5hbFdhbGxldCgpID8gW3sKICAgICAgICB2YWx1ZTogQWRkcmVzc1R5cGUuSW50ZXJuYWwsCiAgICAgICAgaWNvbjogaWNvbkludGVybmFsLAogICAgICAgIHRpdGxlOiAhaXNJbnRlcm5hbE9wdGlvbkRpc2FibGVkID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIGxhbmdMYWJlbHMub3B0aW9uSW50ZXJuYWwpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChBZGRyZXNzLCB7CiAgICAgICAgICBhZGRyZXNzOiB0aGlzLmdldEludGVybmFsQWRkcmVzcygpLAogICAgICAgICAgZm9ybWF0OiBBZGRyZXNzRm9ybWF0LlNob3J0LAogICAgICAgICAgdHlwZTogQWRkcmVzc1R5cGUuSW50ZXJuYWwKICAgICAgICB9KSkgOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCBsYW5nTGFiZWxzLm9wdGlvbkludGVybmFsRGlzYWJsZWQpLAogICAgICAgIGRpc2FibGVkOiBpc0ludGVybmFsT3B0aW9uRGlzYWJsZWQKICAgICAgfV0gOiBbewogICAgICAgIHZhbHVlOiAnSW50ZXJuYWxBZGRyZXNzQ3JlYXRlJywKICAgICAgICBpY29uOiBpY29uSW50ZXJuYWwsCiAgICAgICAgdGl0bGU6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIGxhbmdMYWJlbHMub3B0aW9uSW50ZXJuYWxDcmVhdGUpCiAgICAgIH1dKSwgX3RvQ29uc3VtYWJsZUFycmF5KGlzTWV0YW1hc2tPcHRpb24gPyBpc01ldGFtYXNrQ29ubmVjdGVkID8gW3sKICAgICAgICB2YWx1ZTogQWRkcmVzc1R5cGUuTWV0YW1hc2ssCiAgICAgICAgaWNvbjogd2ViM0ljb24sCiAgICAgICAgdGl0bGU6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZyYWdtZW50LCBudWxsLCBtZXRhbWFzay53ZWIzY29ubmVjdC5nZXRQcm92aWRlclRpdGxlKCksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEFkZHJlc3MsIHsKICAgICAgICAgIGFkZHJlc3M6IG1ldGFtYXNrQWRkcmVzcywKICAgICAgICAgIGZvcm1hdDogQWRkcmVzc0Zvcm1hdC5TaG9ydCwKICAgICAgICAgIHR5cGU6IEFkZHJlc3NUeXBlLk1ldGFtYXNrCiAgICAgICAgfSkpCiAgICAgIH1dIDogW3sKICAgICAgICB2YWx1ZTogQWRkcmVzc1R5cGUuTWV0YW1hc2ssCiAgICAgICAgaWNvbjogd2ViM0ljb24sCiAgICAgICAgdGl0bGU6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIGxhbmdMYWJlbHMub3B0aW9uQ29ubmVjdCksCiAgICAgICAgZG9udFNlbGVjdDogdHJ1ZQogICAgICB9XSA6IFtdKSwgX3RvQ29uc3VtYWJsZUFycmF5KGlzQ3VzdG9tQWRkcmVzc09wdGlvbiA/IFt7CiAgICAgICAgdmFsdWU6IEFkZHJlc3NUeXBlLkN1c3RvbSwKICAgICAgICBpY29uOiBpY29uQ3VzdG9tLAogICAgICAgIHRpdGxlOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCBsYW5nTGFiZWxzLm9wdGlvbkN1c3RvbSksCiAgICAgICAgcmVkdWNlU2VsZWN0ZWRJdGVtVGV4dDogIWlzQ3VzdG9tT3B0aW9uSW5wdXRIaWRkZW4KICAgICAgfV0gOiBbXSkpOwogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJhZGRyZXNzU2VsZWN0ICIuY29uY2F0KGhhc0Vycm9yID8gJ2FkZHJlc3NTZWxlY3RfZXJyb3InIDogJycsICIgIikuY29uY2F0KGlzRGFyayA/ICctLWRhcmsnIDogJycpCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAibGFiZWwiCiAgICAgIH0sIGxhYmVsKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRHJvcERvd24sIHsKICAgICAgICBzdHlsZU5hbWU6ICJkcm9wRG93biIsCiAgICAgICAgaXRlbXM6IG9wdGlvbnMsCiAgICAgICAgaW5pdGlhbFZhbHVlOiAicGxhY2Vob2xkZXIiLAogICAgICAgIHNlbGVjdGVkVmFsdWU6IHNlbGVjdGVkVHlwZSwKICAgICAgICBkaXNhYmxlU2VhcmNoOiB0cnVlLAogICAgICAgIGRvbnRTY3JvbGw6IHRydWUsCiAgICAgICAgYXJyb3dTaWRlOiAibGVmdCIsCiAgICAgICAgaXRlbVJlbmRlcjogZnVuY3Rpb24gaXRlbVJlbmRlcihpdGVtKSB7CiAgICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoT3B0aW9uLCBpdGVtKTsKICAgICAgICB9LAogICAgICAgIG9uU2VsZWN0OiBmdW5jdGlvbiBvblNlbGVjdCh2YWx1ZSkgewogICAgICAgICAgcmV0dXJuIF90aGlzNC5oYW5kbGVPcHRpb25TZWxlY3QodmFsdWUpOwogICAgICAgIH0KICAgICAgfSksIHNlbGVjdGVkVHlwZSA9PT0gQWRkcmVzc1R5cGUuTWV0YW1hc2sgJiYgbWV0YW1hc2suaXNFbmFibGVkKCkgJiYgIWlzTWV0YW1hc2tDb25uZWN0ZWQgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJzZWxlY3RlZElubmVyIGNvbm5lY3RXcmFwcGVyIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHsKICAgICAgICBzdHlsZU5hbWU6ICJidXR0b24iLAogICAgICAgIGJsdWU6IHRydWUsCiAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgICAgIF90aGlzNC5oYW5kbGVDb25uZWN0TWV0YW1hc2soKTsKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIGxhbmdMYWJlbHMuY29ubmVjdE1ldGFtYXNrKSkpLCBzZWxlY3RlZFR5cGUgPT09IEFkZHJlc3NUeXBlLkN1c3RvbSAmJiAhaXNDdXN0b21PcHRpb25JbnB1dEhpZGRlbiAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogInNlbGVjdGVkSW5uZXIiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiY3VzdG9tV2FsbGV0ICIuY29uY2F0KHdhbGxldEFkZHJlc3NGb2N1c2VkID8gJ2N1c3RvbVdhbGxldF9mb2N1cycgOiAnJykKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJjdXN0b21BZGRyZXNzSW5wdXQiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KElucHV0LCB7CiAgICAgICAgaW5wdXRDdXN0b21TdHlsZTogewogICAgICAgICAgZm9udFNpemU6ICcxNXB4JywKICAgICAgICAgIHRleHRPdmVyZmxvdzogJ2VsbGlwc2lzJwogICAgICAgIH0sCiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgcGF0dGVybjogIjAtOWEtekEtWiIsCiAgICAgICAgb25Gb2N1czogZnVuY3Rpb24gb25Gb2N1cygpIHsKICAgICAgICAgIHJldHVybiBfdGhpczQuaGFuZGxlRm9jdXNBZGRyZXNzKCk7CiAgICAgICAgfSwKICAgICAgICBvbkJsdXI6IGZ1bmN0aW9uIG9uQmx1cihldmVudCkgewogICAgICAgICAgcmV0dXJuIF90aGlzNC5oYW5kbGVCbHVyQWRkcmVzcyhldmVudC50YXJnZXQudmFsdWUpOwogICAgICAgIH0sCiAgICAgICAgcGxhY2Vob2xkZXI6ICJFbnRlciBhZGRyZXNzIiwKICAgICAgICB2YWx1ZUxpbms6IExpbmsuYWxsKHRoaXMsICdfJykuXyAvLyByZXF1aXJlZAogICAgICAgICwKICAgICAgICBvcGVuU2NhbjogdGhpcy50b2dnbGVTY2FuLAogICAgICAgIHFyOiBpc01vYmlsZQogICAgICB9KSkpKSwgaXNTY2FuQWN0aXZlICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFFyUmVhZGVyLCB7CiAgICAgICAgb3BlblNjYW46IHRoaXMudG9nZ2xlU2NhbiwKICAgICAgICBoYW5kbGVFcnJvcjogdGhpcy5oYW5kbGVTY2FuRXJyb3IsCiAgICAgICAgaGFuZGxlU2NhbjogdGhpcy5oYW5kbGVTY2FuCiAgICAgIH0pKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBBZGRyZXNzU2VsZWN0Owp9KENvbXBvbmVudCksIF90ZW1wKSkgfHwgX2NsYXNzKSB8fCBfY2xhc3MpIHx8IF9jbGFzcykgfHwgX2NsYXNzKTsKZXhwb3J0IHsgQWRkcmVzc1NlbGVjdCBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/front/shared/pages/Exchange/AddressSelect/AddressSelect.tsx"],"names":["React","Component","Fragment","withRouter","connect","Link","styles","cssModules","FormattedMessage","defineMessages","injectIntl","Input","DropDown","Address","AddressFormat","metamask","Button","ethToken","Option","links","localisedUrl","actions","feedback","web3Icons","isMobile","QrReader","iconInternal","iconCustom","AddressType","AddressRole","COIN_DATA","COIN_MODEL","langLabels","labelSpecifyAddress","id","defaultMessage","optionInternal","optionInternalDisabled","optionInternalCreate","optionConnect","optionCustom","placeholderAddress","connectMetamask","AddressSelect","hiddenCoinsList","core","user","btcData","ethData","ghostData","nextData","tokensData","allData","Object","keys","map","k","account","keyPair","data","allowMultiple","props","isScanActive","state","setState","currency","hasError","selectedType","walletAddressFocused","customAddress","isMetamaskConnected","isConnected","metamaskAddress","getAddress","toUpperCase","ticker","getTicker","internalAddress","i","length","item","address","getInternalAddress","result","hiddenCoin","includes","web3connect","on","onWeb3Updated","bind","off","newCurrency","oldCurrency","oldSelectedType","oldHasError","value","applyAddress","type","Custom","history","locale","intl","exchangeForm","redirectedCreateWallet","url","createWallet","push","dontRedirect","then","Metamask","error","console","err","split","toggleScan","option","dontSelect","goСreateWallet","Internal","handleConnectMetamask","onChange","isDark","label","role","getWallet","addressType","internalBalance","balance","isInternalOptionDisabled","Send","isMetamaskOption","isEthOrEthToken","name","isMetamaskInstalled","isEnabled","isCustomAddressOption","isCustomOptionInputHidden","model","UTXO","web3Icon","getProviderType","getInjectedType","options","title","disabled","hidden","isCurrencyInInternalWallet","icon","Short","getProviderTitle","reduceSelectedItemText","handleOptionSelect","fontSize","textOverflow","handleFocusAddress","event","handleBlurAddress","target","all","_","handleScanError","handleScan"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { connect } from 'redaction'\r\nimport Link from 'local_modules/sw-valuelink'\r\n\r\nimport styles from './AddressSelect.scss'\r\nimport cssModules from 'react-css-modules'\r\nimport { FormattedMessage, defineMessages, injectIntl } from 'react-intl'\r\nimport Input from 'components/forms/Input/Input'\r\nimport DropDown from 'components/ui/DropDown/DropDown'\r\nimport Address from 'components/ui/Address/Address'\r\nimport { AddressFormat } from 'domain/address'\r\nimport metamask from 'helpers/metamask'\r\nimport { Button } from 'components/controls'\r\nimport ethToken from 'helpers/ethToken'\r\nimport Option from './Option/Option'\r\nimport { links } from 'helpers'\r\nimport { localisedUrl } from 'helpers/locale'\r\nimport actions from 'redux/actions'\r\nimport feedback from 'shared/helpers/feedback'\r\nimport web3Icons from 'shared/images'\r\nimport { isMobile } from 'react-device-detect'\r\nimport QrReader from 'components/QrReader'\r\nimport iconInternal from '../../../images/logo/logo-black.svg'\r\nimport iconCustom from '../../../images/custom.svg'\r\n\r\nimport { AddressType, AddressRole } from 'domain/address'\r\nimport { COIN_DATA, COIN_MODEL } from 'swap.app/constants/COINS'\r\n\r\nconst langLabels = defineMessages({\r\n  labelSpecifyAddress: {\r\n    id: 'Exchange_SpecifyAddress',\r\n    defaultMessage: 'Select...',\r\n  },\r\n  optionInternal: {\r\n    id: 'Exchange_InternalAddressOption',\r\n    defaultMessage: 'Internal',\r\n  },\r\n  optionInternalDisabled: {\r\n    id: 'Exchange_InternalAddressOptionDisabled',\r\n    defaultMessage: 'Internal (insufficient balance)',\r\n  },\r\n  optionInternalCreate: {\r\n    id: 'Exchange_InternalCreate',\r\n    defaultMessage: 'Create wallet',\r\n  },\r\n  optionConnect: {\r\n    id: 'Exchange_ConnectAddressOption',\r\n    defaultMessage: 'Connect Wallet',\r\n  },\r\n  optionCustom: {\r\n    id: 'Exchange_CustomAddressOption',\r\n    defaultMessage: 'External wallet',\r\n  },\r\n  placeholderAddress: {\r\n    id: 'Exchange_PlaceholderEnterAddress',\r\n    defaultMessage: 'Enter the receiving wallet address',\r\n  },\r\n  connectMetamask: {\r\n    id: 'CommonTextConnect',\r\n    defaultMessage: 'Connect',\r\n  },\r\n})\r\n\r\n@injectIntl\r\n@withRouter\r\n@connect(\r\n  ({ core: { hiddenCoinsList }, user: { btcData, ethData, ghostData, nextData, tokensData } }) => {\r\n    const allData = [\r\n      btcData,\r\n      ethData,\r\n      ghostData,\r\n      nextData,\r\n      ...Object.keys(tokensData).map((k) => tokensData[k]),\r\n    ].map(({ account, keyPair, ...data }) => ({\r\n      ...data,\r\n    }))\r\n\r\n    return {\r\n      allData,\r\n      hiddenCoinsList,\r\n    }\r\n  }\r\n)\r\n@cssModules(styles, { allowMultiple: true })\r\nexport default class AddressSelect extends Component<any, any> {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    const { currency, hasError = false, selectedType = false } = props\r\n\r\n    this.state = {\r\n      currency,\r\n      hasError,\r\n      selectedType: selectedType || 'placeholder',\r\n      walletAddressFocused: false,\r\n      customAddress: '',\r\n      isMetamaskConnected: metamask.isConnected(),\r\n      metamaskAddress: metamask.getAddress(),\r\n      isScanActive: false,\r\n    }\r\n  }\r\n\r\n  getTicker() {\r\n    return this.props.currency.toUpperCase()\r\n  }\r\n\r\n  getInternalAddress() {\r\n    const { allData } = this.props\r\n    const ticker = this.getTicker()\r\n    let internalAddress\r\n    for (let i = 0; i < allData.length; i++) {\r\n      const item = allData[i]\r\n      if (ticker === item.currency && item.address) {\r\n        internalAddress = item.address\r\n        break\r\n      }\r\n    }\r\n    return internalAddress\r\n  }\r\n\r\n  isCurrencyInInternalWallet() {\r\n    const { hiddenCoinsList } = this.props\r\n    const ticker = this.getTicker()\r\n    const internalAddress = this.getInternalAddress()\r\n\r\n    let result = true\r\n\r\n    for (let i = 0; i < hiddenCoinsList.length; i++) {\r\n      const hiddenCoin = hiddenCoinsList[i]\r\n      if (\r\n        hiddenCoin === ticker ||\r\n        (internalAddress && hiddenCoin.includes(`${ticker}:${internalAddress}`))\r\n      ) {\r\n        result = false\r\n        break\r\n      }\r\n    }\r\n    return result\r\n  }\r\n\r\n  handleFocusAddress() {\r\n    this.setState({\r\n      walletAddressFocused: true,\r\n    })\r\n  }\r\n\r\n  onWeb3Updated() {\r\n    this.setState({\r\n      isMetamaskConnected: metamask.isConnected(),\r\n      metamaskAddress: metamask.getAddress(),\r\n    })\r\n  }\r\n\r\n  componentDidMount() {\r\n    metamask.web3connect.on('updated', this.onWeb3Updated.bind(this))\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    metamask.web3connect.off('updated', this.onWeb3Updated)\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const { currency: newCurrency, selectedType, hasError = false } = this.props\r\n\r\n    const {\r\n      currency: oldCurrency,\r\n      selectedType: oldSelectedType,\r\n      hasError: oldHasError = false,\r\n    } = this.state\r\n\r\n    if (newCurrency !== oldCurrency || hasError !== oldHasError) {\r\n      this.setState({\r\n        currency: newCurrency,\r\n        hasError,\r\n        selectedType,\r\n        customAddress: '',\r\n      })\r\n    }\r\n  }\r\n\r\n  handleBlurAddress(value) {\r\n    this.setState({\r\n      walletAddressFocused: false,\r\n    })\r\n    // todo: validate value\r\n    /*\r\n    if (getCurrency === \"btc\") {\r\n      return util.typeforce.isCoinAddress.BTC(customWallet)\r\n    }\r\n    return util.typeforce.isCoinAddress.ETH(customWallet);\r\n    */\r\n    this.applyAddress({\r\n      type: AddressType.Custom,\r\n      value,\r\n    })\r\n  }\r\n\r\n  goСreateWallet() {\r\n    const {\r\n      history,\r\n      intl: { locale },\r\n    } = this.props\r\n    const ticker = this.getTicker()\r\n\r\n    feedback.exchangeForm.redirectedCreateWallet(ticker)\r\n\r\n    const url = localisedUrl(locale, `${links.createWallet}/${ticker}`)\r\n    history.push(url)\r\n  }\r\n\r\n  handleConnectMetamask() {\r\n    metamask\r\n      .connect({\r\n        dontRedirect: true,\r\n      })\r\n      .then((isConnected) => {\r\n        if (!isConnected) {\r\n          return\r\n        }\r\n\r\n        this.setState(\r\n          {\r\n            isMetamaskConnected: true,\r\n            metamaskAddress: metamask.getAddress(),\r\n          },\r\n          () => {\r\n            this.applyAddress({\r\n              type: AddressType.Metamask,\r\n              value: metamask.getAddress(),\r\n            })\r\n          }\r\n        )\r\n      }).catch((error) => {\r\n        console.error('Metamask rejected', error)\r\n      })\r\n  }\r\n\r\n  toggleScan = () => {\r\n    const { isScanActive } = this.state\r\n    this.setState(() => ({\r\n      isScanActive: !isScanActive,\r\n    }))\r\n  }\r\n\r\n  handleScanError(err) {\r\n    console.error('Scan error', err)\r\n  }\r\n\r\n  handleScan(data) {\r\n    if (data) {\r\n      const address = data.includes(':') ? data.split(':')[1] : data\r\n      this.toggleScan()\r\n      this.applyAddress({\r\n        type: AddressType.Custom,\r\n        value: address,\r\n      })\r\n    }\r\n  }\r\n\r\n  handleOptionSelect(option) {\r\n    const { selectedType: oldSelectedType } = this.state\r\n\r\n    const { value: selectedType, dontSelect } = option\r\n\r\n    if (selectedType === 'InternalAddressCreate') {\r\n      this.goСreateWallet()\r\n      return\r\n    }\r\n\r\n    this.setState(\r\n      {\r\n        selectedType: dontSelect ? oldSelectedType : selectedType,\r\n      },\r\n      () => {\r\n        if (!selectedType) {\r\n          return\r\n        }\r\n\r\n        let value\r\n\r\n        if (selectedType === AddressType.Internal) {\r\n          value = this.getInternalAddress()\r\n        }\r\n\r\n        if (selectedType === AddressType.Metamask) {\r\n          value = metamask.getAddress()\r\n        }\r\n\r\n        /*if (selectedType === AddressType.Custom) {\r\n        // apply address input blur / qrScan\r\n        return\r\n      }*/\r\n\r\n        if (selectedType === AddressType.Metamask && !metamask.isConnected()) {\r\n          this.handleConnectMetamask()\r\n        } else {\r\n          this.applyAddress({\r\n            type: selectedType,\r\n            value,\r\n          })\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  applyAddress(address) {\r\n    const { onChange, currency } = this.props\r\n    const { type, value } = address\r\n\r\n    if (typeof onChange !== 'function') {\r\n      return\r\n    }\r\n\r\n    onChange({\r\n      currency,\r\n      type,\r\n      value,\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { currency, isDark, label, hiddenCoinsList, allData, role } = this.props\r\n\r\n    const {\r\n      selectedType,\r\n      walletAddressFocused,\r\n      isMetamaskConnected,\r\n      metamaskAddress,\r\n      isScanActive,\r\n      hasError,\r\n    } = this.state\r\n\r\n    const ticker = this.getTicker()\r\n\r\n    const { balance: internalBalance } = actions.core.getWallet({\r\n      currency,\r\n      addressType: AddressType.Internal,\r\n    })\r\n\r\n    const isInternalOptionDisabled =\r\n      role === AddressRole.Send && (!internalBalance || internalBalance === 0)\r\n\r\n    const isMetamaskOption = ethToken.isEthOrEthToken({ name: currency })\r\n    const isMetamaskInstalled = metamask.isEnabled()\r\n\r\n    // Forbid `Custom address` option when using ethereum/tokens\r\n    // because you need to make a request to the contract\r\n    const isCustomAddressOption = !ethToken.isEthOrEthToken({ name: currency })\r\n    const isCustomOptionInputHidden =\r\n      role === AddressRole.Send && COIN_DATA[ticker] && COIN_DATA[ticker].model === COIN_MODEL.UTXO\r\n\r\n    const web3Icon = metamask.isConnected()\r\n      ? web3Icons[metamask.web3connect.getProviderType()] || false\r\n      : web3Icons[metamask.web3connect.getInjectedType()] || false\r\n\r\n    const options = [\r\n      {\r\n        value: 'placeholder',\r\n        title: <FormattedMessage {...langLabels.labelSpecifyAddress} />,\r\n        disabled: true,\r\n        hidden: true,\r\n      },\r\n      ...(this.isCurrencyInInternalWallet()\r\n        ? [\r\n            {\r\n              value: AddressType.Internal,\r\n              icon: iconInternal,\r\n              title: !isInternalOptionDisabled ? (\r\n                <Fragment>\r\n                  <FormattedMessage {...langLabels.optionInternal} />\r\n                  <Address\r\n                    address={this.getInternalAddress()}\r\n                    format={AddressFormat.Short}\r\n                    type={AddressType.Internal}\r\n                  />\r\n                </Fragment>\r\n              ) : (\r\n                <FormattedMessage {...langLabels.optionInternalDisabled} />\r\n              ),\r\n              disabled: isInternalOptionDisabled,\r\n            },\r\n          ]\r\n        : [\r\n            {\r\n              value: 'InternalAddressCreate',\r\n              icon: iconInternal,\r\n              title: <FormattedMessage {...langLabels.optionInternalCreate} />,\r\n            },\r\n          ]),\r\n      ...(isMetamaskOption\r\n        ? isMetamaskConnected\r\n          ? [\r\n              {\r\n                value: AddressType.Metamask,\r\n                icon: web3Icon,\r\n                title: (\r\n                  <Fragment>\r\n                    {metamask.web3connect.getProviderTitle()}\r\n                    <Address\r\n                      address={metamaskAddress}\r\n                      format={AddressFormat.Short}\r\n                      type={AddressType.Metamask}\r\n                    />\r\n                  </Fragment>\r\n                ),\r\n              },\r\n            ]\r\n          : [\r\n              {\r\n                value: AddressType.Metamask,\r\n                icon: web3Icon,\r\n                title: <FormattedMessage {...langLabels.optionConnect} />,\r\n                dontSelect: true,\r\n              },\r\n            ]\r\n        : []),\r\n      ...(isCustomAddressOption\r\n        ? [\r\n            {\r\n              value: AddressType.Custom,\r\n              icon: iconCustom,\r\n              title: <FormattedMessage {...langLabels.optionCustom} />,\r\n              reduceSelectedItemText: !isCustomOptionInputHidden,\r\n            },\r\n          ]\r\n        : []),\r\n    ]\r\n\r\n    return (\r\n      <div\r\n        styleName={`addressSelect ${hasError ? 'addressSelect_error' : ''} ${\r\n          isDark ? '--dark' : ''\r\n        }`}\r\n      >\r\n        <div styleName=\"label\">{label}</div>\r\n        <DropDown\r\n          styleName=\"dropDown\"\r\n          items={options}\r\n          initialValue=\"placeholder\"\r\n          selectedValue={selectedType}\r\n          disableSearch={true}\r\n          dontScroll={true}\r\n          arrowSide=\"left\"\r\n          itemRender={(item) => <Option {...item} />}\r\n          onSelect={(value) => this.handleOptionSelect(value)}\r\n        />\r\n        {selectedType === AddressType.Metamask && metamask.isEnabled() && !isMetamaskConnected && (\r\n          <div styleName=\"selectedInner connectWrapper\">\r\n            <Button\r\n              styleName=\"button\"\r\n              blue\r\n              onClick={() => {\r\n                this.handleConnectMetamask()\r\n              }}\r\n            >\r\n              <FormattedMessage {...langLabels.connectMetamask} />\r\n            </Button>\r\n          </div>\r\n        )}\r\n        {selectedType === AddressType.Custom && !isCustomOptionInputHidden && (\r\n          <div styleName=\"selectedInner\">\r\n            <div styleName={`customWallet ${walletAddressFocused ? 'customWallet_focus' : ''}`}>\r\n              <div styleName=\"customAddressInput\">\r\n                <Input\r\n                  inputCustomStyle={{\r\n                    fontSize: '15px',\r\n                    textOverflow: 'ellipsis',\r\n                  }}\r\n                  required\r\n                  pattern=\"0-9a-zA-Z\"\r\n                  onFocus={() => this.handleFocusAddress()}\r\n                  onBlur={(event) => this.handleBlurAddress(event.target.value)}\r\n                  placeholder=\"Enter address\"\r\n                  valueLink={Link.all(this, '_')._} // required\r\n                  openScan={this.toggleScan}\r\n                  qr={isMobile}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {isScanActive && (\r\n          <QrReader\r\n            openScan={this.toggleScan}\r\n            handleError={this.handleScanError}\r\n            handleScan={this.handleScan}\r\n          />\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]}]}