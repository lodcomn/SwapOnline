{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\plugins\\backupUserData.ts","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\plugins\\backupUserData.ts","mtime":1614852228794},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5IjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCi8vIEB0cy1ub2NoZWNrCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBjb25maWcgZnJvbSAnaGVscGVycy9leHRlcm5hbENvbmZpZyc7CmltcG9ydCB7IGNvbnN0YW50cyB9IGZyb20gJ2hlbHBlcnMnOwp2YXIgbG9jYWxTdG9yYWdlID0gd2luZG93LmxvY2FsU3RvcmFnZTsKdmFyIGxzQ3VycmVudFVzZXIgPSAiIi5jb25jYXQocHJvY2Vzcy5lbnYuRU5UUlksICI6d3BfY3VycmVudFVzZXJJZCIpOwp2YXIgYmFja3VwVXNlckRhdGEgPSB7CiAgaXNVc2VyTG9nZ2VkSW46IGZ1bmN0aW9uIGlzVXNlckxvZ2dlZEluKCkgewogICAgcmV0dXJuIHdpbmRvdyAmJiB3aW5kb3cuV1B1c2VyVWlkICYmIGNvbmZpZy5vcHRzLldQdXNlckhhc2g7CiAgfSwKICBpc0ZpcnN0QmFja3VwOiBmdW5jdGlvbiBpc0ZpcnN0QmFja3VwKCkgewogICAgdmFyIGN1cnJlbnRVc2VyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0obHNDdXJyZW50VXNlcik7CiAgICByZXR1cm4gIWN1cnJlbnRVc2VyID8gdHJ1ZSA6IGZhbHNlOwogIH0sCiAgaGFzU2VydmVyQmFja3VwOiBmdW5jdGlvbiBoYXNTZXJ2ZXJCYWNrdXAoKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgaWYgKGNvbmZpZyAmJiBjb25maWcub3B0cyAmJiBjb25maWcub3B0cy5wbHVnaW5zICYmIGNvbmZpZy5vcHRzLnBsdWdpbnMuYmFja3VwUGx1Z2luICYmIGNvbmZpZy5vcHRzLnBsdWdpbnMucmVzdG9yZVBsdWdpblVybCAmJiB3aW5kb3cgJiYgd2luZG93LldQdXNlclVpZCAmJiBjb25maWcub3B0cy5XUHVzZXJIYXNoKSB7CiAgICAgICAgdmFyIHNldCA9IGZ1bmN0aW9uIHNldChrZXksIHZhbHVlKSB7CiAgICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLnNldEl0ZW0oY29uc3RhbnRzLnByaXZhdGVLZXlOYW1lc1trZXldLCB2YWx1ZSk7CiAgICAgICAgfTsKCiAgICAgICAgYXhpb3MucG9zdChjb25maWcub3B0cy5wbHVnaW5zLnJlc3RvcmVQbHVnaW5VcmwsIHsKICAgICAgICAgIFdQdXNlclVpZDogd2luZG93LldQdXNlclVpZCwKICAgICAgICAgIFdQdXNlckhhc2g6IGNvbmZpZy5vcHRzLldQdXNlckhhc2gKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXEpIHsKICAgICAgICAgIGlmIChyZXEgJiYgcmVxLmRhdGEgJiYgcmVxLmRhdGEuYW5zd2VyICYmIHJlcS5kYXRhLmFuc3dlciA9PT0gIm9rIiAmJiByZXEuZGF0YS5kYXRhKSB7CiAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXNvbHZlKGZhbHNlKTsKICAgICAgICAgIH0KICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmVzb2x2ZShmYWxzZSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVzb2x2ZShmYWxzZSk7CiAgICAgIH0KICAgIH0pOwogIH0sCiAgaXNVc2VyQ2hhbmdlZDogZnVuY3Rpb24gaXNVc2VyQ2hhbmdlZCgpIHsKICAgIHZhciBjdXJyZW50VXNlciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGxzQ3VycmVudFVzZXIpOwogICAgcmV0dXJuIGN1cnJlbnRVc2VyICE9PSAiIi5jb25jYXQod2luZG93LldQdXNlclVpZCkgJiYgd2luZG93LldQdXNlclVpZCA/IHRydWUgOiBmYWxzZTsKICB9LAogIGJhY2t1cFVzZXI6IGZ1bmN0aW9uIGJhY2t1cFVzZXIoKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgaWYgKGNvbmZpZyAmJiBjb25maWcub3B0cyAmJiBjb25maWcub3B0cy5wbHVnaW5zICYmIGNvbmZpZy5vcHRzLnBsdWdpbnMuYmFja3VwUGx1Z2luICYmIGNvbmZpZy5vcHRzLnBsdWdpbnMuYmFja3VwUGx1Z2luVXJsICYmIHdpbmRvdyAmJiB3aW5kb3cuV1B1c2VyVWlkICYmIGNvbmZpZy5vcHRzLldQdXNlckhhc2gpIHsKICAgICAgICB2YXIgZ2V0ID0gZnVuY3Rpb24gZ2V0KGtleSkgewogICAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKGNvbnN0YW50cy5wcml2YXRlS2V5TmFtZXNba2V5XSk7CiAgICAgICAgfTsKCiAgICAgICAgdmFyIGJhY2t1cCA9IHsKICAgICAgICAgIGJ0Y01uZW1vbmljOiBnZXQoImJ0Y01uZW1vbmljIiksCiAgICAgICAgICBldGhNbmVtb25pYzogZ2V0KCJldGhNbmVtb25pYyIpLAogICAgICAgICAgZXRoOiBnZXQoImV0aCIpLAogICAgICAgICAgYnRjOiBnZXQoImJ0YyIpLAogICAgICAgICAgZ2hvc3Q6IGdldCgiZ2hvc3QiKSwKICAgICAgICAgIG5leHQ6IGdldCgibmV4dCIpLAogICAgICAgICAgZXRoT2xkOiBnZXQoImV0aE9sZCIpLAogICAgICAgICAgYnRjT2xkOiBnZXQoImJ0Y09sZCIpLAogICAgICAgICAgdHdlbnR5d29yZHM6IGdldCgidHdlbnR5d29yZHMiKSwKICAgICAgICAgIGJ0Y011bHRpc2lnOiBnZXQoImJ0Y011bHRpc2lnIiksCiAgICAgICAgICBidGNNdWx0aXNpZ090aGVyT3duZXJLZXk6IGdldCgiYnRjTXVsdGlzaWdPdGhlck93bmVyS2V5IiksCiAgICAgICAgICBidGNNdWx0aXNpZ090aGVyT3duZXJLZXlNbmVtb25pYzogZ2V0KCJidGNNdWx0aXNpZ090aGVyT3duZXJLZXlNbmVtb25pYyIpLAogICAgICAgICAgYnRjTXVsdGlzaWdPdGhlck93bmVyS2V5T2xkOiBnZXQoImJ0Y011bHRpc2lnT3RoZXJPd25lcktleU9sZCIpLAogICAgICAgICAgYnRjU21zTW5lbW9uaWNLZXk6IGdldCgiYnRjU21zTW5lbW9uaWNLZXkiKSwKICAgICAgICAgIGJ0Y1Ntc01uZW1vbmljS2V5R2VuZXJhdGVkOiBnZXQoImJ0Y1Ntc01uZW1vbmljS2V5R2VuZXJhdGVkIiksCiAgICAgICAgICBidGNTbXNNbmVtb25pY0tleU1uZW1vbmljOiBnZXQoImJ0Y1Ntc01uZW1vbmljS2V5TW5lbW9uaWMiKSwKICAgICAgICAgIGJ0Y1Ntc01uZW1vbmljS2V5T2xkOiBnZXQoImJ0Y1Ntc01uZW1vbmljS2V5T2xkIiksCiAgICAgICAgICBidGNQaW5NbmVtb25pY0tleTogZ2V0KCJidGNQaW5NbmVtb25pY0tleSIpLAogICAgICAgICAgaGlkZGVuQ29pbnNMaXN0OiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShjb25zdGFudHMubG9jYWxTdG9yYWdlLmhpZGRlbkNvaW5zTGlzdCksCiAgICAgICAgICBpc1dhbGxldENyZWF0ZTogbG9jYWxTdG9yYWdlLmdldEl0ZW0oY29uc3RhbnRzLmxvY2FsU3RvcmFnZS5pc1dhbGxldENyZWF0ZSksCiAgICAgICAgICBkaWRQcm90ZWN0ZWRCdGNDcmVhdGVkOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShjb25zdGFudHMubG9jYWxTdG9yYWdlLmRpZFByb3RlY3RlZEJ0Y0NyZWF0ZWQpLAogICAgICAgICAgZGlkUGluQnRjQ3JlYXRlZDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oY29uc3RhbnRzLmxvY2FsU3RvcmFnZS5kaWRQaW5CdGNDcmVhdGVkKQogICAgICAgIH07CiAgICAgICAgYXhpb3MucG9zdChjb25maWcub3B0cy5wbHVnaW5zLmJhY2t1cFBsdWdpblVybCwgX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBiYWNrdXApLCB7fSwgewogICAgICAgICAgV1B1c2VyVWlkOiB3aW5kb3cuV1B1c2VyVWlkLAogICAgICAgICAgV1B1c2VySGFzaDogY29uZmlnLm9wdHMuV1B1c2VySGFzaAogICAgICAgIH0pKS50aGVuKGZ1bmN0aW9uIChhbnN3ZXIpIHsKICAgICAgICAgIHZhciBkYXRhID0gYW5zd2VyLmRhdGE7CgogICAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5hbnN3ZXIgJiYgZGF0YS5hbnN3ZXIgPT09ICJvayIpIHsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0obHNDdXJyZW50VXNlciwgd2luZG93LldQdXNlclVpZCk7IC8vQAoKICAgICAgICAgICAgcmVzb2x2ZSh0cnVlLCB0cnVlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vQAogICAgICAgICAgICByZXNvbHZlKGZhbHNlLCB0cnVlKTsKICAgICAgICAgIH0KICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZSkgewogICAgICAgICAgLy9ACiAgICAgICAgICByZXNvbHZlKGZhbHNlLCB0cnVlKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvL0AKICAgICAgICByZXNvbHZlKGZhbHNlLCBmYWxzZSk7CiAgICAgIH0KICAgIH0pOwogIH0sCiAgY2xlYW51cFNlZWQ6IGZ1bmN0aW9uIGNsZWFudXBTZWVkKCkgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgIGlmIChjb25maWcgJiYgY29uZmlnLm9wdHMgJiYgY29uZmlnLm9wdHMucGx1Z2lucyAmJiBjb25maWcub3B0cy5wbHVnaW5zLmJhY2t1cFBsdWdpbiAmJiBjb25maWcub3B0cy5wbHVnaW5zLmJhY2t1cFBsdWdpblVybCAmJiB3aW5kb3cgJiYgd2luZG93LldQdXNlclVpZCAmJiBjb25maWcub3B0cy5XUHVzZXJIYXNoKSB7CiAgICAgICAgYXhpb3MucG9zdChjb25maWcub3B0cy5wbHVnaW5zLmJhY2t1cFBsdWdpblVybCwgewogICAgICAgICAgV1B1c2VyVWlkOiB3aW5kb3cuV1B1c2VyVWlkLAogICAgICAgICAgV1B1c2VySGFzaDogY29uZmlnLm9wdHMuV1B1c2VySGFzaCwKICAgICAgICAgIGFjdGlvbjogJ2NsZWFudXAnCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVxKSB7CiAgICAgICAgICBpZiAocmVxICYmIHJlcS5kYXRhICYmIHJlcS5kYXRhLmFuc3dlciAmJiByZXEuZGF0YS5hbnN3ZXIgPT09ICJvayIpIHsKICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpOwogICAgICAgICAgfQogICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXNvbHZlKGZhbHNlKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXNvbHZlKGZhbHNlKTsKICAgICAgfQogICAgfSk7CiAgfSwKICByZXN0b3JlVXNlcjogZnVuY3Rpb24gcmVzdG9yZVVzZXIoKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgaWYgKGNvbmZpZyAmJiBjb25maWcub3B0cyAmJiBjb25maWcub3B0cy5wbHVnaW5zICYmIGNvbmZpZy5vcHRzLnBsdWdpbnMuYmFja3VwUGx1Z2luICYmIGNvbmZpZy5vcHRzLnBsdWdpbnMucmVzdG9yZVBsdWdpblVybCAmJiB3aW5kb3cgJiYgd2luZG93LldQdXNlclVpZCAmJiBjb25maWcub3B0cy5XUHVzZXJIYXNoKSB7CiAgICAgICAgdmFyIHNldCA9IGZ1bmN0aW9uIHNldChrZXksIHZhbHVlKSB7CiAgICAgICAgICBpZiAodmFsdWUpIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGNvbnN0YW50cy5wcml2YXRlS2V5TmFtZXNba2V5XSwgdmFsdWUpOwogICAgICAgIH07CgogICAgICAgIGF4aW9zLnBvc3QoY29uZmlnLm9wdHMucGx1Z2lucy5yZXN0b3JlUGx1Z2luVXJsLCB7CiAgICAgICAgICBXUHVzZXJVaWQ6IHdpbmRvdy5XUHVzZXJVaWQsCiAgICAgICAgICBXUHVzZXJIYXNoOiBjb25maWcub3B0cy5XUHVzZXJIYXNoCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVxKSB7CiAgICAgICAgICBpZiAocmVxICYmIHJlcS5kYXRhICYmIHJlcS5kYXRhLmFuc3dlciAmJiByZXEuZGF0YS5hbnN3ZXIgPT09ICJvayIgJiYgcmVxLmRhdGEuZGF0YSkgewogICAgICAgICAgICB2YXIgZGF0YSA9IHJlcS5kYXRhLmRhdGE7CiAgICAgICAgICAgIHNldCgiYnRjIiwgZGF0YS5idGMpOwogICAgICAgICAgICBzZXQoImdob3N0IiwgZGF0YS5naG9zdCk7CiAgICAgICAgICAgIHNldCgibmV4dCIsIGRhdGEubmV4dCk7CiAgICAgICAgICAgIHNldCgiYnRjTW5lbW9uaWMiLCBkYXRhLmJ0Y01uZW1vbmljKTsKICAgICAgICAgICAgc2V0KCJidGNNdWx0aXNpZyIsIGRhdGEuYnRjTXVsdGlzaWcpOwogICAgICAgICAgICBzZXQoImJ0Y011bHRpc2lnT3RoZXJPd25lcktleSIsIGRhdGEuYnRjTXVsdGlzaWdPdGhlck93bmVyS2V5KTsKICAgICAgICAgICAgc2V0KCJidGNNdWx0aXNpZ090aGVyT3duZXJLZXlNbmVtb25pYyIsIGRhdGEuYnRjTXVsdGlzaWdPdGhlck93bmVyS2V5TW5lbW9uaWMpOwogICAgICAgICAgICBzZXQoImJ0Y011bHRpc2lnT3RoZXJPd25lcktleU9sZCIsIGRhdGEuYnRjTXVsdGlzaWdPdGhlck93bmVyS2V5T2xkKTsKICAgICAgICAgICAgc2V0KCJidGNPbGQiLCBkYXRhLmJ0Y09sZCk7CiAgICAgICAgICAgIHNldCgiYnRjUGluTW5lbW9uaWNLZXkiLCBkYXRhLmJ0Y1Bpbk1uZW1vbmljS2V5KTsKICAgICAgICAgICAgc2V0KCJidGNTbXNNbmVtb25pY0tleSIsIGRhdGEuYnRjU21zTW5lbW9uaWNLZXkpOwogICAgICAgICAgICBzZXQoImJ0Y1Ntc01uZW1vbmljS2V5R2VuZXJhdGVkIiwgZGF0YS5idGNTbXNNbmVtb25pY0tleUdlbmVyYXRlZCk7CiAgICAgICAgICAgIHNldCgiYnRjU21zTW5lbW9uaWNLZXlNbmVtb25pYyIsIGRhdGEuYnRjU21zTW5lbW9uaWNLZXlNbmVtb25pYyk7CiAgICAgICAgICAgIHNldCgiYnRjU21zTW5lbW9uaWNLZXlPbGQiLCBkYXRhLmJ0Y1Ntc01uZW1vbmljS2V5T2xkKTsKICAgICAgICAgICAgc2V0KCJldGgiLCBkYXRhLmV0aCk7CiAgICAgICAgICAgIHNldCgiZXRoTW5lbW9uaWMiLCBkYXRhLmV0aE1uZW1vbmljKTsKICAgICAgICAgICAgc2V0KCJldGhPbGQiLCBkYXRhLmV0aE9sZCk7CiAgICAgICAgICAgIHNldCgiZXRoTW5lbW9uaWMiLCBkYXRhLmV0aE1uZW1vbmljKTsKICAgICAgICAgICAgc2V0KCJ0d2VudHl3b3JkcyIsIGRhdGEudHdlbnR5d29yZHMpOyAvLyBzZXQgb3RoZXIgcGFyYW1zIHRvIHRydWUgKHVzZXIgaGFzIG9uIHRvdXIgYW5kIG90aGVyIHBhZ2VzKQoKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oY29uc3RhbnRzLmxvY2FsU3RvcmFnZS5oaWRkZW5Db2luc0xpc3QsIGRhdGEuaGlkZGVuQ29pbnNMaXN0KTsgLy9ACgogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShjb25zdGFudHMubG9jYWxTdG9yYWdlLmlzV2FsbGV0Q3JlYXRlLCB0cnVlKTsgLy9ACgogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShjb25zdGFudHMubG9jYWxTdG9yYWdlLndhc09uRXhjaGFuZ2UsIHRydWUpOyAvL0AKCiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGNvbnN0YW50cy5sb2NhbFN0b3JhZ2Uud2FzT25XaWRnZXRXYWxsZXQsIHRydWUpOyAvL0AKCiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGNvbnN0YW50cy5sb2NhbFN0b3JhZ2Uud2FzQ2F1dGlvblBhc3NlZCwgdHJ1ZSk7IC8vQAoKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oY29uc3RhbnRzLmxvY2FsU3RvcmFnZS53YXNPbldhbGxldCwgdHJ1ZSk7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGNvbnN0YW50cy5sb2NhbFN0b3JhZ2UuZGlkUHJvdGVjdGVkQnRjQ3JlYXRlZCwgZGF0YS5kaWRQcm90ZWN0ZWRCdGNDcmVhdGVkKTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oY29uc3RhbnRzLmxvY2FsU3RvcmFnZS5kaWRQaW5CdGNDcmVhdGVkLCBkYXRhLmRpZFBpbkJ0Y0NyZWF0ZWQpOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShsc0N1cnJlbnRVc2VyLCB3aW5kb3cuV1B1c2VyVWlkKTsKICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHJlc29sdmUoZmFsc2UpOwogICAgICB9CiAgICB9KTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IGJhY2t1cFVzZXJEYXRhOw=="},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/front/shared/plugins/backupUserData.ts"],"names":["axios","config","constants","localStorage","window","lsCurrentUser","process","env","ENTRY","backupUserData","isUserLoggedIn","WPuserUid","opts","WPuserHash","isFirstBackup","currentUser","getItem","hasServerBackup","Promise","resolve","plugins","backupPlugin","restorePluginUrl","set","key","value","setItem","privateKeyNames","post","then","req","data","answer","e","isUserChanged","backupUser","backupPluginUrl","get","backup","btcMnemonic","ethMnemonic","eth","btc","ghost","next","ethOld","btcOld","twentywords","btcMultisig","btcMultisigOtherOwnerKey","btcMultisigOtherOwnerKeyMnemonic","btcMultisigOtherOwnerKeyOld","btcSmsMnemonicKey","btcSmsMnemonicKeyGenerated","btcSmsMnemonicKeyMnemonic","btcSmsMnemonicKeyOld","btcPinMnemonicKey","hiddenCoinsList","isWalletCreate","didProtectedBtcCreated","didPinBtcCreated","cleanupSeed","action","restoreUser","wasOnExchange","wasOnWidgetWallet","wasCautionPassed","wasOnWallet"],"mappings":"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","sourcesContent":["// @ts-nocheck\r\nimport axios from 'axios'\r\nimport config from 'helpers/externalConfig'\r\nimport { constants } from 'helpers'\r\n\r\n\r\nconst localStorage = window.localStorage\r\nconst lsCurrentUser = `${process.env.ENTRY}:wp_currentUserId`\r\n\r\nconst backupUserData = {\r\n  isUserLoggedIn: () => {\r\n    return (window && window.WPuserUid && config.opts.WPuserHash)\r\n  },\r\n  isFirstBackup: () => {\r\n    const currentUser = localStorage.getItem(lsCurrentUser)\r\n    return (!currentUser) ? true : false\r\n  },\r\n  hasServerBackup: () => {\r\n    return new Promise((resolve) => {\r\n      if (config\r\n        && config.opts\r\n        && config.opts.plugins\r\n        && config.opts.plugins.backupPlugin\r\n        && config.opts.plugins.restorePluginUrl\r\n        && window\r\n        && window.WPuserUid\r\n        && config.opts.WPuserHash\r\n      ) {\r\n        const set = (key, value) => localStorage.setItem(constants.privateKeyNames[key], value)\r\n\r\n        axios.post(config.opts.plugins.restorePluginUrl, {\r\n          WPuserUid: window.WPuserUid,\r\n          WPuserHash: config.opts.WPuserHash,\r\n        }).then((req) => {\r\n          if (req\r\n            && req.data\r\n            && req.data.answer\r\n            && req.data.answer === `ok`\r\n            && req.data.data\r\n          ) {\r\n            resolve(true)\r\n          } else {\r\n            resolve(false)\r\n          }\r\n        }).catch((e) => {\r\n          resolve(false)\r\n        })\r\n      } else {\r\n        resolve(false)\r\n      }\r\n    })\r\n  },\r\n  isUserChanged: () => {\r\n    const currentUser = localStorage.getItem(lsCurrentUser)\r\n\r\n    return (currentUser !== `${window.WPuserUid}` && window.WPuserUid) ? true : false\r\n  },\r\n  backupUser: () => {\r\n    return new Promise((resolve) => {\r\n      if (config\r\n        && config.opts\r\n        && config.opts.plugins\r\n        && config.opts.plugins.backupPlugin\r\n        && config.opts.plugins.backupPluginUrl\r\n        && window\r\n        && window.WPuserUid\r\n        && config.opts.WPuserHash\r\n      ) {\r\n        const get = (key) => localStorage.getItem(constants.privateKeyNames[key])\r\n\r\n        const backup = {\r\n          btcMnemonic:                      get(`btcMnemonic`),\r\n          ethMnemonic:                      get(`ethMnemonic`),\r\n          eth:                              get(`eth`),\r\n          btc:                              get(`btc`),\r\n          ghost:                            get(`ghost`),\r\n          next:                             get(`next`),\r\n          ethOld:                           get(`ethOld`),\r\n          btcOld:                           get(`btcOld`),\r\n          twentywords:                      get(`twentywords`),\r\n          btcMultisig:                      get(`btcMultisig`),\r\n          btcMultisigOtherOwnerKey:         get(`btcMultisigOtherOwnerKey`),\r\n          btcMultisigOtherOwnerKeyMnemonic: get(`btcMultisigOtherOwnerKeyMnemonic`),\r\n          btcMultisigOtherOwnerKeyOld:      get(`btcMultisigOtherOwnerKeyOld`),\r\n          btcSmsMnemonicKey:                get(`btcSmsMnemonicKey`),\r\n          btcSmsMnemonicKeyGenerated:       get(`btcSmsMnemonicKeyGenerated`),\r\n          btcSmsMnemonicKeyMnemonic:        get(`btcSmsMnemonicKeyMnemonic`),\r\n          btcSmsMnemonicKeyOld:             get(`btcSmsMnemonicKeyOld`),\r\n          btcPinMnemonicKey:                get(`btcPinMnemonicKey`),\r\n          hiddenCoinsList:                  localStorage.getItem(constants.localStorage.hiddenCoinsList),\r\n          isWalletCreate:                   localStorage.getItem(constants.localStorage.isWalletCreate),\r\n          didProtectedBtcCreated:           localStorage.getItem(constants.localStorage.didProtectedBtcCreated),\r\n          didPinBtcCreated:                 localStorage.getItem(constants.localStorage.didPinBtcCreated),\r\n        }\r\n\r\n        axios.post(config.opts.plugins.backupPluginUrl, {\r\n          ...backup,\r\n          WPuserUid: window.WPuserUid,\r\n          WPuserHash: config.opts.WPuserHash,\r\n        }).then((answer) => {\r\n          const data = answer.data\r\n          if (data\r\n            && data.answer\r\n            && data.answer === `ok`\r\n          ) {\r\n            localStorage.setItem(lsCurrentUser, window.WPuserUid)\r\n            //@\r\n            resolve(true, true)\r\n          } else {\r\n            //@\r\n            resolve(false, true)\r\n          }\r\n        }).catch((e) => {\r\n          //@\r\n          resolve(false, true)\r\n        })\r\n      } else {\r\n        //@\r\n        resolve(false, false)\r\n      }\r\n    })\r\n  },\r\n  cleanupSeed: () => {\r\n    return new Promise((resolve) => {\r\n      if (config\r\n        && config.opts\r\n        && config.opts.plugins\r\n        && config.opts.plugins.backupPlugin\r\n        && config.opts.plugins.backupPluginUrl\r\n        && window\r\n        && window.WPuserUid\r\n        && config.opts.WPuserHash\r\n      ) {\r\n        axios.post(config.opts.plugins.backupPluginUrl, {\r\n          WPuserUid: window.WPuserUid,\r\n          WPuserHash: config.opts.WPuserHash,\r\n          action: 'cleanup',\r\n        }).then((req) => {\r\n          if (req\r\n            && req.data\r\n            && req.data.answer\r\n            && req.data.answer === `ok`\r\n          ) {\r\n            resolve(true)\r\n          } else {\r\n            resolve(false)\r\n          }\r\n        }).catch((e) => {\r\n          resolve(false)\r\n        })\r\n      } else {\r\n        resolve(false)\r\n      }\r\n    })\r\n  },\r\n  restoreUser: () => {\r\n    return new Promise((resolve) => {\r\n      if (config\r\n        && config.opts\r\n        && config.opts.plugins\r\n        && config.opts.plugins.backupPlugin\r\n        && config.opts.plugins.restorePluginUrl\r\n        && window\r\n        && window.WPuserUid\r\n        && config.opts.WPuserHash\r\n      ) {\r\n        const set = (key, value) => {\r\n          if (value) localStorage.setItem(constants.privateKeyNames[key], value)\r\n        }\r\n\r\n        axios.post(config.opts.plugins.restorePluginUrl, {\r\n          WPuserUid: window.WPuserUid,\r\n          WPuserHash: config.opts.WPuserHash,\r\n        }).then((req) => {\r\n          if (req\r\n            && req.data\r\n            && req.data.answer\r\n            && req.data.answer === `ok`\r\n            && req.data.data\r\n          ) {\r\n            const data = req.data.data\r\n\r\n            set(`btc`, data.btc)\r\n            set(`ghost`, data.ghost)\r\n            set(`next`, data.next)\r\n            set(`btcMnemonic`, data.btcMnemonic)\r\n            set(`btcMultisig`, data.btcMultisig)\r\n            set(`btcMultisigOtherOwnerKey`, data.btcMultisigOtherOwnerKey)\r\n            set(`btcMultisigOtherOwnerKeyMnemonic`, data.btcMultisigOtherOwnerKeyMnemonic)\r\n            set(`btcMultisigOtherOwnerKeyOld`, data.btcMultisigOtherOwnerKeyOld)\r\n            set(`btcOld`, data.btcOld)\r\n            set(`btcPinMnemonicKey`, data.btcPinMnemonicKey)\r\n            set(`btcSmsMnemonicKey`, data.btcSmsMnemonicKey)\r\n            set(`btcSmsMnemonicKeyGenerated`, data.btcSmsMnemonicKeyGenerated)\r\n            set(`btcSmsMnemonicKeyMnemonic`, data.btcSmsMnemonicKeyMnemonic)\r\n            set(`btcSmsMnemonicKeyOld`, data.btcSmsMnemonicKeyOld)\r\n            set(`eth`, data.eth)\r\n            set(`ethMnemonic`, data.ethMnemonic)\r\n            set(`ethOld`, data.ethOld)\r\n            set(`ethMnemonic`, data.ethMnemonic)\r\n            set(`twentywords`, data.twentywords)\r\n\r\n            // set other params to true (user has on tour and other pages)\r\n            localStorage.setItem(constants.localStorage.hiddenCoinsList, data.hiddenCoinsList)\r\n            //@\r\n            localStorage.setItem(constants.localStorage.isWalletCreate, true)\r\n            //@\r\n            localStorage.setItem(constants.localStorage.wasOnExchange, true)\r\n            //@\r\n            localStorage.setItem(constants.localStorage.wasOnWidgetWallet, true)\r\n            //@\r\n            localStorage.setItem(constants.localStorage.wasCautionPassed, true)\r\n            //@\r\n            localStorage.setItem(constants.localStorage.wasOnWallet, true)\r\n            localStorage.setItem(constants.localStorage.didProtectedBtcCreated, data.didProtectedBtcCreated)\r\n            localStorage.setItem(constants.localStorage.didPinBtcCreated, data.didPinBtcCreated)\r\n            localStorage.setItem(lsCurrentUser, window.WPuserUid)\r\n\r\n\r\n            resolve(true)\r\n          } else {\r\n            resolve(false)\r\n          }\r\n        })\r\n      } else {\r\n        resolve(false)\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nexport default backupUserData\r\n"]}]}