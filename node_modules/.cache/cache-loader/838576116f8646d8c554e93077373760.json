{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\core\\swap.app\\Events.ts","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\core\\swap.app\\Events.ts","mtime":1614842913745},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJzsKCnZhciBFdmVudCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgLyoqDQogICAqDQogICAqIEBwYXJhbSBuYW1lIHtzdHJpbmd9DQogICAqLwogIGZ1bmN0aW9uIEV2ZW50KG5hbWUpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFdmVudCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJuYW1lIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImhhbmRsZXJzIiwgdm9pZCAwKTsKCiAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgdGhpcy5oYW5kbGVycyA9IFtdOwogIH0KICAvKioNCiAgICogQWRkIGhhbmRsZXIgdG8gY3VycmVudCBFdmVudA0KICAgKg0KICAgKiBAcGFyYW0gaGFuZGxlciB7ZnVuY3Rpb259DQogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKEV2ZW50LCBbewogICAga2V5OiAiYWRkSGFuZGxlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkSGFuZGxlcihoYW5kbGVyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmhhbmRsZXJzLnB1c2goaGFuZGxlci5iaW5kKHsKICAgICAgICB1bnN1YnNjcmliZTogZnVuY3Rpb24gdW5zdWJzY3JpYmUoKSB7CiAgICAgICAgICBfdGhpcy5yZW1vdmVIYW5kbGVyKGhhbmRsZXIpOwogICAgICAgIH0KICAgICAgfSkpOwogICAgfQogICAgLyoqDQogICAgICogUmVtb3ZlIGhhbmRsZXIgZnJvbSBjdXJyZW50IEV2ZW50DQogICAgICoNCiAgICAgKiBAcGFyYW0gaGFuZGxlciB7ZnVuY3Rpb259DQogICAgICogQHJldHVybnMge0FycmF5LjxUPnwqfQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJyZW1vdmVIYW5kbGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVIYW5kbGVyKGhhbmRsZXIpIHsKICAgICAgdmFyIGhhbmRsZXJJbmRleCA9IHRoaXMuaGFuZGxlcnMuaW5kZXhPZihoYW5kbGVyKTsKICAgICAgdGhpcy5oYW5kbGVycy5zcGxpY2UoaGFuZGxlckluZGV4LCAxKTsKICAgIH0KICAgIC8qKg0KICAgICAqIENhbGwgYWxsIGhhbmRsZXJzIGluIGFsbCBwcmlvcml0aWVzIG9mIGN1cnJlbnQgRXZlbnQNCiAgICAgKg0KICAgICAqIEBwYXJhbSBldmVudEFyZ3Mgey4uLmFycmF5fQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJjYWxsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjYWxsKCkgewogICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgZXZlbnRBcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICAgIGV2ZW50QXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgICAgfQoKICAgICAgdGhpcy5oYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uIChoYW5kbGVyKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGhhbmRsZXIuYXBwbHkodm9pZCAwLCBldmVudEFyZ3MpOwogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gRXZlbnQ7Cn0oKTsKCnZhciBFdmVudEFnZ3JlZ2F0b3IgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEV2ZW50QWdncmVnYXRvcigpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFdmVudEFnZ3JlZ2F0b3IpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZXZlbnRzIiwgdm9pZCAwKTsKCiAgICB0aGlzLmV2ZW50cyA9IHt9OwogIH0KICAvKioNCiAgICogR2V0IEV2ZW50IGJ5IG5hbWUNCiAgICoNCiAgICogQHBhcmFtIG5hbWUNCiAgICogQHJldHVybnMgeyp9DQogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKEV2ZW50QWdncmVnYXRvciwgW3sKICAgIGtleTogImdldEV2ZW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRFdmVudChuYW1lKSB7CiAgICAgIHZhciBldmVudCA9IHRoaXMuZXZlbnRzW25hbWVdOwoKICAgICAgaWYgKCFldmVudCkgewogICAgICAgIGV2ZW50ID0gbmV3IEV2ZW50KG5hbWUpOwogICAgICAgIHRoaXMuZXZlbnRzW25hbWVdID0gZXZlbnQ7CiAgICAgIH0KCiAgICAgIHJldHVybiBldmVudDsKICAgIH0KICAgIC8qKg0KICAgICAqDQogICAgICogQHBhcmFtIG5hbWUge3N0cmluZ30NCiAgICAgKiBAcGFyYW0gaGFuZGxlciB7ZnVuY3Rpb259DQogICAgICogQHJldHVybnMge3sgZXZlbnQ6ICosIGhhbmRsZXI6ICogfX0NCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAic3Vic2NyaWJlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzdWJzY3JpYmUobmFtZSwgaGFuZGxlcikgewogICAgICB2YXIgZXZlbnQgPSB0aGlzLmdldEV2ZW50KG5hbWUpOwogICAgICBldmVudC5hZGRIYW5kbGVyKGhhbmRsZXIpOwogICAgICByZXR1cm4gewogICAgICAgIGV2ZW50OiBldmVudCwKICAgICAgICBoYW5kbGVyOiBoYW5kbGVyCiAgICAgIH07CiAgICB9CiAgICAvKioNCiAgICAgKg0KICAgICAqIEBwYXJhbSBldmVudE5hbWUge3N0cmluZ30NCiAgICAgKiBAcGFyYW0gaGFuZGxlciB7ZnVuY3Rpb259DQogICAgICovCgogIH0sIHsKICAgIGtleTogInVuc3Vic2NyaWJlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1bnN1YnNjcmliZShldmVudE5hbWUsIGhhbmRsZXIpIHsKICAgICAgdmFyIGV2ZW50ID0gdGhpcy5nZXRFdmVudChldmVudE5hbWUpOwogICAgICBldmVudC5yZW1vdmVIYW5kbGVyKGhhbmRsZXIpOwogICAgfQogICAgLyoqDQogICAgICoNCiAgICAgKiBAcGFyYW0gbmFtZSB7c3RyaW5nfQ0KICAgICAqIEBwYXJhbSBldmVudEFyZ3Mgey4uLmFycmF5fQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJkaXNwYXRjaCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcGF0Y2gobmFtZSkgewogICAgICB2YXIgZXZlbnQgPSB0aGlzLmdldEV2ZW50KG5hbWUpOwoKICAgICAgaWYgKGV2ZW50KSB7CiAgICAgICAgZGVidWcoJ3N3YXAudmVyYm9zZTpldmVudHMnKSgnZGlzcGF0Y2ggZXZlbnQnLCBuYW1lKTsKCiAgICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBldmVudEFyZ3MgPSBuZXcgQXJyYXkoX2xlbjIgPiAxID8gX2xlbjIgLSAxIDogMCksIF9rZXkyID0gMTsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykgewogICAgICAgICAgZXZlbnRBcmdzW19rZXkyIC0gMV0gPSBhcmd1bWVudHNbX2tleTJdOwogICAgICAgIH0KCiAgICAgICAgZXZlbnQuY2FsbC5hcHBseShldmVudCwgZXZlbnRBcmdzKTsKICAgICAgfQogICAgfQogICAgLyoqDQogICAgICogU3Vic2NyaWJlIHRvIEV2ZW50IGFuZCB1bnN1YnNjcmliZSBhZnRlciBjYWxsDQogICAgICoNCiAgICAgKiBAcGFyYW0gZXZlbnROYW1lIHtzdHJpbmd9DQogICAgICogQHBhcmFtIGhhbmRsZXIge2Z1bmN0aW9ufQ0KICAgICAqIEByZXR1cm5zIHt7IGV2ZW50OiAqLCBoYW5kbGVyV3JhcHBlcjogKGZ1bmN0aW9uKC4uLlsqXSkpIH19DQogICAgICovCgogIH0sIHsKICAgIGtleTogIm9uY2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uY2UoZXZlbnROYW1lLCBoYW5kbGVyKSB7CiAgICAgIHZhciBldmVudCA9IHRoaXMuZ2V0RXZlbnQoZXZlbnROYW1lKTsKCiAgICAgIHZhciBoYW5kbGVyV3JhcHBlciA9IGZ1bmN0aW9uIGhhbmRsZXJXcmFwcGVyKCkgewogICAgICAgIHZhciByZXN1bHQgPSBoYW5kbGVyLmFwcGx5KHZvaWQgMCwgYXJndW1lbnRzKTsKCiAgICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgICAgZXZlbnQucmVtb3ZlSGFuZGxlcihoYW5kbGVyV3JhcHBlcik7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgZXZlbnQuYWRkSGFuZGxlcihoYW5kbGVyV3JhcHBlcik7CiAgICAgIHJldHVybiB7CiAgICAgICAgZXZlbnQ6IGV2ZW50LAogICAgICAgIGhhbmRsZXJXcmFwcGVyOiBoYW5kbGVyV3JhcHBlcgogICAgICB9OwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEV2ZW50QWdncmVnYXRvcjsKfSgpOwoKdmFyIGV2ZW50cyA9IG5ldyBFdmVudEFnZ3JlZ2F0b3IoKTsKZXhwb3J0IGRlZmF1bHQgRXZlbnRBZ2dyZWdhdG9yOwpleHBvcnQgeyBldmVudHMgfTs="},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/core/swap.app/Events.ts"],"names":["debug","Event","name","handlers","handler","push","bind","unsubscribe","removeHandler","handlerIndex","indexOf","splice","eventArgs","forEach","err","console","error","EventAggregator","events","event","getEvent","addHandler","eventName","call","handlerWrapper","result"],"mappings":"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","sourcesContent":["import debug from 'debug'\r\n\r\n\r\nclass Event {\r\n\r\n  name: any\r\n  handlers: any[]\r\n\r\n  /**\r\n   *\r\n   * @param name {string}\r\n   */\r\n  constructor(name) {\r\n    this.name = name\r\n    this.handlers = []\r\n  }\r\n\r\n  /**\r\n   * Add handler to current Event\r\n   *\r\n   * @param handler {function}\r\n   */\r\n  addHandler(handler) {\r\n    this.handlers.push(handler.bind({\r\n      unsubscribe: () => {\r\n        this.removeHandler(handler)\r\n      },\r\n    }))\r\n  }\r\n\r\n  /**\r\n   * Remove handler from current Event\r\n   *\r\n   * @param handler {function}\r\n   * @returns {Array.<T>|*}\r\n   */\r\n  removeHandler(handler) {\r\n    const handlerIndex = this.handlers.indexOf(handler)\r\n\r\n    this.handlers.splice(handlerIndex, 1)\r\n  }\r\n\r\n  /**\r\n   * Call all handlers in all priorities of current Event\r\n   *\r\n   * @param eventArgs {...array}\r\n   */\r\n  call(...eventArgs) {\r\n    this.handlers.forEach((handler) => {\r\n      try {\r\n        handler(...eventArgs)\r\n      }\r\n      catch (err) {\r\n        console.error(err)\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nclass EventAggregator {\r\n\r\n  events: any\r\n\r\n  constructor() {\r\n    this.events = {}\r\n  }\r\n\r\n  /**\r\n   * Get Event by name\r\n   *\r\n   * @param name\r\n   * @returns {*}\r\n   */\r\n  getEvent(name) {\r\n    let event = this.events[name]\r\n\r\n    if (!event) {\r\n      event = new Event(name)\r\n      this.events[name] = event\r\n    }\r\n\r\n    return event\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param name {string}\r\n   * @param handler {function}\r\n   * @returns {{ event: *, handler: * }}\r\n   */\r\n  subscribe(name, handler) {\r\n    const event = this.getEvent(name)\r\n\r\n    event.addHandler(handler)\r\n\r\n    return { event, handler }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param eventName {string}\r\n   * @param handler {function}\r\n   */\r\n  unsubscribe(eventName, handler) {\r\n    const event = this.getEvent(eventName)\r\n\r\n    event.removeHandler(handler)\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param name {string}\r\n   * @param eventArgs {...array}\r\n   */\r\n  dispatch(name, ...eventArgs) {\r\n    const event = this.getEvent(name)\r\n\r\n    if (event) {\r\n      debug('swap.verbose:events')('dispatch event', name)\r\n      event.call(...eventArgs)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Subscribe to Event and unsubscribe after call\r\n   *\r\n   * @param eventName {string}\r\n   * @param handler {function}\r\n   * @returns {{ event: *, handlerWrapper: (function(...[*])) }}\r\n   */\r\n  once(eventName, handler) {\r\n    const event = this.getEvent(eventName)\r\n\r\n    const handlerWrapper = (...args) => {\r\n      const result = handler(...args)\r\n      if (result) {\r\n        event.removeHandler(handlerWrapper)\r\n      }\r\n    }\r\n\r\n    event.addHandler(handlerWrapper)\r\n\r\n    return { event, handlerWrapper }\r\n  }\r\n}\r\n\r\nconst events = new EventAggregator()\r\n\r\n\r\nexport default EventAggregator\r\n\r\nexport {\r\n  events,\r\n}\r\n"]}]}