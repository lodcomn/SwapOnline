{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\components\\modals\\InvoiceModal\\InvoiceModal.tsx","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\components\\modals\\InvoiceModal\\InvoiceModal.tsx","mtime":1614842913998},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI7CmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXNzZXJ0VGhpc0luaXRpYWxpemVkIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9nZXRQcm90b3R5cGVPZiI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSI7Cgp2YXIgX2RlYywgX2NsYXNzLCBfdGVtcDsKCmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gIkBiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yIjsKCmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9CgpmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09ICJ1bmRlZmluZWQiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSAiZnVuY3Rpb24iKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfQoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKaW1wb3J0IFJlYWN0LCB7IEZyYWdtZW50IH0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyBjb25zdGFudHMsIGZlZWRiYWNrIH0gZnJvbSAnaGVscGVycyc7CmltcG9ydCBhY3Rpb25zIGZyb20gJ3JlZHV4L2FjdGlvbnMnOwppbXBvcnQgTGluayBmcm9tICdsb2NhbF9tb2R1bGVzL3N3LXZhbHVlbGluayc7CmltcG9ydCBCaWdOdW1iZXIgZnJvbSAnYmlnbnVtYmVyLmpzJzsKaW1wb3J0IGNzc01vZHVsZXMgZnJvbSAncmVhY3QtY3NzLW1vZHVsZXMnOwppbXBvcnQgc3R5bGVzIGZyb20gJy4uL1N0eWxlcy9kZWZhdWx0LnNjc3MnOwppbXBvcnQgZHJvcERvd25TdHlsZXMgZnJvbSAnY29tcG9uZW50cy91aS9Ecm9wRG93bi9Ecm9wRG93bi5zY3NzJzsKaW1wb3J0IG93blN0eWxlIGZyb20gJy4vSW52b2ljZU1vZGFsLnNjc3MnOwppbXBvcnQgTW9kYWwgZnJvbSAnY29tcG9uZW50cy9tb2RhbC9Nb2RhbC9Nb2RhbCc7CmltcG9ydCBGaWVsZExhYmVsIGZyb20gJ2NvbXBvbmVudHMvZm9ybXMvRmllbGRMYWJlbC9GaWVsZExhYmVsJzsKaW1wb3J0IElucHV0IGZyb20gJ2NvbXBvbmVudHMvZm9ybXMvSW5wdXQvSW5wdXQnOwppbXBvcnQgQnV0dG9uIGZyb20gJ2NvbXBvbmVudHMvY29udHJvbHMvQnV0dG9uL0J1dHRvbic7CmltcG9ydCB7IEZvcm1hdHRlZE1lc3NhZ2UsIGluamVjdEludGwsIGRlZmluZU1lc3NhZ2VzIH0gZnJvbSAncmVhY3QtaW50bCc7CmltcG9ydCBDdXJyZW5jeVNlbGVjdCBmcm9tICdjb21wb25lbnRzL3VpL0N1cnJlbmN5U2VsZWN0L0N1cnJlbmN5U2VsZWN0JzsKaW1wb3J0IHsgaXNNb2JpbGUgfSBmcm9tICdyZWFjdC1kZXZpY2UtZGV0ZWN0JzsKaW1wb3J0IFFyUmVhZGVyIGZyb20gJ2NvbXBvbmVudHMvUXJSZWFkZXInOwppbXBvcnQgdHlwZWZvcmNlIGZyb20gJ3N3YXAuYXBwL3V0aWwvdHlwZWZvcmNlJzsKaW1wb3J0IHsgaW5wdXRSZXBsYWNlQ29tbWFXaXRoRG90IH0gZnJvbSAnaGVscGVycy9kb21VdGlscyc7CmltcG9ydCBnZXRDdXJyZW5jeUtleSBmcm9tICdoZWxwZXJzL2dldEN1cnJlbmN5S2V5JzsKaW1wb3J0IHsgbGlua3MgfSBmcm9tICdoZWxwZXJzJzsKaW1wb3J0IHJlZGlyZWN0VG8gZnJvbSAnaGVscGVycy9yZWRpcmVjdFRvJzsKdmFyIGlzRGFyayA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGNvbnN0YW50cy5sb2NhbFN0b3JhZ2UuaXNEYXJrKTsKdmFyIGxvY2FsZUxhYmVsID0gZGVmaW5lTWVzc2FnZXMoewogIHRpdGxlOiB7CiAgICBpZDogJ2ludm9pY2VNb2RhbF9UaXRsZScsCiAgICBkZWZhdWx0TWVzc2FnZTogJ9CS0YvRgdGC0LDQstC70LXQvdC40LUg0YHRh9C10YLQsCDQvdCwINC/0L7Qv9C+0LvQvdC10L3QuNC1JwogIH0sCiAgYWRkcmVzc1BsYWNlaG9sZGVyOiB7CiAgICBpZDogJ2ludm9pY2VNb2RhbF9hZGRyZXNzUGxhY2Vob2xkZXInLAogICAgZGVmYXVsdE1lc3NhZ2U6ICfQktCy0LXQtNC40YLQtSDQsNC00YDQtdGBIHtjdXJyZW5jeX0g0LrQvtGI0LXQu9GM0LrQsCcKICB9LAogIGRlc3RpQWRkcmVzc1BsYWNlaG9sZGVyOiB7CiAgICBpZDogJ2ludm9pY2VNb2RhbF9kZXN0aUFkZHJlc3NQbGFjZWhvbGRlcicsCiAgICBkZWZhdWx0TWVzc2FnZTogJ9CS0LLQtdC00LjRgtC1INCw0LTRgNC10YEge2N1cnJlbmN5fSDQutC+0YjQtdC70YzQutCwJwogIH0sCiAgYW1vdW50UGxhY2Vob2xkZXI6IHsKICAgIGlkOiAnaW52b2ljZU1vZGFsX2Ftb3VudFBsYWNlaG9sZGVyJywKICAgIGRlZmF1bHRNZXNzYWdlOiAn0JLQstC10LTQuNGC0LUg0YHRg9C80LzRgycKICB9LAogIGNvbnRhY3RQbGFjZWhvbGRlcjogewogICAgaWQ6ICdpbnZvaWNlTW9kYWxfY29udGFjdFBsYWNlaG9sZGVyJywKICAgIGRlZmF1bHRNZXNzYWdlOiAn0J7QsdGP0LfQsNGC0LXQu9GM0L3QvtC1INC/0L7Qu9C1JwogIH0sCiAgbGFiZWxQbGFjZWhvbGRlcjogewogICAgaWQ6ICdpbnZvaWNlTW9kYWxfbGFiZWxQbGFjZWhvbGRlcicsCiAgICBkZWZhdWx0TWVzc2FnZTogJ9Cj0LrQsNC20LjRgtC1INC60L7QvNC80LXQvdGC0LDRgNC40Lkg0Log0YHRh9C10YLRgycKICB9Cn0pOwp2YXIgSW52b2ljZU1vZGFsID0gKF9kZWMgPSBjc3NNb2R1bGVzKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3R5bGVzKSwgb3duU3R5bGUpLCB7CiAgYWxsb3dNdWx0aXBsZTogdHJ1ZQp9KSwgaW5qZWN0SW50bChfY2xhc3MgPSBfZGVjKF9jbGFzcyA9IChfdGVtcCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkgewogIF9pbmhlcml0cyhJbnZvaWNlTW9kYWwsIF9SZWFjdCRDb21wb25lbnQpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKEludm9pY2VNb2RhbCk7CgogIGZ1bmN0aW9uIEludm9pY2VNb2RhbChwcm9wcykgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJbnZvaWNlTW9kYWwpOwoKICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZVN1Ym1pdCIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGRhdGEgPSBfdGhpcy5wcm9wcy5kYXRhOwogICAgICB2YXIgX3RoaXMkc3RhdGUgPSBfdGhpcy5zdGF0ZSwKICAgICAgICAgIGFkZHJlc3MgPSBfdGhpcyRzdGF0ZS5hZGRyZXNzLAogICAgICAgICAgYW1vdW50ID0gX3RoaXMkc3RhdGUuYW1vdW50LAogICAgICAgICAgZGVzdGluYXRpb24gPSBfdGhpcyRzdGF0ZS5kZXN0aW5hdGlvbiwKICAgICAgICAgIGNvbnRhY3QgPSBfdGhpcyRzdGF0ZS5jb250YWN0LAogICAgICAgICAgbGFiZWwgPSBfdGhpcyRzdGF0ZS5sYWJlbCwKICAgICAgICAgIGlzU2hpcHBlZCA9IF90aGlzJHN0YXRlLmlzU2hpcHBlZCwKICAgICAgICAgIGN1cnJlbmN5ID0gX3RoaXMkc3RhdGUud2FsbGV0RGF0YS5jdXJyZW5jeTsKICAgICAgaWYgKGlzU2hpcHBlZCkgcmV0dXJuOwoKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIGlzU2hpcHBlZDogdHJ1ZQogICAgICB9LCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgbWVzc2FnZSwgcmVzdWx0OwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAiIi5jb25jYXQoY29udGFjdCwgIlxyXG4iKS5jb25jYXQobGFiZWwpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gYWN0aW9ucy5pbnZvaWNlcy5hZGRJbnZvaWNlKHsKICAgICAgICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5LAogICAgICAgICAgICAgICAgICB0b0FkZHJlc3M6IGFkZHJlc3MsCiAgICAgICAgICAgICAgICAgIGZyb21BZGRyZXNzOiBkYXRhLmFkZHJlc3MsCiAgICAgICAgICAgICAgICAgIGFtb3VudDogYW1vdW50LAogICAgICAgICAgICAgICAgICBjb250YWN0OiBjb250YWN0LAogICAgICAgICAgICAgICAgICBsYWJlbDogbWVzc2FnZSwKICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb246IGRlc3RpbmF0aW9uCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC5hbnN3ZXIgJiYgcmVzdWx0LmFuc3dlciA9PT0gJ29rJykgewogICAgICAgICAgICAgICAgICBfdGhpcy5oYW5kbGVHb1RvSW52b2ljZShyZXN1bHQuaW52b2ljZUlkKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoZGF0YS5vblJlYWR5IGluc3RhbmNlb2YgRnVuY3Rpb24pIHsKICAgICAgICAgICAgICAgICAgZGF0YS5vblJlYWR5KCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA5OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKCiAgICAgICAgICAgICAgICBfdGhpcy5yZXBvcnRFcnJvcihfY29udGV4dC50MCk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIGlzU2hpcHBlZDogZmFsc2UKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1swLCA5XV0pOwogICAgICB9KSkpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAicmVwb3J0RXJyb3IiLCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgZmVlZGJhY2suY3JlYXRlSW52b2ljZS5mYWlsZWQoZXJyb3IpOwogICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZUdvVG9JbnZvaWNlIiwgZnVuY3Rpb24gKGludm9pY2VJZCkgewogICAgICByZWRpcmVjdFRvKCIiLmNvbmNhdChsaW5rcy5pbnZvaWNlLCAiLyIpLmNvbmNhdChpbnZvaWNlSWQsICIvc2hhcmUiKSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvcGVuU2NhbiIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG9wZW5TY2FuQ2FtID0gX3RoaXMuc3RhdGUub3BlblNjYW5DYW07CgogICAgICBfdGhpcy5zZXRTdGF0ZShmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIG9wZW5TY2FuQ2FtOiAhb3BlblNjYW5DYW0KICAgICAgICB9OwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZUFtb3VudCIsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICB2YXIgX3RoaXMkc3RhdGUyID0gX3RoaXMuc3RhdGUsCiAgICAgICAgICBtdWx0aXBsaWVyID0gX3RoaXMkc3RhdGUyLm11bHRpcGxpZXIsCiAgICAgICAgICBjdXJyZW50RGVjaW1hbHMgPSBfdGhpcyRzdGF0ZTIuY3VycmVudERlY2ltYWxzLAogICAgICAgICAgc2VsZWN0ZWRWYWx1ZSA9IF90aGlzJHN0YXRlMi5zZWxlY3RlZFZhbHVlLAogICAgICAgICAgY3VycmVuY3kgPSBfdGhpcyRzdGF0ZTIud2FsbGV0RGF0YS5jdXJyZW5jeTsKCiAgICAgIGlmICghdmFsdWUpIHsKICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICBmaWF0QW1vdW50OiAnJywKICAgICAgICAgIGFtb3VudDogJycKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChzZWxlY3RlZFZhbHVlID09PSBjdXJyZW5jeSkgewogICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgIGZpYXRBbW91bnQ6IG5ldyBCaWdOdW1iZXIodmFsdWUpLnRpbWVzKG11bHRpcGxpZXIpLmRwKDIsIEJpZ051bWJlci5ST1VORF9DRUlMKS50b1N0cmluZygpLAogICAgICAgICAgYW1vdW50OiB2YWx1ZQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgIGZpYXRBbW91bnQ6IHZhbHVlLAogICAgICAgICAgYW1vdW50OiBuZXcgQmlnTnVtYmVyKHZhbHVlKS5kaXYobXVsdGlwbGllcikuZHAoY3VycmVudERlY2ltYWxzLCBCaWdOdW1iZXIuUk9VTkRfQ0VJTCkudG9TdHJpbmcoKQogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVTY2FuIiwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgaWYgKGRhdGEpIHsKICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICBhZGRyZXNzOiBkYXRhLmluY2x1ZGVzKCc6JykgPyBkYXRhLnNwbGl0KCc6JylbMV0gOiBkYXRhCiAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMub3BlblNjYW4oKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlQnV5Q3VycmVuY3lTZWxlY3QiLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIHNlbGVjdGVkVmFsdWU6IHZhbHVlLm5hbWUKICAgICAgfSk7CiAgICB9KTsKCiAgICB2YXIgX3Byb3BzJGRhdGEgPSBwcm9wcy5kYXRhLAogICAgICAgIF9hZGRyZXNzID0gX3Byb3BzJGRhdGEuYWRkcmVzcywKICAgICAgICBfY3VycmVuY3kgPSBfcHJvcHMkZGF0YS5jdXJyZW5jeSwKICAgICAgICB0b0FkZHJlc3MgPSBfcHJvcHMkZGF0YS50b0FkZHJlc3MsCiAgICAgICAgX3Byb3BzJHBheWVyQWRkcmVzcyA9IHByb3BzLnBheWVyQWRkcmVzcywKICAgICAgICBwYXllckFkZHJlc3MgPSBfcHJvcHMkcGF5ZXJBZGRyZXNzID09PSB2b2lkIDAgPyBmYWxzZSA6IF9wcm9wcyRwYXllckFkZHJlc3M7CiAgICB2YXIgX2N1cnJlbnREZWNpbWFscyA9IGNvbnN0YW50cy50b2tlbkRlY2ltYWxzW2dldEN1cnJlbmN5S2V5KF9jdXJyZW5jeSwgdHJ1ZSkudG9Mb3dlckNhc2UoKV07CiAgICB2YXIgd2FsbGV0RGF0YSA9IGFjdGlvbnMuY29yZS5nZXRXYWxsZXQoewogICAgICBjdXJyZW5jeTogX2N1cnJlbmN5CiAgICB9KTsKICAgIHZhciBpbmZvQWJvdXRDdXJyZW5jeSA9IHdhbGxldERhdGEuaW5mb0Fib3V0Q3VycmVuY3k7CgogICAgdmFyIF9tdWx0aXBsaWVyID0gaW5mb0Fib3V0Q3VycmVuY3kgJiYgaW5mb0Fib3V0Q3VycmVuY3kucHJpY2VfZmlhdCA/IGluZm9BYm91dEN1cnJlbmN5LnByaWNlX2ZpYXQgOiAxOwoKICAgIF90aGlzLnN0YXRlID0gewogICAgICBpc1NoaXBwZWQ6IGZhbHNlLAogICAgICBvcGVuU2NhbkNhbTogZmFsc2UsCiAgICAgIHRvQWRkcmVzc0VuYWJsZWQ6ICEhdG9BZGRyZXNzLAogICAgICBhZGRyZXNzOiB0b0FkZHJlc3MgfHwgJycsCiAgICAgIGRlc3RpbmF0aW9uOiBfYWRkcmVzcywKICAgICAgcGF5ZXJBZGRyZXNzOiBwYXllckFkZHJlc3MsCiAgICAgIG1pbnVzOiAnJywKICAgICAgY29udGFjdDogJycsCiAgICAgIGxhYmVsOiAnJywKICAgICAgc2VsZWN0ZWRWYWx1ZTogX2N1cnJlbmN5LAogICAgICBmaWF0QW1vdW50OiAnJywKICAgICAgYW1vdW50OiAnJywKICAgICAgbXVsdGlwbGllcjogbmV3IEJpZ051bWJlcihfbXVsdGlwbGllciksCiAgICAgIGN1cnJlbnREZWNpbWFsczogX2N1cnJlbnREZWNpbWFscywKICAgICAgZXJyb3I6IG51bGwsCiAgICAgIGluZm9BYm91dEN1cnJlbmN5OiBpbmZvQWJvdXRDdXJyZW5jeSwKICAgICAgd2FsbGV0RGF0YTogd2FsbGV0RGF0YQogICAgfTsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGNvbnN0YW50cy5sb2NhbFN0b3JhZ2UuaW52b2ljZXNFbmFibGVkLCAnMScpOwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEludm9pY2VNb2RhbCwgW3sKICAgIGtleTogImFkZHJlc3NJc0NvcnJlY3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZHJlc3NJc0NvcnJlY3QoKSB7CiAgICAgIHZhciBvdGhlckFkZHJlc3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IG51bGw7CiAgICAgIHZhciBfdGhpcyRzdGF0ZTMgPSB0aGlzLnN0YXRlLAogICAgICAgICAgYWRkcmVzcyA9IF90aGlzJHN0YXRlMy5hZGRyZXNzLAogICAgICAgICAgX3RoaXMkc3RhdGUzJHdhbGxldERhID0gX3RoaXMkc3RhdGUzLndhbGxldERhdGEsCiAgICAgICAgICBjdXJyZW5jeSA9IF90aGlzJHN0YXRlMyR3YWxsZXREYS5jdXJyZW5jeSwKICAgICAgICAgIGlzRXRoVG9rZW4gPSBfdGhpcyRzdGF0ZTMkd2FsbGV0RGEuaXNFUkMyMDsKICAgICAgdmFyIGNoZWNrQWRkcmVzcyA9IG90aGVyQWRkcmVzcyA/IG90aGVyQWRkcmVzcyA6IGFkZHJlc3M7CgogICAgICBpZiAoaXNFdGhUb2tlbikgewogICAgICAgIHJldHVybiB0eXBlZm9yY2UuaXNDb2luQWRkcmVzcy5FVEgoY2hlY2tBZGRyZXNzKTsKICAgICAgfQoKICAgICAgdmFyIGNoZWNrQ3VycmVuY3kgPSBnZXRDdXJyZW5jeUtleShjdXJyZW5jeSwgdHJ1ZSkudG9VcHBlckNhc2UoKTsKICAgICAgcmV0dXJuIHR5cGVmb3JjZS5pc0NvaW5BZGRyZXNzW2NoZWNrQ3VycmVuY3ldKGNoZWNrQWRkcmVzcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpcyRzdGF0ZTQgPSB0aGlzLnN0YXRlLAogICAgICAgICAgYWRkcmVzcyA9IF90aGlzJHN0YXRlNC5hZGRyZXNzLAogICAgICAgICAgZGVzdGluYXRpb24gPSBfdGhpcyRzdGF0ZTQuZGVzdGluYXRpb24sCiAgICAgICAgICBhbW91bnQgPSBfdGhpcyRzdGF0ZTQuYW1vdW50LAogICAgICAgICAgZmlhdEFtb3VudCA9IF90aGlzJHN0YXRlNC5maWF0QW1vdW50LAogICAgICAgICAgY29udGFjdCA9IF90aGlzJHN0YXRlNC5jb250YWN0LAogICAgICAgICAgaXNTaGlwcGVkID0gX3RoaXMkc3RhdGU0LmlzU2hpcHBlZCwKICAgICAgICAgIG9wZW5TY2FuQ2FtID0gX3RoaXMkc3RhdGU0Lm9wZW5TY2FuQ2FtLAogICAgICAgICAgZXJyb3IgPSBfdGhpcyRzdGF0ZTQuZXJyb3IsCiAgICAgICAgICBzZWxlY3RlZFZhbHVlID0gX3RoaXMkc3RhdGU0LnNlbGVjdGVkVmFsdWUsCiAgICAgICAgICB0b0FkZHJlc3NFbmFibGVkID0gX3RoaXMkc3RhdGU0LnRvQWRkcmVzc0VuYWJsZWQsCiAgICAgICAgICBjdXJyZW5jeSA9IF90aGlzJHN0YXRlNC53YWxsZXREYXRhLmN1cnJlbmN5LAogICAgICAgICAgd2FsbGV0RGF0YSA9IF90aGlzJHN0YXRlNC53YWxsZXREYXRhOwogICAgICB2YXIgX3RoaXMkcHJvcHMgPSB0aGlzLnByb3BzLAogICAgICAgICAgbmFtZSA9IF90aGlzJHByb3BzLm5hbWUsCiAgICAgICAgICBpbnRsID0gX3RoaXMkcHJvcHMuaW50bDsKICAgICAgdmFyIGxpbmtlZCA9IExpbmsuYWxsKHRoaXMsICdhZGRyZXNzJywgJ2Rlc3RpbmF0aW9uJywgJ2ZpYXRBbW91bnQnLCAnYW1vdW50JywgJ2NvbnRhY3QnLCAnbGFiZWwnKTsKICAgICAgdmFyIGN1ckxpc3QgPSBbewogICAgICAgIGZ1bGxUaXRsZTogd2FsbGV0RGF0YS5mdWxsTmFtZSwKICAgICAgICBpY29uOiBjdXJyZW5jeS50b0xvd2VyQ2FzZSgpLAogICAgICAgIG5hbWU6IGN1cnJlbmN5LAogICAgICAgIHRpdGxlOiBjdXJyZW5jeSwKICAgICAgICB2YWx1ZTogY3VycmVuY3kKICAgICAgfSwgewogICAgICAgIGZ1bGxUaXRsZTogJ1VTRCcsCiAgICAgICAgaWNvbjogJ3VzZCcsCiAgICAgICAgbmFtZTogJ1VTRCcsCiAgICAgICAgdGl0bGU6ICdVU0QnLAogICAgICAgIHZhbHVlOiAnVVNEJwogICAgICB9XTsKICAgICAgdmFyIGlzRGlzYWJsZWQgPSAhYW1vdW50IHx8IGlzU2hpcHBlZCB8fCAhZGVzdGluYXRpb24gfHwgIWNvbnRhY3QgfHwgYWRkcmVzcyAmJiAhdGhpcy5hZGRyZXNzSXNDb3JyZWN0KCk7CiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChNb2RhbCwgewogICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgdGl0bGU6ICIiLmNvbmNhdChpbnRsLmZvcm1hdE1lc3NhZ2UobG9jYWxlTGFiZWwudGl0bGUpLCAnICcpLmNvbmNhdChjdXJyZW5jeS50b1VwcGVyQ2FzZSgpKSwKICAgICAgICBkaXNhYmxlQ2xvc2U6IHRoaXMucHJvcHMuZGF0YS5kaXNhYmxlQ2xvc2UKICAgICAgfSwgb3BlblNjYW5DYW0gJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUXJSZWFkZXIsIHsKICAgICAgICBvcGVuU2NhbjogdGhpcy5vcGVuU2NhbiwKICAgICAgICBoYW5kbGVFcnJvcjogdGhpcy5yZXBvcnRFcnJvciwKICAgICAgICBoYW5kbGVTY2FuOiB0aGlzLmhhbmRsZVNjYW4KICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiaW52b2ljZU1vZGFsSG9sZGVyICIuY29uY2F0KGlzRGFyayA/ICdkYXJrJyA6ICcnKQogICAgICB9LCB0b0FkZHJlc3NFbmFibGVkICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiaGlnaExldmVsIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGaWVsZExhYmVsLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJpbnZvaWNlTW9kYWxfQWRkcmVzcyIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MTBcdTA0MzRcdTA0NDBcdTA0MzVcdTA0NDEsIFx1MDQzRFx1MDQzMCBcdTA0M0FcdTA0M0VcdTA0NDJcdTA0M0VcdTA0NDBcdTA0NEJcdTA0MzkgXHUwNDMyXHUwNDRCXHUwNDQxXHUwNDQyXHUwNDMwXHUwNDMyXHUwNDNCXHUwNDRGXHUwNDM1XHUwNDNDIFx1MDQ0MVx1MDQ0N1x1MDQzNVx1MDQ0MiIKICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dCwgewogICAgICAgIHNtYWxsRm9udFNpemU6IHRydWUsCiAgICAgICAgd2l0aE1hcmdpbjogdHJ1ZSwKICAgICAgICB2YWx1ZUxpbms6IGxpbmtlZC5hZGRyZXNzLAogICAgICAgIGZvY3VzT25Jbml0OiB0cnVlLAogICAgICAgIHBhdHRlcm46ICIwLTlhLXpBLVo6IiwKICAgICAgICBwbGFjZWhvbGRlcjogaW50bC5mb3JtYXRNZXNzYWdlKGxvY2FsZUxhYmVsLmFkZHJlc3NQbGFjZWhvbGRlciwgewogICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5LnRvVXBwZXJDYXNlKCkKICAgICAgICB9KSwKICAgICAgICBxcjogaXNNb2JpbGUsCiAgICAgICAgb3BlblNjYW46IHRoaXMub3BlblNjYW4KICAgICAgfSksIGFkZHJlc3MgJiYgIXRoaXMuYWRkcmVzc0lzQ29ycmVjdCgpICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAicmVkbm90ZSIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiaW52b2ljZU1vZGFsX0luY29ycmVjdEFkZHJlc3MiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDEyXHUwNDRCIFx1MDQzMlx1MDQzMlx1MDQzNVx1MDQzQlx1MDQzOCBcdTA0M0RcdTA0MzUgXHUwNDNBXHUwNDNFXHUwNDQwXHUwNDM1XHUwNDNBXHUwNDQyXHUwNDNEXHUwNDRCXHUwNDM5IFx1MDQzMFx1MDQzNFx1MDQ0MFx1MDQzNVx1MDQ0MSIKICAgICAgfSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJoaWdoTGV2ZWwiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZpZWxkTGFiZWwsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogImludm9pY2VNb2RhbF9kZXN0aUFkZHJlc3MiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDEwXHUwNDM0XHUwNDQwXHUwNDM1XHUwNDQxLCBcdTA0M0FcdTA0NDNcdTA0MzRcdTA0MzAgXHUwNDMxXHUwNDQzXHUwNDM0XHUwNDM1XHUwNDQyIFx1MDQzRlx1MDQ0MFx1MDQzRVx1MDQzOFx1MDQzN1x1MDQzMlx1MDQzNVx1MDQzNFx1MDQzNVx1MDQzRFx1MDQzMCBcdTA0M0VcdTA0M0ZcdTA0M0JcdTA0MzBcdTA0NDJcdTA0MzAiCiAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoSW5wdXQsIHsKICAgICAgICB2YWx1ZUxpbms6IGxpbmtlZC5kZXN0aW5hdGlvbiwKICAgICAgICBmb2N1c09uSW5pdDogdHJ1ZSwKICAgICAgICBzbWFsbEZvbnRTaXplOiB0cnVlLAogICAgICAgIHdpdGhNYXJnaW46IHRydWUsCiAgICAgICAgcGF0dGVybjogIjAtOWEtekEtWjoiLAogICAgICAgIHBsYWNlaG9sZGVyOiBpbnRsLmZvcm1hdE1lc3NhZ2UobG9jYWxlTGFiZWwuZGVzdGlBZGRyZXNzUGxhY2Vob2xkZXIsIHsKICAgICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeS50b1VwcGVyQ2FzZSgpCiAgICAgICAgfSksCiAgICAgICAgcXI6IGlzTW9iaWxlLAogICAgICAgIG9wZW5TY2FuOiB0aGlzLm9wZW5TY2FuCiAgICAgIH0pLCBkZXN0aW5hdGlvbiAmJiAhdGhpcy5hZGRyZXNzSXNDb3JyZWN0KGRlc3RpbmF0aW9uKSAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogInJlZG5vdGUiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogImludm9pY2VNb2RhbF9JbmNvcnJlY3REZXN0aUFkZHJlc3MiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDEyXHUwNDRCIFx1MDQzMlx1MDQzMlx1MDQzNVx1MDQzQlx1MDQzOCBcdTA0M0RcdTA0MzUgXHUwNDNBXHUwNDNFXHUwNDQwXHUwNDM1XHUwNDNBXHUwNDQyXHUwNDNEXHUwNDRCXHUwNDM5IFx1MDQzMFx1MDQzNFx1MDQ0MFx1MDQzNVx1MDQ0MSIKICAgICAgfSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJoaWdoTGV2ZWwiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZpZWxkTGFiZWwsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiaW52b2ljZU1vZGFsX0Ftb3VudCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MjFcdTA0NDNcdTA0M0NcdTA0M0NcdTA0MzAiCiAgICAgIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgewogICAgICAgIHN0eWxlTmFtZTogImFtb3VudFRvb2x0aXAiCiAgICAgIH0sIG5ldyBCaWdOdW1iZXIoYW1vdW50KS5pc0dyZWF0ZXJUaGFuKDApID8gc2VsZWN0ZWRWYWx1ZSA9PT0gY3VycmVuY3kgPyAifiAiLmNvbmNhdChmaWF0QW1vdW50LCAiIFVTRCIpIDogIn4gIi5jb25jYXQoYW1vdW50LCAiICIpLmNvbmNhdChjdXJyZW5jeSkgOiAnJyksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KElucHV0LCB7CiAgICAgICAgY2xhc3NOYW1lOiBvd25TdHlsZS5pbnB1dCwKICAgICAgICBwbGFjZWhvbGRlcjogaW50bC5mb3JtYXRNZXNzYWdlKGxvY2FsZUxhYmVsLmFtb3VudFBsYWNlaG9sZGVyKSwKICAgICAgICBvbktleURvd246IGlucHV0UmVwbGFjZUNvbW1hV2l0aERvdCwKICAgICAgICBwYXR0ZXJuOiAiMC05XFwuIiwKICAgICAgICB3aXRoTWFyZ2luOiB0cnVlLAogICAgICAgIHZhbHVlTGluazogc2VsZWN0ZWRWYWx1ZSA9PT0gY3VycmVuY3kgPyBsaW5rZWQuYW1vdW50LnBpcGUodGhpcy5oYW5kbGVBbW91bnQpIDogbGlua2VkLmZpYXRBbW91bnQucGlwZSh0aGlzLmhhbmRsZUFtb3VudCkKICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEN1cnJlbmN5U2VsZWN0LCB7CiAgICAgICAgbGFiZWw6ICJDeXJyZW5jeSIsCiAgICAgICAgdG9vbHRpcDogIkN5cnJlbmN5IiwKICAgICAgICBpZDogIkludm9pY2VNb2RhbEN1cnJlbmN5U2VsZWN0IiwKICAgICAgICBjbGFzc05hbWU6IGRyb3BEb3duU3R5bGVzLnNpbXBsZURyb3Bkb3duLAogICAgICAgIHNlbGVjdGVkVmFsdWU6IHNlbGVjdGVkVmFsdWUsCiAgICAgICAgb25TZWxlY3Q6IHRoaXMuaGFuZGxlQnV5Q3VycmVuY3lTZWxlY3QsCiAgICAgICAgc2VsZWN0ZWRJdGVtUmVuZGVyOiBmdW5jdGlvbiBzZWxlY3RlZEl0ZW1SZW5kZXIoaXRlbSkgewogICAgICAgICAgcmV0dXJuIGl0ZW0uZnVsbFRpdGxlOwogICAgICAgIH0sCiAgICAgICAgY3VycmVuY2llczogY3VyTGlzdAogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiaGlnaExldmVsIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGaWVsZExhYmVsLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogImludm9pY2VNb2RhbF9Db250YWN0IiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxMlx1MDQzMFx1MDQ0OCBcdTA0M0FcdTA0M0VcdTA0M0RcdTA0NDJcdTA0MzBcdTA0M0FcdTA0NDIgKFx1MDQzNVx1MDQzQ1x1MDQzNVx1MDQzOVx1MDQzQiBcdTA0MzhcdTA0M0JcdTA0MzggQFx1MDQzRFx1MDQzOFx1MDQzQVx1MDQzRFx1MDQzNVx1MDQzOVx1MDQzQykiCiAgICAgIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KElucHV0LCB7CiAgICAgICAgdmFsdWVMaW5rOiBsaW5rZWQuY29udGFjdCwKICAgICAgICB3aXRoTWFyZ2luOiB0cnVlLAogICAgICAgIHBsYWNlaG9sZGVyOiBpbnRsLmZvcm1hdE1lc3NhZ2UobG9jYWxlTGFiZWwuY29udGFjdFBsYWNlaG9sZGVyKQogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAibG93TGV2ZWwiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZpZWxkTGFiZWwsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiaW52b2ljZU1vZGFsX0xhYmVsIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxQVx1MDQzRVx1MDQzQ1x1MDQzQ1x1MDQzNVx1MDQzRFx1MDQ0Mlx1MDQzMFx1MDQ0MFx1MDQzOFx1MDQzOSIKICAgICAgfSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJncm91cCIsCiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIG1hcmdpbkJvdHRvbTogJzI1cHgnCiAgICAgICAgfQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dCwgewogICAgICAgIHNyb2xsaW5nRm9ybTogdHJ1ZSwKICAgICAgICB2YWx1ZUxpbms6IGxpbmtlZC5sYWJlbCwKICAgICAgICBtdWx0aWxpbmU6IHRydWUsCiAgICAgICAgcGxhY2Vob2xkZXI6IGludGwuZm9ybWF0TWVzc2FnZShsb2NhbGVMYWJlbC5sYWJlbFBsYWNlaG9sZGVyKQogICAgICB9KSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHsKICAgICAgICBmdWxsV2lkdGg6IHRydWUsCiAgICAgICAgYmx1ZTogdHJ1ZSwKICAgICAgICBiaWc6IHRydWUsCiAgICAgICAgZGlzYWJsZWQ6IGlzRGlzYWJsZWQsCiAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVTdWJtaXQKICAgICAgfSwgaXNTaGlwcGVkID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogImludm9pY2VNb2RhbF9Qcm9jZXNzaW5nIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxRVx1MDQzMVx1MDQ0MFx1MDQzMFx1MDQzMVx1MDQzRVx1MDQ0Mlx1MDQzQVx1MDQzMCAuLi4iCiAgICAgIH0pKSA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZyYWdtZW50LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJpbnZvaWNlTW9kYWxfU3VibWl0IiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxMlx1MDQ0Qlx1MDQ0MVx1MDQ0Mlx1MDQzMFx1MDQzMlx1MDQzOFx1MDQ0Mlx1MDQ0QyBcdTA0NDFcdTA0NDdcdTA0MzVcdTA0NDIiCiAgICAgIH0pKSksIGVycm9yICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAicmVkbm90ZSIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiaW52b2ljZU1vZGFsX0Vycm9yIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIntlcnJvck5hbWV9IHtjdXJyZW5jeX06e2JyfXtlcnJvck1lc3NhZ2V9IiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIGVycm9yTmFtZTogaW50bC5mb3JtYXRNZXNzYWdlKGVycm9yLm5hbWUpLAogICAgICAgICAgZXJyb3JNZXNzYWdlOiBpbnRsLmZvcm1hdE1lc3NhZ2UoZXJyb3IubWVzc2FnZSksCiAgICAgICAgICBicjogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImJyIiwgbnVsbCksCiAgICAgICAgICBjdXJyZW5jeTogIiIuY29uY2F0KGN1cnJlbmN5KQogICAgICAgIH0KICAgICAgfSkpKSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gSW52b2ljZU1vZGFsOwp9KFJlYWN0LkNvbXBvbmVudCksIF90ZW1wKSkgfHwgX2NsYXNzKSB8fCBfY2xhc3MpOwpleHBvcnQgeyBJbnZvaWNlTW9kYWwgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/front/shared/components/modals/InvoiceModal/InvoiceModal.tsx"],"names":["React","Fragment","constants","feedback","actions","Link","BigNumber","cssModules","styles","dropDownStyles","ownStyle","Modal","FieldLabel","Input","Button","FormattedMessage","injectIntl","defineMessages","CurrencySelect","isMobile","QrReader","typeforce","inputReplaceCommaWithDot","getCurrencyKey","links","redirectTo","isDark","localStorage","getItem","localeLabel","title","id","defaultMessage","addressPlaceholder","destiAddressPlaceholder","amountPlaceholder","contactPlaceholder","labelPlaceholder","InvoiceModal","allowMultiple","props","data","state","address","amount","destination","contact","label","isShipped","currency","walletData","setState","message","invoices","addInvoice","toAddress","fromAddress","result","answer","handleGoToInvoice","invoiceId","onReady","Function","reportError","error","createInvoice","failed","console","invoice","openScanCam","value","multiplier","currentDecimals","selectedValue","fiatAmount","times","dp","ROUND_CEIL","toString","div","includes","split","openScan","name","payerAddress","tokenDecimals","toLowerCase","core","getWallet","infoAboutCurrency","price_fiat","toAddressEnabled","minus","setItem","invoicesEnabled","otherAddress","isEthToken","isERC20","checkAddress","isCoinAddress","ETH","checkCurrency","toUpperCase","intl","linked","all","curList","fullTitle","fullName","icon","isDisabled","addressIsCorrect","formatMessage","disableClose","handleScan","isGreaterThan","input","pipe","handleAmount","simpleDropdown","handleBuyCurrencySelect","item","marginBottom","handleSubmit","errorName","errorMessage","br","Component"],"mappings":"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","sourcesContent":["import React, { Fragment } from 'react'\r\nimport { constants, feedback } from 'helpers'\r\nimport actions from 'redux/actions'\r\nimport Link from 'local_modules/sw-valuelink'\r\nimport BigNumber from 'bignumber.js'\r\nimport cssModules from 'react-css-modules'\r\nimport styles from '../Styles/default.scss'\r\nimport dropDownStyles from 'components/ui/DropDown/DropDown.scss'\r\nimport ownStyle from './InvoiceModal.scss'\r\n\r\nimport Modal from 'components/modal/Modal/Modal'\r\nimport FieldLabel from 'components/forms/FieldLabel/FieldLabel'\r\nimport Input from 'components/forms/Input/Input'\r\nimport Button from 'components/controls/Button/Button'\r\nimport { FormattedMessage, injectIntl, defineMessages } from 'react-intl'\r\nimport CurrencySelect from 'components/ui/CurrencySelect/CurrencySelect'\r\nimport { isMobile } from 'react-device-detect'\r\nimport QrReader from 'components/QrReader'\r\n\r\nimport typeforce from 'swap.app/util/typeforce'\r\nimport { inputReplaceCommaWithDot } from 'helpers/domUtils'\r\nimport getCurrencyKey from 'helpers/getCurrencyKey'\r\nimport { links } from 'helpers'\r\nimport redirectTo from 'helpers/redirectTo'\r\n\r\nconst isDark = localStorage.getItem(constants.localStorage.isDark)\r\n\r\nconst localeLabel = defineMessages({\r\n  title: {\r\n    id: 'invoiceModal_Title',\r\n    defaultMessage: 'Выставление счета на пополнение',\r\n  },\r\n  addressPlaceholder: {\r\n    id: 'invoiceModal_addressPlaceholder',\r\n    defaultMessage: 'Введите адрес {currency} кошелька',\r\n  },\r\n  destiAddressPlaceholder: {\r\n    id: 'invoiceModal_destiAddressPlaceholder',\r\n    defaultMessage: 'Введите адрес {currency} кошелька',\r\n  },\r\n  amountPlaceholder: {\r\n    id: 'invoiceModal_amountPlaceholder',\r\n    defaultMessage: 'Введите сумму',\r\n  },\r\n  contactPlaceholder: {\r\n    id: 'invoiceModal_contactPlaceholder',\r\n    defaultMessage: 'Обязательное поле',\r\n  },\r\n  labelPlaceholder: {\r\n    id: 'invoiceModal_labelPlaceholder',\r\n    defaultMessage: 'Укажите комментарий к счету',\r\n  },\r\n})\r\n\r\ntype InvoiceModalProps = {\r\n  name: string\r\n  intl: IUniversalObj\r\n  data: IUniversalObj\r\n}\r\n\r\ntype InvoiceModalState = {\r\n  toAddressEnabled: boolean\r\n  openScanCam: boolean\r\n  isShipped: boolean\r\n  selectedValue: string\r\n  payerAddress: string\r\n  destination: string\r\n  address: string\r\n  contact: string\r\n  fiatAmount: string\r\n  amount: string\r\n  minus: string\r\n  label: string\r\n  currentDecimals: number\r\n  multiplier: BigNumber\r\n  error: IError | null\r\n  infoAboutCurrency: IUniversalObj\r\n  walletData: IUniversalObj\r\n}\r\n\r\n@injectIntl\r\n@cssModules({ ...styles, ...ownStyle }, { allowMultiple: true })\r\nexport default class InvoiceModal extends React.Component<InvoiceModalProps, InvoiceModalState> {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    const {\r\n      data: {\r\n        address,\r\n        currency,\r\n        toAddress,\r\n      },\r\n      payerAddress = false,\r\n    } = props\r\n\r\n    const currentDecimals = constants.tokenDecimals[getCurrencyKey(currency, true).toLowerCase()]\r\n    const walletData = actions.core.getWallet({ currency })\r\n    const { infoAboutCurrency } = walletData\r\n    const multiplier = infoAboutCurrency && infoAboutCurrency.price_fiat \r\n      ? infoAboutCurrency.price_fiat\r\n      : 1\r\n\r\n    this.state = {\r\n      isShipped: false,\r\n      openScanCam: false,\r\n      toAddressEnabled: !!toAddress,\r\n      address: toAddress || '',\r\n      destination: address,\r\n      payerAddress,\r\n      minus: '',\r\n      contact: '',\r\n      label: '',\r\n      selectedValue: currency,\r\n      fiatAmount: '',\r\n      amount: '',\r\n      multiplier: new BigNumber(multiplier),\r\n      currentDecimals,\r\n      error: null,\r\n      infoAboutCurrency,\r\n      walletData,\r\n    }\r\n\r\n    localStorage.setItem(constants.localStorage.invoicesEnabled, '1')\r\n  }\r\n\r\n  handleSubmit = () => {\r\n    const { data } = this.props\r\n    const {\r\n      address,\r\n      amount,\r\n      destination,\r\n      contact,\r\n      label,\r\n      isShipped,\r\n      walletData: {\r\n        currency,\r\n      },\r\n    } = this.state\r\n\r\n    if (isShipped) return\r\n\r\n    this.setState({\r\n      isShipped: true,\r\n    }, async () => {\r\n      try {\r\n        const message = `${contact}\\r\\n${label}`\r\n        const result: any = await actions.invoices.addInvoice({\r\n          currency,\r\n          toAddress: address,\r\n          fromAddress: data.address,\r\n          amount,\r\n          contact,\r\n          label: message,\r\n          destination,\r\n        })\r\n        if (result && result.answer && result.answer === 'ok') {\r\n          this.handleGoToInvoice(result.invoiceId)\r\n        }\r\n        if (data.onReady instanceof Function) {\r\n          data.onReady()\r\n        }\r\n      } catch (error) {\r\n        this.reportError(error)\r\n      }\r\n\r\n      this.setState({\r\n        isShipped: false,\r\n      })\r\n    })\r\n  }\r\n\r\n  reportError = (error) => {\r\n    feedback.createInvoice.failed(error)\r\n    console.error(error)\r\n  }\r\n\r\n  handleGoToInvoice = (invoiceId) => {\r\n    redirectTo(`${links.invoice}/${invoiceId}/share`)\r\n  }\r\n\r\n  addressIsCorrect(otherAddress = null) {\r\n    const {\r\n      address,\r\n      walletData: {\r\n        currency,\r\n        isERC20: isEthToken,\r\n      },\r\n    } = this.state\r\n    const checkAddress = otherAddress ? otherAddress : address\r\n\r\n    if (isEthToken) {\r\n      return typeforce.isCoinAddress.ETH(checkAddress)\r\n    }\r\n    let checkCurrency = getCurrencyKey(currency, true).toUpperCase()\r\n\r\n    return typeforce.isCoinAddress[checkCurrency](checkAddress)\r\n  }\r\n\r\n  openScan = () => {\r\n    const { openScanCam } = this.state\r\n\r\n    this.setState(() => ({\r\n      openScanCam: !openScanCam,\r\n    }))\r\n  }\r\n\r\n  handleAmount = (value): any => {\r\n    const {\r\n      multiplier,\r\n      currentDecimals,\r\n      selectedValue,\r\n      walletData: {\r\n        currency,\r\n      },\r\n    } = this.state\r\n\r\n    if (!value) {\r\n      this.setState({\r\n        fiatAmount: '',\r\n        amount: '',\r\n      })\r\n    } else if (selectedValue === currency) {\r\n      this.setState({\r\n        fiatAmount: new BigNumber(value)\r\n          .times(multiplier)\r\n          .dp(2, BigNumber.ROUND_CEIL)\r\n          .toString(),\r\n        amount: value,\r\n      })\r\n    } else {\r\n      this.setState({\r\n        fiatAmount: value,\r\n        amount: new BigNumber(value)\r\n          .div(multiplier)\r\n          .dp(currentDecimals, BigNumber.ROUND_CEIL)\r\n          .toString(),\r\n      })\r\n    }\r\n  }\r\n\r\n  handleScan = (data) => {\r\n    if (data) {\r\n      this.setState({\r\n        address: data.includes(':') ? data.split(':')[1] : data,\r\n      }, () => {\r\n        this.openScan()\r\n      })\r\n    }\r\n  }\r\n\r\n  handleBuyCurrencySelect = (value) => {\r\n    this.setState({\r\n      selectedValue: value.name,\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      address,\r\n      destination,\r\n      amount,\r\n      fiatAmount,\r\n      contact,\r\n      isShipped,\r\n      openScanCam,\r\n      error,\r\n      selectedValue,\r\n      toAddressEnabled,\r\n      walletData: {\r\n        currency,\r\n      },\r\n      walletData,\r\n    } = this.state\r\n\r\n    const {\r\n      name,\r\n      intl,\r\n    } = this.props\r\n\r\n    const linked = Link.all(\r\n      this,\r\n      'address',\r\n      'destination',\r\n      'fiatAmount',\r\n      'amount',\r\n      'contact',\r\n      'label'\r\n    )\r\n\r\n    let curList = [\r\n      {\r\n        fullTitle: walletData.fullName,\r\n        icon: currency.toLowerCase(),\r\n        name: currency,\r\n        title: currency,\r\n        value: currency,\r\n      },\r\n      {\r\n        fullTitle: 'USD',\r\n        icon: 'usd',\r\n        name: 'USD',\r\n        title: 'USD',\r\n        value: 'USD',\r\n      },\r\n    ]\r\n\r\n    const isDisabled =\r\n      !amount || isShipped || !destination || !contact || (address && !this.addressIsCorrect())\r\n\r\n    return (\r\n      <Modal\r\n        name={name}\r\n        title={`${intl.formatMessage(localeLabel.title)}${' '}${currency.toUpperCase()}`}\r\n        disableClose={this.props.data.disableClose}\r\n      >\r\n        {openScanCam && (\r\n          <QrReader\r\n            openScan={this.openScan}\r\n            handleError={this.reportError}\r\n            handleScan={this.handleScan}\r\n          />\r\n        )}\r\n        <div styleName={`invoiceModalHolder ${isDark ? 'dark' : ''}`}>\r\n          {toAddressEnabled && (\r\n            <div styleName=\"highLevel\">\r\n              <FieldLabel>\r\n                <FormattedMessage\r\n                  id=\"invoiceModal_Address\"\r\n                  defaultMessage=\"Адрес, на который выставляем счет\"\r\n                />\r\n              </FieldLabel>\r\n              <Input\r\n                smallFontSize\r\n                withMargin\r\n                valueLink={linked.address}\r\n                focusOnInit\r\n                pattern=\"0-9a-zA-Z:\"\r\n                placeholder={intl.formatMessage(localeLabel.addressPlaceholder, {\r\n                  currency: currency.toUpperCase(),\r\n                })}\r\n                qr={isMobile}\r\n                openScan={this.openScan}\r\n              />\r\n              {address && !this.addressIsCorrect() && (\r\n                <div styleName=\"rednote\">\r\n                  <FormattedMessage\r\n                    id=\"invoiceModal_IncorrectAddress\"\r\n                    defaultMessage=\"Вы ввели не коректный адрес\"\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n          <div styleName=\"highLevel\">\r\n            <FieldLabel>\r\n              <FormattedMessage\r\n                id=\"invoiceModal_destiAddress\"\r\n                defaultMessage=\"Адрес, куда будет произведена оплата\"\r\n              />\r\n            </FieldLabel>\r\n            <Input\r\n              valueLink={linked.destination}\r\n              focusOnInit\r\n              smallFontSize\r\n              withMargin\r\n              pattern=\"0-9a-zA-Z:\"\r\n              placeholder={intl.formatMessage(localeLabel.destiAddressPlaceholder, {\r\n                currency: currency.toUpperCase(),\r\n              })}\r\n              qr={isMobile}\r\n              openScan={this.openScan}\r\n            />\r\n            {destination && !this.addressIsCorrect(destination) && (\r\n              <div styleName=\"rednote\">\r\n                <FormattedMessage\r\n                  id=\"invoiceModal_IncorrectDestiAddress\"\r\n                  defaultMessage=\"Вы ввели не коректный адрес\"\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div styleName=\"highLevel\">\r\n            <FieldLabel>\r\n              <span>\r\n                <FormattedMessage id=\"invoiceModal_Amount\" defaultMessage=\"Сумма\" />\r\n              </span>\r\n            </FieldLabel>\r\n            <span styleName=\"amountTooltip\">{\r\n              new BigNumber(amount).isGreaterThan(0) \r\n                ? selectedValue === currency\r\n                  ? `~ ${fiatAmount} USD`\r\n                  : `~ ${amount} ${currency}`\r\n                : ''\r\n              }\r\n            </span>\r\n            <Input\r\n              className={ownStyle.input}\r\n              placeholder={intl.formatMessage(localeLabel.amountPlaceholder)}\r\n              onKeyDown={inputReplaceCommaWithDot}\r\n              pattern=\"0-9\\.\"\r\n              withMargin\r\n              valueLink={selectedValue === currency\r\n                ? linked.amount.pipe(this.handleAmount)\r\n                : linked.fiatAmount.pipe(this.handleAmount)\r\n              }\r\n            />\r\n            <CurrencySelect\r\n              label=\"Cyrrency\"\r\n              tooltip=\"Cyrrency\"\r\n              id=\"InvoiceModalCurrencySelect\"\r\n              className={dropDownStyles.simpleDropdown}\r\n              selectedValue={selectedValue}\r\n              onSelect={this.handleBuyCurrencySelect}\r\n              selectedItemRender={(item) => item.fullTitle}\r\n              currencies={curList}\r\n            />\r\n          </div>\r\n          <div styleName=\"highLevel\">\r\n            <FieldLabel>\r\n              <span>\r\n                <FormattedMessage\r\n                  id=\"invoiceModal_Contact\"\r\n                  defaultMessage=\"Ваш контакт (емейл или @никнейм)\"\r\n                />\r\n              </span>\r\n            </FieldLabel>\r\n            <Input\r\n              valueLink={linked.contact}\r\n              withMargin\r\n              placeholder={intl.formatMessage(localeLabel.contactPlaceholder)}\r\n            />\r\n          </div>\r\n          <div styleName=\"lowLevel\">\r\n            <FieldLabel>\r\n              <span>\r\n                <FormattedMessage id=\"invoiceModal_Label\" defaultMessage=\"Комментарий\" />\r\n              </span>\r\n            </FieldLabel>\r\n            <div styleName=\"group\" style={{ marginBottom: '25px' }}>\r\n              <Input\r\n                srollingForm={true}\r\n                valueLink={linked.label}\r\n                multiline={true}\r\n                placeholder={intl.formatMessage(localeLabel.labelPlaceholder)}\r\n              />\r\n            </div>\r\n          </div>\r\n          <Button fullWidth blue big disabled={isDisabled} onClick={this.handleSubmit}>\r\n            {isShipped ? (\r\n              <Fragment>\r\n                <FormattedMessage id=\"invoiceModal_Processing\" defaultMessage=\"Обработка ...\" />\r\n              </Fragment>\r\n            ) : (\r\n              <Fragment>\r\n                <FormattedMessage id=\"invoiceModal_Submit\" defaultMessage=\"Выставить счет\" />\r\n              </Fragment>\r\n            )}\r\n          </Button>\r\n          {error && (\r\n            <div styleName=\"rednote\">\r\n              <FormattedMessage\r\n                id=\"invoiceModal_Error\"\r\n                defaultMessage=\"{errorName} {currency}:{br}{errorMessage}\"\r\n                values={{\r\n                  errorName: intl.formatMessage(error.name),\r\n                  errorMessage: intl.formatMessage(error.message),\r\n                  br: <br />,\r\n                  currency: `${currency}`,\r\n                }}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </Modal>\r\n    )\r\n  }\r\n}\r\n"]}]}