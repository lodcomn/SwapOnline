{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\components\\modal\\ModalConductorProvider\\ModalConductorProvider.tsx","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\components\\modal\\ModalConductorProvider\\ModalConductorProvider.tsx","mtime":1614850992923},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIjsKLy8gQHRzLW5vY2hlY2sKaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlZGFjdGlvbic7CmltcG9ydCB7IHdpdGhSb3V0ZXIgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJzsKaW1wb3J0IGNzc01vZHVsZXMgZnJvbSAncmVhY3QtY3NzLW1vZHVsZXMnOwppbXBvcnQgY3ggZnJvbSAnY2xhc3NuYW1lcyc7CmltcG9ydCBNb2RhbENvbmR1Y3RvciBmcm9tICdjb21wb25lbnRzL21vZGFsL01vZGFsQ29uZHVjdG9yL01vZGFsQ29uZHVjdG9yJzsKaW1wb3J0IHN0eWxlcyBmcm9tICcuL3N0eWxlcy5zY3NzJzsKCnZhciBNb2RhbENvbmR1Y3RvclByb3ZpZGVyID0gZnVuY3Rpb24gTW9kYWxDb25kdWN0b3JQcm92aWRlcihfcmVmKSB7CiAgdmFyIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbiwKICAgICAgaGlzdG9yeSA9IF9yZWYuaGlzdG9yeSwKICAgICAgbW9kYWxzID0gX3JlZi5tb2RhbHMsCiAgICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIFsiY2hpbGRyZW4iLCAiaGlzdG9yeSIsICJtb2RhbHMiXSk7CgogIHZhciBpc0FueU1vZGFsQ2FsbGVkID0gT2JqZWN0LmtleXMobW9kYWxzKS5sZW5ndGg7CiAgdmFyIGhpZXN0WiA9IE9iamVjdC52YWx1ZXMobW9kYWxzKS5yZWR1Y2UoIC8vQAogIGZ1bmN0aW9uIChhY2MsIGkpIHsKICAgIHJldHVybiBhY2MgPiBpLnpJbmRleCA/IGFjYyA6IGkuekluZGV4OwogIH0sIC0xKTsKICB2YXIgdXBwZXJNb2RhbCA9IE9iamVjdC5rZXlzKG1vZGFscylbLy9AIAogIE9iamVjdC52YWx1ZXMobW9kYWxzKS5maW5kSW5kZXgoZnVuY3Rpb24gKGkpIHsKICAgIHJldHVybiBpLnpJbmRleCA9PT0gaGllc3RaOwogIH0pXTsKICB2YXIgaXNNb2RhbE9wZW5lZEhlbHBlciA9IGZhbHNlOwoKICB2YXIgaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVDbGljayhlKSB7CiAgICBpZiAoIWlzTW9kYWxPcGVuZWRIZWxwZXIgJiYgaXNBbnlNb2RhbENhbGxlZCkgewogICAgICByZXR1cm4gaXNNb2RhbE9wZW5lZEhlbHBlciA9IHRydWU7CiAgICB9CgogICAgaWYgKCEoZS50YXJnZXQuY2xvc2VzdCgnLl9fbW9kYWxDb25kdWN0b3JQcm92aWRlZF9fJykgIT09IG51bGwgfHwgZS50YXJnZXQuY2xvc2VzdCgnLmRhdGEtdHV0LWFsbC1iYWxhbmNlJykgIT09IG51bGwpICYmIGRvY3VtZW50LmJvZHkuY29udGFpbnMoZS50YXJnZXQpICYmIGlzTW9kYWxPcGVuZWRIZWxwZXIpIHsKICAgICAgaXNNb2RhbE9wZW5lZEhlbHBlciA9IGZhbHNlOwogICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDbGljayk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgey8vIGFjdGlvbnMubW9kYWxzLmNsb3NlKGAke3VwcGVyTW9kYWx9YCkKICAgICAgfSwgMSk7CiAgICB9CiAgfTsKCiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIGlmIChpc0FueU1vZGFsQ2FsbGVkKSB7CiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUNsaWNrKTsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2xpY2spOwogICAgfQoKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUNsaWNrKTsKICAgIH07CiAgfSk7CiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICBjbGFzc05hbWU6IGN4KF9kZWZpbmVQcm9wZXJ0eSh7CiAgICAgIF9fbW9kYWxDb25kdWN0b3JQcm92aWRlZF9fOiB0cnVlCiAgICB9LCBzdHlsZXMubW9kYWxzQ2FsbGVkLCBpc0FueU1vZGFsQ2FsbGVkKSkKICB9LCBpc0FueU1vZGFsQ2FsbGVkID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTW9kYWxDb25kdWN0b3IsIHsKICAgIGRhc2hib2FyZFZpZXc6IHRydWUsCiAgICBoaXN0b3J5OiBoaXN0b3J5CiAgfSkgOiBjaGlsZHJlbik7Cn07CgpleHBvcnQgZGVmYXVsdCBjb25uZWN0KGZ1bmN0aW9uIChfcmVmMikgewogIHZhciBtb2RhbHMgPSBfcmVmMi5tb2RhbHMsCiAgICAgIGRhc2hib2FyZE1vZGFsc0FsbG93ZWQgPSBfcmVmMi51aS5kYXNoYm9hcmRNb2RhbHNBbGxvd2VkOwogIHJldHVybiB7CiAgICBtb2RhbHM6IG1vZGFscywKICAgIGRhc2hib2FyZFZpZXc6IGRhc2hib2FyZE1vZGFsc0FsbG93ZWQKICB9Owp9KSh3aXRoUm91dGVyKCAvL0AgCmNzc01vZHVsZXMoTW9kYWxDb25kdWN0b3JQcm92aWRlciwgc3R5bGVzLCB7CiAgYWxsb3dNdWx0aXBsZTogdHJ1ZQp9KSkpOw=="},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/front/shared/components/modal/ModalConductorProvider/ModalConductorProvider.tsx"],"names":["React","connect","withRouter","cssModules","cx","ModalConductor","styles","ModalConductorProvider","children","history","modals","props","isAnyModalCalled","Object","keys","length","hiestZ","values","reduce","acc","i","zIndex","upperModal","findIndex","isModalOpenedHelper","handleClick","e","target","closest","document","body","contains","window","removeEventListener","setTimeout","useEffect","addEventListener","__modalConductorProvided__","modalsCalled","dashboardModalsAllowed","ui","dashboardView","allowMultiple"],"mappings":"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","sourcesContent":["// @ts-nocheck\r\nimport React from 'react'\r\nimport { connect } from 'redaction'\r\nimport { withRouter } from 'react-router-dom'\r\nimport cssModules from 'react-css-modules'\r\nimport cx from 'classnames'\r\n\r\nimport actions from 'redux/actions'\r\nimport ModalConductor from 'components/modal/ModalConductor/ModalConductor'\r\nimport styles from './styles.scss'\r\n\r\n\r\nconst ModalConductorProvider = ({ children, history, modals, ...props }) => {\r\n  const isAnyModalCalled = Object.keys(modals).length\r\n\r\n  const hiestZ = Object.values(modals).reduce(\r\n    //@\r\n    (acc, i) => (acc > i.zIndex ? acc : i.zIndex),\r\n    -1\r\n  )\r\n  const upperModal = Object.keys(modals)[\r\n    //@ \r\n    Object.values(modals).findIndex((i) => i.zIndex === hiestZ)\r\n  ]\r\n\r\n  let isModalOpenedHelper = false\r\n  const handleClick = (e) => {\r\n    if (!isModalOpenedHelper && isAnyModalCalled) {\r\n      return (isModalOpenedHelper = true)\r\n    }\r\n\r\n    if (\r\n      !(\r\n        e.target.closest('.__modalConductorProvided__') !== null ||\r\n        e.target.closest('.data-tut-all-balance') !== null\r\n      ) &&\r\n      document.body.contains(e.target) &&\r\n      isModalOpenedHelper\r\n    ) {\r\n      isModalOpenedHelper = false\r\n      window.removeEventListener('click', handleClick)\r\n      setTimeout(() => {\r\n        // actions.modals.close(`${upperModal}`)\r\n      }, 1)\r\n    }\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    if (isAnyModalCalled) {\r\n      window.removeEventListener('click', handleClick)\r\n      window.addEventListener('click', handleClick)\r\n    }\r\n    return () => {\r\n      window.removeEventListener('click', handleClick)\r\n    }\r\n  })\r\n\r\n  return (\r\n    <div\r\n      className={cx({\r\n        __modalConductorProvided__: true,\r\n        [styles.modalsCalled]: isAnyModalCalled,\r\n      })}\r\n    >\r\n      {isAnyModalCalled ? (\r\n        <ModalConductor dashboardView history={history} />\r\n      ) : (\r\n        children\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect(({ modals, ui: { dashboardModalsAllowed } }) => ({\r\n  modals,\r\n  dashboardView: dashboardModalsAllowed,\r\n}))(\r\n  withRouter(\r\n    //@ \r\n    cssModules(ModalConductorProvider, styles, { allowMultiple: true })\r\n  )\r\n)\r\n"]}]}