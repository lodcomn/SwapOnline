{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\containers\\App\\App.tsx","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\containers\\App\\App.tsx","mtime":1614850505584},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI7CmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXNzZXJ0VGhpc0luaXRpYWxpemVkIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9nZXRQcm90b3R5cGVPZiI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSI7Cgp2YXIgX2RlYywgX2RlYzIsIF9jbGFzcywgX3RlbXA7CgppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICJAYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvciI7CgpmdW5jdGlvbiBfY3JlYXRlU3VwZXIoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfQoKZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSAidW5kZWZpbmVkIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gImZ1bmN0aW9uIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH0KCi8vIEB0cy1ub2NoZWNrCmltcG9ydCBSZWFjdCBmcm9tICJyZWFjdCI7CmltcG9ydCB7IHdpdGhSb3V0ZXIsIEhhc2hSb3V0ZXIgfSBmcm9tICJyZWFjdC1yb3V0ZXItZG9tIjsKaW1wb3J0IGFjdGlvbnMgZnJvbSAicmVkdXgvYWN0aW9ucyI7CmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICJyZWRhY3Rpb24iOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudC13aXRoLWxvY2FsZXMtZXM2IjsKaW1wb3J0IHsgY29uc3RhbnRzLCBsb2NhbFN0b3JhZ2UgLy8gZmlyZWJhc2UKfSBmcm9tICJoZWxwZXJzIjsKaW1wb3J0IENTU01vZHVsZXMgZnJvbSAicmVhY3QtY3NzLW1vZHVsZXMiOwppbXBvcnQgc3R5bGVzIGZyb20gIi4vQXBwLnNjc3MiOwppbXBvcnQgInNjc3MvYXBwLnNjc3MiOwppbXBvcnQgeyBjcmVhdGVTd2FwQXBwIH0gZnJvbSAiaW5zdGFuY2VzL25ld1N3YXAiOwppbXBvcnQgQ29yZSBmcm9tICJjb250YWluZXJzL0NvcmUvQ29yZSI7CmltcG9ydCBIZWFkZXIgZnJvbSAiY29tcG9uZW50cy9IZWFkZXIvSGVhZGVyIjsKaW1wb3J0IEZvb3RlciBmcm9tICJjb21wb25lbnRzL0Zvb3Rlci9Gb290ZXIiOwppbXBvcnQgTG9hZGVyIGZyb20gImNvbXBvbmVudHMvbG9hZGVycy9Mb2FkZXIvTG9hZGVyIjsKaW1wb3J0IFByZXZlbnRNdWx0aVRhYnMgZnJvbSAiY29tcG9uZW50cy9QcmV2ZW50TXVsdGlUYWJzL1ByZXZlbnRNdWx0aVRhYnMiOwppbXBvcnQgUmVxdWVzdExvYWRlciBmcm9tICJjb21wb25lbnRzL2xvYWRlcnMvUmVxdWVzdExvYWRlci9SZXF1ZXN0TG9hZGVyIjsKaW1wb3J0IE1vZGFsQ29uZHVjdG9yIGZyb20gImNvbXBvbmVudHMvbW9kYWwvTW9kYWxDb25kdWN0b3IvTW9kYWxDb25kdWN0b3IiOwppbXBvcnQgV2lkdGhDb250YWluZXIgZnJvbSAiY29tcG9uZW50cy9sYXlvdXQvV2lkdGhDb250YWluZXIvV2lkdGhDb250YWluZXIiOwppbXBvcnQgV3JhcHBlciBmcm9tICJjb21wb25lbnRzL2xheW91dC9XcmFwcGVyL1dyYXBwZXIiOwppbXBvcnQgTm90aWZpY2F0aW9uQ29uZHVjdG9yIGZyb20gImNvbXBvbmVudHMvbm90aWZpY2F0aW9uL05vdGlmaWNhdGlvbkNvbmR1Y3Rvci9Ob3RpZmljYXRpb25Db25kdWN0b3IiOwppbXBvcnQgU2VvIGZyb20gImNvbXBvbmVudHMvU2VvL1NlbyI7CmltcG9ydCBjb25maWcgZnJvbSAiaGVscGVycy9leHRlcm5hbENvbmZpZyI7CmltcG9ydCBiYWNrdXBVc2VyRGF0YSBmcm9tICdwbHVnaW5zL2JhY2t1cFVzZXJEYXRhJzsKaW1wb3J0IHJlZGlyZWN0VG8gZnJvbSAnaGVscGVycy9yZWRpcmVjdFRvJzsKaW1wb3J0IGxpbmtzIGZyb20gJ2hlbHBlcnMvbGlua3MnOwppbXBvcnQgeyBGb3JtYXR0ZWRNZXNzYWdlLCBpbmplY3RJbnRsLCBkZWZpbmVNZXNzYWdlcyB9IGZyb20gJ3JlYWN0LWludGwnOwppbXBvcnQgbWV0YW1hc2sgZnJvbSAnaGVscGVycy9tZXRhbWFzayc7CnZhciB1c2VyTGFuZ3VhZ2UgPSAobmF2aWdhdG9yLnVzZXJMYW5ndWFnZSB8fCBuYXZpZ2F0b3IubGFuZ3VhZ2UgfHwgImVuLWdiIikuc3BsaXQoIi0iKVswXTsKbW9tZW50LmxvY2FsZSh1c2VyTGFuZ3VhZ2UpOwp2YXIgbWV0YW1hc2tOZXR3b3JrcyA9IGRlZmluZU1lc3NhZ2VzKHsKICBtYWlubmV0OiB7CiAgICBpZDogIk1ldGFtYXNrTmV0d29ya0FsZXJ0X05ldHdvcmtNYWlubmV0IiwKICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDFFXHUwNDQxXHUwNDNEXHUwNDNFXHUwNDMyXHUwNDNEXHUwNDMwXHUwNDRGIFx1MDQ0MVx1MDQzNVx1MDQ0Mlx1MDQ0QyAoTWFpbm5ldCkiCiAgfSwKICB0ZXN0bmV0OiB7CiAgICBpZDogIk1ldGFtYXNrTmV0d29ya0FsZXJ0X05ldHdvcmtUZXN0bmV0IiwKICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDIyXHUwNDM1XHUwNDQxXHUwNDQyXHUwNDNFXHUwNDMyXHUwNDMwXHUwNDRGIFx1MDQ0MVx1MDQzNVx1MDQ0Mlx1MDQ0QyAoUm9wc3RlbikiCiAgfQp9KTsKdmFyIEFwcCA9IChfZGVjID0gY29ubmVjdChmdW5jdGlvbiAoX3JlZikgewogIHZhciBjdXJyZW5jaWVzID0gX3JlZi5jdXJyZW5jaWVzLml0ZW1zLAogICAgICBtb2RhbHMgPSBfcmVmLm1vZGFscywKICAgICAgZGFzaGJvYXJkTW9kYWxzQWxsb3dlZCA9IF9yZWYudWkuZGFzaGJvYXJkTW9kYWxzQWxsb3dlZDsKICByZXR1cm4gewogICAgY3VycmVuY2llczogY3VycmVuY2llcywKICAgIGlzVmlzaWJsZTogImxvYWRlci5pc1Zpc2libGUiLAogICAgZXRoQWRkcmVzczogInVzZXIuZXRoRGF0YS5hZGRyZXNzIiwKICAgIGJ0Y0FkZHJlc3M6ICJ1c2VyLmJ0Y0RhdGEuYWRkcmVzcyIsCiAgICBnaG9zdEFkZHJlc3M6ICJ1c2VyLmdob3N0RGF0YS5hZGRyZXNzIiwKICAgIG5leHRBZGRyZXNzOiAidXNlci5uZXh0RGF0YS5hZGRyZXNzIiwKICAgIHRva2VuQWRkcmVzczogInVzZXIudG9rZW5zRGF0YS5zd2FwLmFkZHJlc3MiLAogICAgbW9kYWxzOiBtb2RhbHMsCiAgICBkYXNoYm9hcmRNb2RhbHNBbGxvd2VkOiBkYXNoYm9hcmRNb2RhbHNBbGxvd2VkCiAgfTsKfSksIF9kZWMyID0gQ1NTTW9kdWxlcyhzdHlsZXMsIHsKICBhbGxvd011bHRpcGxlOiB0cnVlCn0pLCBpbmplY3RJbnRsKF9jbGFzcyA9IHdpdGhSb3V0ZXIoX2NsYXNzID0gX2RlYyhfY2xhc3MgPSBfZGVjMihfY2xhc3MgPSAoX3RlbXAgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHsKICBfaW5oZXJpdHMoQXBwLCBfUmVhY3QkQ29tcG9uZW50KTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihBcHApOwoKICAvKnN0YXRpYyBwcm9wVHlwZXMgPSB7DQogICAgY2hpbGRyZW46IFByb3BUeXBlcy5lbGVtZW50LmlzUmVxdWlyZWQNCiAgfTsqLwogIGZ1bmN0aW9uIEFwcChwcm9wcykgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBcHApOwoKICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInBydk11bHRpVGFiIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJsb2NhbFN0b3JhZ2VMaXN0ZW5lciIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiY2hlY2tJZkRhc2hib2FyZE1vZGFsc0FsbG93ZWQiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBkYXNoYm9hcmRNb2RhbFByb3ZpZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLl9fbW9kYWxDb25kdWN0b3JQcm92aWRlZF9fJyk7IC8vQAoKICAgICAgaWYgKGRhc2hib2FyZE1vZGFsUHJvdmlkZXIgJiYgIV90aGlzLnByb3BzLmRhc2hib2FyZE1vZGFsc0FsbG93ZWQpIHsKICAgICAgICByZXR1cm4gYWN0aW9ucy51aS5hbGxvd0Rhc2hib2FyZE1vZGFscygpOyAvL0AKICAgICAgfSBlbHNlIGlmIChkYXNoYm9hcmRNb2RhbFByb3ZpZGVyICYmIF90aGlzLnByb3BzLmRhc2hib2FyZE1vZGFsc0FsbG93ZWQpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQoKICAgICAgcmV0dXJuIGFjdGlvbnMudWkuZGlzYWxsb3dEYXNoYm9hcmRNb2RhbHMoKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZVN3aXRjaFRhYiIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIG11bHRpVGFiczogZmFsc2UKICAgICAgfSk7CgogICAgICBfdGhpcy5wcmV2ZW50TXVsdGlUYWJzKHRydWUpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAib3ZlcmZsb3dIYW5kbGVyIiwgZnVuY3Rpb24gKCkgewogICAgICAvL0AKICAgICAgdmFyIF90aGlzJHByb3BzID0gX3RoaXMucHJvcHMsCiAgICAgICAgICBtb2RhbHMgPSBfdGhpcyRwcm9wcy5tb2RhbHMsCiAgICAgICAgICBkYXNoYm9hcmRNb2RhbHNBbGxvd2VkID0gX3RoaXMkcHJvcHMuZGFzaGJvYXJkTW9kYWxzQWxsb3dlZDsKICAgICAgdmFyIGlzQW55TW9kYWxDYWxsZWQgPSBPYmplY3Qua2V5cyhtb2RhbHMpLmxlbmd0aCA+IDA7CiAgICAgIHZhciBpc0RhcmsgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShjb25zdGFudHMubG9jYWxTdG9yYWdlLmlzRGFyayk7CgogICAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiBpc0FueU1vZGFsQ2FsbGVkICYmICFkYXNoYm9hcmRNb2RhbHNBbGxvd2VkKSB7CiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdvdmVyZmxvd1ktZGVmYXVsdCcpOwogICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnb3ZlcmZsb3dZLWhpZGRlbicpOwogICAgICB9IGVsc2UgewogICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcmZsb3dZLWhpZGRlbicpOwogICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnb3ZlcmZsb3dZLWRlZmF1bHQnKTsKICAgICAgfQoKICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNBbnlNb2RhbENhbGxlZCAmJiBkYXNoYm9hcmRNb2RhbHNBbGxvd2VkKSB7CiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdvdmVyZmxvd1ktZGFzaGJvYXJkVmlldy1kZWZhdWx0Jyk7CiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdvdmVyZmxvd1ktZGFzaGJvYXJkVmlldy1oaWRkZW4nKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ292ZXJmbG93WS1kYXNoYm9hcmRWaWV3LWhpZGRlbicpOwogICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnb3ZlcmZsb3dZLWRhc2hib2FyZFZpZXctZGVmYXVsdCcpOwogICAgICB9CgogICAgICBpZiAoaXNEYXJrKSB7CiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdkYXJrVGhlbWUnKTsKICAgICAgfQogICAgfSk7CgogICAgX3RoaXMubG9jYWxTdG9yYWdlTGlzdGVuZXIgPSBudWxsOwogICAgX3RoaXMucHJ2TXVsdGlUYWIgPSB7CiAgICAgIHJlamVjdDogbnVsbCwKICAgICAgZW50ZXI6IG51bGwsCiAgICAgICJzd2l0Y2giOiBudWxsCiAgICB9OwogICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgIGZldGNoaW5nOiBmYWxzZSwKICAgICAgbXVsdGlUYWJzOiBmYWxzZSwKICAgICAgZXJyb3I6ICIiCiAgICB9OwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEFwcCwgW3sKICAgIGtleTogImdlbmVyYWRlSWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdlbmVyYWRlSWQoY2FsbGJhY2spIHsKICAgICAgdmFyIG5ld0lkID0gRGF0ZS5ub3coKS50b1N0cmluZygpOwogICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICBhcHBJRDogbmV3SWQKICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgIGNhbGxiYWNrKG5ld0lkKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicHJldmVudE11bHRpVGFicyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcHJldmVudE11bHRpVGFicyhpc1N3aXRjaCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuZ2VuZXJhZGVJZChmdW5jdGlvbiAobmV3SWQpIHsKICAgICAgICBpZiAoaXNTd2l0Y2gpIHsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGNvbnN0YW50cy5sb2NhbFN0b3JhZ2VbInN3aXRjaCJdLCBuZXdJZCk7CiAgICAgICAgfQoKICAgICAgICB2YXIgb25SZWplY3RIYW5kbGUgPSBmdW5jdGlvbiBvblJlamVjdEhhbmRsZSgpIHsKICAgICAgICAgIHZhciBhcHBJRCA9IF90aGlzMi5zdGF0ZS5hcHBJRDsKICAgICAgICAgIHZhciBpZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGNvbnN0YW50cy5sb2NhbFN0b3JhZ2UucmVqZWN0KTsKCiAgICAgICAgICBpZiAoaWQgJiYgaWQgIT09IGFwcElEKSB7CiAgICAgICAgICAgIF90aGlzMi5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgbXVsdGlUYWJzOiB0cnVlCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnVuc3Vic2NyaWJlKF90aGlzMi5wcnZNdWx0aVRhYi5yZWplY3QpOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2UudW5zdWJzY3JpYmUoX3RoaXMyLnBydk11bHRpVGFiLmVudGVyKTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnVuc3Vic2NyaWJlKF90aGlzMi5wcnZNdWx0aVRhYlsic3dpdGNoIl0pOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShjb25zdGFudHMubG9jYWxTdG9yYWdlLnJlamVjdCk7CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgdmFyIG9uRW50ZXJIYW5kbGUgPSBmdW5jdGlvbiBvbkVudGVySGFuZGxlKCkgewogICAgICAgICAgdmFyIGFwcElEID0gX3RoaXMyLnN0YXRlLmFwcElEOwogICAgICAgICAgdmFyIGlkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oY29uc3RhbnRzLmxvY2FsU3RvcmFnZS5lbnRlcik7CiAgICAgICAgICB2YXIgc3dpdGNoSWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShjb25zdGFudHMubG9jYWxTdG9yYWdlWyJzd2l0Y2giXSk7CiAgICAgICAgICBpZiAoc3dpdGNoSWQgJiYgc3dpdGNoSWQgPT09IGlkKSByZXR1cm47CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShjb25zdGFudHMubG9jYWxTdG9yYWdlLnJlamVjdCwgYXBwSUQpOwogICAgICAgIH07CgogICAgICAgIHZhciBvblN3aXRjaEhhbmdsZSA9IGZ1bmN0aW9uIG9uU3dpdGNoSGFuZ2xlKCkgewogICAgICAgICAgdmFyIHN3aXRjaElkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oY29uc3RhbnRzLmxvY2FsU3RvcmFnZVsic3dpdGNoIl0pOwogICAgICAgICAgdmFyIGFwcElEID0gX3RoaXMyLnN0YXRlLmFwcElEOwoKICAgICAgICAgIGlmIChhcHBJRCAhPT0gc3dpdGNoSWQpIHsKICAgICAgICAgICAgX3RoaXMyLnNldFN0YXRlKHsKICAgICAgICAgICAgICBtdWx0aVRhYnM6IHRydWUKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBsb2NhbFN0b3JhZ2UudW5zdWJzY3JpYmUoX3RoaXMyLnBydk11bHRpVGFiLnJlamVjdCk7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS51bnN1YnNjcmliZShfdGhpczIucHJ2TXVsdGlUYWIuZW50ZXIpOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2UudW5zdWJzY3JpYmUoX3RoaXMyLnBydk11bHRpVGFiWyJzd2l0Y2giXSk7CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgX3RoaXMyLnBydk11bHRpVGFiLnJlamVjdCA9IGxvY2FsU3RvcmFnZS5zdWJzY3JpYmUoY29uc3RhbnRzLmxvY2FsU3RvcmFnZS5yZWplY3QsIG9uUmVqZWN0SGFuZGxlKTsKICAgICAgICBfdGhpczIucHJ2TXVsdGlUYWIuZW50ZXIgPSBsb2NhbFN0b3JhZ2Uuc3Vic2NyaWJlKGNvbnN0YW50cy5sb2NhbFN0b3JhZ2UuZW50ZXIsIG9uRW50ZXJIYW5kbGUpOwogICAgICAgIF90aGlzMi5wcnZNdWx0aVRhYlsic3dpdGNoIl0gPSBsb2NhbFN0b3JhZ2Uuc3Vic2NyaWJlKGNvbnN0YW50cy5sb2NhbFN0b3JhZ2VbInN3aXRjaCJdLCBvblN3aXRjaEhhbmdsZSk7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oY29uc3RhbnRzLmxvY2FsU3RvcmFnZS5lbnRlciwgbmV3SWQpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJwb3B1cEluY29ycmVjdE5ldHdvcmsiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHBvcHVwSW5jb3JyZWN0TmV0d29yaygpIHsKICAgICAgLy9ACiAgICAgIHZhciBpbnRsID0gdGhpcy5wcm9wcy5pbnRsOwogICAgICBhY3Rpb25zLm1vZGFscy5vcGVuKGNvbnN0YW50cy5tb2RhbHMuQWxlcnRNb2RhbCwgewogICAgICAgIHRpdGxlOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogIk1ldGFtYXNrTmV0d29ya0FsZXJ0X1RpdGxlIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDEyXHUwNDNEXHUwNDM4XHUwNDNDXHUwNDMwXHUwNDNEXHUwNDM4XHUwNDM1IgogICAgICAgIH0pLAogICAgICAgIG1lc3NhZ2U6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAiTWV0YW1hc2tOZXR3b3JrQWxlcnRfTWVzc2FnZSIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxNFx1MDQzQlx1MDQ0RiBcdTA0M0ZcdTA0NDBcdTA0M0VcdTA0MzRcdTA0M0VcdTA0M0JcdTA0MzZcdTA0MzVcdTA0M0RcdTA0MzhcdTA0NEYgXHUwNDMyXHUwNDRCXHUwNDMxXHUwNDM1XHUwNDQwXHUwNDM4XHUwNDQyXHUwNDM1IFx1MDQzMiBcdTA0M0FcdTA0M0VcdTA0NDhcdTA0MzVcdTA0M0JcdTA0NENcdTA0M0FcdTA0MzUge3dhbGxldFRpdGxlfSBcIntuZXR3b3JrfVwiIFx1MDQzOFx1MDQzQlx1MDQzOCBcdTA0M0VcdTA0NDJcdTA0M0FcdTA0M0JcdTA0NEVcdTA0NDdcdTA0MzhcdTA0NDJcdTA0MzUgXHUwNDNBXHUwNDNFXHUwNDQ4XHUwNDM1XHUwNDNCXHUwNDM1XHUwNDNBIiwKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBuZXR3b3JrOiBpbnRsLmZvcm1hdE1lc3NhZ2UobWV0YW1hc2tOZXR3b3Jrc1tjb25maWcuZW50cnldKSwKICAgICAgICAgICAgd2FsbGV0VGl0bGU6IG1ldGFtYXNrLndlYjNjb25uZWN0LmdldFByb3ZpZGVyVGl0bGUoKQogICAgICAgICAgfQogICAgICAgIH0pLAogICAgICAgIGxhYmVsT2s6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAiTWV0YW1hc2tOZXR3b3JrQWxlcnRfT2tEaXNjb25uZWN0V2FsbGV0IiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDFFXHUwNDQyXHUwNDNBXHUwNDNCXHUwNDRFXHUwNDQ3XHUwNDM4XHUwNDQyXHUwNDRDIFx1MDQzMlx1MDQzRFx1MDQzNVx1MDQ0OFx1MDQzRFx1MDQzOFx1MDQzOSBcdTA0M0FcdTA0M0VcdTA0NDhcdTA0MzVcdTA0M0JcdTA0MzVcdTA0M0EiCiAgICAgICAgfSksCiAgICAgICAgZG9udENsb3NlOiB0cnVlLAogICAgICAgIG9rQnV0dG9uQXV0b1dpZHRoOiB0cnVlLAogICAgICAgIGNhbGxiYWNrT2s6IGZ1bmN0aW9uIGNhbGxiYWNrT2soKSB7CiAgICAgICAgICBtZXRhbWFzay5kaXNjb25uZWN0KCk7CiAgICAgICAgICBhY3Rpb25zLm1vZGFscy5jbG9zZShjb25zdGFudHMubW9kYWxzLkFsZXJ0TW9kYWwpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicHJvY2Vzc01ldGFtYXNrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwcm9jZXNzTWV0YW1hc2soKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgbWV0YW1hc2sud2ViM2Nvbm5lY3Qub25Jbml0KGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX2NoZWNrQ2hhaW4gPSBmdW5jdGlvbiBfY2hlY2tDaGFpbigpIHsKICAgICAgICAgIGlmIChtZXRhbWFzay5pc0NvcnJlY3ROZXR3b3JrKCkpIHsKICAgICAgICAgICAgYWN0aW9ucy5tb2RhbHMuY2xvc2UoY29uc3RhbnRzLm1vZGFscy5BbGVydE1vZGFsKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzMy5wb3B1cEluY29ycmVjdE5ldHdvcmsoKTsKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBtZXRhbWFzay53ZWIzY29ubmVjdC5vbignY2hhaW5DaGFuZ2VkJywgX2NoZWNrQ2hhaW4pOwogICAgICAgIG1ldGFtYXNrLndlYjNjb25uZWN0Lm9uKCdjb25uZWN0ZWQnLCBfY2hlY2tDaGFpbik7CgogICAgICAgIGlmIChtZXRhbWFzay5pc0Nvbm5lY3RlZCgpICYmICFtZXRhbWFzay5pc0NvcnJlY3ROZXR3b3JrKCkpIHsKICAgICAgICAgIF90aGlzMy5wb3B1cEluY29ycmVjdE5ldHdvcmsoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInByb2Nlc3NVc2VyQmFja3VwIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwcm9jZXNzVXNlckJhY2t1cCgpIHsKICAgICAgbmV3IFByb21pc2UoIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShyZXNvbHZlKSB7CiAgICAgICAgICB2YXIgd3BMb2FkZXIsIGhhc1NlcnZlckJhY2t1cDsKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIHdwTG9hZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dyYXBwZXJfZWxlbWVudCcpOwogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGJhY2t1cFVzZXJEYXRhLmhhc1NlcnZlckJhY2t1cCgpOwoKICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgaGFzU2VydmVyQmFja3VwID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2hhcyBzZXJ2ZXIgYmFja3VwJywgaGFzU2VydmVyQmFja3VwKTsKCiAgICAgICAgICAgICAgICAgIGlmIChiYWNrdXBVc2VyRGF0YS5pc1VzZXJMb2dnZWRJbigpICYmIGJhY2t1cFVzZXJEYXRhLmlzVXNlckNoYW5nZWQoKSAmJiBoYXNTZXJ2ZXJCYWNrdXApIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZG8gcmVzdG9yZSB1c2VyJyk7CiAgICAgICAgICAgICAgICAgICAgYmFja3VwVXNlckRhdGEucmVzdG9yZVVzZXIoKS50aGVuKGZ1bmN0aW9uIChpc1Jlc3RvcmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaXMgcmVzdG9yZWQnLCBpc1Jlc3RvcmVkLCBjb25zdGFudHMubG9jYWxTdG9yYWdlLmlzV2FsbGV0Q3JlYXRlKTsKCiAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNSZXN0b3JlZCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oY29uc3RhbnRzLmxvY2FsU3RvcmFnZS5pc1dhbGxldENyZWF0ZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZWRpcmVjdFRvKGxpbmtzLmhvbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZWRpcmVjdFRvKGxpbmtzLmNyZWF0ZVdhbGxldCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdwTG9hZGVyKSB3cExvYWRlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGJhY2t1cFVzZXJEYXRhLmlzVXNlckxvZ2dlZEluKCkgJiYgYmFja3VwVXNlckRhdGEuaXNGaXJzdEJhY2t1cCgpIHx8ICFoYXNTZXJ2ZXJCYWNrdXApIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEbyBiYWNrdXAgdXNlcicpOwogICAgICAgICAgICAgICAgICAgICAgYmFja3VwVXNlckRhdGEuYmFja3VwVXNlcigpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxvY2FsU3RvcmFnZS5nZXRJdGVtKGNvbnN0YW50cy5sb2NhbFN0b3JhZ2UuaXNXYWxsZXRDcmVhdGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3RUbyhsaW5rcy5jcmVhdGVXYWxsZXQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAod3BMb2FkZXIpIHdwTG9hZGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHdwTG9hZGVyKSB3cExvYWRlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgicmVhZHkiKTsKCiAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgfSkpOwoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCkpOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudERpZE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfY29tcG9uZW50RGlkTW91bnQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgY3VycmVuY2llcywgdG9rZW5MaXN0VXBkYXRlZCwgaXNXYWxsZXRDcmVhdGUsIGRiLCBhcHBJbnN0YWxsZWQ7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAvL0AKICAgICAgICAgICAgICAgIGN1cnJlbmNpZXMgPSB0aGlzLnByb3BzLmN1cnJlbmNpZXM7CiAgICAgICAgICAgICAgICB0aGlzLnByZXZlbnRNdWx0aVRhYnMoZmFsc2UpOyAvLyBAVG9EbyAtIG1heSBiZSBjYW4gYmUgZGVsZXRlZC4gVGVtcCBmaXggZm9yIG91ciBjbGllbnQsIHdoZW4gaGUgdXBkYXRlIHRva2VuIGxpc3QKCiAgICAgICAgICAgICAgICBpZiAod2luZG93Lm9yaWdpbiA9PT0gImh0dHBzOi8vd2FsbGV0LmIiICsgIml0cGxpIiArICJjaXQiICsgInkuY29tIikgewogICAgICAgICAgICAgICAgICB0b2tlbkxpc3RVcGRhdGVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3dpZGdldF90b2tlbnVwZGF0ZWQnKTsKCiAgICAgICAgICAgICAgICAgIGlmICghdG9rZW5MaXN0VXBkYXRlZCkgewogICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd3aWRnZXRfdG9rZW51cGRhdGVkJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoY29uZmlnLmVyYzIwKS5mb3JFYWNoKGZ1bmN0aW9uICh0b2tlbkNvZGUpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbkNvZGUgIT09ICJiaXRwbCIgJiYgdG9rZW5Db2RlICE9PSAidXNkdCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0hpZGUnLCB0b2tlbkNvZGUpOwogICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25zLmNvcmUubWFya0NvaW5Bc0hpZGRlbih0b2tlbkNvZGUudG9VcHBlckNhc2UoKSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpc1dhbGxldENyZWF0ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGNvbnN0YW50cy5sb2NhbFN0b3JhZ2UuaXNXYWxsZXRDcmVhdGUpOwoKICAgICAgICAgICAgICAgIGlmICghaXNXYWxsZXRDcmVhdGUpIHsKICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZyAmJiBjb25maWcuaXNXaWRnZXQgJiYgZmFsc2UpIHsKICAgICAgICAgICAgICAgICAgICBjdXJyZW5jaWVzLmZvckVhY2goZnVuY3Rpb24gKF9yZWYzKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IF9yZWYzLm5hbWU7CgogICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgIT09ICJCVEMiICYmICFjb25maWcuZXJjMjBbbmFtZS50b0xvd2VyQ2FzZSgpXSkgewogICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25zLmNvcmUubWFya0NvaW5Bc0hpZGRlbihuYW1lKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjdXJyZW5jaWVzLmZvckVhY2goZnVuY3Rpb24gKF9yZWY0KSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IF9yZWY0Lm5hbWU7CgogICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgIT09ICJCVEMiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbnMuY29yZS5tYXJrQ29pbkFzSGlkZGVuKG5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IC8vIGZpcmViYXNlLmluaXRpYWxpemUoKTsKCgogICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzVXNlckJhY2t1cCgpOwogICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzTWV0YW1hc2soKTsKICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tJZkRhc2hib2FyZE1vZGFsc0FsbG93ZWQoKTsKICAgICAgICAgICAgICAgIHdpbmRvdy5hY3Rpb25zID0gYWN0aW9uczsKCiAgICAgICAgICAgICAgICB3aW5kb3cub25lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikgey8vIGFjdGlvbnMuYW5hbHl0aWNzLmVycm9yRXZlbnQoZXJyb3IpCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIGRiID0gaW5kZXhlZERCLm9wZW4oInRlc3QiKTsKCiAgICAgICAgICAgICAgICAgIGRiLm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkYiBlcnJvcicsIGUpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZGIgZXJyb3InLCBlKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBhY3Rpb25zLnVzZXIuc2lnbigpOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVTd2FwQXBwKCk7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICBmZXRjaGluZzogdHJ1ZQogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB3aW5kb3cucHJlcmVuZGVyUmVhZHkgPSB0cnVlOwoKICAgICAgICAgICAgICAgIGFwcEluc3RhbGxlZCA9IGZ1bmN0aW9uIGFwcEluc3RhbGxlZChlKSB7CiAgICAgICAgICAgICAgICAgIGFsZXJ0KHVzZXJMYW5ndWFnZSA9PT0gJ3J1JyA/ICfQn9C+0LTQvtC20LTQuNGC0LUg0L/QvtC60LAg0L/RgNC40LvQvtC20LXQvdC40LUg0YPRgdGC0LDQvdCw0LLQu9C40LLQsNC10YLRgdGPJyA6ICdXYWl0IHdoaWxlIGFwcGxpY2F0aW9uIGlzIGluc3RhbGxpbmcnKTsKICAgICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2FwcGluc3RhbGxlZCcsIGFwcEluc3RhbGxlZCk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdhcHBpbnN0YWxsZWQnLCBhcHBJbnN0YWxsZWQpOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7CiAgICAgICAgcmV0dXJuIF9jb21wb25lbnREaWRNb3VudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gY29tcG9uZW50RGlkTW91bnQ7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJjb21wb25lbnREaWRVcGRhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHsKICAgICAgdGhpcy5jaGVja0lmRGFzaGJvYXJkTW9kYWxzQWxsb3dlZCgpOwoKICAgICAgaWYgKHByb2Nlc3MuZW52Lk1BSU5ORVQpIHsvLyBmaXJlYmFzZS5zZXRVc2VyTGFzdE9ubGluZSgpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAicmVuZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciBfdGhpcyRzdGF0ZSA9IHRoaXMuc3RhdGUsCiAgICAgICAgICBmZXRjaGluZyA9IF90aGlzJHN0YXRlLmZldGNoaW5nLAogICAgICAgICAgbXVsdGlUYWJzID0gX3RoaXMkc3RhdGUubXVsdGlUYWJzLAogICAgICAgICAgZXJyb3IgPSBfdGhpcyRzdGF0ZS5lcnJvcjsgLy9ACgogICAgICB2YXIgX3RoaXMkcHJvcHMyID0gdGhpcy5wcm9wcywKICAgICAgICAgIGNoaWxkcmVuID0gX3RoaXMkcHJvcHMyLmNoaWxkcmVuLAogICAgICAgICAgZXRoQWRkcmVzcyA9IF90aGlzJHByb3BzMi5ldGhBZGRyZXNzLAogICAgICAgICAgYnRjQWRkcmVzcyA9IF90aGlzJHByb3BzMi5idGNBZGRyZXNzLAogICAgICAgICAgZ2hvc3RBZGRyZXNzID0gX3RoaXMkcHJvcHMyLmdob3N0QWRkcmVzcywKICAgICAgICAgIG5leHRBZGRyZXNzID0gX3RoaXMkcHJvcHMyLm5leHRBZGRyZXNzLAogICAgICAgICAgdG9rZW5BZGRyZXNzID0gX3RoaXMkcHJvcHMyLnRva2VuQWRkcmVzcywKICAgICAgICAgIGhpc3RvcnkgPSBfdGhpcyRwcm9wczIuaGlzdG9yeSwKICAgICAgICAgIGRhc2hib2FyZE1vZGFsc0FsbG93ZWQgPSBfdGhpcyRwcm9wczIuZGFzaGJvYXJkTW9kYWxzQWxsb3dlZDsKICAgICAgdGhpcy5vdmVyZmxvd0hhbmRsZXIoKTsKICAgICAgdmFyIGlzRmV0Y2hpbmcgPSAhZXRoQWRkcmVzcyB8fCAhYnRjQWRkcmVzcyB8fCAhZ2hvc3RBZGRyZXNzIHx8ICFuZXh0QWRkcmVzcyB8fCAhdG9rZW5BZGRyZXNzICYmIGNvbmZpZyAmJiAhY29uZmlnLmlzV2lkZ2V0IHx8ICFmZXRjaGluZzsKICAgICAgdmFyIGlzV2lkZ2V0ID0gaGlzdG9yeS5sb2NhdGlvbi5wYXRobmFtZS5pbmNsdWRlcygiL2V4Y2hhbmdlIikgJiYgaGlzdG9yeS5sb2NhdGlvbi5oYXNoID09PSAiI3dpZGdldCI7CiAgICAgIHZhciBpc0NhbGxlZEZyb21JZnJhbWUgPSB3aW5kb3cubG9jYXRpb24gIT09IHdpbmRvdy5wYXJlbnQubG9jYXRpb247CiAgICAgIHZhciBpc1dpZGdldEJ1aWxkID0gY29uZmlnICYmIGNvbmZpZy5pc1dpZGdldDsKCiAgICAgIGlmIChpc1dpZGdldEJ1aWxkICYmIGxvY2FsU3RvcmFnZS5nZXRJdGVtKGNvbnN0YW50cy5sb2NhbFN0b3JhZ2UuZGlkV2lkZ2V0c0RhdGFTZW5kKSAhPT0gInRydWUiKSB7CiAgICAgICAgLy8gZmlyZWJhc2Uuc3VibWl0VXNlckRhdGFXaWRnZXQoInVzZXJzRGF0YSIpOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGNvbnN0YW50cy5sb2NhbFN0b3JhZ2UuZGlkV2lkZ2V0c0RhdGFTZW5kLCB0cnVlKTsKICAgICAgfQoKICAgICAgaWYgKG11bHRpVGFicykgewogICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQcmV2ZW50TXVsdGlUYWJzLCB7CiAgICAgICAgICBvblN3aXRjaFRhYjogdGhpcy5oYW5kbGVTd2l0Y2hUYWIKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKGlzRmV0Y2hpbmcpIHsKICAgICAgICAvL0AKICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTG9hZGVyLCBudWxsKTsKICAgICAgfQoKICAgICAgdmFyIGlzU2VvRGlzYWJsZWQgPSBpc1dpZGdldCB8fCBpc1dpZGdldEJ1aWxkIHx8IGlzQ2FsbGVkRnJvbUlmcmFtZTsKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEhhc2hSb3V0ZXIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiY29tcHJlc3NvciIKICAgICAgfSwgIWlzU2VvRGlzYWJsZWQgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU2VvLCB7CiAgICAgICAgbG9jYXRpb246IGhpc3RvcnkubG9jYXRpb24KICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFdyYXBwZXIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFdpZHRoQ29udGFpbmVyLCB7CiAgICAgICAgaWQ6ICJzd2FwQ29tcG9uZW50V3JhcHBlciIsCiAgICAgICAgc3R5bGVOYW1lOiAiaGVhZGVyQW5kTWFpbiIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoSGVhZGVyLCBudWxsKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoIm1haW4iLCBudWxsLCBjaGlsZHJlbikpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ29yZSwgbnVsbCksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvb3RlciwgbnVsbCksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJlcXVlc3RMb2FkZXIsIG51bGwpLCAhZGFzaGJvYXJkTW9kYWxzQWxsb3dlZCAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChNb2RhbENvbmR1Y3RvciwgewogICAgICAgIGhpc3Rvcnk6IGhpc3RvcnkKICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE5vdGlmaWNhdGlvbkNvbmR1Y3RvciwgewogICAgICAgIGhpc3Rvcnk6IGhpc3RvcnkKICAgICAgfSkpKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBBcHA7Cn0oUmVhY3QuQ29tcG9uZW50KSwgX3RlbXApKSB8fCBfY2xhc3MpIHx8IF9jbGFzcykgfHwgX2NsYXNzKSB8fCBfY2xhc3MpOwpleHBvcnQgZGVmYXVsdCB3aXRoUm91dGVyKEFwcCk7"},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/front/shared/containers/App/App.tsx"],"names":["React","withRouter","HashRouter","actions","connect","moment","constants","localStorage","CSSModules","styles","createSwapApp","Core","Header","Footer","Loader","PreventMultiTabs","RequestLoader","ModalConductor","WidthContainer","Wrapper","NotificationConductor","Seo","config","backupUserData","redirectTo","links","FormattedMessage","injectIntl","defineMessages","metamask","userLanguage","navigator","language","split","locale","metamaskNetworks","mainnet","id","defaultMessage","testnet","App","currencies","items","modals","dashboardModalsAllowed","ui","isVisible","ethAddress","btcAddress","ghostAddress","nextAddress","tokenAddress","allowMultiple","props","dashboardModalProvider","document","querySelector","allowDashboardModals","disallowDashboardModals","setState","multiTabs","preventMultiTabs","isAnyModalCalled","Object","keys","length","isDark","getItem","body","classList","remove","add","localStorageListener","prvMultiTab","reject","enter","state","fetching","error","callback","newId","Date","now","toString","appID","isSwitch","generadeId","setItem","onRejectHandle","unsubscribe","removeItem","onEnterHandle","switchId","onSwitchHangle","subscribe","intl","open","AlertModal","title","message","network","formatMessage","entry","walletTitle","web3connect","getProviderTitle","labelOk","dontClose","okButtonAutoWidth","callbackOk","disconnect","close","onInit","_checkChain","isCorrectNetwork","popupIncorrectNetwork","on","isConnected","Promise","resolve","wpLoader","getElementById","hasServerBackup","console","log","isUserLoggedIn","isUserChanged","restoreUser","then","isRestored","isWalletCreate","home","window","location","reload","createWallet","style","display","isFirstBackup","backupUser","origin","tokenListUpdated","erc20","forEach","tokenCode","core","markCoinAsHidden","toUpperCase","isWidget","name","toLowerCase","processUserBackup","processMetamask","checkIfDashboardModalsAllowed","onerror","db","indexedDB","e","user","sign","prerenderReady","appInstalled","alert","removeEventListener","addEventListener","process","env","MAINNET","children","history","overflowHandler","isFetching","pathname","includes","hash","isCalledFromIframe","parent","isWidgetBuild","didWidgetsDataSend","handleSwitchTab","isSeoDisabled","Component"],"mappings":"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","sourcesContent":["// @ts-nocheck\r\nimport React, { Fragment } from \"react\";\r\n\r\nimport { RouteComponentProps, withRouter, HashRouter } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport actions from \"redux/actions\";\r\nimport { connect } from \"redaction\";\r\nimport moment from \"moment-with-locales-es6\";\r\nimport {\r\n  constants,\r\n  localStorage,\r\n  // firebase\r\n} from \"helpers\";\r\nimport { isMobile } from \"react-device-detect\";\r\n\r\nimport CSSModules from \"react-css-modules\";\r\nimport styles from \"./App.scss\";\r\nimport \"scss/app.scss\";\r\n\r\nimport { createSwapApp } from \"instances/newSwap\";\r\nimport Core from \"containers/Core/Core\";\r\n\r\nimport Header from \"components/Header/Header\";\r\nimport Footer from \"components/Footer/Footer\";\r\nimport Loader from \"components/loaders/Loader/Loader\";\r\nimport PreventMultiTabs from \"components/PreventMultiTabs/PreventMultiTabs\";\r\nimport RequestLoader from \"components/loaders/RequestLoader/RequestLoader\";\r\nimport ModalConductor from \"components/modal/ModalConductor/ModalConductor\";\r\nimport WidthContainer from \"components/layout/WidthContainer/WidthContainer\";\r\nimport Wrapper from \"components/layout/Wrapper/Wrapper\";\r\nimport NotificationConductor from \"components/notification/NotificationConductor/NotificationConductor\";\r\nimport Seo from \"components/Seo/Seo\";\r\n\r\nimport config from \"helpers/externalConfig\"\r\n\r\nimport backupUserData from 'plugins/backupUserData'\r\nimport redirectTo from 'helpers/redirectTo'\r\nimport links from 'helpers/links'\r\n\r\nimport { FormattedMessage, injectIntl, defineMessages } from 'react-intl'\r\n\r\nimport metamask from 'helpers/metamask'\r\n\r\n\r\nconst userLanguage = (navigator.userLanguage || navigator.language || \"en-gb\").split(\"-\")[0];\r\nmoment.locale(userLanguage)\r\n\r\n\r\nconst metamaskNetworks = defineMessages({\r\n  mainnet: {\r\n    id: `MetamaskNetworkAlert_NetworkMainnet`,\r\n    defaultMessage: `Основная сеть (Mainnet)`,\r\n  },\r\n  testnet: {\r\n    id: `MetamaskNetworkAlert_NetworkTestnet`,\r\n    defaultMessage: `Тестовая сеть (Ropsten)`,\r\n  },\r\n})\r\n\r\n\r\n\r\n@injectIntl\r\n@withRouter\r\n@connect(({ currencies: { items: currencies }, modals, ui: { dashboardModalsAllowed } }) => ({\r\n  currencies,\r\n  isVisible: \"loader.isVisible\",\r\n  ethAddress: \"user.ethData.address\",\r\n  btcAddress: \"user.btcData.address\",\r\n  ghostAddress: \"user.ghostData.address\",\r\n  nextAddress: \"user.nextData.address\",\r\n  tokenAddress: \"user.tokensData.swap.address\",\r\n  modals,\r\n  dashboardModalsAllowed,\r\n}))\r\n@CSSModules(styles, { allowMultiple: true })\r\nclass App extends React.Component<RouteComponentProps<any>, any> {\r\n\r\n  prvMultiTab: any\r\n  localStorageListener: any\r\n\r\n  /*static propTypes = {\r\n    children: PropTypes.element.isRequired\r\n  };*/\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.localStorageListener = null;\r\n\r\n    this.prvMultiTab = {\r\n      reject: null,\r\n      enter: null,\r\n      switch: null\r\n    };\r\n\r\n    this.state = {\r\n      fetching: false,\r\n      multiTabs: false,\r\n      error: \"\",\r\n    }\r\n  }\r\n\r\n\r\n  generadeId(callback) {\r\n    const newId = Date.now().toString();\r\n\r\n    this.setState(\r\n      {\r\n        appID: newId\r\n      },\r\n      () => {\r\n        callback(newId);\r\n      }\r\n    );\r\n  }\r\n\r\n  preventMultiTabs(isSwitch) {\r\n    this.generadeId(newId => {\r\n      if (isSwitch) {\r\n        localStorage.setItem(constants.localStorage.switch, newId);\r\n      }\r\n\r\n      const onRejectHandle = () => {\r\n        const { appID } = this.state;\r\n        const id = localStorage.getItem(constants.localStorage.reject);\r\n\r\n        if (id && id !== appID) {\r\n          this.setState({ multiTabs: true });\r\n\r\n          localStorage.unsubscribe(this.prvMultiTab.reject);\r\n          localStorage.unsubscribe(this.prvMultiTab.enter);\r\n          localStorage.unsubscribe(this.prvMultiTab.switch);\r\n          localStorage.removeItem(constants.localStorage.reject);\r\n        }\r\n      };\r\n\r\n      const onEnterHandle = () => {\r\n        const { appID } = this.state;\r\n        const id = localStorage.getItem(constants.localStorage.enter);\r\n        const switchId = localStorage.getItem(constants.localStorage.switch);\r\n\r\n        if (switchId && switchId === id) return;\r\n\r\n        localStorage.setItem(constants.localStorage.reject, appID);\r\n      };\r\n\r\n      const onSwitchHangle = () => {\r\n        const switchId = localStorage.getItem(constants.localStorage.switch);\r\n        const { appID } = this.state;\r\n\r\n        if (appID !== switchId) {\r\n          this.setState({\r\n            multiTabs: true\r\n          });\r\n\r\n          localStorage.unsubscribe(this.prvMultiTab.reject);\r\n          localStorage.unsubscribe(this.prvMultiTab.enter);\r\n          localStorage.unsubscribe(this.prvMultiTab.switch);\r\n        }\r\n      };\r\n\r\n      this.prvMultiTab.reject = localStorage.subscribe(constants.localStorage.reject, onRejectHandle);\r\n      this.prvMultiTab.enter = localStorage.subscribe(constants.localStorage.enter, onEnterHandle);\r\n      this.prvMultiTab.switch = localStorage.subscribe(constants.localStorage.switch, onSwitchHangle);\r\n\r\n      localStorage.setItem(constants.localStorage.enter, newId);\r\n    });\r\n  }\r\n\r\n  popupIncorrectNetwork() {\r\n    //@\r\n    const { intl } = this.props\r\n\r\n    actions.modals.open(constants.modals.AlertModal, {\r\n      title: (\r\n        <FormattedMessage \r\n          id=\"MetamaskNetworkAlert_Title\"\r\n          defaultMessage=\"Внимание\"\r\n        />\r\n      ),\r\n      message: (\r\n        <FormattedMessage\r\n          id=\"MetamaskNetworkAlert_Message\"\r\n          defaultMessage=\"Для продолжения выберите в кошельке {walletTitle} &quot;{network}&quot; или отключите кошелек\"\r\n          values={{\r\n            network: intl.formatMessage(metamaskNetworks[config.entry]),\r\n            walletTitle: metamask.web3connect.getProviderTitle(),\r\n          }}\r\n        />\r\n      ),\r\n      labelOk: (\r\n        <FormattedMessage\r\n          id=\"MetamaskNetworkAlert_OkDisconnectWallet\"\r\n          defaultMessage=\"Отключить внешний кошелек\"\r\n        />\r\n      ),\r\n      dontClose: true,\r\n      okButtonAutoWidth: true,\r\n      callbackOk: () => {\r\n        metamask.disconnect()\r\n        actions.modals.close(constants.modals.AlertModal)\r\n      },\r\n    })\r\n  }\r\n\r\n  processMetamask () {\r\n    metamask.web3connect.onInit(() => {\r\n      const _checkChain = () => {\r\n        if (metamask.isCorrectNetwork()) {\r\n          actions.modals.close(constants.modals.AlertModal)\r\n        } else {\r\n          this.popupIncorrectNetwork()\r\n        }\r\n      }\r\n\r\n      metamask.web3connect.on('chainChanged', _checkChain)\r\n      metamask.web3connect.on('connected', _checkChain)\r\n\r\n      if (metamask.isConnected()\r\n        && !metamask.isCorrectNetwork()\r\n      ) {\r\n        this.popupIncorrectNetwork()\r\n      }\r\n    })\r\n  }\r\n\r\n  processUserBackup () {\r\n    new Promise(async (resolve) => {\r\n      const wpLoader = document.getElementById('wrapper_element')\r\n\r\n      const hasServerBackup = await backupUserData.hasServerBackup()\r\n      console.log('has server backup', hasServerBackup)\r\n      if (backupUserData.isUserLoggedIn()\r\n        && backupUserData.isUserChanged()\r\n        && hasServerBackup\r\n      ) {\r\n        console.log('do restore user')\r\n        backupUserData.restoreUser().then((isRestored) => {\r\n          console.log('is restored', isRestored, constants.localStorage.isWalletCreate)\r\n          if (isRestored) {\r\n            if (localStorage.getItem(constants.localStorage.isWalletCreate)) {\r\n              redirectTo(links.home)\r\n              window.location.reload()\r\n            } else {\r\n              redirectTo(links.createWallet)\r\n              if (wpLoader) wpLoader.style.display = 'none'\r\n            }\r\n          }\r\n        })\r\n      } else {\r\n        if (backupUserData.isUserLoggedIn()\r\n          && backupUserData.isFirstBackup()\r\n          || !hasServerBackup\r\n        ) {\r\n          console.log('Do backup user')\r\n          backupUserData.backupUser().then(() => {\r\n            if (!localStorage.getItem(constants.localStorage.isWalletCreate)) {\r\n              redirectTo(links.createWallet)\r\n            }\r\n            if (wpLoader) wpLoader.style.display = 'none'\r\n          })\r\n        } else {\r\n          if (wpLoader) wpLoader.style.display = 'none'\r\n        }\r\n      }\r\n      resolve(`ready`)\r\n    })\r\n  }\r\n\r\n  async componentDidMount() {\r\n    //@\r\n    const { currencies } = this.props\r\n\r\n    this.preventMultiTabs(false)\r\n\r\n    // @ToDo - may be can be deleted. Temp fix for our client, when he update token list\r\n    if (window.origin === `https://wallet.b` + `itpli` + `cit` + `y.com`) {\r\n      const tokenListUpdated = localStorage.getItem('widget_tokenupdated')\r\n      if (!tokenListUpdated) {\r\n        localStorage.setItem('widget_tokenupdated', true)\r\n        Object.keys(config.erc20).forEach((tokenCode) => {\r\n          if ((tokenCode !== `bitpl`)\r\n            && (tokenCode !== `usdt`)\r\n          ) {\r\n            console.log('Hide', tokenCode)\r\n            actions.core.markCoinAsHidden(tokenCode.toUpperCase())\r\n          }\r\n        })\r\n      }\r\n    }\r\n\r\n    const isWalletCreate = localStorage.getItem(constants.localStorage.isWalletCreate)\r\n\r\n    if (!isWalletCreate) {\r\n      if (config && config.isWidget && false) {\r\n        currencies.forEach(({ name }) => {\r\n          if (name !== \"BTC\" && !config.erc20[name.toLowerCase()]) {\r\n            actions.core.markCoinAsHidden(name)\r\n          }\r\n        })\r\n      } else {\r\n        currencies.forEach(({ name }) => {\r\n          if (name !== \"BTC\") {\r\n            actions.core.markCoinAsHidden(name)\r\n          }\r\n        })\r\n      }\r\n    }\r\n\r\n    // firebase.initialize();\r\n\r\n    this.processUserBackup()\r\n    this.processMetamask()\r\n\r\n    this.checkIfDashboardModalsAllowed()\r\n    window.actions = actions;\r\n\r\n    window.onerror = error => {\r\n      // actions.analytics.errorEvent(error)\r\n    };\r\n\r\n    try {\r\n      const db = indexedDB.open(\"test\");\r\n      db.onerror = (e) => {\r\n        console.log('db error', e)\r\n      };\r\n    } catch (e) {\r\n      console.log('db error', e)\r\n    }\r\n\r\n    actions.user.sign();\r\n    await createSwapApp();\r\n\r\n    this.setState(() => ({ fetching: true }));\r\n    window.prerenderReady = true;\r\n\r\n    const appInstalled = (e) => {\r\n      alert(\r\n        userLanguage === 'ru'\r\n          ? 'Подождите пока приложение устанавливается'\r\n          : 'Wait while application is installing'\r\n      )\r\n      window.removeEventListener('appinstalled', appInstalled)\r\n    }\r\n    window.addEventListener('appinstalled', appInstalled)\r\n\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.checkIfDashboardModalsAllowed()\r\n    if (process.env.MAINNET) {\r\n      // firebase.setUserLastOnline();\r\n    }\r\n  }\r\n\r\n  checkIfDashboardModalsAllowed = () => {\r\n    const dashboardModalProvider = document.querySelector('.__modalConductorProvided__')\r\n    //@\r\n    if (dashboardModalProvider && !this.props.dashboardModalsAllowed) {\r\n      return actions.ui.allowDashboardModals()\r\n    //@\r\n    } else if (dashboardModalProvider && this.props.dashboardModalsAllowed) {\r\n      return null\r\n    }\r\n    return actions.ui.disallowDashboardModals()\r\n  }\r\n\r\n  handleSwitchTab = () => {\r\n    this.setState({\r\n      multiTabs: false\r\n    });\r\n    this.preventMultiTabs(true);\r\n  };\r\n\r\n  overflowHandler = () => {\r\n    //@\r\n    const { modals, dashboardModalsAllowed } = this.props;\r\n    const isAnyModalCalled = Object.keys(modals).length > 0\r\n\r\n    const isDark = localStorage.getItem(constants.localStorage.isDark)\r\n\r\n    if (typeof document !== 'undefined' && isAnyModalCalled && !dashboardModalsAllowed) {\r\n      document.body.classList.remove('overflowY-default')\r\n      document.body.classList.add('overflowY-hidden')\r\n    } else {\r\n      document.body.classList.remove('overflowY-hidden')\r\n      document.body.classList.add('overflowY-default')\r\n    }\r\n    if (typeof document !== 'undefined' && isAnyModalCalled && dashboardModalsAllowed) {\r\n      document.body.classList.remove('overflowY-dashboardView-default')\r\n      document.body.classList.add('overflowY-dashboardView-hidden')\r\n    } else {\r\n      document.body.classList.remove('overflowY-dashboardView-hidden')\r\n      document.body.classList.add('overflowY-dashboardView-default')\r\n    }\r\n\r\n    if (isDark) {\r\n      document.body.classList.add('darkTheme')\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { fetching, multiTabs, error } = this.state;\r\n    //@\r\n    const { children, ethAddress, btcAddress, ghostAddress, nextAddress, tokenAddress, history, dashboardModalsAllowed } = this.props;\r\n\r\n    this.overflowHandler()\r\n\r\n    const isFetching = !ethAddress || !btcAddress || !ghostAddress || !nextAddress || (!tokenAddress && config && !config.isWidget) || !fetching;\r\n\r\n    const isWidget = history.location.pathname.includes(\"/exchange\") && history.location.hash === \"#widget\";\r\n    const isCalledFromIframe = window.location !== window.parent.location;\r\n    const isWidgetBuild = config && config.isWidget;\r\n\r\n    if (isWidgetBuild && localStorage.getItem(constants.localStorage.didWidgetsDataSend) !== \"true\") {\r\n      // firebase.submitUserDataWidget(\"usersData\");\r\n      localStorage.setItem(constants.localStorage.didWidgetsDataSend, true);\r\n    }\r\n\r\n    if (multiTabs) {\r\n      return <PreventMultiTabs onSwitchTab={this.handleSwitchTab} />\r\n    }\r\n\r\n    if (isFetching) {\r\n      //@\r\n      return <Loader />\r\n    }\r\n\r\n    const isSeoDisabled = isWidget || isWidgetBuild || isCalledFromIframe\r\n\r\n    return <HashRouter>\r\n      <div styleName=\"compressor\">\r\n        {!isSeoDisabled &&\r\n          <Seo location={history.location} />\r\n        }\r\n        <Wrapper>\r\n          {/*\r\n          //@ */}\r\n          <WidthContainer id=\"swapComponentWrapper\" styleName=\"headerAndMain\">\r\n            <Header />\r\n            <main>{children}</main>\r\n          </WidthContainer>\r\n        </Wrapper>\r\n        <Core />\r\n        <Footer />\r\n        <RequestLoader />\r\n        {!dashboardModalsAllowed &&\r\n          <ModalConductor history={history}\r\n        />}\r\n        <NotificationConductor history={history} />\r\n      </div>\r\n    </HashRouter>;\r\n  }\r\n}\r\n\r\nexport default withRouter(App)\r\n"]}]}