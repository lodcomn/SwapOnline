{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\pages\\CreateWallet\\CreateWallet.tsx","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\pages\\CreateWallet\\CreateWallet.tsx","mtime":1614852258397},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvc2xpY2VkVG9BcnJheSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICJAYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvciI7Ci8vIEB0cy1ub2NoZWNrCmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnOwppbXBvcnQgY29uZmlnIGZyb20gJ2FwcC1jb25maWcnOwppbXBvcnQgQ1NTTW9kdWxlcyBmcm9tICdyZWFjdC1jc3MtbW9kdWxlcyc7CmltcG9ydCBzdHlsZXMgZnJvbSAnLi9DcmVhdGVXYWxsZXQuc2Nzcyc7CmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWRhY3Rpb24nOwppbXBvcnQgYWN0aW9ucyBmcm9tICdyZWR1eC9hY3Rpb25zJzsKaW1wb3J0IHsgRm9ybWF0dGVkTWVzc2FnZSwgdXNlSW50bCB9IGZyb20gJ3JlYWN0LWludGwnOwppbXBvcnQgeyB3aXRoUm91dGVyIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7CmltcG9ydCB7IGlzTW9iaWxlIH0gZnJvbSAncmVhY3QtZGV2aWNlLWRldGVjdCc7CmltcG9ydCByZWR1Y2VycyBmcm9tICdyZWR1eC9jb3JlL3JlZHVjZXJzJzsKaW1wb3J0IGxpbmtzIGZyb20gJ2hlbHBlcnMvbGlua3MnOwppbXBvcnQgbWV0YW1hc2sgZnJvbSAnaGVscGVycy9tZXRhbWFzayc7CmltcG9ydCB7IGxvY2FsaXNlZFVybCB9IGZyb20gJ2hlbHBlcnMvbG9jYWxlJzsKaW1wb3J0IFN0ZXBzV3JhcHBlciBmcm9tICcuL1N0ZXBzL1N0ZXBzV3JhcHBlcic7CmltcG9ydCBUb29sdGlwIGZyb20gJ2NvbXBvbmVudHMvdWkvVG9vbHRpcC9Ub29sdGlwJzsKaW1wb3J0IHsgY29uc3RhbnRzLCBsb2NhbFN0b3JhZ2UgfSBmcm9tICdoZWxwZXJzJzsKaW1wb3J0IENsb3NlSWNvbiBmcm9tICdjb21wb25lbnRzL3VpL0Nsb3NlSWNvbi9DbG9zZUljb24nOwppbXBvcnQgd2ViM0ljb25zIGZyb20gJy4uLy4uL2ltYWdlcyc7CnZhciBpc1dpZGdldEJ1aWxkID0gY29uZmlnICYmIGNvbmZpZy5pc1dpZGdldDsKdmFyIGlzRGFyayA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGNvbnN0YW50cy5sb2NhbFN0b3JhZ2UuaXNEYXJrKTsKCnZhciBDcmVhdGVXYWxsZXQgPSBmdW5jdGlvbiBDcmVhdGVXYWxsZXQocHJvcHMpIHsKICB2YXIgaGlzdG9yeSA9IHByb3BzLmhpc3RvcnksCiAgICAgIF9wcm9wcyRjcmVhdGVXYWxsZXQgPSBwcm9wcy5jcmVhdGVXYWxsZXQsCiAgICAgIGN1cnJlbmNpZXMgPSBfcHJvcHMkY3JlYXRlV2FsbGV0LmN1cnJlbmNpZXMsCiAgICAgIHNlY3VyZSA9IF9wcm9wcyRjcmVhdGVXYWxsZXQuc2VjdXJlLAogICAgICBwYXRobmFtZSA9IHByb3BzLmxvY2F0aW9uLnBhdGhuYW1lLAogICAgICB1c2VyRGF0YSA9IHByb3BzLnVzZXJEYXRhLAogICAgICBoaWRkZW5Db2luc0xpc3QgPSBwcm9wcy5jb3JlLmhpZGRlbkNvaW5zTGlzdCwKICAgICAgYWN0aXZlRmlhdCA9IHByb3BzLmFjdGl2ZUZpYXQ7CgogIHZhciBfdXNlSW50bCA9IHVzZUludGwoKSwKICAgICAgbG9jYWxlID0gX3VzZUludGwubG9jYWxlOwoKICB2YXIgYWxsQ3VycmVuY2llcyA9IHByb3BzLmN1cnJlbmNpZXMuaXRlbXM7CiAgdmFyIGV0aERhdGEgPSB1c2VyRGF0YS5ldGhEYXRhLAogICAgICBidGNEYXRhID0gdXNlckRhdGEuYnRjRGF0YSwKICAgICAgZ2hvc3REYXRhID0gdXNlckRhdGEuZ2hvc3REYXRhLAogICAgICBuZXh0RGF0YSA9IHVzZXJEYXRhLm5leHREYXRhLAogICAgICBidGNNdWx0aXNpZ1NNU0RhdGEgPSB1c2VyRGF0YS5idGNNdWx0aXNpZ1NNU0RhdGEsCiAgICAgIGJ0Y011bHRpc2lnVXNlckRhdGEgPSB1c2VyRGF0YS5idGNNdWx0aXNpZ1VzZXJEYXRhOwogIHZhciB1c2VyV2FsbGV0cyA9IGFjdGlvbnMuY29yZS5nZXRXYWxsZXRzKHt9KS5maWx0ZXIoZnVuY3Rpb24gKF9yZWYpIHsKICAgIHZhciBjdXJyZW5jeSA9IF9yZWYuY3VycmVuY3k7CiAgICByZXR1cm4gIWhpZGRlbkNvaW5zTGlzdC5pbmNsdWRlcyhjdXJyZW5jeSk7CiAgfSk7CiAgdmFyIGN1cnJlbmN5QmFsYW5jZSA9IFtidGNEYXRhLCBidGNNdWx0aXNpZ1NNU0RhdGEsIGJ0Y011bHRpc2lnVXNlckRhdGEsIGV0aERhdGEsIGdob3N0RGF0YSwgbmV4dERhdGFdLm1hcChmdW5jdGlvbiAoX3JlZjIpIHsKICAgIHZhciBiYWxhbmNlID0gX3JlZjIuYmFsYW5jZSwKICAgICAgICBjdXJyZW5jeSA9IF9yZWYyLmN1cnJlbmN5LAogICAgICAgIGluZm9BYm91dEN1cnJlbmN5ID0gX3JlZjIuaW5mb0Fib3V0Q3VycmVuY3k7CiAgICByZXR1cm4gewogICAgICBiYWxhbmNlOiBiYWxhbmNlLAogICAgICBpbmZvQWJvdXRDdXJyZW5jeTogaW5mb0Fib3V0Q3VycmVuY3ksCiAgICAgIG5hbWU6IGN1cnJlbmN5CiAgICB9OwogIH0pOwogIHZhciBidGNCYWxhbmNlID0gMDsKICB2YXIgZmlhdEJhbGFuY2UgPSAwOwogIHZhciB3aWRnZXRDdXJyZW5jaWVzID0gWydCVEMnLCAnQlRDIChTTVMtUHJvdGVjdGVkKScsICdCVEMgKFBJTi1Qcm90ZWN0ZWQpJywgJ0JUQyAoTXVsdGlzaWcpJywgJ0VUSCcsICdHSE9TVCcsICdORVhUJ107CgogIGlmIChpc1dpZGdldEJ1aWxkKSB7CiAgICBpZiAod2luZG93LndpZGdldEVSQzIwVG9rZW5zICYmIE9iamVjdC5rZXlzKHdpbmRvdy53aWRnZXRFUkMyMFRva2VucykubGVuZ3RoKSB7CiAgICAgIC8vIE11bHRpIHRva2VuIHdpZGdldCBidWlsZAogICAgICBPYmplY3Qua2V5cyh3aW5kb3cud2lkZ2V0RVJDMjBUb2tlbnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIHdpZGdldEN1cnJlbmNpZXMucHVzaChrZXkudG9VcHBlckNhc2UoKSk7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgd2lkZ2V0Q3VycmVuY2llcy5wdXNoKGNvbmZpZy5lcmMyMHRva2VuLnRvVXBwZXJDYXNlKCkpOwogICAgfQogIH0KCiAgaWYgKGN1cnJlbmN5QmFsYW5jZSkgewogICAgY3VycmVuY3lCYWxhbmNlLmZvckVhY2goIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmMyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoaXRlbSkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoKCFpc1dpZGdldEJ1aWxkIHx8IHdpZGdldEN1cnJlbmNpZXMuaW5jbHVkZXMoaXRlbS5uYW1lKSkgJiYgaXRlbS5pbmZvQWJvdXRDdXJyZW5jeSAmJiBpdGVtLmJhbGFuY2UgIT09IDApIHsKICAgICAgICAgICAgICAgICAgYnRjQmFsYW5jZSArPSBpdGVtLmJhbGFuY2UgKiBpdGVtLmluZm9BYm91dEN1cnJlbmN5LnByaWNlX2J0YzsKICAgICAgICAgICAgICAgICAgZmlhdEJhbGFuY2UgKz0gaXRlbS5iYWxhbmNlICogKGl0ZW0uaW5mb0Fib3V0Q3VycmVuY3kucHJpY2VfZmlhdCA/IGl0ZW0uaW5mb0Fib3V0Q3VycmVuY3kucHJpY2VfZmlhdCA6IDEpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgIHJldHVybiBfcmVmMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpKTsKICB9CgogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICB2YXIgZm9yY2VkQ3VycmVuY3kgPSBwYXRobmFtZS5zcGxpdCgnLycpWzJdOwoKICAgIGlmIChmb3JjZWRDdXJyZW5jeSkgewogICAgICB2YXIgaGlkZGVuTGlzdCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdoaWRkZW5Db2luc0xpc3QnKTsKCiAgICAgIHZhciBfaXNFeGlzdCA9IGhpZGRlbkxpc3QuZmluZChmdW5jdGlvbiAoZWwpIHsKICAgICAgICBpZiAoZWwuaW5jbHVkZXMoJzonKSkgewogICAgICAgICAgcmV0dXJuIGVsLmluY2x1ZGVzKGZvcmNlZEN1cnJlbmN5LnRvVXBwZXJDYXNlKCkpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGVsID09PSBmb3JjZWRDdXJyZW5jeS50b1VwcGVyQ2FzZSgpOwogICAgICB9KTsKCiAgICAgIGlmICghX2lzRXhpc3QpIHsKICAgICAgICBzZXRFeGlzdCh0cnVlKTsKICAgICAgfQoKICAgICAgaWYgKGZvcmNlZEN1cnJlbmN5LnRvVXBwZXJDYXNlKCkgPT09ICdTV0FQJykgewogICAgICAgIC8vIFNXQVAgaGFzIG5vIHNlY3VyaXR5IG9wdGlvbnMKICAgICAgICAvLyBqdXN0IGFkZCBhbmQgcmVkaXJlY3QKICAgICAgICB2YXIgaXNXYXNPbldhbGxldCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdoaWRkZW5Db2luc0xpc3QnKS5maW5kKGZ1bmN0aW9uIChjdXIpIHsKICAgICAgICAgIHJldHVybiBjdXIuaW5jbHVkZXMoZm9yY2VkQ3VycmVuY3kpOwogICAgICAgIH0pOwogICAgICAgIGFjdGlvbnMuY29yZS5tYXJrQ29pbkFzVmlzaWJsZShpc1dhc09uV2FsbGV0IHx8IGZvcmNlZEN1cnJlbmN5LnRvVXBwZXJDYXNlKCksIHRydWUpOwogICAgICAgIGhhbmRsZUNsaWNrKCk7CiAgICAgIH0KICAgIH0KICB9LCBbcGF0aG5hbWVdKTsKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgdmFyIHdpZGdldEN1cnJlbmNpZXMgPSBbJ0JUQycsICdCVEMgKFNNUy1Qcm90ZWN0ZWQpJywgJ0JUQyAoUElOLVByb3RlY3RlZCknLCAnQlRDIChNdWx0aXNpZyknLCAnRVRIJywgJ0dIT1NUJywgJ05FWFQnXTsKCiAgICBpZiAoaXNXaWRnZXRCdWlsZCkgewogICAgICBpZiAod2luZG93LndpZGdldEVSQzIwVG9rZW5zICYmIE9iamVjdC5rZXlzKHdpbmRvdy53aWRnZXRFUkMyMFRva2VucykubGVuZ3RoKSB7CiAgICAgICAgLy8gTXVsdGkgdG9rZW4gd2lkZ2V0IGJ1aWxkCiAgICAgICAgT2JqZWN0LmtleXMod2luZG93LndpZGdldEVSQzIwVG9rZW5zKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICAgIHdpZGdldEN1cnJlbmNpZXMucHVzaChrZXkudG9VcHBlckNhc2UoKSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgd2lkZ2V0Q3VycmVuY2llcy5wdXNoKGNvbmZpZy5lcmMyMHRva2VuLnRvVXBwZXJDYXNlKCkpOwogICAgICB9CiAgICB9CgogICAgaWYgKGN1cnJlbmN5QmFsYW5jZSkgewogICAgICBjdXJyZW5jeUJhbGFuY2UuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGlmICgoIWlzV2lkZ2V0QnVpbGQgfHwgd2lkZ2V0Q3VycmVuY2llcy5pbmNsdWRlcyhpdGVtLm5hbWUpKSAmJiBpdGVtLmluZm9BYm91dEN1cnJlbmN5ICYmIGl0ZW0uYmFsYW5jZSAhPT0gMCkgewogICAgICAgICAgYnRjQmFsYW5jZSArPSBpdGVtLmJhbGFuY2UgKiBpdGVtLmluZm9BYm91dEN1cnJlbmN5LnByaWNlX2J0YzsKICAgICAgICAgIGZpYXRCYWxhbmNlICs9IGl0ZW0uYmFsYW5jZSAqIChpdGVtLmluZm9BYm91dEN1cnJlbmN5LnByaWNlX2ZpYXQgPyBpdGVtLmluZm9BYm91dEN1cnJlbmN5LnByaWNlX2ZpYXQgOiAxKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIFtdKTsKCiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKDEpLAogICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSwKICAgICAgc3RlcCA9IF91c2VTdGF0ZTJbMF0sCiAgICAgIHNldFN0ZXAgPSBfdXNlU3RhdGUyWzFdOwoKICB2YXIgX3VzZVN0YXRlMyA9IHVzZVN0YXRlKCdDaG9vc2Ugc29tZXRoaW5nJyksCiAgICAgIF91c2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUzLCAyKSwKICAgICAgZXJyb3IgPSBfdXNlU3RhdGU0WzBdLAogICAgICBzZXRFcnJvciA9IF91c2VTdGF0ZTRbMV07CgogIHZhciBfdXNlU3RhdGU1ID0gdXNlU3RhdGUoZmFsc2UpLAogICAgICBfdXNlU3RhdGU2ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlNSwgMiksCiAgICAgIGlzRXhpc3QgPSBfdXNlU3RhdGU2WzBdLAogICAgICBzZXRFeGlzdCA9IF91c2VTdGF0ZTZbMV07CgogIHZhciBnb0hvbWUgPSBmdW5jdGlvbiBnb0hvbWUoKSB7CiAgICBoaXN0b3J5LnB1c2gobG9jYWxpc2VkVXJsKGxvY2FsZSwgbGlua3MuaG9tZSkpOwogIH07CgogIHZhciBoYW5kbGVDb25uZWN0V2FsbGV0ID0gZnVuY3Rpb24gaGFuZGxlQ29ubmVjdFdhbGxldCgpIHsKICAgIGhpc3RvcnkucHVzaChsb2NhbGlzZWRVcmwobG9jYWxlLCBsaW5rcy5jb25uZWN0V2FsbGV0KSk7CiAgfTsKCiAgdmFyIGhhbmRsZUNsaWNrID0gZnVuY3Rpb24gaGFuZGxlQ2xpY2soKSB7CiAgICBzZXRFcnJvcihudWxsKTsKCiAgICBpZiAoc3RlcCAhPT0gMiAmJiAhZm9yY2VkQ3VycmVuY3lEYXRhKSB7CiAgICAgIHJlZHVjZXJzLmNyZWF0ZVdhbGxldC5uZXdXYWxsZXREYXRhKHsKICAgICAgICB0eXBlOiAnc3RlcCcsCiAgICAgICAgZGF0YTogc3RlcCArIDEKICAgICAgfSk7CiAgICAgIHJldHVybiBzZXRTdGVwKHN0ZXAgKyAxKTsKICAgIH0KCiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShjb25zdGFudHMubG9jYWxTdG9yYWdlLmlzV2FsbGV0Q3JlYXRlLCB0cnVlKTsKICAgIGdvSG9tZSgpOwogIH07CgogIHZhciBoYW5kbGVSZXN0b3JlTW5lbW9uaWMgPSBmdW5jdGlvbiBoYW5kbGVSZXN0b3JlTW5lbW9uaWMoKSB7CiAgICBhY3Rpb25zLm1vZGFscy5vcGVuKGNvbnN0YW50cy5tb2RhbHMuUmVzdG9yeU1uZW1vbmljV2FsbGV0LCB7CiAgICAgIGJ0Y0JhbGFuY2U6IGJ0Y0JhbGFuY2UsCiAgICAgIGZpYXRCYWxhbmNlOiBmaWF0QmFsYW5jZQogICAgfSk7CiAgfTsKCiAgdmFyIHZhbGlkYXRlID0gZnVuY3Rpb24gdmFsaWRhdGUoKSB7CiAgICBzZXRFcnJvcihudWxsKTsKCiAgICBpZiAoIU9iamVjdC52YWx1ZXMoY3VycmVuY2llcykuaW5jbHVkZXModHJ1ZSkgJiYgc3RlcCA9PT0gMSkgewogICAgICBzZXRFcnJvcignQ2hvb3NlIHNvbWV0aGluZycpOwogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIGlzSWdub3JlU2Vjb25kU3RlcCA9ICFPYmplY3Qua2V5cyhjdXJyZW5jaWVzKS5pbmNsdWRlcygnQlRDJyk7IC8vIFsnRVRIJywgJ1NXQVAnLCAnRVVSUycsICdDdXN0b20gRVJDMjAnXS5maW5kKGVsID0+IE9iamVjdC5rZXlzKGN1cnJlbmNpZXMpLmluY2x1ZGVzKGVsKSkKCiAgICBpZiAoaXNJZ25vcmVTZWNvbmRTdGVwICYmICFjdXJyZW5jaWVzWydDdXN0b20gRVJDMjAnXSkgewogICAgICBPYmplY3Qua2V5cyhjdXJyZW5jaWVzKS5mb3JFYWNoKGZ1bmN0aW9uIChjdXJyZW5jeSkgewogICAgICAgIGlmIChjdXJyZW5jaWVzW2N1cnJlbmN5XSkgewogICAgICAgICAgYWN0aW9ucy5jb3JlLm1hcmtDb2luQXNWaXNpYmxlKGN1cnJlbmN5LnRvVXBwZXJDYXNlKCksIHRydWUpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGNvbnN0YW50cy5sb2NhbFN0b3JhZ2UuaXNXYWxsZXRDcmVhdGUsIHRydWUpOwogICAgICBnb0hvbWUoKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlmICghc2VjdXJlLmxlbmd0aCAmJiAoc3RlcCA9PT0gMiB8fCBmb3JjZWRDdXJyZW5jeURhdGEpKSB7CiAgICAgIHNldEVycm9yKCdDaG9vc2Ugc29tZXRoaW5nJyk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAoY3VycmVuY2llc1snQ3VzdG9tIEVSQzIwJ10pIHsKICAgICAgZ29Ib21lKCk7CiAgICAgIGFjdGlvbnMubW9kYWxzLm9wZW4oY29uc3RhbnRzLm1vZGFscy5BZGRDdXN0b21FUkMyMCk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAoc3RlcCA9PT0gMiB8fCBmb3JjZWRDdXJyZW5jeURhdGEpIHsKICAgICAgc3dpdGNoIChzZWN1cmUpIHsKICAgICAgICBjYXNlICd3aXRob3V0U2VjdXJlJzoKICAgICAgICAgIE9iamVjdC5rZXlzKGN1cnJlbmNpZXMpLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICAgIGlmIChjdXJyZW5jaWVzW2VsXSkgewogICAgICAgICAgICAgIHZhciBpc1dhc09uV2FsbGV0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2hpZGRlbkNvaW5zTGlzdCcpLmZpbmQoZnVuY3Rpb24gKGN1cikgewogICAgICAgICAgICAgICAgcmV0dXJuIGN1ci5pbmNsdWRlcygiIi5jb25jYXQoZWwsICI6IikpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGFjdGlvbnMuY29yZS5tYXJrQ29pbkFzVmlzaWJsZShpc1dhc09uV2FsbGV0IHx8IGVsLnRvVXBwZXJDYXNlKCksIHRydWUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICdzbXMnOgogICAgICAgICAgaWYgKGN1cnJlbmNpZXMuQlRDKSB7CiAgICAgICAgICAgIGlmICghYWN0aW9ucy5idGNtdWx0aXNpZy5jaGVja1NNU0FjdGl2YXRlZCgpKSB7CiAgICAgICAgICAgICAgYWN0aW9ucy5tb2RhbHMub3Blbihjb25zdGFudHMubW9kYWxzLlJlZ2lzdGVyU01TUHJvdGVjdGVkLCB7CiAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gY2FsbGJhY2soKSB7CiAgICAgICAgICAgICAgICAgIGFjdGlvbnMuY29yZS5tYXJrQ29pbkFzVmlzaWJsZSgnQlRDIChTTVMtUHJvdGVjdGVkKScsIHRydWUpOwogICAgICAgICAgICAgICAgICBoYW5kbGVDbGljaygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYWN0aW9ucy5tb2RhbHMub3Blbihjb25zdGFudHMubW9kYWxzLkNvbmZpcm0sIHsKICAgICAgICAgICAgICB0aXRsZTogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICAgICAgaWQ6ICJDb25maXJtQWN0aXZhdGVTTVNfVGl0bGUiLAogICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MTRcdTA0M0VcdTA0MzFcdTA0MzBcdTA0MzJcdTA0M0JcdTA0MzVcdTA0M0RcdTA0MzhcdTA0MzUgXHUwNDNBXHUwNDNFXHUwNDQ4XHUwNDM1XHUwNDNCXHUwNDRDXHUwNDNBXHUwNDMwIEJUQyAoU01TLVByb3RlY3RlZCkiCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgbWVzc2FnZTogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICAgICAgaWQ6ICJDb25maXJtQWN0aXZhdGVTTVNfTWVzc2FnZSIsCiAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQyMyBcdTA0MzJcdTA0MzBcdTA0NDEgXHUwNDQzXHUwNDM2XHUwNDM1IFx1MDQzMFx1MDQzQVx1MDQ0Mlx1MDQzOFx1MDQzMlx1MDQzOFx1MDQ0MFx1MDQzRVx1MDQzMlx1MDQzMFx1MDQzRCBcdTA0NERcdTA0NDJcdTA0M0VcdTA0NDIgXHUwNDQyXHUwNDM4XHUwNDNGIFx1MDQzQVx1MDQzRVx1MDQ0OFx1MDQzNVx1MDQzQlx1MDQ0Q1x1MDQzQVx1MDQzMC4gXHUwNDI1XHUwNDNFXHUwNDQyXHUwNDM4XHUwNDQyXHUwNDM1IFx1MDQzMFx1MDQzQVx1MDQ0Mlx1MDQzOFx1MDQzMlx1MDQzOFx1MDQ0MFx1MDQzRVx1MDQzMlx1MDQzMFx1MDQ0Mlx1MDQ0QyBcdTA0MzRcdTA0NDBcdTA0NDNcdTA0MzNcdTA0M0VcdTA0MzkgXHUwNDNBXHUwNDNFXHUwNDQ4XHUwNDM1XHUwNDNCXHUwNDM1XHUwNDNBPyIKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICBsYWJlbFllczogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICAgICAgaWQ6ICJDb25maXJtQWN0aXZhdGVTTVNfWWVzIiwKICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDE0XHUwNDMwIgogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIGxhYmVsTm86IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgICAgIGlkOiAiQ29uZmlybUFjdGl2YXRlU01TX05vIiwKICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDFEXHUwNDM1XHUwNDQyIgogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIG9uQWNjZXB0OiBmdW5jdGlvbiBvbkFjY2VwdCgpIHsKICAgICAgICAgICAgICAgIGFjdGlvbnMubW9kYWxzLm9wZW4oY29uc3RhbnRzLm1vZGFscy5SZWdpc3RlclNNU1Byb3RlY3RlZCwgewogICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gY2FsbGJhY2soKSB7CiAgICAgICAgICAgICAgICAgICAgYWN0aW9ucy5jb3JlLm1hcmtDb2luQXNWaXNpYmxlKCdCVEMgKFNNUy1Qcm90ZWN0ZWQpJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgaGFuZGxlQ2xpY2soKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBvbkNhbmNlbDogZnVuY3Rpb24gb25DYW5jZWwoKSB7CiAgICAgICAgICAgICAgICBhY3Rpb25zLmNvcmUubWFya0NvaW5Bc1Zpc2libGUoJ0JUQyAoU01TLVByb3RlY3RlZCknLCB0cnVlKTsKICAgICAgICAgICAgICAgIGhhbmRsZUNsaWNrKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICdwaW4nOgogICAgICAgICAgaWYgKGN1cnJlbmNpZXMuQlRDKSB7CiAgICAgICAgICAgIGlmICghYWN0aW9ucy5idGNtdWx0aXNpZy5jaGVja1BJTkFjdGl2YXRlZCgpKSB7CiAgICAgICAgICAgICAgYWN0aW9ucy5tb2RhbHMub3Blbihjb25zdGFudHMubW9kYWxzLlJlZ2lzdGVyUElOUHJvdGVjdGVkLCB7CiAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gY2FsbGJhY2soKSB7CiAgICAgICAgICAgICAgICAgIGFjdGlvbnMuY29yZS5tYXJrQ29pbkFzVmlzaWJsZSgnQlRDIChQSU4tUHJvdGVjdGVkKScsIHRydWUpOwogICAgICAgICAgICAgICAgICBoYW5kbGVDbGljaygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYWN0aW9ucy5tb2RhbHMub3Blbihjb25zdGFudHMubW9kYWxzLkNvbmZpcm0sIHsKICAgICAgICAgICAgICB0aXRsZTogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICAgICAgaWQ6ICJDb25maXJtQWN0aXZhdGVQSU5fVGl0bGUiLAogICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MTRcdTA0M0VcdTA0MzFcdTA0MzBcdTA0MzJcdTA0M0JcdTA0MzVcdTA0M0RcdTA0MzhcdTA0MzUgXHUwNDNBXHUwNDNFXHUwNDQ4XHUwNDM1XHUwNDNCXHUwNDRDXHUwNDNBXHUwNDMwIEJUQyAoUElOLVByb3RlY3RlZCkiCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgbWVzc2FnZTogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICAgICAgaWQ6ICJDb25maXJtQWN0aXZhdGVQSU5fTWVzc2FnZSIsCiAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQyMyBcdTA0MzJcdTA0MzBcdTA0NDEgXHUwNDQzXHUwNDM2XHUwNDM1IFx1MDQzMFx1MDQzQVx1MDQ0Mlx1MDQzOFx1MDQzMlx1MDQzOFx1MDQ0MFx1MDQzRVx1MDQzMlx1MDQzMFx1MDQzRCBcdTA0NERcdTA0NDJcdTA0M0VcdTA0NDIgXHUwNDQyXHUwNDM4XHUwNDNGIFx1MDQzQVx1MDQzRVx1MDQ0OFx1MDQzNVx1MDQzQlx1MDQ0Q1x1MDQzQVx1MDQzMC4gXHUwNDI1XHUwNDNFXHUwNDQyXHUwNDM4XHUwNDQyXHUwNDM1IFx1MDQzMFx1MDQzQVx1MDQ0Mlx1MDQzOFx1MDQzMlx1MDQzOFx1MDQ0MFx1MDQzRVx1MDQzMlx1MDQzMFx1MDQ0Mlx1MDQ0QyBcdTA0MzRcdTA0NDBcdTA0NDNcdTA0MzNcdTA0M0VcdTA0MzkgXHUwNDNBXHUwNDNFXHUwNDQ4XHUwNDM1XHUwNDNCXHUwNDM1XHUwNDNBPyIKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICBsYWJlbFllczogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICAgICAgaWQ6ICJDb25maXJtQWN0aXZhdGVQSU5fWWVzIiwKICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDE0XHUwNDMwIgogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIGxhYmVsTm86IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgICAgIGlkOiAiQ29uZmlybUFjdGl2YXRlUElOX05vIiwKICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDFEXHUwNDM1XHUwNDQyIgogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIG9uQWNjZXB0OiBmdW5jdGlvbiBvbkFjY2VwdCgpIHsKICAgICAgICAgICAgICAgIGFjdGlvbnMubW9kYWxzLm9wZW4oY29uc3RhbnRzLm1vZGFscy5SZWdpc3RlclBJTlByb3RlY3RlZCwgewogICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gY2FsbGJhY2soKSB7CiAgICAgICAgICAgICAgICAgICAgYWN0aW9ucy5jb3JlLm1hcmtDb2luQXNWaXNpYmxlKCdCVEMgKFBJTi1Qcm90ZWN0ZWQpJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgaGFuZGxlQ2xpY2soKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBvbkNhbmNlbDogZnVuY3Rpb24gb25DYW5jZWwoKSB7CiAgICAgICAgICAgICAgICBhY3Rpb25zLmNvcmUubWFya0NvaW5Bc1Zpc2libGUoJ0JUQyAoUElOLVByb3RlY3RlZCknLCB0cnVlKTsKICAgICAgICAgICAgICAgIGhhbmRsZUNsaWNrKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICdtdWx0aXNpZ25hdHVyZSc6CiAgICAgICAgICBpZiAoY3VycmVuY2llcy5CVEMpIHsKICAgICAgICAgICAgYWN0aW9ucy5tb2RhbHMub3Blbihjb25zdGFudHMubW9kYWxzLk11bHRpc2lnbkpvaW5MaW5rLCB7CiAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIGNhbGxiYWNrKCkgewogICAgICAgICAgICAgICAgYWN0aW9ucy5jb3JlLm1hcmtDb2luQXNWaXNpYmxlKCdCVEMgKE11bHRpc2lnKScsIHRydWUpOwogICAgICAgICAgICAgICAgaGFuZGxlQ2xpY2soKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHNob3dDbG9zZUJ1dHRvbjogZmFsc2UKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIGNvbnNvbGUud2FybigndW5jb25uZWN0ZWQgc2VjdXJlIHR5cGUnKTsKICAgICAgfQogICAgfQoKICAgIGhhbmRsZUNsaWNrKCk7CiAgfTsKCiAgdmFyIGZvcmNlZEN1cnJlbmN5ID0gcGF0aG5hbWUuc3BsaXQoJy8nKVsyXTsKICB2YXIgZm9yY2VkQ3VycmVuY3lEYXRhOwoKICBpZiAoZm9yY2VkQ3VycmVuY3kpIHsKICAgIGZvcmNlZEN1cnJlbmN5RGF0YSA9IGFsbEN1cnJlbmNpZXMuZmluZChmdW5jdGlvbiAoX3JlZjQpIHsKICAgICAgdmFyIG5hbWUgPSBfcmVmNC5uYW1lOwogICAgICByZXR1cm4gbmFtZSA9PT0gZm9yY2VkQ3VycmVuY3kudG9VcHBlckNhc2UoKTsKICAgIH0pOwoKICAgIGlmIChmb3JjZWRDdXJyZW5jeURhdGEpIHsKICAgICAgY3VycmVuY2llc1tmb3JjZWRDdXJyZW5jeS50b0xvd2VyQ2FzZSgpXSA9IHRydWU7CiAgICB9CiAgfQoKICBpZiAoaXNFeGlzdCkgewogICAgZ29Ib21lKCk7CiAgfQoKICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgLy8gTGluayBmcm9tIGluZGV4Lmh0bWwgKGZpcnN0IHNjcmVlbikKICAgIHZhciBzdGFydGVyTW9kYWxSZXN0b3JlV2FsbGV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0ZXItbW9kYWxfX2xpbmstcmVzdG9yZS13YWxsZXQnKTsKCiAgICBpZiAoc3RhcnRlck1vZGFsUmVzdG9yZVdhbGxldCkgewogICAgICB2YXIgcmVkaXJlY3RUb1Jlc3RvcmVXYWxsZXQgPSBmdW5jdGlvbiByZWRpcmVjdFRvUmVzdG9yZVdhbGxldCgpIHsKICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5ocmVmID0gJyMvcmVzdG9yZVdhbGxldCc7CiAgICAgICAgaGFuZGxlUmVzdG9yZU1uZW1vbmljKCk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0ZXItbW9kYWwnKS5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnKTsKICAgICAgfTsKCiAgICAgIHN0YXJ0ZXJNb2RhbFJlc3RvcmVXYWxsZXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZWRpcmVjdFRvUmVzdG9yZVdhbGxldCk7CiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgc3RhcnRlck1vZGFsUmVzdG9yZVdhbGxldC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHJlZGlyZWN0VG9SZXN0b3JlV2FsbGV0KTsKICAgICAgfTsKICAgIH0KICB9LCBbXSk7CiAgdmFyIHdlYjNUeXBlID0gbWV0YW1hc2sud2ViM2Nvbm5lY3QuZ2V0SW5qZWN0ZWRUeXBlKCk7CiAgdmFyIHdlYjNJY29uID0gd2ViM0ljb25zW3dlYjNUeXBlXSAmJiB3ZWIzVHlwZSAhPT0gIlVOS05PV04iICYmIHdlYjNUeXBlICE9PSAiTk9ORSIgPyB3ZWIzSWNvbnNbd2ViM1R5cGVdIDogZmFsc2U7CiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICBzdHlsZU5hbWU6ICJ3cmFwcGVyICIuY29uY2F0KGlzRGFyayA/ICctLWRhcmsnIDogJycpCiAgfSwgLy9ACiAgdXNlcldhbGxldHMubGVuZ3RoICYmICFsb2NhbFN0b3JhZ2UuZ2V0SXRlbShjb25zdGFudHMud2FzT25XYWxsZXQpID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENsb3NlSWNvbiwgewogICAgc3R5bGVOYW1lOiAiY2xvc2VCdXR0b24iLAogICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHsKICAgICAgcmV0dXJuIGdvSG9tZSgpOwogICAgfSwKICAgICJkYXRhLXRlc3RpZCI6ICJtb2RhbENsb3NlSWNvbiIKICB9KSkgOiAnJywgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgIHN0eWxlTmFtZTogaXNNb2JpbGUgPyAnbW9iaWxlRm9ybUJvZHknIDogJ2Zvcm1Cb2R5JwogIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJoMiIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgIGlkOiAiY3JlYXRlV2FsbGV0SGVhZGVyMSIsCiAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQyMVx1MDQzRVx1MDQzN1x1MDQzNFx1MDQzMFx1MDQzRFx1MDQzOFx1MDQzNSBcdTA0M0FcdTA0M0VcdTA0NDhcdTA0MzVcdTA0M0JcdTA0NENcdTA0M0FcdTA0MzAiCiAgfSksICcgJywgZm9yY2VkQ3VycmVuY3kgJiYgZm9yY2VkQ3VycmVuY3kudG9VcHBlckNhc2UoKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICBzdHlsZU5hbWU6ICJidXR0b25XcmFwcGVyIgogIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgewogICAgb25DbGljazogaGFuZGxlUmVzdG9yZU1uZW1vbmljCiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgaWQ6ICJJbXBvcnRLZXlzX1Jlc3RvcmVNbmVtb25pYyIsCiAgICBkZWZhdWx0TWVzc2FnZTogIlJlc3RvcmUgZnJvbSAxMi13b3JkIHNlZWQiCiAgfSkpLCAiXHhBMCIsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRvb2x0aXAsIHsKICAgIGlkOiAiSW1wb3J0S2V5c19SZXN0b3JlTW5lbW9uaWNfdG9vbHRpcCIKICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgIGlkOiAiSW1wb3J0S2V5c19SZXN0b3JlTW5lbW9uaWNfVG9vbHRpcCIsCiAgICBkZWZhdWx0TWVzc2FnZTogIjEyLXdvcmQgYmFja3VwIHBocmFzZSIKICB9KSwgKGJ0Y0JhbGFuY2UgPiAwIHx8IGZpYXRCYWxhbmNlID4gMCkgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJiciIsIG51bGwpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnIiLCBudWxsKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgIHN0eWxlTmFtZTogImFsZXJ0VG9vbHRpcFdyYXBwZXIiCiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgaWQ6ICJJbXBvcnRLZXlzX1Jlc3RvcmVNbmVtb25pY19Ub29sdGlwX3dpdGhCYWxhbmNlIiwKICAgIGRlZmF1bHRNZXNzYWdlOiAiUGxlYXNlLCBiZSBjYXVzaW91cyEiCiAgfSkpKSkpKSwgIW1ldGFtYXNrLmlzQ29ubmVjdGVkKCkgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7CiAgICBvbkNsaWNrOiBoYW5kbGVDb25uZWN0V2FsbGV0CiAgfSwgd2ViM0ljb24gJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImltZyIsIHsKICAgIHN0eWxlTmFtZTogImNvbm5lY3RXYWxsZXRJY29uIiwKICAgIHNyYzogd2ViM0ljb24KICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgaWQ6ICJJbXBvcnRLZXlzX0Nvbm5lY3RXYWxsZXQiLAogICAgZGVmYXVsdE1lc3NhZ2U6ICJDb25uZWN0IFdhbGxldCIKICB9KSksICJceEEwIiwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVG9vbHRpcCwgewogICAgaWQ6ICJDcmVhdGVXYWxsZXRfQ29ubmVjdFdhbGxldFRvb2x0aXAiCiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgaWQ6ICJDcmVhdGVXYWxsZXRfQ29ubmVjdFdhbGxldEJ1dHRvbiIsCiAgICBkZWZhdWx0TWVzc2FnZTogIlVzZSB0aGlzIGlmIHlvdSBhbHJlYWR5IGhhdmUgZXRoZXJldW0gd2FsbGV0IgogIH0pKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTdGVwc1dyYXBwZXIsIHsKICAgIHN0ZXA6IHN0ZXAsCiAgICBmb3JjZWRDdXJyZW5jeURhdGE6IGZvcmNlZEN1cnJlbmN5RGF0YSwKICAgIGVycm9yOiBlcnJvciwKICAgIG9uQ2xpY2s6IHZhbGlkYXRlLAogICAgc2V0RXJyb3I6IHNldEVycm9yLAogICAgYnRjRGF0YTogYnRjRGF0YSwKICAgIGN1cnJlbmNpZXNGb3JTZWNvbmRTdGVwOiBjdXJyZW5jaWVzLAogICAgZXRoRGF0YTogZXRoRGF0YQogIH0pKSk7Cn07CgpleHBvcnQgZGVmYXVsdCBjb25uZWN0KHsKICBjcmVhdGVXYWxsZXQ6ICdjcmVhdGVXYWxsZXQnLAogIGN1cnJlbmNpZXM6ICdjdXJyZW5jaWVzJywKICB1c2VyRGF0YTogJ3VzZXInLAogIGNvcmU6ICdjb3JlJywKICBhY3RpdmVGaWF0OiAndXNlci5hY3RpdmVGaWF0Jwp9KSh3aXRoUm91dGVyKENTU01vZHVsZXMoQ3JlYXRlV2FsbGV0LCBzdHlsZXMsIHsKICBhbGxvd011bHRpcGxlOiB0cnVlCn0pKSk7"},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/front/shared/pages/CreateWallet/CreateWallet.tsx"],"names":["React","useState","useEffect","config","CSSModules","styles","connect","actions","FormattedMessage","useIntl","withRouter","isMobile","reducers","links","metamask","localisedUrl","StepsWrapper","Tooltip","constants","localStorage","CloseIcon","web3Icons","isWidgetBuild","isWidget","isDark","getItem","CreateWallet","props","history","createWallet","currencies","secure","pathname","location","userData","hiddenCoinsList","core","activeFiat","locale","allCurrencies","items","ethData","btcData","ghostData","nextData","btcMultisigSMSData","btcMultisigUserData","userWallets","getWallets","filter","currency","includes","currencyBalance","map","balance","infoAboutCurrency","name","btcBalance","fiatBalance","widgetCurrencies","window","widgetERC20Tokens","Object","keys","length","forEach","key","push","toUpperCase","erc20token","item","price_btc","price_fiat","forcedCurrency","split","hiddenList","isExist","find","el","setExist","isWasOnWallet","cur","markCoinAsVisible","handleClick","step","setStep","error","setError","goHome","home","handleConnectWallet","connectWallet","forcedCurrencyData","newWalletData","type","data","setItem","isWalletCreate","handleRestoreMnemonic","modals","open","RestoryMnemonicWallet","validate","values","isIgnoreSecondStep","AddCustomERC20","BTC","btcmultisig","checkSMSActivated","RegisterSMSProtected","callback","Confirm","title","message","labelYes","labelNo","onAccept","onCancel","checkPINActivated","RegisterPINProtected","MultisignJoinLink","showCloseButton","console","warn","toLowerCase","starterModalRestoreWallet","document","getElementById","redirectToRestoreWallet","href","classList","add","addEventListener","removeEventListener","web3Type","web3connect","getInjectedType","web3Icon","wasOnWallet","isConnected","allowMultiple"],"mappings":"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","sourcesContent":["// @ts-nocheck\r\nimport React, { useState, useEffect } from 'react'\r\nimport config from 'app-config'\r\n\r\nimport CSSModules from 'react-css-modules'\r\nimport styles from './CreateWallet.scss'\r\n\r\nimport { connect } from 'redaction'\r\nimport actions from 'redux/actions'\r\n\r\nimport { FormattedMessage, injectIntl, useIntl, IntlShape } from 'react-intl'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { isMobile } from 'react-device-detect'\r\nimport reducers from 'redux/core/reducers'\r\nimport links from 'helpers/links'\r\nimport metamask from 'helpers/metamask'\r\nimport { localisedUrl } from 'helpers/locale'\r\n\r\nimport StepsWrapper from './Steps/StepsWrapper'\r\nimport Tooltip from 'components/ui/Tooltip/Tooltip'\r\n\r\nimport { constants, localStorage } from 'helpers'\r\nimport CloseIcon from 'components/ui/CloseIcon/CloseIcon'\r\nimport web3Icons from '../../images'\r\n\r\nconst isWidgetBuild = config && config.isWidget\r\nconst isDark = localStorage.getItem(constants.localStorage.isDark)\r\n\r\n\r\n\r\nconst CreateWallet: React.FC<any> = (props) => {\r\n  const {\r\n    history,\r\n    createWallet: { currencies, secure },\r\n    location: { pathname },\r\n    userData,\r\n    core: { hiddenCoinsList },\r\n    activeFiat,\r\n  } = props\r\n\r\n  const { locale } = useIntl()\r\n\r\n  const allCurrencies = props.currencies.items\r\n\r\n  const {\r\n    ethData,\r\n    btcData,\r\n    ghostData,\r\n    nextData,\r\n    btcMultisigSMSData,\r\n    btcMultisigUserData,\r\n  } = userData\r\n\r\n  const userWallets = actions.core\r\n    .getWallets({})\r\n    .filter(({ currency }) => !hiddenCoinsList.includes(currency))\r\n\r\n  const currencyBalance = [\r\n    btcData,\r\n    btcMultisigSMSData,\r\n    btcMultisigUserData,\r\n    ethData,\r\n    ghostData,\r\n    nextData,\r\n  ].map(({ balance, currency, infoAboutCurrency }) => ({\r\n    balance,\r\n    infoAboutCurrency,\r\n    name: currency,\r\n  }))\r\n\r\n  let btcBalance = 0\r\n  let fiatBalance = 0\r\n\r\n  const widgetCurrencies = [\r\n    'BTC',\r\n    'BTC (SMS-Protected)',\r\n    'BTC (PIN-Protected)',\r\n    'BTC (Multisig)',\r\n    'ETH',\r\n    'GHOST',\r\n    'NEXT',\r\n  ]\r\n\r\n  if (isWidgetBuild) {\r\n    if (window.widgetERC20Tokens && Object.keys(window.widgetERC20Tokens).length) {\r\n      // Multi token widget build\r\n      Object.keys(window.widgetERC20Tokens).forEach((key) => {\r\n        widgetCurrencies.push(key.toUpperCase())\r\n      })\r\n    } else {\r\n      widgetCurrencies.push(config.erc20token.toUpperCase())\r\n    }\r\n  }\r\n\r\n  if (currencyBalance) {\r\n    currencyBalance.forEach(async (item) => {\r\n      if (\r\n        (!isWidgetBuild || widgetCurrencies.includes(item.name)) &&\r\n        item.infoAboutCurrency &&\r\n        item.balance !== 0\r\n      ) {\r\n        btcBalance += item.balance * item.infoAboutCurrency.price_btc\r\n        fiatBalance +=\r\n          item.balance * (item.infoAboutCurrency.price_fiat ? item.infoAboutCurrency.price_fiat : 1)\r\n      }\r\n    })\r\n  }\r\n\r\n  useEffect(() => {\r\n    const forcedCurrency = pathname.split('/')[2]\r\n\r\n    if (forcedCurrency) {\r\n      const hiddenList = localStorage.getItem('hiddenCoinsList')\r\n\r\n      const isExist = hiddenList.find((el) => {\r\n        if (el.includes(':')) {\r\n          return el.includes(forcedCurrency.toUpperCase())\r\n        }\r\n        return el === forcedCurrency.toUpperCase()\r\n      })\r\n\r\n      if (!isExist) {\r\n        setExist(true)\r\n      }\r\n\r\n      if (forcedCurrency.toUpperCase() === 'SWAP') {\r\n        // SWAP has no security options\r\n        // just add and redirect\r\n        const isWasOnWallet = localStorage\r\n          .getItem('hiddenCoinsList')\r\n          .find((cur) => cur.includes(forcedCurrency))\r\n        actions.core.markCoinAsVisible(isWasOnWallet || forcedCurrency.toUpperCase(), true)\r\n        handleClick()\r\n      }\r\n    }\r\n  }, [pathname])\r\n\r\n  useEffect(() => {\r\n    const widgetCurrencies = [\r\n      'BTC',\r\n      'BTC (SMS-Protected)',\r\n      'BTC (PIN-Protected)',\r\n      'BTC (Multisig)',\r\n      'ETH',\r\n      'GHOST',\r\n      'NEXT',\r\n    ]\r\n\r\n    if (isWidgetBuild) {\r\n      if (window.widgetERC20Tokens && Object.keys(window.widgetERC20Tokens).length) {\r\n        // Multi token widget build\r\n        Object.keys(window.widgetERC20Tokens).forEach((key) => {\r\n          widgetCurrencies.push(key.toUpperCase())\r\n        })\r\n      } else {\r\n        widgetCurrencies.push(config.erc20token.toUpperCase())\r\n      }\r\n    }\r\n\r\n    if (currencyBalance) {\r\n      currencyBalance.forEach((item) => {\r\n        if (\r\n          (!isWidgetBuild || widgetCurrencies.includes(item.name)) &&\r\n          item.infoAboutCurrency &&\r\n          item.balance !== 0\r\n        ) {\r\n          btcBalance += item.balance * item.infoAboutCurrency.price_btc\r\n          fiatBalance +=\r\n            item.balance *\r\n            (item.infoAboutCurrency.price_fiat ? item.infoAboutCurrency.price_fiat : 1)\r\n        }\r\n      })\r\n    }\r\n  }, [])\r\n\r\n  const [step, setStep] = useState(1)\r\n  const [error, setError] = useState('Choose something')\r\n  const [isExist, setExist] = useState(false)\r\n\r\n  const goHome = () => {\r\n    history.push(localisedUrl(locale, links.home))\r\n  }\r\n\r\n  const handleConnectWallet = () => {\r\n    history.push(localisedUrl(locale, links.connectWallet))\r\n  }\r\n\r\n  const handleClick = () => {\r\n    setError(null)\r\n    if (step !== 2 && !forcedCurrencyData) {\r\n      reducers.createWallet.newWalletData({ type: 'step', data: step + 1 })\r\n      return setStep(step + 1)\r\n    }\r\n    localStorage.setItem(constants.localStorage.isWalletCreate, true)\r\n    goHome()\r\n  }\r\n\r\n  const handleRestoreMnemonic = () => {\r\n    actions.modals.open(constants.modals.RestoryMnemonicWallet, { btcBalance, fiatBalance })\r\n  }\r\n\r\n  const validate = () => {\r\n    setError(null)\r\n\r\n    if (!Object.values(currencies).includes(true) && step === 1) {\r\n      setError('Choose something')\r\n      return\r\n    }\r\n\r\n    const isIgnoreSecondStep = !Object.keys(currencies).includes('BTC') // ['ETH', 'SWAP', 'EURS', 'Custom ERC20'].find(el => Object.keys(currencies).includes(el))\r\n\r\n    if (isIgnoreSecondStep && !currencies['Custom ERC20']) {\r\n      Object.keys(currencies).forEach((currency) => {\r\n        if (currencies[currency]) {\r\n          actions.core.markCoinAsVisible(currency.toUpperCase(), true)\r\n        }\r\n      })\r\n      localStorage.setItem(constants.localStorage.isWalletCreate, true)\r\n      goHome()\r\n      return\r\n    }\r\n\r\n    if (!secure.length && (step === 2 || forcedCurrencyData)) {\r\n      setError('Choose something')\r\n      return\r\n    }\r\n\r\n    if (currencies['Custom ERC20']) {\r\n      goHome()\r\n      actions.modals.open(constants.modals.AddCustomERC20)\r\n      return\r\n    }\r\n\r\n    if (step === 2 || forcedCurrencyData) {\r\n      switch (secure) {\r\n        case 'withoutSecure':\r\n          Object.keys(currencies).forEach((el) => {\r\n            if (currencies[el]) {\r\n              const isWasOnWallet = localStorage\r\n                .getItem('hiddenCoinsList')\r\n                .find((cur) => cur.includes(`${el}:`))\r\n              actions.core.markCoinAsVisible(isWasOnWallet || el.toUpperCase(), true)\r\n            }\r\n          })\r\n          break\r\n        case 'sms':\r\n          if (currencies.BTC) {\r\n            if (!actions.btcmultisig.checkSMSActivated()) {\r\n              actions.modals.open(constants.modals.RegisterSMSProtected, {\r\n                callback: () => {\r\n                  actions.core.markCoinAsVisible('BTC (SMS-Protected)', true)\r\n                  handleClick()\r\n                },\r\n              })\r\n              return\r\n            }\r\n            actions.modals.open(constants.modals.Confirm, {\r\n              title: (\r\n                <FormattedMessage\r\n                  id=\"ConfirmActivateSMS_Title\"\r\n                  defaultMessage=\"Добавление кошелька BTC (SMS-Protected)\"\r\n                />\r\n              ),\r\n              message: (\r\n                <FormattedMessage\r\n                  id=\"ConfirmActivateSMS_Message\"\r\n                  defaultMessage=\"У вас уже активирован этот тип кошелька. Хотите активировать другой кошелек?\"\r\n                />\r\n              ),\r\n              labelYes: <FormattedMessage id=\"ConfirmActivateSMS_Yes\" defaultMessage=\"Да\" />,\r\n              labelNo: <FormattedMessage id=\"ConfirmActivateSMS_No\" defaultMessage=\"Нет\" />,\r\n              onAccept: () => {\r\n                actions.modals.open(constants.modals.RegisterSMSProtected, {\r\n                  callback: () => {\r\n                    actions.core.markCoinAsVisible('BTC (SMS-Protected)', true)\r\n                    handleClick()\r\n                  },\r\n                })\r\n              },\r\n              onCancel: () => {\r\n                actions.core.markCoinAsVisible('BTC (SMS-Protected)', true)\r\n                handleClick()\r\n              },\r\n            })\r\n            return\r\n          }\r\n          break\r\n        case 'pin':\r\n          if (currencies.BTC) {\r\n            if (!actions.btcmultisig.checkPINActivated()) {\r\n              actions.modals.open(constants.modals.RegisterPINProtected, {\r\n                callback: () => {\r\n                  actions.core.markCoinAsVisible('BTC (PIN-Protected)', true)\r\n                  handleClick()\r\n                },\r\n              })\r\n              return\r\n            }\r\n            actions.modals.open(constants.modals.Confirm, {\r\n              title: (\r\n                <FormattedMessage\r\n                  id=\"ConfirmActivatePIN_Title\"\r\n                  defaultMessage=\"Добавление кошелька BTC (PIN-Protected)\"\r\n                />\r\n              ),\r\n              message: (\r\n                <FormattedMessage\r\n                  id=\"ConfirmActivatePIN_Message\"\r\n                  defaultMessage=\"У вас уже активирован этот тип кошелька. Хотите активировать другой кошелек?\"\r\n                />\r\n              ),\r\n              labelYes: <FormattedMessage id=\"ConfirmActivatePIN_Yes\" defaultMessage=\"Да\" />,\r\n              labelNo: <FormattedMessage id=\"ConfirmActivatePIN_No\" defaultMessage=\"Нет\" />,\r\n              onAccept: () => {\r\n                actions.modals.open(constants.modals.RegisterPINProtected, {\r\n                  callback: () => {\r\n                    actions.core.markCoinAsVisible('BTC (PIN-Protected)', true)\r\n                    handleClick()\r\n                  },\r\n                })\r\n              },\r\n              onCancel: () => {\r\n                actions.core.markCoinAsVisible('BTC (PIN-Protected)', true)\r\n                handleClick()\r\n              },\r\n            })\r\n            return\r\n          }\r\n          break\r\n        case 'multisignature':\r\n          if (currencies.BTC) {\r\n            actions.modals.open(constants.modals.MultisignJoinLink, {\r\n              callback: () => {\r\n                actions.core.markCoinAsVisible('BTC (Multisig)', true)\r\n                handleClick()\r\n              },\r\n              showCloseButton: false,\r\n            })\r\n            return\r\n          }\r\n          break\r\n        default:\r\n          console.warn('unconnected secure type')\r\n      }\r\n    }\r\n    handleClick()\r\n  }\r\n\r\n  const forcedCurrency = pathname.split('/')[2]\r\n  let forcedCurrencyData\r\n\r\n  if (forcedCurrency) {\r\n    forcedCurrencyData = allCurrencies.find(({ name }) => name === forcedCurrency.toUpperCase())\r\n    if (forcedCurrencyData) {\r\n      currencies[forcedCurrency.toLowerCase()] = true\r\n    }\r\n  }\r\n\r\n  if (isExist) {\r\n    goHome()\r\n  }\r\n\r\n  useEffect(() => {\r\n    // Link from index.html (first screen)\r\n    const starterModalRestoreWallet = document.getElementById('starter-modal__link-restore-wallet')\r\n    if (starterModalRestoreWallet) {\r\n      starterModalRestoreWallet.addEventListener('click', redirectToRestoreWallet)\r\n\r\n      return () => {\r\n        starterModalRestoreWallet.removeEventListener('click', redirectToRestoreWallet)\r\n      }\r\n\r\n      function redirectToRestoreWallet() {\r\n        document.location.href = '#/restoreWallet'\r\n        handleRestoreMnemonic()\r\n        document.getElementById('starter-modal').classList.add('d-none')\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  const web3Type = metamask.web3connect.getInjectedType()\r\n  const web3Icon = (web3Icons[web3Type] && web3Type !== `UNKNOWN` && web3Type !== `NONE`) ? web3Icons[web3Type] : false\r\n\r\n  return (\r\n    <div styleName={`wrapper ${isDark ? '--dark' : ''}`}>\r\n      {\r\n        //@\r\n        userWallets.length && !localStorage.getItem(constants.wasOnWallet) ? (\r\n          <>\r\n            {/*\r\n            //@ */}\r\n            <CloseIcon\r\n              styleName=\"closeButton\"\r\n              onClick={() => goHome()}\r\n              data-testid=\"modalCloseIcon\"\r\n            />\r\n          </>\r\n        ) : (\r\n          ''\r\n        )\r\n      }\r\n\r\n      <div styleName={isMobile ? 'mobileFormBody' : 'formBody'}>\r\n        <h2>\r\n          <FormattedMessage id=\"createWalletHeader1\" defaultMessage=\"Создание кошелька\" />{' '}\r\n          {forcedCurrency && forcedCurrency.toUpperCase()}\r\n        </h2>\r\n        <div styleName=\"buttonWrapper\">\r\n          <div>\r\n            <button onClick={handleRestoreMnemonic}>\r\n              <FormattedMessage id=\"ImportKeys_RestoreMnemonic\" defaultMessage=\"Restore from 12-word seed\" />\r\n            </button>\r\n            &nbsp;\r\n            <Tooltip id=\"ImportKeys_RestoreMnemonic_tooltip\">\r\n              <span>\r\n                <FormattedMessage\r\n                  id=\"ImportKeys_RestoreMnemonic_Tooltip\"\r\n                  defaultMessage=\"12-word backup phrase\"\r\n                />\r\n                {(btcBalance > 0 || fiatBalance > 0) && (\r\n                  <React.Fragment>\r\n                    <br />\r\n                    <br />\r\n                    <div styleName=\"alertTooltipWrapper\">\r\n                      <FormattedMessage\r\n                        id=\"ImportKeys_RestoreMnemonic_Tooltip_withBalance\"\r\n                        defaultMessage=\"Please, be causious!\"\r\n                      />\r\n                    </div>\r\n                  </React.Fragment>\r\n                )}\r\n              </span>\r\n            </Tooltip>\r\n          </div>\r\n          {!metamask.isConnected() && (\r\n            <div>\r\n              <button onClick={handleConnectWallet}>\r\n                {web3Icon && (\r\n                  <img styleName=\"connectWalletIcon\" src={web3Icon} />\r\n                )}\r\n                <FormattedMessage id=\"ImportKeys_ConnectWallet\" defaultMessage=\"Connect Wallet\" />\r\n              </button>\r\n              &nbsp;\r\n              <Tooltip id=\"CreateWallet_ConnectWalletTooltip\">\r\n                <FormattedMessage\r\n                  id=\"CreateWallet_ConnectWalletButton\"\r\n                  defaultMessage=\"Use this if you already have ethereum wallet\"\r\n                />\r\n              </Tooltip>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <StepsWrapper\r\n          step={step}\r\n          forcedCurrencyData={forcedCurrencyData}\r\n          error={error}\r\n          onClick={validate}\r\n          setError={setError}\r\n          btcData={btcData}\r\n          currenciesForSecondStep={currencies}\r\n          ethData={ethData}\r\n        />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\nexport default connect({\r\n  createWallet: 'createWallet',\r\n  currencies: 'currencies',\r\n  userData: 'user',\r\n  core: 'core',\r\n  activeFiat: 'user.activeFiat',\r\n})(withRouter(CSSModules(CreateWallet, styles, { allowMultiple: true })))\r\n"]}]}