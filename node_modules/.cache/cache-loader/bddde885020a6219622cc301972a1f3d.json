{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\pages\\Swap\\UTXOSwap\\DepositWindow\\DepositWindow.tsx","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\pages\\Swap\\UTXOSwap\\DepositWindow\\DepositWindow.tsx","mtime":1614842914206},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI7CmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXNzZXJ0VGhpc0luaXRpYWxpemVkIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9nZXRQcm90b3R5cGVPZiI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSI7Cgp2YXIgX2RlYywgX2NsYXNzLCBfdGVtcDsKCmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gIkBiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yIjsKCmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7IHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOyByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7IHZhciBTdXBlciA9IF9nZXRQcm90b3R5cGVPZihEZXJpdmVkKSwgcmVzdWx0OyBpZiAoaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCkgeyB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOyByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOyB9IGVsc2UgeyByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCByZXN1bHQpOyB9OyB9CgpmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09ICJ1bmRlZmluZWQiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSAiZnVuY3Rpb24iKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfQoKaW1wb3J0IFJlYWN0LCB7IEZyYWdtZW50LCBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7CmltcG9ydCBjb25maWcgZnJvbSAnYXBwLWNvbmZpZyc7CmltcG9ydCBhY3Rpb25zIGZyb20gJ3JlZHV4L2FjdGlvbnMnOwppbXBvcnQgaGVscGVycyBmcm9tICdoZWxwZXJzJzsKaW1wb3J0IENTU01vZHVsZXMgZnJvbSAncmVhY3QtY3NzLW1vZHVsZXMnOwppbXBvcnQgc3R5bGVzIGZyb20gJy4uLy4uL1N3YXAuc2Nzcyc7CmltcG9ydCB7IEJpZ051bWJlciB9IGZyb20gJ2JpZ251bWJlci5qcyc7CmltcG9ydCB7IEZvcm1hdHRlZE1lc3NhZ2UgfSBmcm9tICdyZWFjdC1pbnRsJzsKaW1wb3J0IENvcHlUb0NsaXBib2FyZCBmcm9tICdyZWFjdC1jb3B5LXRvLWNsaXBib2FyZCc7CmltcG9ydCBCdXR0b24gZnJvbSAnY29tcG9uZW50cy9jb250cm9scy9CdXR0b24vQnV0dG9uJzsKaW1wb3J0IFFSIGZyb20gJ2NvbXBvbmVudHMvUVIvUVInOwppbXBvcnQgVGltZXIgZnJvbSAnLi4vLi4vVGltZXIvVGltZXInOwppbXBvcnQgVG9vbHRpcCBmcm9tICdjb21wb25lbnRzL3VpL1Rvb2x0aXAvVG9vbHRpcCc7CmltcG9ydCBJbmxpbmVMb2FkZXIgZnJvbSAnY29tcG9uZW50cy9sb2FkZXJzL0lubGluZUxvYWRlci9JbmxpbmVMb2FkZXInOwppbXBvcnQgY29pbnNXaXRoRHluYW1pY0ZlZSBmcm9tICdoZWxwZXJzL2NvbnN0YW50cy9jb2luc1dpdGhEeW5hbWljRmVlJzsKdmFyIERlcG9zaXRXaW5kb3cgPSAoX2RlYyA9IENTU01vZHVsZXMoc3R5bGVzKSwgX2RlYyhfY2xhc3MgPSAoX3RlbXAgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoRGVwb3NpdFdpbmRvdywgX0NvbXBvbmVudCk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoRGVwb3NpdFdpbmRvdyk7CgogIGZ1bmN0aW9uIERlcG9zaXRXaW5kb3cob3B0aW9ucykgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEZXBvc2l0V2luZG93KTsKCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG9wdGlvbnMpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIl9maWVsZHMiLCBudWxsKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJzd2FwIiwgbnVsbCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiY3VycmVuY3kiLCBudWxsKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJpc1NlbGxDdXJyZW5jeUV0aE9yRXRoVG9rZW4iLCBudWxsKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJpc1NlbGxDdXJyZW5jeUV0aFRva2VuIiwgbnVsbCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAidXBkYXRlQmFsYW5jZSIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgc3dhcCwgX3RoaXMkc3RhdGUsIHNlbGxBbW91bnQsIGFkZHJlc3MsIGFjdHVhbEJhbGFuY2UsIHVuc3BlbnRzLCB0b3RhbFVuc3BlbnQ7CgogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHN3YXAgPSBfdGhpcy5wcm9wcy5zd2FwOwogICAgICAgICAgICAgIF90aGlzJHN0YXRlID0gX3RoaXMuc3RhdGUsIHNlbGxBbW91bnQgPSBfdGhpcyRzdGF0ZS5zZWxsQW1vdW50LCBhZGRyZXNzID0gX3RoaXMkc3RhdGUuYWRkcmVzczsKCiAgICAgICAgICAgICAgaWYgKCFfdGhpcy5pc1NlbGxDdXJyZW5jeUV0aE9yRXRoVG9rZW4pIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKCFfdGhpcy5pc1NlbGxDdXJyZW5jeUV0aFRva2VuKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIGFjdGlvbnMudG9rZW4uZ2V0QmFsYW5jZShfdGhpcy5jdXJyZW5jeSk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgYWN0dWFsQmFsYW5jZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICByZXR1cm4gYWN0aW9ucy5ldGguZ2V0QmFsYW5jZSgpOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBhY3R1YWxCYWxhbmNlID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE5OwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgcmV0dXJuIGFjdGlvbnNbX3RoaXMuY3VycmVuY3ldLmZldGNoVW5zcGVudHMoYWRkcmVzcyk7CgogICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgIHVuc3BlbnRzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICB0b3RhbFVuc3BlbnQgPSB1bnNwZW50cy5yZWR1Y2UoZnVuY3Rpb24gKHN1bW0sIF9yZWYyKSB7CiAgICAgICAgICAgICAgICB2YXIgc2F0b3NoaXMgPSBfcmVmMi5zYXRvc2hpczsKICAgICAgICAgICAgICAgIHJldHVybiBzdW1tICsgc2F0b3NoaXM7CiAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgICAgYWN0dWFsQmFsYW5jZSA9IG5ldyBCaWdOdW1iZXIodG90YWxVbnNwZW50KS5kaXZpZGVkQnkoMWU4KTsKCiAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgYmFsYW5jZTogYWN0dWFsQmFsYW5jZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJ1cGRhdGVSZW1haW5pbmdCYWxhbmNlIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICB2YXIgc3dhcCwgX3RoaXMkc3RhdGUyLCBzZWxsQW1vdW50LCBiYWxhbmNlLCBkeW5hbWljRmVlLCByZW1haW5pbmdCYWxhbmNlOwoKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgc3dhcCA9IF90aGlzLnByb3BzLnN3YXA7CiAgICAgICAgICAgICAgX3RoaXMkc3RhdGUyID0gX3RoaXMuc3RhdGUsIHNlbGxBbW91bnQgPSBfdGhpcyRzdGF0ZTIuc2VsbEFtb3VudCwgYmFsYW5jZSA9IF90aGlzJHN0YXRlMi5iYWxhbmNlLCBkeW5hbWljRmVlID0gX3RoaXMkc3RhdGUyLmR5bmFtaWNGZWU7CiAgICAgICAgICAgICAgcmVtYWluaW5nQmFsYW5jZSA9IG5ldyBCaWdOdW1iZXIoc2VsbEFtb3VudCkubWludXMoYmFsYW5jZSk7CgogICAgICAgICAgICAgIGlmICghX3RoaXMuaXNTZWxsQ3VycmVuY3lFdGhUb2tlbikgewogICAgICAgICAgICAgICAgcmVtYWluaW5nQmFsYW5jZSA9IHJlbWFpbmluZ0JhbGFuY2UucGx1cyhkeW5hbWljRmVlKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgIHJlbWFpbmluZ0JhbGFuY2U6IHJlbWFpbmluZ0JhbGFuY2UuZHAoNiwgQmlnTnVtYmVyLlJPVU5EX1VQKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiZ2V0UmVxdWlyZWRBbW91bnQiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHZhciBzd2FwLCBzZWxsQW1vdW50LCBkeW5hbWljRmVlLCByZXF1aXJlZEFtb3VudDsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgc3dhcCA9IF90aGlzLnByb3BzLnN3YXA7CiAgICAgICAgICAgICAgc2VsbEFtb3VudCA9IF90aGlzLnN0YXRlLnNlbGxBbW91bnQ7CiAgICAgICAgICAgICAgZHluYW1pY0ZlZSA9IDA7CgogICAgICAgICAgICAgIGlmICghY29pbnNXaXRoRHluYW1pY0ZlZS5pbmNsdWRlcyhfdGhpcy5jdXJyZW5jeSkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gODsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2OwogICAgICAgICAgICAgIHJldHVybiBoZWxwZXJzW190aGlzLmN1cnJlbmN5XS5lc3RpbWF0ZUZlZVZhbHVlKHsKICAgICAgICAgICAgICAgIG1ldGhvZDogJ3N3YXAnLAogICAgICAgICAgICAgICAgZml4ZWQ6IHRydWUKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBkeW5hbWljRmVlID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgIGR5bmFtaWNGZWU6IGR5bmFtaWNGZWUKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgcmVxdWlyZWRBbW91bnQgPSBuZXcgQmlnTnVtYmVyKHNlbGxBbW91bnQpLnBsdXMoZHluYW1pY0ZlZSkuZHAoNiwgQmlnTnVtYmVyLlJPVU5EX0NFSUwpOwoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICByZXF1aXJlZEFtb3VudDogcmVxdWlyZWRBbW91bnQKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIF90aGlzLnVwZGF0ZVJlbWFpbmluZ0JhbGFuY2UoKTsKCiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMyk7CiAgICB9KSkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImNoZWNrVGhlUGF5bWVudCIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF90aGlzJHN0YXRlMyA9IF90aGlzLnN0YXRlLAogICAgICAgICAgc3dhcCA9IF90aGlzJHN0YXRlMy5zd2FwLAogICAgICAgICAgZHluYW1pY0ZlZSA9IF90aGlzJHN0YXRlMy5keW5hbWljRmVlLAogICAgICAgICAgc2VsbEFtb3VudCA9IF90aGlzJHN0YXRlMy5zZWxsQW1vdW50LAogICAgICAgICAgYmFsYW5jZSA9IF90aGlzJHN0YXRlMy5iYWxhbmNlOwoKICAgICAgaWYgKHNlbGxBbW91bnQucGx1cyhkeW5hbWljRmVlKS5pc0xlc3NUaGFuT3JFcXVhbFRvKGJhbGFuY2UpKSB7CiAgICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaXNCYWxhbmNlRW5vdWdoOiB0cnVlCiAgICAgICAgICB9OwogICAgICAgIH0pOwoKICAgICAgICBpZiAoIV90aGlzLmlzU2VsbEN1cnJlbmN5RXRoT3JFdGhUb2tlbikgewogICAgICAgICAgc3dhcC5mbG93LnNraXBTeW5jQmFsYW5jZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzd2FwLmZsb3cuc3luY0JhbGFuY2UoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImNyZWF0ZUN5Y2xlVXBkYXRpbmdCYWxhbmNlIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICB2YXIgX3RoaXMkc3RhdGU0LCBzZWxsQW1vdW50LCBiYWxhbmNlLCBzY3JpcHRWYWx1ZXMsIGNoZWNrZXIsIGJhbGFuY2VDaGVja0hhbmRsZXI7CgogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfdGhpcyRzdGF0ZTQgPSBfdGhpcy5zdGF0ZSwgc2VsbEFtb3VudCA9IF90aGlzJHN0YXRlNC5zZWxsQW1vdW50LCBiYWxhbmNlID0gX3RoaXMkc3RhdGU0LmJhbGFuY2U7CiAgICAgICAgICAgICAgc2NyaXB0VmFsdWVzID0gX3RoaXMuX2ZpZWxkcy5zY3JpcHRWYWx1ZXM7CiAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZXRSZXF1aXJlZEFtb3VudCgpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNjsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudXBkYXRlUmVtYWluaW5nQmFsYW5jZSgpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGJhbGFuY2VDaGVja0hhbmRsZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIF9yZWY2ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyRwcm9wcyRzd2FwLCBmbG93LCBmbG93U3RhdGUsIGlzQmFsYW5jZUVub3VnaCwgdXRjTm93LCB0aW1lTGVmdDsKCiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzJHByb3BzJHN3YXAgPSBfdGhpcy5wcm9wcy5zd2FwLCBmbG93ID0gX3RoaXMkcHJvcHMkc3dhcC5mbG93LCBmbG93U3RhdGUgPSBfdGhpcyRwcm9wcyRzd2FwLmZsb3cuc3RhdGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNCYWxhbmNlRW5vdWdoID0gX3RoaXMuc3RhdGUuaXNCYWxhbmNlRW5vdWdoOwogICAgICAgICAgICAgICAgICAgICAgICAgIHV0Y05vdyA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApOwogICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVMZWZ0ID0gTWF0aC5jZWlsKChmbG93U3RhdGVbc2NyaXB0VmFsdWVzXS5sb2NrVGltZSAtIHV0Y05vdykgLyA2MCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHRpbWVMZWZ0IDw9IDApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIGZsb3cuc3RvcFN3YXBQcm9jZXNzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIHRydWUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNCYWxhbmNlRW5vdWdoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCB0cnVlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy51cGRhdGVCYWxhbmNlKCk7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNoZWNrVGhlUGF5bWVudCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgZmFsc2UpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gYmFsYW5jZUNoZWNrSGFuZGxlcigpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY2LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0oKTsKCiAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA5OwogICAgICAgICAgICAgIHJldHVybiBiYWxhbmNlQ2hlY2tIYW5kbGVyKCk7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgY2hlY2tlciA9IHNldEludGVydmFsKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgICAgICAgICB2YXIgbmVlZFN0b3A7CiAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmFsYW5jZUNoZWNrSGFuZGxlcigpOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgbmVlZFN0b3AgPSBfY29udGV4dDUuc2VudDsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZWVkU3RvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoY2hlY2tlcik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgICAgICAgICB9KSksIDUwMDApOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU2KTsKICAgIH0pKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAib25Db3B5QWRkcmVzcyIsIGZ1bmN0aW9uIChlKSB7CiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBpc1ByZXNzQ3RybDogdHJ1ZQogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZVJlbG9hZEJhbGFuY2UiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcoKSB7CiAgICAgIHZhciBpc0JhbGFuY2VGZXRjaGluZzsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaXNCYWxhbmNlRmV0Y2hpbmcgPSBfdGhpcy5zdGF0ZS5pc0JhbGFuY2VGZXRjaGluZzsKCiAgICAgICAgICAgICAgX3RoaXMudXBkYXRlQmFsYW5jZSgpOwoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc0JhbGFuY2VGZXRjaGluZzogdHJ1ZQogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgaXNCYWxhbmNlRmV0Y2hpbmc6IGZhbHNlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU3KTsKICAgIH0pKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlQ29weUFkZHJlc3MiLCBmdW5jdGlvbiAoZSkgewogICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgaXNBZGRyZXNzQ29waWVkOiB0cnVlCiAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgaXNBZGRyZXNzQ29waWVkOiBmYWxzZQogICAgICAgICAgfSk7CiAgICAgICAgfSwgNTAwKTsKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVyQnV5V2l0aENyZWRpdENhcmQiLCBmdW5jdGlvbiAoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICB9KTsKCiAgICB2YXIgX3N3YXAgPSBvcHRpb25zLnN3YXAsCiAgICAgICAgX2Zsb3cgPSBvcHRpb25zLmZsb3csCiAgICAgICAgb25Db3B5QWRkcmVzcyA9IG9wdGlvbnMub25Db3B5QWRkcmVzcywKICAgICAgICBjdXJyZW5jeURhdGEgPSBvcHRpb25zLmN1cnJlbmN5RGF0YSwKICAgICAgICBmaWVsZHMgPSBvcHRpb25zLmZpZWxkczsKICAgIF90aGlzLl9maWVsZHMgPSBmaWVsZHM7CiAgICBfdGhpcy5zd2FwID0gX3N3YXA7CiAgICBfdGhpcy5jdXJyZW5jeSA9IF9zd2FwLnNlbGxDdXJyZW5jeS50b0xvd2VyQ2FzZSgpOwogICAgX3RoaXMuaXNTZWxsQ3VycmVuY3lFdGhPckV0aFRva2VuID0gaGVscGVycy5ldGhUb2tlbi5pc0V0aE9yRXRoVG9rZW4oewogICAgICBuYW1lOiBfc3dhcC5zZWxsQ3VycmVuY3kKICAgIH0pOwogICAgX3RoaXMuaXNTZWxsQ3VycmVuY3lFdGhUb2tlbiA9IGhlbHBlcnMuZXRoVG9rZW4uaXNFdGhUb2tlbih7CiAgICAgIG5hbWU6IF9zd2FwLnNlbGxDdXJyZW5jeQogICAgfSk7CiAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgc3dhcDogX3N3YXAsCiAgICAgIGR5bmFtaWNGZWU6IDAsCiAgICAgIHJlbWFpbmluZ0JhbGFuY2U6IF90aGlzLnN3YXAuc2VsbEFtb3VudCwKICAgICAgZmxvdzogX3N3YXAuZmxvdy5zdGF0ZSwKICAgICAgaXNCYWxhbmNlRW5vdWdoOiBmYWxzZSwKICAgICAgaXNBZGRyZXNzQ29waWVkOiBmYWxzZSwKICAgICAgaXNCYWxhbmNlRmV0Y2hpbmc6IGZhbHNlLAogICAgICBiYWxhbmNlOiBfdGhpcy5pc1NlbGxDdXJyZW5jeUV0aE9yRXRoVG9rZW4gPyBjdXJyZW5jeURhdGEuYmFsYW5jZSAtIChjdXJyZW5jeURhdGEudW5jb25maXJtZWRCYWxhbmNlIHx8IDApIDogX2Zsb3cuc2NyaXB0QmFsYW5jZSwKICAgICAgYWRkcmVzczogX3RoaXMuaXNTZWxsQ3VycmVuY3lFdGhPckV0aFRva2VuID8gY3VycmVuY3lEYXRhLmFkZHJlc3MgOiBfZmxvdy5zY3JpcHRBZGRyZXNzLAogICAgICBjdXJyZW5jeUZ1bGxOYW1lOiBjdXJyZW5jeURhdGEuZnVsbE5hbWUsCiAgICAgIHNlbGxBbW91bnQ6IF90aGlzLnN3YXAuc2VsbEFtb3VudAogICAgfTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhEZXBvc2l0V2luZG93LCBbewogICAga2V5OiAiY29tcG9uZW50RGlkTW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICB0aGlzLmNyZWF0ZUN5Y2xlVXBkYXRpbmdCYWxhbmNlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50RGlkVXBkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUpIHsKICAgICAgaWYgKHRoaXMuc3RhdGUuYmFsYW5jZSAhPT0gcHJldlN0YXRlLmJhbGFuY2UpIHsKICAgICAgICB0aGlzLnVwZGF0ZVJlbWFpbmluZ0JhbGFuY2UoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMkc3RhdGU1ID0gdGhpcy5zdGF0ZSwKICAgICAgICAgIHN3YXAgPSBfdGhpcyRzdGF0ZTUuc3dhcCwKICAgICAgICAgIGZsb3cgPSBfdGhpcyRzdGF0ZTUuZmxvdywKICAgICAgICAgIGJhbGFuY2UgPSBfdGhpcyRzdGF0ZTUuYmFsYW5jZSwKICAgICAgICAgIGFkZHJlc3MgPSBfdGhpcyRzdGF0ZTUuYWRkcmVzcywKICAgICAgICAgIGR5bmFtaWNGZWUgPSBfdGhpcyRzdGF0ZTUuZHluYW1pY0ZlZSwKICAgICAgICAgIHNlbGxBbW91bnQgPSBfdGhpcyRzdGF0ZTUuc2VsbEFtb3VudCwKICAgICAgICAgIGlzUHJlc3NDdHJsID0gX3RoaXMkc3RhdGU1LmlzUHJlc3NDdHJsLAogICAgICAgICAgZmxvd0JhbGFuY2UgPSBfdGhpcyRzdGF0ZTUuZmxvd0JhbGFuY2UsCiAgICAgICAgICByZXF1aXJlZEFtb3VudCA9IF90aGlzJHN0YXRlNS5yZXF1aXJlZEFtb3VudCwKICAgICAgICAgIG1pc3NpbmdCYWxhbmNlID0gX3RoaXMkc3RhdGU1Lm1pc3NpbmdCYWxhbmNlLAogICAgICAgICAgaXNBZGRyZXNzQ29waWVkID0gX3RoaXMkc3RhdGU1LmlzQWRkcmVzc0NvcGllZCwKICAgICAgICAgIGlzQmFsYW5jZUVub3VnaCA9IF90aGlzJHN0YXRlNS5pc0JhbGFuY2VFbm91Z2gsCiAgICAgICAgICBjdXJyZW5jeUZ1bGxOYW1lID0gX3RoaXMkc3RhdGU1LmN1cnJlbmN5RnVsbE5hbWUsCiAgICAgICAgICByZW1haW5pbmdCYWxhbmNlID0gX3RoaXMkc3RhdGU1LnJlbWFpbmluZ0JhbGFuY2UsCiAgICAgICAgICBpc0JhbGFuY2VGZXRjaGluZyA9IF90aGlzJHN0YXRlNS5pc0JhbGFuY2VGZXRjaGluZzsKICAgICAgdmFyIGlzV2lkZ2V0QnVpbGQgPSBjb25maWcgJiYgY29uZmlnLmlzV2lkZ2V0OwogICAgICB2YXIgRG9udEhhdmVFbm91Z2h0Rm91bmRzVmFsdWVzID0gewogICAgICAgIG1pc3NpbmdCYWxhbmNlOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgcmVtYWluaW5nQmFsYW5jZSA+IDAgPyAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3Ryb25nIiwgbnVsbCwgIiIuY29uY2F0KHJlbWFpbmluZ0JhbGFuY2UpLCAiICIsIHN3YXAuc2VsbEN1cnJlbmN5LCAnICAnKSA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgewogICAgICAgICAgc3R5bGVOYW1lOiAibG9hZGVySG9sZGVyIgogICAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KElubGluZUxvYWRlciwgbnVsbCkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUb29sdGlwLCB7CiAgICAgICAgICBpZDogImRlcDE3MCIKICAgICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJkZXBvc2l0MTc3IiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRG8gbm90IHRvcCB1cCB0aGUgY29udHJhY3Qgd2l0aCB0aGUgZ3JlYXRlciBhbW91bnQgdGhhbiByZWNvbW1lbmRlZC4gVGhlIHJlbWFpbmluZyBiYWxhbmNlIHdpbGwgYmUgc2VuZCB0byB0aGUgY291bnRlciBwYXJ0eS4gWW91IGNhbiBzZW5kIHt0b2tlbk5hbWV9IGZyb20gYSB3YWxsZXQgb2YgYW55IGV4Y2hhbmdlIiwKICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICBhbW91bnQ6ICIiLmNvbmNhdChzd2FwLnNlbGxBbW91bnQpLAogICAgICAgICAgICB0b2tlbk5hbWU6IHN3YXAuc2VsbEN1cnJlbmN5LAogICAgICAgICAgICBicjogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImJyIiwgbnVsbCkKICAgICAgICAgIH0KICAgICAgICB9KSkpKSwKICAgICAgICBhbW91bnQ6ICIiLmNvbmNhdChzd2FwLnNlbGxBbW91bnQpLAogICAgICAgIHRva2VuTmFtZTogc3dhcC5zZWxsQ3VycmVuY3ksCiAgICAgICAgYnI6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJiciIsIG51bGwpCiAgICAgIH07CiAgICAgIHZhciBfdGhpcyRfZmllbGRzID0gdGhpcy5fZmllbGRzLAogICAgICAgICAgY3VycmVuY3lOYW1lID0gX3RoaXMkX2ZpZWxkcy5jdXJyZW5jeU5hbWUsCiAgICAgICAgICBleHBsb3JlckxpbmsgPSBfdGhpcyRfZmllbGRzLmV4cGxvcmVyTGluaywKICAgICAgICAgIHNjcmlwdFZhbHVlcyA9IF90aGlzJF9maWVsZHMuc2NyaXB0VmFsdWVzOwogICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAidG9wVXBMaW5rIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogInRvcCIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJidGNNZXNzYWdlIgogICAgICB9LCBpc1dpZGdldEJ1aWxkID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiZGVwb3NpdDE2NXdpZGdldCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJDb3B5IHRoZSBhZGRyZXNzIGJlbG93IGFuZCB0b3AgaXQgdXAgd2l0aCB0aGUgcmVjb21tZW5kZWQgYW1vdW50IG9mIHttaXNzaW5nQmFsYW5jZX0gIiwKICAgICAgICB2YWx1ZXM6IERvbnRIYXZlRW5vdWdodEZvdW5kc1ZhbHVlcwogICAgICB9KSA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogImRlcG9zaXQxNjUiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiVG8gY29udGludWUgdGhlIHN3YXAgY29weSB0aGlzIGFkZHJlc3MgYW5kIHRvcCBpdCB1cCB3aXRoIHttaXNzaW5nQmFsYW5jZX0iLAogICAgICAgIHZhbHVlczogRG9udEhhdmVFbm91Z2h0Rm91bmRzVmFsdWVzCiAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJxckltZyIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUVIsIHsKICAgICAgICBhZGRyZXNzOiAiIi5jb25jYXQoYWRkcmVzcywgIj9hbW91bnQ9IikuY29uY2F0KHJlbWFpbmluZ0JhbGFuY2UpCiAgICAgIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENvcHlUb0NsaXBib2FyZCwgewogICAgICAgIHRleHQ6IGFkZHJlc3MsCiAgICAgICAgb25Db3B5OiB0aGlzLm9uQ29weUFkZHJlc3MKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJhIiwgewogICAgICAgIHN0eWxlTmFtZTogImxpbmtUZXh0IgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJkZXBvc2l0MjU2IiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlRoZSBhZGRyZXNzIG9mIHt0b2tlbk5hbWV9IHNtYXJ0IGNvbnRyYWN0ICIsCiAgICAgICAgdmFsdWVzOiB7CiAgICAgICAgICB0b2tlbk5hbWU6IHN3YXAuc2VsbEN1cnJlbmN5CiAgICAgICAgfQogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAibGlua1RyYW5zYWN0aW9ucyIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN0cm9uZyIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJhIiwgewogICAgICAgIGhyZWY6IHN3YXAuc2VsbEN1cnJlbmN5ID09PSBjdXJyZW5jeU5hbWUgPyAiIi5jb25jYXQoZXhwbG9yZXJMaW5rLCAiL2FkZHJlc3MvIikuY29uY2F0KGFkZHJlc3MpIDogIiIuY29uY2F0KGNvbmZpZy5saW5rLmV0aGVyc2NhbiwgIi9hZGRyZXNzLyIpLmNvbmNhdChhZGRyZXNzKSwKICAgICAgICB0YXJnZXQ6ICJfYmxhbmsiLAogICAgICAgIHJlbDogIm5vb3BlbmVyIG5vcmVmZXJyZXIiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogImRlcG9zaXQyOTciLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAidmlldyBpbiBleHBsb3JlciIKICAgICAgfSkpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAicXIiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJhIiwgewogICAgICAgIHN0eWxlTmFtZTogImxpbmtBZGRyZXNzIiwKICAgICAgICBvbkRvdWJsZUNsaWNrOiB0aGlzLm9uQ29weUFkZHJlc3MsCiAgICAgICAgb25DbGljazogdGhpcy5vbkNvcHlBZGRyZXNzCiAgICAgIH0sIGFkZHJlc3MpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHsKICAgICAgICBicmFuZDogdHJ1ZSwKICAgICAgICBkaXNhYmxlZDogaXNBZGRyZXNzQ29waWVkLAogICAgICAgIGZ1bGxXaWR0aDogdHJ1ZQogICAgICB9LCBpc0FkZHJlc3NDb3BpZWQgPyAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiaSIsIHsKICAgICAgICBjbGFzc05hbWU6ICJmYXMgZmEtY29weSBmYS1jb3B5LWluIgogICAgICB9KSA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJpIiwgewogICAgICAgIGNsYXNzTmFtZTogImZhcyBmYS1jb3B5IgogICAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgICAgY2xhc3NOYW1lOiAiY29weVRleHQiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogImRlcG9zaXQzMTIiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiY29weSIKICAgICAgfSkpKSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJpIiwgewogICAgICAgIGNsYXNzTmFtZTogImZhcyBmYS1zeW5jLWFsdCIsCiAgICAgICAgc3R5bGVOYW1lOiAiaWNvbiIsCiAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVSZWxvYWRCYWxhbmNlCiAgICAgIH0pLCBpc0JhbGFuY2VGZXRjaGluZyA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJhIiwgewogICAgICAgIHN0eWxlTmFtZTogImxvYWRlckhvbGRlciIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoSW5saW5lTG9hZGVyLCBudWxsKSkgOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJkZXBvc2l0MzAwIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlJlY2VpdmVkIHtiYWxhbmNlfSAvIHtuZWVkfSB7dG9vbHRpcH0iLAogICAgICAgIHZhbHVlczogewogICAgICAgICAgYnI6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJiciIsIG51bGwpLAogICAgICAgICAgYmFsYW5jZTogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN0cm9uZyIsIG51bGwsIGJhbGFuY2UgPT09IHVuZGVmaW5lZCA/IHRoaXMudXBkYXRlQmFsYW5jZSA6ICIiLmNvbmNhdChuZXcgQmlnTnVtYmVyKGJhbGFuY2UpLmRwKDYsIEJpZ051bWJlci5ST1VORF9IQUxGX0NFSUwpKSwgIiAiLCBzd2FwLnNlbGxDdXJyZW5jeSwgJyAgJyksCiAgICAgICAgICBuZWVkOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3Ryb25nIiwgbnVsbCwgIiIuY29uY2F0KHJlcXVpcmVkQW1vdW50KSwgIiAiLCBzd2FwLnNlbGxDdXJyZW5jeSksCiAgICAgICAgICB0b29sdGlwOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUb29sdGlwLCB7CiAgICAgICAgICAgIGlkOiAiZGVwMjI2IgogICAgICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICBpZDogImRlcG9zaXQyMzkiLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlN3YXAgd2lsbCBjb250aW51ZSBhZnRlciB7dG9rZW5OYW1lfSBjb250cmFjdCByZWNlaXZlcyB0aGUgZnVuZHMuIElzIHVzdWFsbHkgdGFrZXMgbGVzcyB0aGFuIDEwIG1pbiIsCiAgICAgICAgICAgIHZhbHVlczogewogICAgICAgICAgICAgIHRva2VuTmFtZTogc3dhcC5zZWxsQ3VycmVuY3ksCiAgICAgICAgICAgICAgYnI6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJiciIsIG51bGwpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pKQogICAgICAgIH0KICAgICAgfSksIGlzQmFsYW5jZUVub3VnaCA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogImRlcG9zaXQxOTguMSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJjcmVhdGUgRXRoZXJldW0gQ29udHJhY3Que2JyfVBsZWFzZSB3YWl0LCBpdCBjYW4gdGFrZSBhIGZldyBtaW51dGVzLi4uIiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIGJyOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnIiLCBudWxsKQogICAgICAgIH0KICAgICAgfSkgOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJkZXBvc2l0MTk4IiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIndhaXRpbmcgZm9yIHBheW1lbnQuLi4iCiAgICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYSIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJsb2FkZXJIb2xkZXIiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KElubGluZUxvYWRlciwgbnVsbCkpLCBkeW5hbWljRmVlID4gMCAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYSIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJpbmNsdWRlZCIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAiZGVwb3NpdDMyMCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICIoaW5jbHVkZWQge21pbmVlckZlZX0ge3NlbGxDdXJyZW5jeX0gbWluZXJzIGZlZSkgIiwKICAgICAgICB2YWx1ZXM6IHsKICAgICAgICAgIG1pbmVlckZlZTogZHluYW1pY0ZlZSwKICAgICAgICAgIHNlbGxDdXJyZW5jeTogc3dhcC5zZWxsQ3VycmVuY3kKICAgICAgICB9CiAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwpKSwgZmxvd1tzY3JpcHRWYWx1ZXNdICE9PSBudWxsICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAibG9ja1RpbWUiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJpIiwgewogICAgICAgIGNsYXNzTmFtZTogImZhciBmYS1jbG9jayIKICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRpbWVyLCB7CiAgICAgICAgY2FuY2VsVGltZTogKGZsb3dbc2NyaXB0VmFsdWVzXS5sb2NrVGltZSAtIDcyMDApICogMTAwMCwKICAgICAgICBsb2NrVGltZTogZmxvd1tzY3JpcHRWYWx1ZXNdLmxvY2tUaW1lICogMTAwMAogICAgICB9KSkpKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBEZXBvc2l0V2luZG93Owp9KENvbXBvbmVudCksIF90ZW1wKSkgfHwgX2NsYXNzKTsKZXhwb3J0IHsgRGVwb3NpdFdpbmRvdyBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/front/shared/pages/Swap/UTXOSwap/DepositWindow/DepositWindow.tsx"],"names":["React","Fragment","Component","config","actions","helpers","CSSModules","styles","BigNumber","FormattedMessage","CopyToClipboard","Button","QR","Timer","Tooltip","InlineLoader","coinsWithDynamicFee","DepositWindow","options","swap","props","state","sellAmount","address","isSellCurrencyEthOrEthToken","isSellCurrencyEthToken","token","getBalance","currency","actualBalance","eth","fetchUnspents","unspents","totalUnspent","reduce","summ","satoshis","dividedBy","setState","balance","dynamicFee","remainingBalance","minus","plus","dp","ROUND_UP","includes","estimateFeeValue","method","fixed","requiredAmount","ROUND_CEIL","updateRemainingBalance","isLessThanOrEqualTo","isBalanceEnough","flow","skipSyncBalance","syncBalance","scriptValues","_fields","getRequiredAmount","balanceCheckHandler","flowState","utcNow","Math","floor","Date","now","timeLeft","ceil","lockTime","stopSwapProcess","updateBalance","checkThePayment","checker","setInterval","needStop","clearInterval","e","isPressCtrl","isBalanceFetching","setTimeout","isAddressCopied","preventDefault","onCopyAddress","currencyData","fields","sellCurrency","toLowerCase","ethToken","isEthOrEthToken","name","isEthToken","unconfirmedBalance","scriptBalance","scriptAddress","currencyFullName","fullName","createCycleUpdatingBalance","prevProps","prevState","flowBalance","missingBalance","isWidgetBuild","isWidget","DontHaveEnoughtFoundsValues","amount","tokenName","br","currencyName","explorerLink","link","etherscan","handleReloadBalance","undefined","ROUND_HALF_CEIL","need","tooltip","mineerFee"],"mappings":"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","sourcesContent":["import React, { Fragment, Component } from 'react'\r\n\r\nimport config from 'app-config'\r\nimport { connect } from 'redaction'\r\nimport actions from 'redux/actions'\r\nimport helpers, { constants } from 'helpers'\r\nimport reducers from 'redux/core/reducers'\r\n\r\nimport CSSModules from 'react-css-modules'\r\nimport styles from '../../Swap.scss'\r\n\r\nimport { BigNumber } from 'bignumber.js'\r\n\r\nimport { FormattedMessage } from 'react-intl'\r\nimport CopyToClipboard from 'react-copy-to-clipboard'\r\nimport PropTypes from 'prop-types'\r\nimport ReactTooltip from 'react-tooltip'\r\n\r\nimport Button from 'components/controls/Button/Button'\r\nimport QR from 'components/QR/QR'\r\nimport Timer from '../../Timer/Timer'\r\nimport Tooltip from 'components/ui/Tooltip/Tooltip'\r\nimport InlineLoader from 'components/loaders/InlineLoader/InlineLoader'\r\nimport coinsWithDynamicFee from 'helpers/constants/coinsWithDynamicFee'\r\n\r\n\r\n@CSSModules(styles)\r\nexport default class DepositWindow extends Component<any, any> {\r\n  _fields = null\r\n  swap = null\r\n  currency = null\r\n  isSellCurrencyEthOrEthToken = null\r\n  isSellCurrencyEthToken = null\r\n\r\n  constructor(options) {\r\n    super(options)\r\n    const {\r\n      swap,\r\n      flow,\r\n      onCopyAddress,\r\n      currencyData,\r\n      fields,\r\n    } = options\r\n\r\n    this._fields = fields\r\n\r\n    this.swap = swap\r\n\r\n    this.currency = swap.sellCurrency.toLowerCase()\r\n\r\n    this.isSellCurrencyEthOrEthToken = helpers.ethToken.isEthOrEthToken({ name: swap.sellCurrency })\r\n    this.isSellCurrencyEthToken = helpers.ethToken.isEthToken({ name: swap.sellCurrency })\r\n\r\n    this.state = {\r\n      swap,\r\n      dynamicFee: 0,\r\n      remainingBalance: this.swap.sellAmount,\r\n      flow: swap.flow.state,\r\n      isBalanceEnough: false,\r\n      isAddressCopied: false,\r\n      isBalanceFetching: false,\r\n      balance: this.isSellCurrencyEthOrEthToken\r\n        ? currencyData.balance - (currencyData.unconfirmedBalance || 0)\r\n        : flow.scriptBalance,\r\n      address: this.isSellCurrencyEthOrEthToken\r\n        ? currencyData.address\r\n        : flow.scriptAddress,\r\n      currencyFullName: currencyData.fullName,\r\n      sellAmount: this.swap.sellAmount,\r\n    }\r\n  }\r\n\r\n  updateBalance = async () => {\r\n    const { swap } = this.props\r\n    const { sellAmount, address } = this.state\r\n\r\n    let actualBalance\r\n\r\n    if (this.isSellCurrencyEthOrEthToken) {\r\n      if (this.isSellCurrencyEthToken) {\r\n        actualBalance = await actions.token.getBalance(this.currency)\r\n      } else {\r\n        actualBalance = await actions.eth.getBalance()\r\n      }\r\n    } else {\r\n      const unspents = await actions[this.currency].fetchUnspents(address)\r\n      const totalUnspent = unspents.reduce((summ, { satoshis }) => summ + satoshis, 0)\r\n      actualBalance = new BigNumber(totalUnspent).dividedBy(1e8)\r\n    }\r\n\r\n    this.setState(() => ({\r\n      balance: actualBalance,\r\n    }))\r\n  }\r\n\r\n  updateRemainingBalance = async () => {\r\n    const { swap } = this.props\r\n    const { sellAmount, balance, dynamicFee } = this.state\r\n\r\n    let remainingBalance = new BigNumber(sellAmount).minus(balance)\r\n\r\n    if (!this.isSellCurrencyEthToken) {\r\n      remainingBalance = remainingBalance.plus(dynamicFee)\r\n    }\r\n\r\n    this.setState(() => ({\r\n      remainingBalance: remainingBalance.dp(6, BigNumber.ROUND_UP),\r\n    }))\r\n  }\r\n\r\n  getRequiredAmount = async () => {\r\n    const { swap } = this.props\r\n    const { sellAmount } = this.state\r\n\r\n    let dynamicFee = 0\r\n\r\n    if (coinsWithDynamicFee.includes(this.currency)) {\r\n      dynamicFee = await helpers[this.currency].estimateFeeValue({ method: 'swap', fixed: true })\r\n\r\n      this.setState(() => ({\r\n        dynamicFee,\r\n      }))\r\n    }\r\n\r\n    const requiredAmount = new BigNumber(sellAmount).plus(dynamicFee).dp(6, BigNumber.ROUND_CEIL)\r\n\r\n    this.setState(() => ({\r\n      requiredAmount,\r\n    }))\r\n\r\n    this.updateRemainingBalance()\r\n  }\r\n\r\n  checkThePayment = () => {\r\n    const { swap, dynamicFee, sellAmount, balance } = this.state\r\n\r\n    if (sellAmount.plus(dynamicFee).isLessThanOrEqualTo(balance)) {\r\n      this.setState(() => ({\r\n        isBalanceEnough: true,\r\n      }))\r\n\r\n      if (!this.isSellCurrencyEthOrEthToken) {\r\n        swap.flow.skipSyncBalance()\r\n      } else {\r\n        swap.flow.syncBalance()\r\n      }\r\n    }\r\n  }\r\n\r\n  createCycleUpdatingBalance = async () => {\r\n    const { sellAmount, balance } = this.state\r\n    const { scriptValues } = this._fields\r\n\r\n    let checker\r\n    await this.getRequiredAmount()\r\n    await this.updateRemainingBalance()\r\n\r\n    const balanceCheckHandler = async () => {\r\n      const {\r\n        swap: {\r\n          flow,\r\n          flow: {\r\n            state: flowState,\r\n          }\r\n        },\r\n      } = this.props\r\n      const { isBalanceEnough } = this.state\r\n\r\n      const utcNow = Math.floor(Date.now() / 1000)\r\n      const timeLeft = Math.ceil((flowState[scriptValues].lockTime - utcNow) / 60)\r\n\r\n      if (timeLeft <= 0) {\r\n        flow.stopSwapProcess()\r\n\r\n        return true\r\n      }\r\n\r\n      if (isBalanceEnough) {\r\n        return true\r\n      }\r\n\r\n      await this.updateBalance()\r\n      this.checkThePayment()\r\n\r\n      return false\r\n    }\r\n\r\n    await balanceCheckHandler()\r\n\r\n    checker = setInterval(async () => {\r\n      const needStop = await balanceCheckHandler()\r\n\r\n      if (needStop) {\r\n        clearInterval(checker)\r\n      }\r\n    }, 5000)\r\n  }\r\n\r\n  onCopyAddress = (e) => {\r\n    this.setState({\r\n      isPressCtrl: true,\r\n    })\r\n  }\r\n\r\n  handleReloadBalance = async () => {\r\n    const { isBalanceFetching } = this.state\r\n\r\n    this.updateBalance()\r\n\r\n    this.setState({\r\n      isBalanceFetching: true,\r\n    }, () => {\r\n      setTimeout(() => {\r\n        this.setState({\r\n          isBalanceFetching: false,\r\n        })\r\n      }, 500)\r\n    })\r\n  }\r\n\r\n  handleCopyAddress = (e) => {\r\n    this.setState({\r\n      isAddressCopied: true,\r\n    }, () => {\r\n      setTimeout(() => {\r\n        this.setState({\r\n          isAddressCopied: false,\r\n        })\r\n      }, 500)\r\n    })\r\n  }\r\n\r\n  handlerBuyWithCreditCard = (e) => {\r\n    e.preventDefault()\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.createCycleUpdatingBalance()\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.state.balance !== prevState.balance) {\r\n      this.updateRemainingBalance()\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      swap,\r\n      flow,\r\n      balance,\r\n      address,\r\n      dynamicFee,\r\n      sellAmount,\r\n      isPressCtrl,\r\n      flowBalance,\r\n      requiredAmount,\r\n      missingBalance,\r\n      isAddressCopied,\r\n      isBalanceEnough,\r\n      currencyFullName,\r\n      remainingBalance,\r\n      isBalanceFetching,\r\n    } = this.state\r\n\r\n    const isWidgetBuild = config && config.isWidget\r\n\r\n    const DontHaveEnoughtFoundsValues = {\r\n      missingBalance: (\r\n        <div>\r\n          {remainingBalance > 0 ?\r\n            <strong>{`${remainingBalance}`} {swap.sellCurrency}{'  '}</strong>\r\n            :\r\n            <span styleName=\"loaderHolder\">\r\n              <InlineLoader />\r\n            </span>\r\n          }\r\n          <Tooltip id=\"dep170\">\r\n            <div>\r\n              {/* eslint-disable */}\r\n              <FormattedMessage\r\n                id=\"deposit177\"\r\n                defaultMessage=\"Do not top up the contract with the greater amount than recommended. The remaining balance will be send to the counter party. You can send {tokenName} from a wallet of any exchange\"\r\n                values={{\r\n                  amount: `${swap.sellAmount}`,\r\n                  tokenName: swap.sellCurrency,\r\n                  br: <br />,\r\n                }}\r\n              />\r\n              {/* eslint-enable */}\r\n              {/* <p>\r\n                <FormattedMessage id=\"deposit181\" defaultMessage=\"You can send {currency} from a wallet of any exchange\" values={{ currency: `${swap.buyCurrency}` }} />\r\n              </p> */}\r\n            </div>\r\n          </Tooltip>\r\n        </div>\r\n      ),\r\n      amount: `${swap.sellAmount}`,\r\n      tokenName: swap.sellCurrency,\r\n      br: <br />,\r\n    }\r\n\r\n    const {\r\n      currencyName,\r\n      explorerLink,\r\n      scriptValues,\r\n    } = this._fields\r\n\r\n    return (\r\n      <Fragment>\r\n        <div\r\n          styleName=\"topUpLink\"\r\n        >\r\n          <div styleName=\"top\">\r\n            <div styleName=\"btcMessage\">\r\n              {isWidgetBuild ? (\r\n                <FormattedMessage\r\n                  id=\"deposit165widget\"\r\n                  defaultMessage=\"Copy the address below and top it up with the recommended amount of {missingBalance} \"\r\n                  values={DontHaveEnoughtFoundsValues}\r\n                />\r\n              ) : (\r\n                  <FormattedMessage\r\n                    id=\"deposit165\"\r\n                    defaultMessage=\"To continue the swap copy this address and top it up with {missingBalance}\"\r\n                    values={DontHaveEnoughtFoundsValues}\r\n                  />\r\n                )}\r\n            </div>\r\n            <div styleName=\"qrImg\">\r\n              <QR address={`${address}?amount=${remainingBalance}`} />\r\n            </div>\r\n          </div>\r\n          <CopyToClipboard\r\n            text={address}\r\n            onCopy={this.onCopyAddress}\r\n          >\r\n            <div>\r\n              <a styleName=\"linkText\">\r\n                <FormattedMessage\r\n                  id=\"deposit256\"\r\n                  defaultMessage=\"The address of {tokenName} smart contract \"\r\n                  values={{\r\n                    tokenName: swap.sellCurrency,\r\n                  }}\r\n                />\r\n              </a>\r\n              <div styleName=\"linkTransactions\">\r\n                <strong>\r\n                  <a\r\n                    href={swap.sellCurrency === currencyName\r\n                      ? `${explorerLink}/address/${address}`\r\n                      : `${config.link.etherscan}/address/${address}`\r\n                    }\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                  >\r\n                    <FormattedMessage id=\"deposit297\" defaultMessage=\"view in explorer\" />\r\n                  </a>\r\n                </strong>\r\n              </div>\r\n              <div styleName=\"qr\">\r\n                <a\r\n                  styleName=\"linkAddress\"\r\n                  onDoubleClick={this.onCopyAddress}\r\n                  onClick={this.onCopyAddress}\r\n                >\r\n                  {address}\r\n                </a>\r\n                <Button\r\n                  brand\r\n                  disabled={isAddressCopied}\r\n                  fullWidth\r\n                >\r\n                  {isAddressCopied ? <i className=\"fas fa-copy fa-copy-in\" /> : <i className=\"fas fa-copy\" />}\r\n                  <span className=\"copyText\"><FormattedMessage id=\"deposit312\" defaultMessage=\"copy\" /></span>\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </CopyToClipboard>\r\n          <div>\r\n            <i className=\"fas fa-sync-alt\" styleName=\"icon\" onClick={this.handleReloadBalance} />\r\n            {/* eslint-disable */}\r\n            {isBalanceFetching\r\n              ? (\r\n                <a styleName=\"loaderHolder\">\r\n                  <InlineLoader />\r\n                </a>\r\n              ) : (\r\n                <FormattedMessage\r\n                  id=\"deposit300\"\r\n                  defaultMessage=\"Received {balance} / {need} {tooltip}\"\r\n                  values={{\r\n                    br: <br />,\r\n                    balance: <strong>{balance === undefined ? this.updateBalance : `${new BigNumber(balance).dp(6, BigNumber.ROUND_HALF_CEIL)}`} {swap.sellCurrency}{'  '}</strong>,\r\n                    need: <strong>{`${requiredAmount}`} {swap.sellCurrency}</strong>,\r\n                    tooltip:\r\n                      <Tooltip id=\"dep226\">\r\n                        <FormattedMessage\r\n                          id=\"deposit239\"\r\n                          defaultMessage=\"Swap will continue after {tokenName} contract receives the funds. Is usually takes less than 10 min\"\r\n                          values={{\r\n                            tokenName: swap.sellCurrency,\r\n                            br: <br />\r\n                          }}\r\n                        />\r\n                      </Tooltip>\r\n                  }}\r\n                />\r\n              )}\r\n            {isBalanceEnough\r\n              ? <FormattedMessage id=\"deposit198.1\" defaultMessage=\"create Ethereum Contract.{br}Please wait, it can take a few minutes...\" values={{ br: <br /> }} />\r\n              : <FormattedMessage id=\"deposit198\" defaultMessage=\"waiting for payment...\" />\r\n            }\r\n            <a styleName=\"loaderHolder\">\r\n              <InlineLoader />\r\n            </a>\r\n            {dynamicFee > 0 &&\r\n              <a styleName=\"included\">\r\n                <FormattedMessage\r\n                  id=\"deposit320\"\r\n                  defaultMessage=\"(included {mineerFee} {sellCurrency} miners fee) \"\r\n                  values={{\r\n                    mineerFee: dynamicFee,\r\n                    sellCurrency: swap.sellCurrency,\r\n                  }}\r\n                />\r\n              </a>}\r\n            <div>\r\n            </div>\r\n            {/* eslint-enable */}\r\n          </div>\r\n          {flow[scriptValues] !== null &&\r\n            <div styleName=\"lockTime\">\r\n              <i className=\"far fa-clock\" />\r\n              <Timer cancelTime={(flow[scriptValues].lockTime - 7200) * 1000} lockTime={flow[scriptValues].lockTime * 1000} />\r\n            </div>}\r\n        </div>\r\n      </Fragment>\r\n    )\r\n  }\r\n\r\n}\r\n"]}]}