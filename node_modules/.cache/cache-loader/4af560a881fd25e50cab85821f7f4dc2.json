{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\common\\messaging\\pubsubRoom\\createP2PNode.ts","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\common\\messaging\\pubsubRoom\\createP2PNode.ts","mtime":1614851402151},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gIkBiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yIjsKLy8gQHRzLW5vY2hlY2sKaW1wb3J0IExpYnAycCBmcm9tICdsaWJwMnAnOwppbXBvcnQgd3J0YyBmcm9tICd3cnRjJzsKaW1wb3J0IFdlYnJ0Y1N0YXIgZnJvbSAnbGlicDJwLXdlYnJ0Yy1zdGFyJzsKaW1wb3J0IEJvb3RzdHJhcCBmcm9tICdsaWJwMnAtYm9vdHN0cmFwJzsKaW1wb3J0IEdvc3NpcHN1YiBmcm9tICdsaWJwMnAtZ29zc2lwc3ViJzsKaW1wb3J0IEthZERIVCBmcm9tICdsaWJwMnAta2FkLWRodCc7CmltcG9ydCBNUExFWCBmcm9tICdsaWJwMnAtbXBsZXgnOwppbXBvcnQgU0VDSU8gZnJvbSAnbGlicDJwLXNlY2lvJzsKaW1wb3J0IFBlZXJJZCBmcm9tICdwZWVyLWlkJzsKCnZhciBjcmVhdGVQMlBOb2RlID0gZnVuY3Rpb24gY3JlYXRlUDJQTm9kZShvcHRpb25zKSB7CiAgdmFyIGxpc3RlbiA9IG9wdGlvbnMubGlzdGVuLAogICAgICBkaXNjb3ZlcnlQZWVycyA9IG9wdGlvbnMuZGlzY292ZXJ5UGVlcnMsCiAgICAgIHBlZXJJZEpzb24gPSBvcHRpb25zLnBlZXJJZEpzb247CiAgdmFyIGRlZmF1bHRMaXN0ZW4gPSBbLy8nL2lwNC8wLjAuMC4wL3RjcC80MDAyJywKICAnL2RuczQvd2VicnRjLXN0YXItMS5zd2Fwb25saW5lLmlvL3RjcC80NDMvd3NzL3AycC13ZWJydGMtc3Rhci8nIC8vJy9kbnM0L3dlYnJ0Yy1zdGFyLmRpc2NvdmVyeS5saWJwMnAuaW8vdGNwLzQ0My93c3MvcDJwLXdlYnJ0Yy1zdGFyJywKICAvLycvZG5zNC9zZWN1cmUtYmV5b25kLTEyODc4Lmhlcm9rdWFwcC5jb20vdGNwLzQ0My93c3MvcDJwLXdlYnJ0Yy1zdGFyLycsCiAgLy8nL2RuczQvd3J0Yy1zdGFyMi5zamMuZHdlYm9wcy5wdWIvdGNwLzQ0My93c3MvcDJwLXdlYnJ0Yy1zdGFyLycKICBdOwogIHZhciBkZWZhdWx0RGlzY292ZXJ5UGVlcnMgPSBbJy9kbnM0L2Ftcy0xLmJvb3RzdHJhcC5saWJwMnAuaW8vdGNwLzQ0My93c3MvcDJwL1FtU29MZXIyNjVOUmdTcDJMQTNkUGFleWtpUzFKNkRpZlRDODhmNXVWUUtOQWQnLCAnL2RuczQvbG9uLTEuYm9vdHN0cmFwLmxpYnAycC5pby90Y3AvNDQzL3dzcy9wMnAvUW1Tb0xNZVdxQjdZR1ZMSk4zcE5MUXBtbUVrMzV2NndZdHNNR0x6U3I1UUJVMycsICcvZG5zNC9zZm8tMy5ib290c3RyYXAubGlicDJwLmlvL3RjcC80NDMvd3NzL3AycC9RbVNvTFBwcHVCdFFTR3dLRFpUMk03M1VMcGp2ZmQzYVo2aGE0b0ZHTDFLckdNJywgJy9kbnM0L3NncC0xLmJvb3RzdHJhcC5saWJwMnAuaW8vdGNwLzQ0My93c3MvcDJwL1FtU29MU2FmVE1Cc1BLYWRURWdhWGN0RFFWY3FOODhDTkxIWE1rVE53TUtQbnUnLCAnL2RuczQvbnljLTEuYm9vdHN0cmFwLmxpYnAycC5pby90Y3AvNDQzL3dzcy9wMnAvUW1Tb0x1ZVI0eEJlVWJZOVdaOXhHVVV4dW5iS1djck5GVERBYWRRSm1vY25XbScsICcvZG5zNC9ueWMtMi5ib290c3RyYXAubGlicDJwLmlvL3RjcC80NDMvd3NzL3AycC9RbVNvTFY0QmJtNTFqTTlDNGdEWVpROUN5M1U2YVhNSkRBYnpndTJmemFEczY0J107CiAgLyoNCiAgICBpcGZzIGRpc2NvdmVyeSBwZWVycw0KICAgIDA6ICIvZG5zNC9hbXMtMS5ib290c3RyYXAubGlicDJwLmlvL3RjcC80NDMvd3NzL2lwZnMvUW1Tb0xlcjI2NU5SZ1NwMkxBM2RQYWV5a2lTMUo2RGlmVEM4OGY1dVZRS05BZCINCiAgICAxOiAiL2RuczQvbG9uLTEuYm9vdHN0cmFwLmxpYnAycC5pby90Y3AvNDQzL3dzcy9pcGZzL1FtU29MTWVXcUI3WUdWTEpOM3BOTFFwbW1FazM1djZ3WXRzTUdMelNyNVFCVTMiDQogICAgMjogIi9kbnM0L3Nmby0zLmJvb3RzdHJhcC5saWJwMnAuaW8vdGNwLzQ0My93c3MvaXBmcy9RbVNvTFBwcHVCdFFTR3dLRFpUMk03M1VMcGp2ZmQzYVo2aGE0b0ZHTDFLckdNIg0KICAgIDM6ICIvZG5zNC9zZ3AtMS5ib290c3RyYXAubGlicDJwLmlvL3RjcC80NDMvd3NzL2lwZnMvUW1Tb0xTYWZUTUJzUEthZFRFZ2FYY3REUVZjcU44OENOTEhYTWtUTndNS1BudSINCiAgICA0OiAiL2RuczQvbnljLTEuYm9vdHN0cmFwLmxpYnAycC5pby90Y3AvNDQzL3dzcy9pcGZzL1FtU29MdWVSNHhCZVViWTlXWjl4R1VVeHVuYktXY3JORlREQWFkUUptb2NuV20iDQogICAgNTogIi9kbnM0L255Yy0yLmJvb3RzdHJhcC5saWJwMnAuaW8vdGNwLzQ0My93c3MvaXBmcy9RbVNvTFY0QmJtNTFqTTlDNGdEWVpROUN5M1U2YVhNSkRBYnpndTJmemFEczY0Ig0KICAgIDY6ICIvZG5zNC9ub2RlMC5wcmVsb2FkLmlwZnMuaW8vdGNwLzQ0My93c3MvaXBmcy9RbVpNeE5kcE1rZXdpVlpMTVJ4YU54VWVacERVYjM0cFdqWjFrWnZzZDE2WmljIg0KICAgIDc6ICIvZG5zNC9ub2RlMS5wcmVsb2FkLmlwZnMuaW8vdGNwLzQ0My93c3MvaXBmcy9RbWJ1dDlZd3o5WUVEcno4eVNCU2dXeUprNDFVdm0yUUpQaHdESnpKeUdGc0Q2Ig0KICAqLwogIC8vIEJ1aWxkIGFuZCByZXR1cm4gb3VyIGxpYnAycCBub2RlCgogIHJldHVybiBuZXcgUHJvbWlzZSggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIHBlZXJJZCwgcDJwTm9kZTsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSBwZWVySWQKICAgICAgICAgICAgICBwZWVySWQgPSBudWxsOwoKICAgICAgICAgICAgICBpZiAoIXBlZXJJZEpzb24pIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDI7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIFBlZXJJZC5jcmVhdGVGcm9tSlNPTihwZWVySWRKc29uKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBwZWVySWQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gODsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDIpOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBpZiAocGVlcklkKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICByZXR1cm4gUGVlcklkLmNyZWF0ZSgpOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBwZWVySWQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUGVlciBpZDonLCBwZWVySWQuX2lkQjU4U3RyaW5nKTsKICAgICAgICAgICAgICBwMnBOb2RlID0gbmV3IExpYnAycCh7CiAgICAgICAgICAgICAgICBwZWVySWQ6IHBlZXJJZCwKICAgICAgICAgICAgICAgIGFkZHJlc3NlczogewogICAgICAgICAgICAgICAgICBsaXN0ZW46IGxpc3RlbiB8fCBkZWZhdWx0TGlzdGVuCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbW9kdWxlczogewogICAgICAgICAgICAgICAgICB0cmFuc3BvcnQ6IFtXZWJydGNTdGFyXSwKICAgICAgICAgICAgICAgICAgc3RyZWFtTXV4ZXI6IFtNUExFWF0sCiAgICAgICAgICAgICAgICAgIGNvbm5FbmNyeXB0aW9uOiBbU0VDSU9dLAogICAgICAgICAgICAgICAgICAvLyBACiAgICAgICAgICAgICAgICAgIHBlZXJEaXNjb3Zlcnk6IFtCb290c3RyYXBdLAogICAgICAgICAgICAgICAgICBkaHQ6IEthZERIVCwKICAgICAgICAgICAgICAgICAgcHVic3ViOiBHb3NzaXBzdWIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjb25maWc6IHsKICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0OiBfZGVmaW5lUHJvcGVydHkoe30sIFdlYnJ0Y1N0YXIucHJvdG90eXBlW1N5bWJvbC50b1N0cmluZ1RhZ10sIHsKICAgICAgICAgICAgICAgICAgICB3cnRjOiB3cnRjCiAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICBwZWVyRGlzY292ZXJ5OiB7CiAgICAgICAgICAgICAgICAgICAgYXV0b0RpYWw6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgLy8gQAogICAgICAgICAgICAgICAgICAgIHdlYlJUQ1N0YXI6IHsKICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGJvb3RzdHJhcDogewogICAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgIGludGVydmFsOiAxMGUzLAogICAgICAgICAgICAgICAgICAgICAgbGlzdDogZGlzY292ZXJ5UGVlcnMgfHwgZGVmYXVsdERpc2NvdmVyeVBlZXJzCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBkaWFsZXI6IHsKICAgICAgICAgICAgICAgICAgICBtYXhQYXJhbGxlbERpYWxzOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgbWF4RGlhbHNQZXJQZWVyOiAxMDAsCiAgICAgICAgICAgICAgICAgICAgZGlhbFRpbWVvdXQ6IDMwZTMKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbk1hbmFnZXI6IHsKICAgICAgICAgICAgICAgICAgICBtYXhDb25uZWN0aW9uczogSW5maW5pdHksCiAgICAgICAgICAgICAgICAgICAgbWluQ29ubmVjdGlvbnM6IDAsCiAgICAgICAgICAgICAgICAgICAgcG9sbEludGVydmFsOiA1MDAsCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFBlZXJWYWx1ZTogMSwKICAgICAgICAgICAgICAgICAgICBtYXhEYXRhOiBJbmZpbml0eSwKICAgICAgICAgICAgICAgICAgICBtYXhTZW50RGF0YTogSW5maW5pdHksCiAgICAgICAgICAgICAgICAgICAgbWF4UmVjZWl2ZWREYXRhOiBJbmZpbml0eSwKICAgICAgICAgICAgICAgICAgICBtYXhFdmVudExvb3BEZWxheTogSW5maW5pdHksCiAgICAgICAgICAgICAgICAgICAgbW92aW5nQXZlcmFnZUludGVydmFsOiAxMDAwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIC8vIEAKICAgICAgICAgICAgICAgICAgcmVsYXk6IHsKICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGhvcDogewogICAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZGh0OiB7CiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICByYW5kb21XYWxrOiB7CiAgICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgcmVzb2x2ZShwMnBOb2RlKTsKCiAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMiwgOF1dKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIpIHsKICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpKTsKfTsKCmV4cG9ydCBkZWZhdWx0IGNyZWF0ZVAyUE5vZGU7"},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/common/messaging/pubsubRoom/createP2PNode.ts"],"names":["Libp2p","wrtc","WebrtcStar","Bootstrap","Gossipsub","KadDHT","MPLEX","SECIO","PeerId","createP2PNode","options","listen","discoveryPeers","peerIdJson","defaultListen","defaultDiscoveryPeers","Promise","resolve","reject","peerId","createFromJSON","create","console","log","_idB58String","p2pNode","addresses","modules","transport","streamMuxer","connEncryption","peerDiscovery","dht","pubsub","config","prototype","Symbol","toStringTag","autoDial","webRTCStar","enabled","bootstrap","interval","list","dialer","maxParallelDials","maxDialsPerPeer","dialTimeout","connectionManager","maxConnections","Infinity","minConnections","pollInterval","defaultPeerValue","maxData","maxSentData","maxReceivedData","maxEventLoopDelay","movingAverageInterval","relay","hop","active","randomWalk"],"mappings":"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","sourcesContent":["// @ts-nocheck\r\nimport Libp2p from 'libp2p'\r\nimport wrtc from 'wrtc'\r\nimport WebrtcStar from 'libp2p-webrtc-star'\r\nimport Bootstrap from 'libp2p-bootstrap'\r\nimport Gossipsub from 'libp2p-gossipsub'\r\nimport KadDHT from 'libp2p-kad-dht'\r\nimport MPLEX from 'libp2p-mplex'\r\nimport SECIO from 'libp2p-secio'\r\nimport PeerId from 'peer-id'\r\n\r\n\r\nconst createP2PNode = (options) => {\r\n  const {\r\n    listen,\r\n    discoveryPeers,\r\n    peerIdJson,\r\n  } = options\r\n\r\n  const defaultListen = [\r\n    //'/ip4/0.0.0.0/tcp/4002',\r\n    '/dns4/webrtc-star-1.swaponline.io/tcp/443/wss/p2p-webrtc-star/',\r\n    //'/dns4/webrtc-star.discovery.libp2p.io/tcp/443/wss/p2p-webrtc-star',\r\n    //'/dns4/secure-beyond-12878.herokuapp.com/tcp/443/wss/p2p-webrtc-star/',\r\n    //'/dns4/wrtc-star2.sjc.dwebops.pub/tcp/443/wss/p2p-webrtc-star/'\r\n  ]\r\n\r\n  const defaultDiscoveryPeers = [\r\n    '/dns4/ams-1.bootstrap.libp2p.io/tcp/443/wss/p2p/QmSoLer265NRgSp2LA3dPaeykiS1J6DifTC88f5uVQKNAd',\r\n    '/dns4/lon-1.bootstrap.libp2p.io/tcp/443/wss/p2p/QmSoLMeWqB7YGVLJN3pNLQpmmEk35v6wYtsMGLzSr5QBU3',\r\n    '/dns4/sfo-3.bootstrap.libp2p.io/tcp/443/wss/p2p/QmSoLPppuBtQSGwKDZT2M73ULpjvfd3aZ6ha4oFGL1KrGM',\r\n    '/dns4/sgp-1.bootstrap.libp2p.io/tcp/443/wss/p2p/QmSoLSafTMBsPKadTEgaXctDQVcqN88CNLHXMkTNwMKPnu',\r\n    '/dns4/nyc-1.bootstrap.libp2p.io/tcp/443/wss/p2p/QmSoLueR4xBeUbY9WZ9xGUUxunbKWcrNFTDAadQJmocnWm',\r\n    '/dns4/nyc-2.bootstrap.libp2p.io/tcp/443/wss/p2p/QmSoLV4Bbm51jM9C4gDYZQ9Cy3U6aXMJDAbzgu2fzaDs64',\r\n  ]\r\n\r\n  /*\r\n    ipfs discovery peers\r\n    0: \"/dns4/ams-1.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLer265NRgSp2LA3dPaeykiS1J6DifTC88f5uVQKNAd\"\r\n    1: \"/dns4/lon-1.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLMeWqB7YGVLJN3pNLQpmmEk35v6wYtsMGLzSr5QBU3\"\r\n    2: \"/dns4/sfo-3.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLPppuBtQSGwKDZT2M73ULpjvfd3aZ6ha4oFGL1KrGM\"\r\n    3: \"/dns4/sgp-1.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLSafTMBsPKadTEgaXctDQVcqN88CNLHXMkTNwMKPnu\"\r\n    4: \"/dns4/nyc-1.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLueR4xBeUbY9WZ9xGUUxunbKWcrNFTDAadQJmocnWm\"\r\n    5: \"/dns4/nyc-2.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLV4Bbm51jM9C4gDYZQ9Cy3U6aXMJDAbzgu2fzaDs64\"\r\n    6: \"/dns4/node0.preload.ipfs.io/tcp/443/wss/ipfs/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic\"\r\n    7: \"/dns4/node1.preload.ipfs.io/tcp/443/wss/ipfs/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6\"\r\n  */\r\n\r\n  // Build and return our libp2p node\r\n  return new Promise(async (resolve, reject) => {\r\n    // Generate peerId\r\n    let peerId = null\r\n    if (peerIdJson) {\r\n      try {\r\n        peerId = await PeerId.createFromJSON(peerIdJson)\r\n      } catch (e) {}\r\n    }\r\n\r\n    if (!peerId) {\r\n      peerId = await PeerId.create()\r\n    }\r\n\r\n    console.log('Peer id:', peerId._idB58String)\r\n\r\n    const p2pNode = new Libp2p({\r\n      peerId,\r\n      addresses: {\r\n        listen: (listen || defaultListen),\r\n      },\r\n      modules: {\r\n        transport: [WebrtcStar],\r\n        streamMuxer: [MPLEX],\r\n        connEncryption: [SECIO],\r\n        // @\r\n        peerDiscovery: [Bootstrap],\r\n        dht: KadDHT,\r\n        pubsub: Gossipsub\r\n      },\r\n      config: {\r\n        transport: {\r\n          [WebrtcStar.prototype[Symbol.toStringTag]]: {\r\n            wrtc\r\n          }\r\n        },\r\n        peerDiscovery: {\r\n          autoDial: true,\r\n          // @\r\n          webRTCStar: {\r\n            enabled: true\r\n          },\r\n          bootstrap: {\r\n            enabled: true,\r\n            interval: 10e3,\r\n            list: discoveryPeers || defaultDiscoveryPeers,\r\n          }\r\n        },\r\n        dialer: {\r\n          maxParallelDials: 100,\r\n          maxDialsPerPeer: 100,\r\n          dialTimeout: 30e3\r\n        },\r\n        connectionManager: {\r\n          maxConnections: Infinity,\r\n          minConnections: 0,\r\n          pollInterval: 500,\r\n          defaultPeerValue: 1,\r\n          maxData: Infinity,\r\n          maxSentData: Infinity,\r\n          maxReceivedData: Infinity,\r\n          maxEventLoopDelay: Infinity,\r\n          movingAverageInterval: 1000\r\n        },\r\n        // @\r\n        relay: {\r\n          enabled: true,\r\n          hop: {\r\n            enabled: true,\r\n            active: true,\r\n          }\r\n        },\r\n        dht: {\r\n          enabled: true,\r\n          randomWalk: {\r\n            enabled: true,\r\n          }\r\n        }\r\n      }\r\n    })\r\n    resolve(p2pNode)\r\n  })\r\n}\r\n\r\n\r\nexport default createP2PNode\r\n"]}]}