{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\pages\\Wallet\\Row\\Row.tsx","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\pages\\Wallet\\Row\\Row.tsx","mtime":1614852596318},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI7CmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXNzZXJ0VGhpc0luaXRpYWxpemVkIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9nZXRQcm90b3R5cGVPZiI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSI7Cgp2YXIgX2RlYywgX2RlYzIsIF9jbGFzcywgX3RlbXA7CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICJAYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvciI7CgpmdW5jdGlvbiBfY3JlYXRlU3VwZXIoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfQoKZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSAidW5kZWZpbmVkIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gImZ1bmN0aW9uIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH0KCi8vIEB0cy1ub2NoZWNrCmltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQsIEZyYWdtZW50IH0gZnJvbSAncmVhY3QnOwppbXBvcnQgYWN0aW9ucyBmcm9tICdyZWR1eC9hY3Rpb25zJzsKaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlZGFjdGlvbic7CmltcG9ydCBoZWxwZXJzLCB7IGNvbnN0YW50cyB9IGZyb20gJ2hlbHBlcnMnOwppbXBvcnQgY29uZmlnIGZyb20gJ2hlbHBlcnMvZXh0ZXJuYWxDb25maWcnOwppbXBvcnQgeyBpc01vYmlsZSB9IGZyb20gJ3JlYWN0LWRldmljZS1kZXRlY3QnOwppbXBvcnQgY3NzTW9kdWxlcyBmcm9tICdyZWFjdC1jc3MtbW9kdWxlcyc7CmltcG9ydCBzdHlsZXMgZnJvbSAnLi9Sb3cuc2Nzcyc7CmltcG9ydCBtZXRhbWFzayBmcm9tICdoZWxwZXJzL21ldGFtYXNrJzsKaW1wb3J0IENvaW4gZnJvbSAnY29tcG9uZW50cy9Db2luL0NvaW4nOwppbXBvcnQgSW5saW5lTG9hZGVyIGZyb20gJ2NvbXBvbmVudHMvbG9hZGVycy9JbmxpbmVMb2FkZXIvSW5saW5lTG9hZGVyJzsKaW1wb3J0IERyb3Bkb3duTWVudSBmcm9tICdjb21wb25lbnRzL3VpL0Ryb3Bkb3duTWVudS9Ecm9wZG93bk1lbnUnOwppbXBvcnQgeyB3aXRoUm91dGVyIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7CmltcG9ydCB7IEZvcm1hdHRlZE1lc3NhZ2UsIGluamVjdEludGwsIGRlZmluZU1lc3NhZ2VzIH0gZnJvbSAncmVhY3QtaW50bCc7CmltcG9ydCB7IGxvY2FsaXNlZFVybCB9IGZyb20gJ2hlbHBlcnMvbG9jYWxlJzsKaW1wb3J0IHsgQmlnTnVtYmVyIH0gZnJvbSAnYmlnbnVtYmVyLmpzJzsKaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnY29tcG9uZW50cy9jb250cm9scyc7CmltcG9ydCB3ZWIzSWNvbnMgZnJvbSAnLi4vLi4vLi4vaW1hZ2VzJzsKaW1wb3J0IFBhcnRPZkFkZHJlc3MgZnJvbSAnLi4vY29tcG9uZW50cy9QYXJ0T2ZBZGRyZXNzJzsKaW1wb3J0IFRvb2x0aXAgZnJvbSAnY29tcG9uZW50cy91aS9Ub29sdGlwL1Rvb2x0aXAnOwppbXBvcnQgeyBBcGlFbmRwb2ludCB9IGZyb20gJy4uL2NvbXBvbmVudHMvRW5kcG9pbnRzJzsKaW1wb3J0IENvcHkgZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy91aS9Db3B5L0NvcHknOwp2YXIgbGFuZ0xhYmVscyA9IGRlZmluZU1lc3NhZ2VzKHsKICB1bmNvbmZpcm1lZEJhbGFuY2U6IHsKICAgIGlkOiAnUm93V2FsbGV0MTgxJywKICAgIGRlZmF1bHRNZXNzYWdlOiAiVW5jb25maXJtZWQgYmFsYW5jZSIKICB9LAogIG1zQ29uZmlybUNvdW50OiB7CiAgICBpZDogJ1Jvd1dhbGxldF9Nc0NvbmZpcm1Db3VudE1vYmlsZScsCiAgICBkZWZhdWx0TWVzc2FnZTogIntjb3VudH0gdHggd2FpdCB5b3VyIGNvbmZpcm0iCiAgfQp9KTsKdmFyIFJvdyA9IChfZGVjID0gY29ubmVjdChmdW5jdGlvbiAoX3JlZiwgX3JlZjIpIHsKICB2YXIgcmVtZW1iZXJlZE9yZGVycyA9IF9yZWYucmVtZW1iZXJlZE9yZGVycywKICAgICAgX3JlZiR1c2VyID0gX3JlZi51c2VyLAogICAgICBhY3RpdmVGaWF0ID0gX3JlZiR1c2VyLmFjdGl2ZUZpYXQsCiAgICAgIF9yZWYkdXNlciRldGhEYXRhID0gX3JlZiR1c2VyLmV0aERhdGEsCiAgICAgIGFkZHJlc3MgPSBfcmVmJHVzZXIkZXRoRGF0YS5hZGRyZXNzLAogICAgICBwcml2YXRlS2V5ID0gX3JlZiR1c2VyJGV0aERhdGEucHJpdmF0ZUtleSwKICAgICAgbXVsdGlzaWdTdGF0dXMgPSBfcmVmJHVzZXIubXVsdGlzaWdTdGF0dXM7CiAgdmFyIGN1cnJlbmN5ID0gX3JlZjIuY3VycmVuY3k7CiAgcmV0dXJuIHsKICAgIGFjdGl2ZUZpYXQ6IGFjdGl2ZUZpYXQsCiAgICBkZWNsaW5lOiByZW1lbWJlcmVkT3JkZXJzLnNhdmVkT3JkZXJzLAogICAgbXVsdGlzaWdTdGF0dXM6IG11bHRpc2lnU3RhdHVzLAogICAgZXRoRGF0YUhlbHBlcjogewogICAgICBhZGRyZXNzOiBhZGRyZXNzLAogICAgICBwcml2YXRlS2V5OiBwcml2YXRlS2V5CiAgICB9CiAgfTsKfSksIF9kZWMyID0gY3NzTW9kdWxlcyhzdHlsZXMsIHsKICBhbGxvd011bHRpcGxlOiB0cnVlCn0pLCBpbmplY3RJbnRsKF9jbGFzcyA9IHdpdGhSb3V0ZXIoX2NsYXNzID0gX2RlYyhfY2xhc3MgPSBfZGVjMihfY2xhc3MgPSAoX3RlbXAgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9Db21wb25lbnQpIHsKICBfaW5oZXJpdHMoUm93LCBfQ29tcG9uZW50KTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihSb3cpOwoKICAvKioNCiAgICogQG1ldGhvZCBoYW5kbGVSZWxvYWRCYWxhbmNlDQogICAqIEBtZXRob2QgaGFuZGxlU2xpY2VBZGRyZXNzDQogICAqIEBtZXRob2QgaGFuZGxlRGlzY29ubmVjdFdhbGxldA0KICAgKiBAbWV0aG9kIGhhbmRsZUNvbm5lY3RNZXRhbWFzaw0KICAgKiBAbWV0aG9kIGhhbmRsZVdpdGhkcmF3UG9wdXANCiAgICogQG1ldGhvZCBoYW5kbGVXaXRoZHJhdw0KICAgKiBAbWV0aG9kIGhhbmRsZVJlY2VpdmUNCiAgICogQG1ldGhvZCBoYW5kbGVBY3RpdmF0ZVByb3RlY3RlZA0KICAgKiBAbWV0aG9kIGhhbmRsZUFjdGl2YXRlUGluUHJvdGVjdGVkDQogICAqIEBtZXRob2QgaGFuZGxlR2VuZXJhdGVNdWx0aXNpZ25MaW5rDQogICAqIEBtZXRob2QgaGFuZGxlSG93VG9XaXRoZHJhdw0KICAgKiBAbWV0aG9kIGhhbmRsZU9wZW5Ecm9wZG93bg0KICAgKiBAbWV0aG9kIGhhbmRsZUNyZWF0ZUludm9pY2VMaW5rDQogICAqIEBtZXRob2QgaGFuZGxlU3dpdGNoTXVsdGlzaWduDQogICAqIEBtZXRob2QgaGFuZGxlQ3JlYXRlSW52b2ljZQ0KICAgKg0KICAgKiBAbWV0aG9kIGdvVG9FeGNoYW5nZQ0KICAgKiBAbWV0aG9kIGdvVG9DdXJyZW5jeUhpc3RvcnkNCiAgICogQG1ldGhvZCBoaWRlQ3VycmVuY3kNCiAgICoNCiAgICogQG1ldGhvZCBjb3B5DQogICAqIEBtZXRob2QgY29weVByaXZhdGVLZXkNCiAgICogQG1ldGhvZCBoYW5kbGVTaG93TW5lbW9uaWMNCiAgICovCiAgZnVuY3Rpb24gUm93KHByb3BzKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJvdyk7CgogICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcyk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAicHJvcHMiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgInN0YXRlIiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVSZWxvYWRCYWxhbmNlIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgaXNCYWxhbmNlRmV0Y2hpbmcgPSBfdGhpcy5zdGF0ZS5pc0JhbGFuY2VGZXRjaGluZzsKICAgICAgdmFyIF90aGlzJHByb3BzJGl0ZW1EYXRhID0gX3RoaXMucHJvcHMuaXRlbURhdGEsCiAgICAgICAgICBpc01ldGFtYXNrID0gX3RoaXMkcHJvcHMkaXRlbURhdGEuaXNNZXRhbWFzaywKICAgICAgICAgIGlzQ29ubmVjdGVkID0gX3RoaXMkcHJvcHMkaXRlbURhdGEuaXNDb25uZWN0ZWQsCiAgICAgICAgICBpc0VSQzIwID0gX3RoaXMkcHJvcHMkaXRlbURhdGEuaXNFUkMyMDsKCiAgICAgIGlmIChpc0JhbGFuY2VGZXRjaGluZykgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CgogICAgICBpZiAoaXNNZXRhbWFzayAmJiAhaXNDb25uZWN0ZWQpIHsKICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICBpc0JhbGFuY2VGZXRjaGluZzogdHJ1ZQogICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgaXNCYWxhbmNlRmV0Y2hpbmc6IGZhbHNlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSwgNTAwKTsKICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBpc0JhbGFuY2VGZXRjaGluZzogdHJ1ZQogICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgc2V0VGltZW91dCggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgICB2YXIgX3RoaXMkcHJvcHMkaXRlbURhdGEyLCBjdXJyZW5jeSwgYWRkcmVzczsKCiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBfdGhpcyRwcm9wcyRpdGVtRGF0YTIgPSBfdGhpcy5wcm9wcy5pdGVtRGF0YSwgY3VycmVuY3kgPSBfdGhpcyRwcm9wcyRpdGVtRGF0YTIuY3VycmVuY3ksIGFkZHJlc3MgPSBfdGhpcyRwcm9wcyRpdGVtRGF0YTIuYWRkcmVzczsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBjdXJyZW5jeTsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IF9jb250ZXh0LnQwID09PSAnQlRDIChTTVMtUHJvdGVjdGVkKScgPyA0IDogX2NvbnRleHQudDAgPT09ICdCVEMgKE11bHRpc2lnKScgPyA3IDogX2NvbnRleHQudDAgPT09ICdCVEMgKFBJTi1Qcm90ZWN0ZWQpJyA/IDEwIDogMTM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgIHJldHVybiBhY3Rpb25zLmJ0Y211bHRpc2lnLmdldEJhbGFuY2UoKTsKCiAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoImJyZWFrIiwgMjApOwoKICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBhY3Rpb25zLmJ0Y211bHRpc2lnLmdldEJhbGFuY2VVc2VyKGFkZHJlc3MpOwoKICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgiYnJlYWsiLCAyMCk7CgogICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICByZXR1cm4gYWN0aW9ucy5idGNtdWx0aXNpZy5nZXRCYWxhbmNlUGluKCk7CgogICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgiYnJlYWsiLCAyMCk7CgogICAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgaWYgKCEoaXNNZXRhbWFzayAmJiAhaXNFUkMyMCkpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNjsKICAgICAgICAgICAgICAgICAgcmV0dXJuIG1ldGFtYXNrLmdldEJhbGFuY2UoKTsKCiAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjdGlvbnNbY3VycmVuY3kudG9Mb3dlckNhc2UoKV0uZ2V0QmFsYW5jZShjdXJyZW5jeS50b0xvd2VyQ2FzZSgpLCBhZGRyZXNzKTsKCiAgICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgIGlzQmFsYW5jZUZldGNoaW5nOiBmYWxzZQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgfSkpLCAyNTApOwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZVNsaWNlQWRkcmVzcyIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGFkZHJlc3MgPSBfdGhpcy5wcm9wcy5pdGVtRGF0YS5hZGRyZXNzOwogICAgICB2YXIgZmlyc3RQYXJ0ID0gYWRkcmVzcy5zdWJzdHIoMCwgNik7CiAgICAgIHZhciBzZWNvbmRQYXJ0ID0gYWRkcmVzcy5zdWJzdHIoYWRkcmVzcy5sZW5ndGggLSA0KTsKICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lcldpZHRoIDwgNzAwIHx8IGlzTW9iaWxlIHx8IGFkZHJlc3MubGVuZ3RoID4gNDIgPyAiIi5jb25jYXQoZmlyc3RQYXJ0LCAiLi4uIikuY29uY2F0KHNlY29uZFBhcnQpIDogYWRkcmVzczsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZUNvbm5lY3RNZXRhbWFzayIsIGZ1bmN0aW9uICgpIHsKICAgICAgbWV0YW1hc2suY29ubmVjdCh7fSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3JlZjQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihjb25uZWN0ZWQpIHsKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBpZiAoIWNvbm5lY3RlZCkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICByZXR1cm4gYWN0aW9ucy51c2VyLnNpZ24oKTsKCiAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjdGlvbnMudXNlci5nZXRCYWxhbmNlcygpOwoKICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgcmV0dXJuIF9yZWY0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSgpKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZVdpdGhkcmF3UG9wdXAiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLAogICAgICAgICAgY3VycmVuY3kgPSBfdGhpcyRwcm9wcy5pdGVtRGF0YS5jdXJyZW5jeSwKICAgICAgICAgIGl0ZW1EYXRhID0gX3RoaXMkcHJvcHMuaXRlbURhdGE7CiAgICAgIGFjdGlvbnMubW9kYWxzLm9wZW4oY29uc3RhbnRzLm1vZGFscy5XaXRoZHJhdywgaXRlbURhdGEpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlV2l0aGRyYXciLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wczIgPSBfdGhpcy5wcm9wcywKICAgICAgICAgIF90aGlzJHByb3BzMiRpdGVtRGF0YSA9IF90aGlzJHByb3BzMi5pdGVtRGF0YSwKICAgICAgICAgIGN1cnJlbmN5ID0gX3RoaXMkcHJvcHMyJGl0ZW1EYXRhLmN1cnJlbmN5LAogICAgICAgICAgYWRkcmVzcyA9IF90aGlzJHByb3BzMiRpdGVtRGF0YS5hZGRyZXNzLAogICAgICAgICAgaGlzdG9yeSA9IF90aGlzJHByb3BzMi5oaXN0b3J5LAogICAgICAgICAgbG9jYWxlID0gX3RoaXMkcHJvcHMyLmludGwubG9jYWxlOwoKICAgICAgaWYgKGN1cnJlbmN5LnRvTG93ZXJDYXNlKCkgPT09ICdnaG9zdCcpIHsKICAgICAgICBfdGhpcy5oYW5kbGVXaXRoZHJhd1BvcHVwKCk7CgogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGN1cnJlbmN5LnRvTG93ZXJDYXNlKCkgPT09ICduZXh0JykgewogICAgICAgIF90aGlzLmhhbmRsZVdpdGhkcmF3UG9wdXAoKTsKCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgdGFyZ2V0Q3VycmVuY3kgPSBjdXJyZW5jeTsKCiAgICAgIHN3aXRjaCAoY3VycmVuY3kudG9Mb3dlckNhc2UoKSkgewogICAgICAgIGNhc2UgJ2J0YyAobXVsdGlzaWcpJzoKICAgICAgICBjYXNlICdidGMgKHNtcy1wcm90ZWN0ZWQpJzoKICAgICAgICBjYXNlICdidGMgKHBpbi1wcm90ZWN0ZWQpJzoKICAgICAgICAgIHRhcmdldEN1cnJlbmN5ID0gJ2J0Yyc7CiAgICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgdmFyIGlzVG9rZW4gPSBoZWxwZXJzLmV0aFRva2VuLmlzRXRoVG9rZW4oewogICAgICAgIG5hbWU6IGN1cnJlbmN5CiAgICAgIH0pOwogICAgICBoaXN0b3J5LnB1c2gobG9jYWxpc2VkVXJsKGxvY2FsZSwgKGlzVG9rZW4gPyAnL3Rva2VuJyA6ICcnKSArICIvIi5jb25jYXQodGFyZ2V0Q3VycmVuY3ksICIvIikuY29uY2F0KGFkZHJlc3MsICIvc2VuZCIpKSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVSZWNlaXZlIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3RoaXMkcHJvcHMkaXRlbURhdGEzID0gX3RoaXMucHJvcHMuaXRlbURhdGEsCiAgICAgICAgICBjdXJyZW5jeSA9IF90aGlzJHByb3BzJGl0ZW1EYXRhMy5jdXJyZW5jeSwKICAgICAgICAgIGFkZHJlc3MgPSBfdGhpcyRwcm9wcyRpdGVtRGF0YTMuYWRkcmVzczsKICAgICAgYWN0aW9ucy5tb2RhbHMub3Blbihjb25zdGFudHMubW9kYWxzLlJlY2VpdmVNb2RhbCwgewogICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeSwKICAgICAgICBhZGRyZXNzOiBhZGRyZXNzCiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlQWN0aXZhdGVQcm90ZWN0ZWQiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGFjdGlvbnMubW9kYWxzLm9wZW4oY29uc3RhbnRzLm1vZGFscy5SZWdpc3RlclNNU1Byb3RlY3RlZCwge30pOwoKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTMpOwogICAgfSkpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVBY3RpdmF0ZVBpblByb3RlY3RlZCIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgYWN0aW9ucy5tb2RhbHMub3Blbihjb25zdGFudHMubW9kYWxzLlJlZ2lzdGVyUElOUHJvdGVjdGVkLCB7fSk7CgogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlNCk7CiAgICB9KSkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZUdlbmVyYXRlTXVsdGlzaWduTGluayIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgYWN0aW9ucy5tb2RhbHMub3Blbihjb25zdGFudHMubW9kYWxzLk11bHRpc2lnbkpvaW5MaW5rLCB7fSk7CgogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlNSk7CiAgICB9KSkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZUhvd1RvV2l0aGRyYXciLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wcyRpdGVtRGF0YTQgPSBfdGhpcy5wcm9wcy5pdGVtRGF0YSwKICAgICAgICAgIGN1cnJlbmN5ID0gX3RoaXMkcHJvcHMkaXRlbURhdGE0LmN1cnJlbmN5LAogICAgICAgICAgYWRkcmVzcyA9IF90aGlzJHByb3BzJGl0ZW1EYXRhNC5hZGRyZXNzOwogICAgICBhY3Rpb25zLm1vZGFscy5vcGVuKGNvbnN0YW50cy5tb2RhbHMuSG93VG9XaXRoZHJhd01vZGFsLCB7CiAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5LAogICAgICAgIGFkZHJlc3M6IGFkZHJlc3MKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVPcGVuRHJvcGRvd24iLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBpc0Ryb3Bkb3duT3BlbjogdHJ1ZQogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZUNyZWF0ZUludm9pY2VMaW5rIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3RoaXMkcHJvcHMkaXRlbURhdGE1ID0gX3RoaXMucHJvcHMuaXRlbURhdGEsCiAgICAgICAgICBjdXJyZW5jeSA9IF90aGlzJHByb3BzJGl0ZW1EYXRhNS5jdXJyZW5jeSwKICAgICAgICAgIGFkZHJlc3MgPSBfdGhpcyRwcm9wcyRpdGVtRGF0YTUuYWRkcmVzczsKICAgICAgYWN0aW9ucy5tb2RhbHMub3Blbihjb25zdGFudHMubW9kYWxzLkludm9pY2VMaW5rTW9kYWwsIHsKICAgICAgICBjdXJyZW5jeTogY3VycmVuY3ksCiAgICAgICAgYWRkcmVzczogYWRkcmVzcwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZVN3aXRjaE11bHRpc2lnbiIsIGZ1bmN0aW9uICgpIHsKICAgICAgYWN0aW9ucy5tb2RhbHMub3Blbihjb25zdGFudHMubW9kYWxzLkJ0Y011bHRpc2lnblN3aXRjaCk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVDcmVhdGVJbnZvaWNlIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3RoaXMkcHJvcHMkaXRlbURhdGE2ID0gX3RoaXMucHJvcHMuaXRlbURhdGEsCiAgICAgICAgICBkZWNpbWFscyA9IF90aGlzJHByb3BzJGl0ZW1EYXRhNi5kZWNpbWFscywKICAgICAgICAgIHRva2VuID0gX3RoaXMkcHJvcHMkaXRlbURhdGE2LnRva2VuLAogICAgICAgICAgY29udHJhY3RBZGRyZXNzID0gX3RoaXMkcHJvcHMkaXRlbURhdGE2LmNvbnRyYWN0QWRkcmVzcywKICAgICAgICAgIHVuY29uZmlybWVkQmFsYW5jZSA9IF90aGlzJHByb3BzJGl0ZW1EYXRhNi51bmNvbmZpcm1lZEJhbGFuY2UsCiAgICAgICAgICBjdXJyZW5jeSA9IF90aGlzJHByb3BzJGl0ZW1EYXRhNi5jdXJyZW5jeSwKICAgICAgICAgIGFkZHJlc3MgPSBfdGhpcyRwcm9wcyRpdGVtRGF0YTYuYWRkcmVzcywKICAgICAgICAgIGJhbGFuY2UgPSBfdGhpcyRwcm9wcyRpdGVtRGF0YTYuYmFsYW5jZTsKICAgICAgYWN0aW9ucy5tb2RhbHMub3Blbihjb25zdGFudHMubW9kYWxzLkludm9pY2VNb2RhbCwgewogICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeSwKICAgICAgICBhZGRyZXNzOiBhZGRyZXNzLAogICAgICAgIGNvbnRyYWN0QWRkcmVzczogY29udHJhY3RBZGRyZXNzLAogICAgICAgIGRlY2ltYWxzOiBkZWNpbWFscywKICAgICAgICB0b2tlbjogdG9rZW4sCiAgICAgICAgYmFsYW5jZTogYmFsYW5jZSwKICAgICAgICB1bmNvbmZpcm1lZEJhbGFuY2U6IHVuY29uZmlybWVkQmFsYW5jZQogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImdvVG9FeGNoYW5nZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF90aGlzJHByb3BzMyA9IF90aGlzLnByb3BzLAogICAgICAgICAgaGlzdG9yeSA9IF90aGlzJHByb3BzMy5oaXN0b3J5LAogICAgICAgICAgbG9jYWxlID0gX3RoaXMkcHJvcHMzLmludGwubG9jYWxlOwogICAgICBoaXN0b3J5LnB1c2gobG9jYWxpc2VkVXJsKGxvY2FsZSwgJy9leGNoYW5nZScpKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImdvVG9DdXJyZW5jeUhpc3RvcnkiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wczQgPSBfdGhpcy5wcm9wcywKICAgICAgICAgIGhpc3RvcnkgPSBfdGhpcyRwcm9wczQuaGlzdG9yeSwKICAgICAgICAgIGxvY2FsZSA9IF90aGlzJHByb3BzNC5pbnRsLmxvY2FsZSwKICAgICAgICAgIF90aGlzJHByb3BzNCRpdGVtRGF0YSA9IF90aGlzJHByb3BzNC5pdGVtRGF0YSwKICAgICAgICAgIGN1cnJlbmN5ID0gX3RoaXMkcHJvcHM0JGl0ZW1EYXRhLmN1cnJlbmN5LAogICAgICAgICAgYmFsYW5jZSA9IF90aGlzJHByb3BzNCRpdGVtRGF0YS5iYWxhbmNlLAogICAgICAgICAgYWRkcmVzcyA9IF90aGlzJHByb3BzNCRpdGVtRGF0YS5hZGRyZXNzOwogICAgICB2YXIgdGFyZ2V0Q3VycmVuY3kgPSBjdXJyZW5jeTsKCiAgICAgIHN3aXRjaCAoY3VycmVuY3kudG9Mb3dlckNhc2UoKSkgewogICAgICAgIGNhc2UgJ2J0YyAobXVsdGlzaWcpJzoKICAgICAgICBjYXNlICdidGMgKHNtcy1wcm90ZWN0ZWQpJzoKICAgICAgICBjYXNlICdidGMgKHBpbi1wcm90ZWN0ZWQpJzoKICAgICAgICAgIHRhcmdldEN1cnJlbmN5ID0gJ2J0Yyc7CiAgICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgdmFyIGlzVG9rZW4gPSBoZWxwZXJzLmV0aFRva2VuLmlzRXRoVG9rZW4oewogICAgICAgIG5hbWU6IGN1cnJlbmN5CiAgICAgIH0pOwogICAgICBoaXN0b3J5LnB1c2gobG9jYWxpc2VkVXJsKGxvY2FsZSwgKGlzVG9rZW4gPyAnL3Rva2VuJyA6ICcnKSArICIvIi5jb25jYXQodGFyZ2V0Q3VycmVuY3ksICIvIikuY29uY2F0KGFkZHJlc3MpKSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoaWRlQ3VycmVuY3kiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9wcyRpdGVtRGF0YTcgPSBfdGhpcy5wcm9wcy5pdGVtRGF0YSwKICAgICAgICAgIGN1cnJlbmN5ID0gX3RoaXMkcHJvcHMkaXRlbURhdGE3LmN1cnJlbmN5LAogICAgICAgICAgYWRkcmVzcyA9IF90aGlzJHByb3BzJGl0ZW1EYXRhNy5hZGRyZXNzLAogICAgICAgICAgYmFsYW5jZSA9IF90aGlzJHByb3BzJGl0ZW1EYXRhNy5iYWxhbmNlOwoKICAgICAgaWYgKGJhbGFuY2UgPiAwKSB7CiAgICAgICAgYWN0aW9ucy5tb2RhbHMub3Blbihjb25zdGFudHMubW9kYWxzLkFsZXJ0TW9kYWwsIHsKICAgICAgICAgIG1lc3NhZ2U6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgaWQ6ICJXYWxsZXRSb3dfQWN0aW9uX0hpZGVOb25aZXJvX01lc3NhZ2UiLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQyMyBcdTA0NERcdTA0NDJcdTA0M0VcdTA0MzNcdTA0M0UgXHUwNDNBXHUwNDNFXHUwNDQ4XHUwNDM1XHUwNDNCXHUwNDNBXHUwNDMwIFx1MDQzRlx1MDQzRVx1MDQzQlx1MDQzRVx1MDQzNlx1MDQzOFx1MDQ0Mlx1MDQzNVx1MDQzQlx1MDQ0Q1x1MDQzRFx1MDQ0Qlx1MDQzOSBcdTA0MzFcdTA0MzBcdTA0M0JcdTA0MzBcdTA0M0RcdTA0NDEuIFx1MDQxNVx1MDQzM1x1MDQzRSBcdTA0NDFcdTA0M0FcdTA0NDBcdTA0NEJcdTA0NDJcdTA0NEMgXHUwNDNEXHUwNDM1XHUwNDNCXHUwNDRDXHUwNDM3XHUwNDRGLiIKICAgICAgICAgIH0pCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWN0aW9ucy5jb3JlLm1hcmtDb2luQXNIaWRkZW4oIiIuY29uY2F0KGN1cnJlbmN5LCAiOiIpLmNvbmNhdChhZGRyZXNzKSk7CiAgICAgICAgYWN0aW9ucy5ub3RpZmljYXRpb25zLnNob3coY29uc3RhbnRzLm5vdGlmaWNhdGlvbnMuTWVzc2FnZSwgewogICAgICAgICAgbWVzc2FnZTogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICBpZDogIldhbGxldFJvd19BY3Rpb25fSGlkZGVuIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MUFcdTA0M0VcdTA0NDhcdTA0MzVcdTA0M0JcdTA0MzVcdTA0M0EgXHUwNDQxXHUwNDNBXHUwNDQwXHUwNDRCXHUwNDQyIgogICAgICAgICAgfSkKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiY29weSIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF90aGlzJHByb3BzJGl0ZW1EYXRhOCA9IF90aGlzLnByb3BzLml0ZW1EYXRhLAogICAgICAgICAgYWRkcmVzcyA9IF90aGlzJHByb3BzJGl0ZW1EYXRhOC5hZGRyZXNzLAogICAgICAgICAgZnVsbE5hbWUgPSBfdGhpcyRwcm9wcyRpdGVtRGF0YTguZnVsbE5hbWU7CiAgICAgIGFjdGlvbnMubW9kYWxzLm9wZW4oY29uc3RhbnRzLm1vZGFscy5XYWxsZXRBZGRyZXNzTW9kYWwsIHsKICAgICAgICBhZGRyZXNzOiBhZGRyZXNzLAogICAgICAgIGZ1bGxOYW1lOiBmdWxsTmFtZQogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImNvcHlQcml2YXRlS2V5IiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3RoaXMkcHJvcHM1ID0gX3RoaXMucHJvcHMsCiAgICAgICAgICBfdGhpcyRwcm9wczUkaXRlbURhdGEgPSBfdGhpcyRwcm9wczUuaXRlbURhdGEsCiAgICAgICAgICBhZGRyZXNzID0gX3RoaXMkcHJvcHM1JGl0ZW1EYXRhLmFkZHJlc3MsCiAgICAgICAgICBwcml2YXRlS2V5ID0gX3RoaXMkcHJvcHM1JGl0ZW1EYXRhLnByaXZhdGVLZXksCiAgICAgICAgICBmdWxsTmFtZSA9IF90aGlzJHByb3BzNSRpdGVtRGF0YS5mdWxsTmFtZSwKICAgICAgICAgIGV0aERhdGFIZWxwZXIgPSBfdGhpcyRwcm9wczUuZXRoRGF0YUhlbHBlcjsKICAgICAgYWN0aW9ucy5tb2RhbHMub3Blbihjb25zdGFudHMubW9kYWxzLlByaXZhdGVLZXlzTW9kYWwsIHsKICAgICAgICBrZXk6IGFkZHJlc3MgPT09IGV0aERhdGFIZWxwZXIuYWRkcmVzcyA/IGV0aERhdGFIZWxwZXIucHJpdmF0ZUtleSA6IHByaXZhdGVLZXksCiAgICAgICAgZnVsbE5hbWU6IGZ1bGxOYW1lCiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlU2hvd01uZW1vbmljIiwgZnVuY3Rpb24gKCkgewogICAgICBhY3Rpb25zLm1vZGFscy5vcGVuKGNvbnN0YW50cy5tb2RhbHMuU2F2ZU1uZW1vbmljTW9kYWwpOwogICAgfSk7CgogICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgIGlzQmFsYW5jZUZldGNoaW5nOiBmYWxzZSwKICAgICAgaXNBZGRyZXNzQ29waWVkOiBmYWxzZSwKICAgICAgaXNCYWxhbmNlRW1wdHk6IHRydWUsCiAgICAgIGlzRHJvcGRvd25PcGVuOiBmYWxzZQogICAgfTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhSb3csIFt7CiAgICBrZXk6ICJjb21wb25lbnRXaWxsVW5tb3VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7CiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLmhhbmRsZVNsaWNlQWRkcmVzcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29tcG9uZW50RGlkTW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9jb21wb25lbnREaWRNb3VudCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgIHZhciBiYWxhbmNlOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgYmFsYW5jZSA9IHRoaXMucHJvcHMuaXRlbURhdGEuYmFsYW5jZTsKICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICBpc0JhbGFuY2VFbXB0eTogYmFsYW5jZSA9PT0gMAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5oYW5kbGVTbGljZUFkZHJlc3MpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHsKICAgICAgICByZXR1cm4gX2NvbXBvbmVudERpZE1vdW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBjb21wb25lbnREaWRNb3VudDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImNvbXBvbmVudERpZFVwZGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykgewogICAgICB2YXIgcHJldkJhbGFuY2UgPSBwcmV2UHJvcHMuaXRlbURhdGEuYmFsYW5jZTsKICAgICAgdmFyIF90aGlzJHByb3BzJGl0ZW1EYXRhOSA9IHRoaXMucHJvcHMuaXRlbURhdGEsCiAgICAgICAgICBjdXJyZW5jeSA9IF90aGlzJHByb3BzJGl0ZW1EYXRhOS5jdXJyZW5jeSwKICAgICAgICAgIGJhbGFuY2UgPSBfdGhpcyRwcm9wcyRpdGVtRGF0YTkuYmFsYW5jZTsKCiAgICAgIGlmIChiYWxhbmNlID4gMCkgewogICAgICAgIGFjdGlvbnMuYW5hbHl0aWNzLmJhbGFuY2VFdmVudCh7CiAgICAgICAgICBhY3Rpb246ICdoYXZlJywKICAgICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeSwKICAgICAgICAgIGJhbGFuY2U6IGJhbGFuY2UKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKHByZXZCYWxhbmNlICE9PSBiYWxhbmNlKSB7CiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICBpc0JhbGFuY2VFbXB0eTogYmFsYW5jZSA9PT0gMAogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic2hvdWxkQ29tcG9uZW50VXBkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzLCBuZXh0U3RhdGUpIHsKICAgICAgdmFyIGdldENvbXBhcmFibGVQcm9wcyA9IGZ1bmN0aW9uIGdldENvbXBhcmFibGVQcm9wcyhfcmVmOCkgewogICAgICAgIHZhciBpdGVtRGF0YSA9IF9yZWY4Lml0ZW1EYXRhLAogICAgICAgICAgICBpbmRleCA9IF9yZWY4LmluZGV4LAogICAgICAgICAgICBzZWxlY3RJZCA9IF9yZWY4LnNlbGVjdElkOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICBpdGVtRGF0YTogaXRlbURhdGEsCiAgICAgICAgICBpbmRleDogaW5kZXgsCiAgICAgICAgICBzZWxlY3RJZDogc2VsZWN0SWQKICAgICAgICB9OwogICAgICB9OwoKICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZ2V0Q29tcGFyYWJsZVByb3BzKG5leHRQcm9wcykpLCBuZXh0U3RhdGUpKSAhPT0gSlNPTi5zdHJpbmdpZnkoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBnZXRDb21wYXJhYmxlUHJvcHModGhpcy5wcm9wcykpLCB0aGlzLnN0YXRlKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaGFuZGxlRGlzY29ubmVjdFdhbGxldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlRGlzY29ubmVjdFdhbGxldCgpIHsKICAgICAgaWYgKG1ldGFtYXNrLmlzRW5hYmxlZCgpKSB7CiAgICAgICAgbWV0YW1hc2suZGlzY29ubmVjdCgpLnRoZW4oIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNygpIHsKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIHJldHVybiBhY3Rpb25zLnVzZXIuc2lnbigpOwoKICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICByZXR1cm4gYWN0aW9ucy51c2VyLmdldEJhbGFuY2VzKCk7CgogICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlNyk7CiAgICAgICAgfSkpKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMkc3RhdGUgPSB0aGlzLnN0YXRlLAogICAgICAgICAgaXNCYWxhbmNlRmV0Y2hpbmcgPSBfdGhpcyRzdGF0ZS5pc0JhbGFuY2VGZXRjaGluZywKICAgICAgICAgIGlzQmFsYW5jZUVtcHR5ID0gX3RoaXMkc3RhdGUuaXNCYWxhbmNlRW1wdHk7CiAgICAgIHZhciBfdGhpcyRwcm9wczYgPSB0aGlzLnByb3BzLAogICAgICAgICAgaXRlbURhdGEgPSBfdGhpcyRwcm9wczYuaXRlbURhdGEsCiAgICAgICAgICBpbnRsID0gX3RoaXMkcHJvcHM2LmludGwsCiAgICAgICAgICBhY3RpdmVGaWF0ID0gX3RoaXMkcHJvcHM2LmFjdGl2ZUZpYXQsCiAgICAgICAgICBpc0RhcmsgPSBfdGhpcyRwcm9wczYuaXNEYXJrLAogICAgICAgICAgbXVsdGlzaWdTdGF0dXMgPSBfdGhpcyRwcm9wczYubXVsdGlzaWdTdGF0dXM7CiAgICAgIHZhciBjdXJyZW5jeSA9IGl0ZW1EYXRhLmN1cnJlbmN5LAogICAgICAgICAgYmFsYW5jZSA9IGl0ZW1EYXRhLmJhbGFuY2UsCiAgICAgICAgICBpc0JhbGFuY2VGZXRjaGVkID0gaXRlbURhdGEuaXNCYWxhbmNlRmV0Y2hlZCwKICAgICAgICAgIGZ1bGxOYW1lID0gaXRlbURhdGEuZnVsbE5hbWUsCiAgICAgICAgICB0aXRsZSA9IGl0ZW1EYXRhLnRpdGxlLAogICAgICAgICAgdW5jb25maXJtZWRCYWxhbmNlID0gaXRlbURhdGEudW5jb25maXJtZWRCYWxhbmNlLAogICAgICAgICAgYmFsYW5jZUVycm9yID0gaXRlbURhdGEuYmFsYW5jZUVycm9yOwogICAgICB2YXIgbm9kZURvd25FcnJvclNob3cgPSB0cnVlOwogICAgICB2YXIgY3VycmVuY3lGaWF0QmFsYW5jZSA9IDA7CiAgICAgIHZhciBjdXJyZW5jeVZpZXcgPSBjdXJyZW5jeTsKCiAgICAgIHN3aXRjaCAoY3VycmVuY3lWaWV3KSB7CiAgICAgICAgY2FzZSAnQlRDIChNdWx0aXNpZyknOgogICAgICAgIGNhc2UgJ0JUQyAoU01TLVByb3RlY3RlZCknOgogICAgICAgIGNhc2UgJ0JUQyAoUElOLVByb3RlY3RlZCknOgogICAgICAgICAgY3VycmVuY3lWaWV3ID0gJ0JUQyc7CiAgICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgaWYgKGl0ZW1EYXRhLmluZm9BYm91dEN1cnJlbmN5ICYmIGl0ZW1EYXRhLmluZm9BYm91dEN1cnJlbmN5LnByaWNlX2ZpYXQpIHsKICAgICAgICBjdXJyZW5jeUZpYXRCYWxhbmNlID0gbmV3IEJpZ051bWJlcihiYWxhbmNlKS5tdWx0aXBsaWVkQnkoaXRlbURhdGEuaW5mb0Fib3V0Q3VycmVuY3kucHJpY2VfZmlhdCkuZHAoMiwgQmlnTnVtYmVyLlJPVU5EX0ZMT09SKS50b051bWJlcigpOwogICAgICB9CgogICAgICB2YXIgaGFzSG93VG9XaXRoZHJhdyA9IGZhbHNlOwoKICAgICAgaWYgKGNvbmZpZyAmJiBjb25maWcuZXJjMjAgJiYgY29uZmlnLmVyYzIwW3RoaXMucHJvcHMuY3VycmVuY3kuY3VycmVuY3kudG9Mb3dlckNhc2UoKV0gJiYgY29uZmlnLmVyYzIwW3RoaXMucHJvcHMuY3VycmVuY3kuY3VycmVuY3kudG9Mb3dlckNhc2UoKV0uaG93VG9XaXRoZHJhdykgewogICAgICAgIGhhc0hvd1RvV2l0aGRyYXcgPSB0cnVlOwogICAgICB9CgogICAgICB2YXIgaXNTYWZhcmkgPSAoJ3NhZmFyaScgaW4gd2luZG93KTsKICAgICAgdmFyIG1uZW1vbmljID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oY29uc3RhbnRzLnByaXZhdGVLZXlOYW1lcy50d2VudHl3b3Jkcyk7CiAgICAgIHZhciBtbmVtb25pY1NhdmVkID0gbW5lbW9uaWMgPT09ICItIjsKICAgICAgdmFyIGRyb3BEb3duTWVudUl0ZW1zID0gW3sKICAgICAgICBpZDogMTAwMSwKICAgICAgICB0aXRsZTogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJXYWxsZXRSb3dfTWVudV9EZXBvc2l0IiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRGVwb3NpdCIKICAgICAgICB9KSwKICAgICAgICBhY3Rpb246IHRoaXMuaGFuZGxlUmVjZWl2ZSwKICAgICAgICBkaXNhYmxlZDogZmFsc2UKICAgICAgfV0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShoYXNIb3dUb1dpdGhkcmF3ID8gW3sKICAgICAgICBpZDogMTAwMjEsCiAgICAgICAgdGl0bGU6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgIGlkOiAiV2FsbGV0Um93X01lbnVfSG93VG9XaXRoZHJhdyIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkhvdyB0byB3aXRoZHJhdyIKICAgICAgICB9KSwKICAgICAgICBhY3Rpb246IHRoaXMuaGFuZGxlSG93VG9XaXRoZHJhdwogICAgICB9XSA6IFtdKSwgW3sKICAgICAgICBpZDogMTAwMiwKICAgICAgICB0aXRsZTogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJXYWxsZXRSb3dfTWVudV9TZW5kIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiU2VuZCIKICAgICAgICB9KSwKICAgICAgICBhY3Rpb246IHRoaXMuaGFuZGxlV2l0aGRyYXcsCiAgICAgICAgZGlzYWJsZWQ6IGlzQmFsYW5jZUVtcHR5CiAgICAgIH0sICFjb25maWcub3B0cy5leGNoYW5nZURpc2FibGVkICYmIHsKICAgICAgICBpZDogMTAwNCwKICAgICAgICB0aXRsZTogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJXYWxsZXRSb3dfTWVudV9FeGNoYW5nZSIsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkV4Y2hhbmdlIgogICAgICAgIH0pLAogICAgICAgIGFjdGlvbjogdGhpcy5nb1RvRXhjaGFuZ2UsCiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlCiAgICAgIH0sIHsKICAgICAgICBpZDogMTAwMywKICAgICAgICB0aXRsZTogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJXYWxsZXRSb3dfTWVudV9IaXN0b3J5IiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiSGlzdG9yeSIKICAgICAgICB9KSwKICAgICAgICBhY3Rpb246IHRoaXMuZ29Ub0N1cnJlbmN5SGlzdG9yeSwKICAgICAgICBkaXNhYmxlZDogIW1uZW1vbmljU2F2ZWQKICAgICAgfSwgIWlzU2FmYXJpICYmIHsKICAgICAgICBpZDogMTAxMiwKICAgICAgICB0aXRsZTogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJXYWxsZXRSb3dfTWVudV9cdTA0MjFvcHkiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJDb3B5IGFkZHJlc3MiCiAgICAgICAgfSksCiAgICAgICAgYWN0aW9uOiB0aGlzLmNvcHksCiAgICAgICAgZGlzYWJsZWQ6ICFtbmVtb25pY1NhdmVkCiAgICAgIH0sICFjb25maWcub3B0cy5oaWRlU2hvd1ByaXZhdGVLZXkgJiYgewogICAgICAgIGlkOiAxMDEyLAogICAgICAgIHRpdGxlOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICBpZDogIldhbGxldFJvd19NZW51X1x1MDQyMW9weV9Qcml2YXRlS2V5IiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQ29weSBQcml2YXRlIEtleSIKICAgICAgICB9KSwKICAgICAgICBhY3Rpb246IHRoaXMuY29weVByaXZhdGVLZXksCiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlCiAgICAgIH0sIHsKICAgICAgICBpZDogMTAxMSwKICAgICAgICB0aXRsZTogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJXYWxsZXRSb3dfTWVudV9IaWRlIiwKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiSGlkZSIKICAgICAgICB9KSwKICAgICAgICBhY3Rpb246IHRoaXMuaGlkZUN1cnJlbmN5LAogICAgICAgIGRpc2FibGVkOiBmYWxzZQogICAgICB9XSkuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbDsKICAgICAgfSk7CgogICAgICBpZiAoY29uZmlnLm9wdHMuaW52b2ljZUVuYWJsZWQpIHsKICAgICAgICBkcm9wRG93bk1lbnVJdGVtcy5wdXNoKHsKICAgICAgICAgIGlkOiAxMDA0LAogICAgICAgICAgdGl0bGU6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgaWQ6ICJXYWxsZXRSb3dfTWVudV9JbnZvaWNlIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MTJcdTA0NEJcdTA0NDFcdTA0NDJcdTA0MzBcdTA0MzJcdTA0MzhcdTA0NDJcdTA0NEMgXHUwNDQxXHUwNDQ3XHUwNDM1XHUwNDQyIgogICAgICAgICAgfSksCiAgICAgICAgICBhY3Rpb246IHRoaXMuaGFuZGxlQ3JlYXRlSW52b2ljZSwKICAgICAgICAgIGRpc2FibGVkOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIGRyb3BEb3duTWVudUl0ZW1zLnB1c2goewogICAgICAgICAgaWQ6IDEwMDUsCiAgICAgICAgICB0aXRsZTogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICBpZDogIldhbGxldFJvd19NZW51X0ludm9pY2VMaW5rIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MUZcdTA0M0VcdTA0M0JcdTA0NDNcdTA0NDdcdTA0MzhcdTA0NDJcdTA0NEMgXHUwNDQxXHUwNDQxXHUwNDRCXHUwNDNCXHUwNDNBXHUwNDQzIFx1MDQzNFx1MDQzQlx1MDQ0RiBcdTA0MzJcdTA0NEJcdTA0NDFcdTA0NDJcdTA0MzBcdTA0MzJcdTA0M0JcdTA0MzVcdTA0M0RcdTA0MzhcdTA0NEYgXHUwNDQxXHUwNDQ3XHUwNDM1XHUwNDQyXHUwNDMwIgogICAgICAgICAgfSksCiAgICAgICAgICBhY3Rpb246IHRoaXMuaGFuZGxlQ3JlYXRlSW52b2ljZUxpbmssCiAgICAgICAgICBkaXNhYmxlZDogZmFsc2UKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKGl0ZW1EYXRhLmlzTWV0YW1hc2sgJiYgIWl0ZW1EYXRhLmlzQ29ubmVjdGVkKSB7CiAgICAgICAgZHJvcERvd25NZW51SXRlbXMgPSBbewogICAgICAgICAgaWQ6IDEsCiAgICAgICAgICB0aXRsZTogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICBpZDogIldhbGxldFJvd19NZXRhbWFza0Nvbm5lY3QiLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxRlx1MDQzRVx1MDQzNFx1MDQzQVx1MDQzQlx1MDQ0RVx1MDQ0N1x1MDQzOFx1MDQ0Mlx1MDQ0QyIKICAgICAgICAgIH0pLAogICAgICAgICAgYWN0aW9uOiB0aGlzLmhhbmRsZUNvbm5lY3RNZXRhbWFzaywKICAgICAgICAgIGRpc2FibGVkOiBmYWxzZQogICAgICAgIH1dOwogICAgICB9CgogICAgICBpZiAoaXRlbURhdGEuaXNNZXRhbWFzayAmJiBpdGVtRGF0YS5pc0Nvbm5lY3RlZCkgewogICAgICAgIGRyb3BEb3duTWVudUl0ZW1zID0gW3sKICAgICAgICAgIGlkOiAxMTIzLAogICAgICAgICAgdGl0bGU6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgaWQ6ICJXYWxsZXRSb3dfTWV0YW1hc2tEaXNjb25uZWN0IiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MUVcdTA0NDJcdTA0M0FcdTA0M0JcdTA0NEVcdTA0NDdcdTA0MzhcdTA0NDJcdTA0NEMgXHUwNDNBXHUwNDNFXHUwNDQ4XHUwNDM1XHUwNDNCXHUwNDM1XHUwNDNBIgogICAgICAgICAgfSksCiAgICAgICAgICBhY3Rpb246IHRoaXMuaGFuZGxlRGlzY29ubmVjdFdhbGxldCwKICAgICAgICAgIGRpc2FibGVkOiBmYWxzZQogICAgICAgIH1dLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoZHJvcERvd25NZW51SXRlbXMpKTsKICAgICAgfQoKICAgICAgdmFyIHNob3dCYWxhbmNlID0gdHJ1ZTsKICAgICAgdmFyIHN0YXR1c0luZm8gPSAnJzsKCiAgICAgIGlmIChpdGVtRGF0YS5pc1BpblByb3RlY3RlZCAmJiAhaXRlbURhdGEuaXNSZWdpc3RlcmVkKSB7CiAgICAgICAgc3RhdHVzSW5mbyA9ICdOb3QgYWN0aXZhdGVkJzsKICAgICAgICBzaG93QmFsYW5jZSA9IGZhbHNlOwogICAgICAgIG5vZGVEb3duRXJyb3JTaG93ID0gZmFsc2U7CiAgICAgICAgZHJvcERvd25NZW51SXRlbXMgPSBbewogICAgICAgICAgaWQ6IDEsCiAgICAgICAgICB0aXRsZTogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICBpZDogIldhbGxldFJvd19NZW51X0FjdGl2YXRlUGluUHJvdGVjdGVkIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJBY3RpdmF0ZSIKICAgICAgICAgIH0pLAogICAgICAgICAgYWN0aW9uOiB0aGlzLmhhbmRsZUFjdGl2YXRlUGluUHJvdGVjdGVkLAogICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlCiAgICAgICAgfSwgewogICAgICAgICAgaWQ6IDEwMTEsCiAgICAgICAgICB0aXRsZTogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICBpZDogIldhbGxldFJvd19NZW51X0hpZGUiLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkhpZGUiCiAgICAgICAgICB9KSwKICAgICAgICAgIGFjdGlvbjogdGhpcy5oaWRlQ3VycmVuY3ksCiAgICAgICAgICBkaXNhYmxlZDogZmFsc2UKICAgICAgICB9XTsKICAgICAgfQoKICAgICAgdmFyIG1zQ29uZmlybUNvdW50ID0gaXRlbURhdGEuaXNVc2VyUHJvdGVjdGVkICYmIG11bHRpc2lnU3RhdHVzICYmIG11bHRpc2lnU3RhdHVzW2l0ZW1EYXRhLmFkZHJlc3NdICYmIG11bHRpc2lnU3RhdHVzW2l0ZW1EYXRhLmFkZHJlc3NdLmNvdW50ID8gbXVsdGlzaWdTdGF0dXNbaXRlbURhdGEuYWRkcmVzc10uY291bnQgOiBmYWxzZTsKCiAgICAgIGlmIChpdGVtRGF0YS5pc1Ntc1Byb3RlY3RlZCAmJiAhaXRlbURhdGEuaXNSZWdpc3RlcmVkKSB7CiAgICAgICAgc3RhdHVzSW5mbyA9ICdOb3QgYWN0aXZhdGVkJzsKICAgICAgICBzaG93QmFsYW5jZSA9IGZhbHNlOwogICAgICAgIG5vZGVEb3duRXJyb3JTaG93ID0gZmFsc2U7CiAgICAgICAgZHJvcERvd25NZW51SXRlbXMgPSBbewogICAgICAgICAgaWQ6IDEsCiAgICAgICAgICB0aXRsZTogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICBpZDogIldhbGxldFJvd19NZW51X0FjdGl2YXRlU01TUHJvdGVjdGVkIiwKICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJBY3RpdmF0ZSIKICAgICAgICAgIH0pLAogICAgICAgICAgYWN0aW9uOiB0aGlzLmhhbmRsZUFjdGl2YXRlUHJvdGVjdGVkLAogICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlCiAgICAgICAgfSwgewogICAgICAgICAgaWQ6IDEwMTEsCiAgICAgICAgICB0aXRsZTogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICBpZDogIldhbGxldFJvd19NZW51X0hpZGUiLAogICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkhpZGUiCiAgICAgICAgICB9KSwKICAgICAgICAgIGFjdGlvbjogdGhpcy5oaWRlQ3VycmVuY3ksCiAgICAgICAgICBkaXNhYmxlZDogZmFsc2UKICAgICAgICB9XTsKICAgICAgfQoKICAgICAgaWYgKGl0ZW1EYXRhLmlzVXNlclByb3RlY3RlZCkgewogICAgICAgIGlmICghaXRlbURhdGEuYWN0aXZlKSB7CiAgICAgICAgICBzdGF0dXNJbmZvID0gJ05vdCBqb2luZWQnOwogICAgICAgICAgc2hvd0JhbGFuY2UgPSBmYWxzZTsKICAgICAgICAgIG5vZGVEb3duRXJyb3JTaG93ID0gZmFsc2U7CiAgICAgICAgICBkcm9wRG93bk1lbnVJdGVtcyA9IFtdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkcm9wRG93bk1lbnVJdGVtcy5wdXNoKHsKICAgICAgICAgICAgaWQ6IDExMDUsCiAgICAgICAgICAgIHRpdGxlOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgICAgaWQ6ICJXYWxsZXRSb3dfTWVudV9CVENNU19Td2l0Y2hNZW51IiwKICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlN3aXRjaCB3YWxsZXQiCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBhY3Rpb246IHRoaXMuaGFuZGxlU3dpdGNoTXVsdGlzaWduLAogICAgICAgICAgICBkaXNhYmxlZDogZmFsc2UKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZHJvcERvd25NZW51SXRlbXMucHVzaCh7CiAgICAgICAgICBpZDogMywKICAgICAgICAgIHRpdGxlOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgIGlkOiAiV2FsbGV0Um93X01lbnVfQlRDTVNfR2VuZXJhdGVKb2luTGluayIsCiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiR2VuZXJhdGUgam9pbiBsaW5rIgogICAgICAgICAgfSksCiAgICAgICAgICBhY3Rpb246IHRoaXMuaGFuZGxlR2VuZXJhdGVNdWx0aXNpZ25MaW5rLAogICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlCiAgICAgICAgfSk7CgogICAgICAgIGlmICghaXRlbURhdGEuYWN0aXZlKSB7CiAgICAgICAgICBkcm9wRG93bk1lbnVJdGVtcy5wdXNoKHsKICAgICAgICAgICAgaWQ6IDEwMTEsCiAgICAgICAgICAgIHRpdGxlOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgICAgICAgaWQ6ICJXYWxsZXRSb3dfTWVudV9IaWRlIiwKICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkhpZGUiCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBhY3Rpb246IHRoaXMuaGlkZUN1cnJlbmN5LAogICAgICAgICAgICBkaXNhYmxlZDogZmFsc2UKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIGV0aFJvd1dpdGhvdXRFeHRlcm5hbFByb3ZpZGVyID0gaXRlbURhdGEuYWRkcmVzcy50b0xvd2VyQ2FzZSgpID09PSAnbm90IGNvbm5lY3RlZCcgJiYgIW1ldGFtYXNrLndlYjNjb25uZWN0LmlzSW5qZWN0ZWRFbmFibGVkKCk7CiAgICAgIHZhciB3ZWIzVHlwZSA9IG1ldGFtYXNrLndlYjNjb25uZWN0LmdldEluamVjdGVkVHlwZSgpOwogICAgICB2YXIgd2ViM0ljb24gPSB3ZWIzSWNvbnNbd2ViM1R5cGVdICYmIHdlYjNUeXBlICE9PSAiVU5LTk9XTiIgJiYgd2ViM1R5cGUgIT09ICJOT05FIiA/IHdlYjNJY29uc1t3ZWIzVHlwZV0gOiBmYWxzZTsKICAgICAgdmFyIGlzTWV0YW1hc2sgPSBpdGVtRGF0YS5pc01ldGFtYXNrOwogICAgICB2YXIgbWV0YW1hc2tJc0Nvbm5lY3RlZCA9IGlzTWV0YW1hc2sgJiYgaXRlbURhdGEuaXNDb25uZWN0ZWQ7CiAgICAgIHZhciBtZXRhbWFza0Rpc2Nvbm5lY3RlZCA9IGlzTWV0YW1hc2sgJiYgIW1ldGFtYXNrSXNDb25uZWN0ZWQ7CiAgICAgIHJldHVybiAhZXRoUm93V2l0aG91dEV4dGVybmFsUHJvdmlkZXIgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRyIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInRkIiwgewogICAgICAgIHN0eWxlTmFtZTogImFzc2V0c1RhYmxlUm93ICIuY29uY2F0KGlzRGFyayA/ICdkYXJrJyA6ICcnKQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogImFzc2V0c1RhYmxlQ3VycmVuY3kiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENvaW4sIHsKICAgICAgICBjbGFzc05hbWU6IHN0eWxlcy5hc3NldHNUYWJsZUljb24sCiAgICAgICAgbmFtZTogY3VycmVuY3kKICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiYXNzZXRzVGFibGVJbmZvIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogIm5hbWVSb3ciCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJhIiwgewogICAgICAgIG9uQ2xpY2s6IG1ldGFtYXNrRGlzY29ubmVjdGVkID8gdGhpcy5oYW5kbGVDb25uZWN0TWV0YW1hc2sgOiBtbmVtb25pY1NhdmVkIHx8IG1ldGFtYXNrSXNDb25uZWN0ZWQgPyB0aGlzLmdvVG9DdXJyZW5jeUhpc3RvcnkgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9LAogICAgICAgIHN0eWxlTmFtZTogIiIuY29uY2F0KG1uZW1vbmljU2F2ZWQgJiYgaXNNb2JpbGUgPyAnbGlua1RvSGlzdG9yeSBtb2JpbGUnIDogbW5lbW9uaWNTYXZlZCB8fCBpc01ldGFtYXNrICYmIG1ldGFtYXNrSXNDb25uZWN0ZWQgPyAnbGlua1RvSGlzdG9yeSBkZXNrdG9wJyA6ICcnKSwKICAgICAgICB0aXRsZTogIk9ubGluZSAiLmNvbmNhdChmdWxsTmFtZSwgIiB3YWxsZXQiKQogICAgICB9LCBmdWxsTmFtZSkpLCB0aXRsZSA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzdHJvbmciLCBudWxsLCB0aXRsZSkgOiAnJyksIGJhbGFuY2VFcnJvciAmJiBub2RlRG93bkVycm9yU2hvdyAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIGNsYXNzTmFtZTogc3R5bGVzLmVycm9yTWVzc2FnZQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChBcGlFbmRwb2ludCwgewogICAgICAgIGNvbnRyYWN0QWRkcmVzczogaXRlbURhdGEuY29udHJhY3RBZGRyZXNzLAogICAgICAgIGFkZHJlc3M6IGl0ZW1EYXRhLmFkZHJlc3MsCiAgICAgICAgc3ltYm9sOiBpdGVtRGF0YS5jdXJyZW5jeSwKICAgICAgICBpc0VSQzIwOiBpdGVtRGF0YS5pc0VSQzIwLAogICAgICAgIGlzQlRDOiBpdGVtRGF0YS5pc0JUQwogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJSb3dXYWxsZXQyNzYiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTm9kZSBpcyBkb3duIgogICAgICB9KSksICcgJywgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVG9vbHRpcCwgewogICAgICAgIGlkOiAiV2FsbGV0Um93Tm9kZUlzRG93blRvb2x0aXAiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicKICAgICAgICB9CiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIldhbGxldFJvd05vZGVJc0Rvd25Ub29sdGlwTWVzc2FnZSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJZb3UgY2FuIG5vdCBwZXJmb3JtIHRyYW5zYWN0aW9ucyIKICAgICAgfSkpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgewogICAgICAgIHN0eWxlTmFtZTogImFzc2V0c1RhYmxlQ3VycmVuY3lXcmFwcGVyIgogICAgICB9LCBzaG93QmFsYW5jZSAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGcmFnbWVudCwgbnVsbCwgbWV0YW1hc2tEaXNjb25uZWN0ZWQgPyAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHsKICAgICAgICBzbWFsbDogdHJ1ZSwKICAgICAgICBlbXB0eTogdHJ1ZSwKICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUNvbm5lY3RNZXRhbWFzawogICAgICB9LCB3ZWIzSWNvbiAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiaW1nIiwgewogICAgICAgIHN0eWxlTmFtZTogIndlYjNQcm92aWRlckljb24iLAogICAgICAgIHNyYzogd2ViM0ljb24KICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIkNvbW1vblRleHRDb25uZWN0IiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkNvbm5lY3QiCiAgICAgIH0pKSA6ICFpc0JhbGFuY2VGZXRjaGVkIHx8IGlzQmFsYW5jZUZldGNoaW5nID8gaXRlbURhdGEuaXNVc2VyUHJvdGVjdGVkICYmICFpdGVtRGF0YS5hY3RpdmUgPyAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIndhbGxldE11bHRpc2lnbk5vdEpvaW5lZCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJOb3Qgam9pbmVkIgogICAgICB9KSkgOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogImxvYWRlciIKICAgICAgfSwgIShiYWxhbmNlRXJyb3IgJiYgbm9kZURvd25FcnJvclNob3cpICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KElubGluZUxvYWRlciwgbnVsbCkpIDogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJuby1zZWxlY3QtaW5saW5lIiwKICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZVJlbG9hZEJhbGFuY2UKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImkiLCB7CiAgICAgICAgY2xhc3NOYW1lOiAiZmFzIGZhLXN5bmMtYWx0IiwKICAgICAgICBzdHlsZU5hbWU6ICJpY29uIgogICAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCBiYWxhbmNlRXJyb3IgPyAnPycgOiBuZXcgQmlnTnVtYmVyKGJhbGFuY2UpLmRwKDUsIEJpZ051bWJlci5ST1VORF9GTE9PUikudG9TdHJpbmcoKSwgJyAnKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiYXNzZXRzVGFibGVDdXJyZW5jeUJhbGFuY2UiCiAgICAgIH0sIGN1cnJlbmN5VmlldyksIHVuY29uZmlybWVkQmFsYW5jZSAhPT0gMCAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGcmFnbWVudCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImJyIiwgbnVsbCksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgewogICAgICAgIHN0eWxlTmFtZTogInVuY29uZmlybWVkQmFsYW5jZSIsCiAgICAgICAgdGl0bGU6IGludGwuZm9ybWF0TWVzc2FnZShsYW5nTGFiZWxzLnVuY29uZmlybWVkQmFsYW5jZSkKICAgICAgfSwgdW5jb25maXJtZWRCYWxhbmNlID4gMCAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgJysnKSwgdW5jb25maXJtZWRCYWxhbmNlLCAnICcpKSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRnJhZ21lbnQsIG51bGwsIHN0YXR1c0luZm8gPyAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicCIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJzdGF0dXNTdHlsZSIKICAgICAgfSwgc3RhdHVzSW5mbykgOiAhbW5lbW9uaWNTYXZlZCAmJiAhaXRlbURhdGEuaXNNZXRhbWFzayA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwIiwgewogICAgICAgIHN0eWxlTmFtZTogInNob3dBZGRyZXNzU3R5bGUiLAogICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlU2hvd01uZW1vbmljCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIldhbGxldFJvd19TaG93QWRkcmVzcyIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTaG93IGFkZHJlc3MiCiAgICAgIH0pKSA6IC8vIG9ubHkgZm9yIG1ldGFtYXNrCiAgICAgIG1ldGFtYXNrRGlzY29ubmVjdGVkID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInAiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiYWRkcmVzc1N0eWxlIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJXYWxsZXRSb3dfTWV0YW1hc2tOb3RDb25uZWN0ZWQiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiTm90IGNvbm5lY3RlZCIKICAgICAgfSkpIDoKICAgICAgLyojX19QVVJFX18qLwogICAgICAvLyBBZGRyZXNzIHNob3dzIAogICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiYWRkcmVzc1N0eWxlIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDb3B5LCB7CiAgICAgICAgdGV4dDogaXRlbURhdGEuYWRkcmVzcwogICAgICB9LCBpc01vYmlsZSA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFBhcnRPZkFkZHJlc3MsIHsKICAgICAgICB3aXRob3V0TGluazogdHJ1ZSwKICAgICAgICBjdXJyZW5jeTogaXRlbURhdGEuY3VycmVuY3ksCiAgICAgICAgY29udHJhY3RBZGRyZXNzOiBpdGVtRGF0YS5jb250cmFjdEFkZHJlc3MsCiAgICAgICAgYWRkcmVzczogaXRlbURhdGEuYWRkcmVzcywKICAgICAgICBpc0VSQzIwOiBpdGVtRGF0YS5pc0VSQzIwLAogICAgICAgIGlzQlRDOiBpdGVtRGF0YS5pc0JUQywKICAgICAgICBzdHlsZTogewogICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsCiAgICAgICAgICBib3R0b206ICcxM3B4JwogICAgICAgIH0KICAgICAgfSkgOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicCIsIG51bGwsIGl0ZW1EYXRhLmFkZHJlc3MpKSkpLCBjdXJyZW5jeUZpYXRCYWxhbmNlICYmIHNob3dCYWxhbmNlICYmICFiYWxhbmNlRXJyb3IgfHwgbXNDb25maXJtQ291bnQgPyAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogImFzc2V0c1RhYmxlVmFsdWUiCiAgICAgIH0sIG1zQ29uZmlybUNvdW50ICYmICFpc01vYmlsZSAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicCIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJ0eFdhaXRDb25maXJtIiwKICAgICAgICBvbkNsaWNrOiB0aGlzLmdvVG9DdXJyZW5jeUhpc3RvcnkKICAgICAgfSwgaW50bC5mb3JtYXRNZXNzYWdlKGxhbmdMYWJlbHMubXNDb25maXJtQ291bnQsIHsKICAgICAgICBjb3VudDogbXNDb25maXJtQ291bnQKICAgICAgfSkpLCBjdXJyZW5jeUZpYXRCYWxhbmNlICYmIHNob3dCYWxhbmNlICYmICFiYWxhbmNlRXJyb3IgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgY3VycmVuY3lGaWF0QmFsYW5jZSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzdHJvbmciLCBudWxsLCBhY3RpdmVGaWF0KSkpIDogJycpLCAhbWV0YW1hc2tEaXNjb25uZWN0ZWQgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZU9wZW5Ecm9wZG93biwKICAgICAgICBzdHlsZU5hbWU6ICJhc3NldHNUYWJsZURvdHMiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KERyb3Bkb3duTWVudSwgewogICAgICAgIHNpemU6ICJyZWd1bGFyIiwKICAgICAgICBjbGFzc05hbWU6ICJ3YWxsZXRDb250cm9scyIsCiAgICAgICAgaXRlbXM6IGRyb3BEb3duTWVudUl0ZW1zCiAgICAgIH0pKSkpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFJvdzsKfShDb21wb25lbnQpLCBfdGVtcCkpIHx8IF9jbGFzcykgfHwgX2NsYXNzKSB8fCBfY2xhc3MpIHx8IF9jbGFzcyk7CmV4cG9ydCB7IFJvdyBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/front/shared/pages/Wallet/Row/Row.tsx"],"names":["React","Component","Fragment","actions","connect","helpers","constants","config","isMobile","cssModules","styles","metamask","Coin","InlineLoader","DropdownMenu","withRouter","FormattedMessage","injectIntl","defineMessages","localisedUrl","BigNumber","Button","web3Icons","PartOfAddress","Tooltip","ApiEndpoint","Copy","langLabels","unconfirmedBalance","id","defaultMessage","msConfirmCount","Row","rememberedOrders","user","activeFiat","ethData","address","privateKey","multisigStatus","currency","decline","savedOrders","ethDataHelper","allowMultiple","props","isBalanceFetching","state","itemData","isMetamask","isConnected","isERC20","setState","setTimeout","btcmultisig","getBalance","getBalanceUser","getBalancePin","toLowerCase","firstPart","substr","secondPart","length","window","innerWidth","then","connected","sign","getBalances","modals","open","Withdraw","history","locale","intl","handleWithdrawPopup","targetCurrency","isToken","ethToken","isEthToken","name","push","ReceiveModal","RegisterSMSProtected","RegisterPINProtected","MultisignJoinLink","HowToWithdrawModal","isDropdownOpen","InvoiceLinkModal","BtcMultisignSwitch","decimals","token","contractAddress","balance","InvoiceModal","AlertModal","message","core","markCoinAsHidden","notifications","show","Message","fullName","WalletAddressModal","PrivateKeysModal","key","SaveMnemonicModal","isAddressCopied","isBalanceEmpty","removeEventListener","handleSliceAddress","addEventListener","prevProps","prevBalance","analytics","balanceEvent","action","nextProps","nextState","getComparableProps","index","selectId","JSON","stringify","isEnabled","disconnect","isDark","isBalanceFetched","title","balanceError","nodeDownErrorShow","currencyFiatBalance","currencyView","infoAboutCurrency","price_fiat","multipliedBy","dp","ROUND_FLOOR","toNumber","hasHowToWithdraw","erc20","howToWithdraw","isSafari","mnemonic","localStorage","getItem","privateKeyNames","twentywords","mnemonicSaved","dropDownMenuItems","handleReceive","disabled","handleHowToWithdraw","handleWithdraw","opts","exchangeDisabled","goToExchange","goToCurrencyHistory","copy","hideShowPrivateKey","copyPrivateKey","hideCurrency","filter","el","invoiceEnabled","handleCreateInvoice","handleCreateInvoiceLink","handleConnectMetamask","handleDisconnectWallet","showBalance","statusInfo","isPinProtected","isRegistered","handleActivatePinProtected","isUserProtected","count","isSmsProtected","handleActivateProtected","active","handleSwitchMultisign","handleGenerateMultisignLink","ethRowWithoutExternalProvider","web3connect","isInjectedEnabled","web3Type","getInjectedType","web3Icon","metamaskIsConnected","metamaskDisconnected","assetsTableIcon","errorMessage","isBTC","textAlign","handleReloadBalance","toString","formatMessage","handleShowMnemonic","position","bottom","handleOpenDropdown"],"mappings":"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","sourcesContent":["// @ts-nocheck\r\nimport React, { Component, Fragment } from 'react'\r\nimport actions from 'redux/actions'\r\nimport { connect } from 'redaction'\r\nimport helpers, { constants } from 'helpers'\r\nimport config from 'helpers/externalConfig'\r\nimport { isMobile } from 'react-device-detect'\r\n\r\nimport cssModules from 'react-css-modules'\r\nimport styles from './Row.scss'\r\nimport metamask from 'helpers/metamask'\r\nimport Coin from 'components/Coin/Coin'\r\nimport InlineLoader from 'components/loaders/InlineLoader/InlineLoader'\r\nimport DropdownMenu from 'components/ui/DropdownMenu/DropdownMenu'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { FormattedMessage, injectIntl, defineMessages } from 'react-intl'\r\nimport { localisedUrl } from 'helpers/locale'\r\nimport { BigNumber } from 'bignumber.js'\r\nimport { Button } from 'components/controls'\r\nimport web3Icons from '../../../images'\r\nimport PartOfAddress from '../components/PartOfAddress'\r\nimport Tooltip from 'components/ui/Tooltip/Tooltip'\r\nimport { ApiEndpoint } from '../components/Endpoints'\r\nimport Copy from '../../../components/ui/Copy/Copy'\r\n\r\ntype RowProps = {\r\n  // from component\r\n  isDark: boolean\r\n  currency: IUniversalObj\r\n  itemData: IUniversalObj\r\n  // from store\r\n  activeFiat?: string\r\n  decline?: any[]\r\n  ethDataHelper?: {\r\n    address: string\r\n    privateKey: string\r\n  }\r\n  history?: IUniversalObj\r\n  intl?: IUniversalObj\r\n  multisigStatus?: any\r\n}\r\n\r\ntype RowState = {\r\n  isBalanceFetching: boolean\r\n  isAddressCopied: boolean\r\n  isBalanceEmpty: boolean\r\n  isDropdownOpen: boolean\r\n}\r\n\r\nconst langLabels = defineMessages({\r\n  unconfirmedBalance: {\r\n    id: 'RowWallet181',\r\n    defaultMessage: `Unconfirmed balance`,\r\n  },\r\n  msConfirmCount: {\r\n    id: 'RowWallet_MsConfirmCountMobile',\r\n    defaultMessage: `{count} tx wait your confirm`,\r\n  },\r\n})\r\n\r\n@injectIntl\r\n@withRouter\r\n@connect(\r\n  (\r\n    {\r\n      rememberedOrders,\r\n      user: {\r\n        activeFiat,\r\n        ethData: {\r\n          address,\r\n          privateKey,\r\n        },\r\n        multisigStatus,\r\n      }\r\n    },\r\n    { currency }\r\n  ) => ({\r\n    activeFiat,\r\n    decline: rememberedOrders.savedOrders,\r\n    multisigStatus,\r\n    ethDataHelper: {\r\n      address,\r\n      privateKey,\r\n    },\r\n  })\r\n)\r\n@cssModules(styles, { allowMultiple: true })\r\nexport default class Row extends Component {\r\n  /**\r\n   * @method handleReloadBalance\r\n   * @method handleSliceAddress\r\n   * @method handleDisconnectWallet\r\n   * @method handleConnectMetamask\r\n   * @method handleWithdrawPopup\r\n   * @method handleWithdraw\r\n   * @method handleReceive\r\n   * @method handleActivateProtected\r\n   * @method handleActivatePinProtected\r\n   * @method handleGenerateMultisignLink\r\n   * @method handleHowToWithdraw\r\n   * @method handleOpenDropdown\r\n   * @method handleCreateInvoiceLink\r\n   * @method handleSwitchMultisign\r\n   * @method handleCreateInvoice\r\n   *\r\n   * @method goToExchange\r\n   * @method goToCurrencyHistory\r\n   * @method hideCurrency\r\n   *\r\n   * @method copy\r\n   * @method copyPrivateKey\r\n   * @method handleShowMnemonic\r\n   */\r\n\r\n  props: RowProps\r\n  state: RowState\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      isBalanceFetching: false,\r\n      isAddressCopied: false,\r\n      isBalanceEmpty: true,\r\n      isDropdownOpen: false,\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.handleSliceAddress)\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { balance } = this.props.itemData\r\n\r\n    this.setState({\r\n      isBalanceEmpty: balance === 0,\r\n    })\r\n\r\n    window.addEventListener('resize', this.handleSliceAddress)\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const {\r\n      itemData: { \r\n        balance: prevBalance\r\n      }\r\n    } = prevProps\r\n\r\n    const {\r\n      itemData: { \r\n        currency, \r\n        balance \r\n      }\r\n    } = this.props\r\n\r\n    if (balance > 0) {\r\n      actions.analytics.balanceEvent({ action: 'have', currency, balance })\r\n    }\r\n\r\n    if (prevBalance !== balance) {\r\n      this.setState({\r\n        isBalanceEmpty: balance === 0,\r\n      })\r\n    }\r\n  }\r\n\r\n  handleReloadBalance = () => {\r\n    const { isBalanceFetching } = this.state\r\n    const {\r\n      itemData: {\r\n        isMetamask,\r\n        isConnected,\r\n        isERC20,\r\n      }\r\n    } = this.props\r\n\r\n    if (isBalanceFetching) {\r\n      return null\r\n    }\r\n\r\n    if (isMetamask && !isConnected ) {\r\n      this.setState({\r\n        isBalanceFetching: true,\r\n      }, () => {\r\n        setTimeout(() => {\r\n          this.setState({isBalanceFetching: false})\r\n        }, 500)\r\n      })\r\n      return null\r\n    }\r\n\r\n    this.setState({\r\n      isBalanceFetching: true,\r\n    }, () => {\r\n      setTimeout(async () => {\r\n        const {\r\n          itemData: { currency, address },\r\n        } = this.props\r\n\r\n        switch (currency) {\r\n          case 'BTC (SMS-Protected)':\r\n            await actions.btcmultisig.getBalance()\r\n            break\r\n          case 'BTC (Multisig)':\r\n            await actions.btcmultisig.getBalanceUser(address)\r\n            break\r\n          case 'BTC (PIN-Protected)':\r\n            await actions.btcmultisig.getBalancePin()\r\n            break\r\n          default:\r\n            if (isMetamask && !isERC20) {\r\n              await metamask.getBalance()\r\n            } else {\r\n              await actions[currency.toLowerCase()].getBalance(\r\n                currency.toLowerCase(),\r\n                address\r\n              )\r\n            }\r\n        }\r\n\r\n        this.setState(() => ({\r\n          isBalanceFetching: false,\r\n        }))\r\n      }, 250)\r\n    })\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    const getComparableProps = ({ itemData, index, selectId }) => ({\r\n      itemData,\r\n      index,\r\n      selectId,\r\n    })\r\n    return (\r\n      JSON.stringify({\r\n        ...getComparableProps(nextProps),\r\n        ...nextState,\r\n      }) !==\r\n      JSON.stringify({\r\n        //@\r\n        ...getComparableProps(this.props),\r\n        ...this.state,\r\n      })\r\n    )\r\n  }\r\n\r\n  handleSliceAddress = () => {\r\n    const {\r\n      itemData: { address },\r\n    } = this.props\r\n\r\n    const firstPart = address.substr(0, 6)\r\n    const secondPart = address.substr(address.length - 4)\r\n\r\n    return window.innerWidth < 700 || isMobile || address.length > 42\r\n      ? `${firstPart}...${secondPart}`\r\n      : address\r\n  }\r\n\r\n  handleDisconnectWallet() {\r\n    if (metamask.isEnabled()) {\r\n      metamask.disconnect().then(async () => {\r\n        await actions.user.sign()\r\n        await actions.user.getBalances()\r\n      })\r\n    }\r\n  }\r\n\r\n  handleConnectMetamask = () => {\r\n    metamask.connect({}).then(async (connected) => {\r\n      if (connected) {\r\n        await actions.user.sign()\r\n        await actions.user.getBalances()\r\n      }\r\n    })\r\n  }\r\n\r\n  handleWithdrawPopup = () => {\r\n    const {\r\n      itemData: { currency },\r\n      itemData\r\n    } = this.props\r\n\r\n    actions.modals.open(constants.modals.Withdraw, itemData)\r\n  }\r\n\r\n  handleWithdraw = () => {\r\n    const {\r\n      itemData: { currency, address },\r\n      history,\r\n      intl: { locale },\r\n    } = this.props\r\n\r\n    if (currency.toLowerCase() === 'ghost') {\r\n      this.handleWithdrawPopup()\r\n      return\r\n    }\r\n\r\n    if (currency.toLowerCase() === 'next') {\r\n      this.handleWithdrawPopup()\r\n      return\r\n    }\r\n\r\n    let targetCurrency = currency\r\n    switch (currency.toLowerCase()) {\r\n      case 'btc (multisig)':\r\n      case 'btc (sms-protected)':\r\n      case 'btc (pin-protected)':\r\n        targetCurrency = 'btc'\r\n        break\r\n    }\r\n\r\n    const isToken = helpers.ethToken.isEthToken({ name: currency })\r\n\r\n    history.push(\r\n      localisedUrl(\r\n        locale,\r\n        (isToken ? '/token' : '') + `/${targetCurrency}/${address}/send`\r\n      )\r\n    )\r\n  }\r\n\r\n  handleReceive = () => {\r\n    const {\r\n      itemData: { currency, address },\r\n    } = this.props\r\n\r\n    actions.modals.open(constants.modals.ReceiveModal, {\r\n      currency,\r\n      address,\r\n    })\r\n  }\r\n\r\n  handleActivateProtected = async () => {\r\n    actions.modals.open(constants.modals.RegisterSMSProtected, {})\r\n  }\r\n\r\n  handleActivatePinProtected = async () => {\r\n    actions.modals.open(constants.modals.RegisterPINProtected, {})\r\n  }\r\n\r\n  handleGenerateMultisignLink = async () => {\r\n    actions.modals.open(constants.modals.MultisignJoinLink, {})\r\n  }\r\n\r\n  handleHowToWithdraw = () => {\r\n    const {\r\n      itemData: { currency, address },\r\n    } = this.props\r\n\r\n    actions.modals.open(constants.modals.HowToWithdrawModal, {\r\n      currency,\r\n      address,\r\n    })\r\n  }\r\n\r\n  handleOpenDropdown = () => {\r\n    this.setState({\r\n      isDropdownOpen: true,\r\n    })\r\n  }\r\n\r\n  handleCreateInvoiceLink = () => {\r\n    const {\r\n      itemData: { currency, address },\r\n    } = this.props\r\n\r\n    actions.modals.open(constants.modals.InvoiceLinkModal, {\r\n      currency,\r\n      address,\r\n    })\r\n  }\r\n\r\n  handleSwitchMultisign = () => {\r\n    actions.modals.open(constants.modals.BtcMultisignSwitch)\r\n  }\r\n\r\n  handleCreateInvoice = () => {\r\n    const {\r\n      itemData: {\r\n        decimals,\r\n        token,\r\n        contractAddress,\r\n        unconfirmedBalance,\r\n        currency,\r\n        address,\r\n        balance,\r\n      },\r\n    } = this.props\r\n\r\n    actions.modals.open(constants.modals.InvoiceModal, {\r\n      currency,\r\n      address,\r\n      contractAddress,\r\n      decimals,\r\n      token,\r\n      balance,\r\n      unconfirmedBalance,\r\n    })\r\n  }\r\n\r\n  goToExchange = () => {\r\n    const {\r\n      history,\r\n      intl: { locale },\r\n    } = this.props\r\n    history.push(localisedUrl(locale, '/exchange'))\r\n  }\r\n\r\n  goToCurrencyHistory = () => {\r\n    const {\r\n      history,\r\n      intl: { locale },\r\n      itemData: { currency, balance, address },\r\n    } = this.props\r\n\r\n    let targetCurrency = currency\r\n    switch (currency.toLowerCase()) {\r\n      case 'btc (multisig)':\r\n      case 'btc (sms-protected)':\r\n      case 'btc (pin-protected)':\r\n        targetCurrency = 'btc'\r\n        break\r\n    }\r\n\r\n    const isToken = helpers.ethToken.isEthToken({ name: currency })\r\n\r\n    history.push(\r\n      localisedUrl(\r\n        locale,\r\n        (isToken ? '/token' : '') + `/${targetCurrency}/${address}`\r\n      )\r\n    )\r\n  }\r\n\r\n  hideCurrency = () => {\r\n    const {\r\n      itemData: { currency, address, balance },\r\n    } = this.props\r\n\r\n    if (balance > 0) {\r\n      actions.modals.open(constants.modals.AlertModal, {\r\n        message: (\r\n          <FormattedMessage\r\n            id=\"WalletRow_Action_HideNonZero_Message\"\r\n            defaultMessage=\"У этого кошелка положительный баланс. Его скрыть нельзя.\"\r\n          />\r\n        ),\r\n      })\r\n    } else {\r\n      actions.core.markCoinAsHidden(`${currency}:${address}`)\r\n      actions.notifications.show(constants.notifications.Message, {\r\n        message: (\r\n          <FormattedMessage\r\n            id=\"WalletRow_Action_Hidden\"\r\n            defaultMessage=\"Кошелек скрыт\"\r\n          />\r\n        ),\r\n      })\r\n    }\r\n  }\r\n\r\n  copy = () => {\r\n    const {\r\n      itemData: { address, fullName },\r\n    } = this.props\r\n\r\n    actions.modals.open(constants.modals.WalletAddressModal, {\r\n      address,\r\n      fullName,\r\n    })\r\n  }\r\n\r\n  copyPrivateKey = () => {\r\n    const {\r\n      itemData: { address, privateKey, fullName },\r\n      ethDataHelper,\r\n    } = this.props\r\n\r\n    actions.modals.open(constants.modals.PrivateKeysModal, {\r\n      key: address === ethDataHelper.address ? ethDataHelper.privateKey : privateKey,\r\n      fullName,\r\n    })\r\n  }\r\n\r\n  handleShowMnemonic = () => {\r\n    actions.modals.open(constants.modals.SaveMnemonicModal)\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      isBalanceFetching,\r\n      isBalanceEmpty,\r\n    } = this.state\r\n\r\n    const {\r\n      itemData,\r\n      intl,\r\n      activeFiat,\r\n      isDark,\r\n      multisigStatus,\r\n    } = this.props\r\n\r\n    const {\r\n      currency,\r\n      balance,\r\n      isBalanceFetched,\r\n      fullName,\r\n      title,\r\n      unconfirmedBalance,\r\n      balanceError,\r\n    } = itemData\r\n\r\n    let nodeDownErrorShow = true\r\n    let currencyFiatBalance = 0\r\n    let currencyView = currency\r\n\r\n    switch (currencyView) {\r\n      case 'BTC (Multisig)':\r\n      case 'BTC (SMS-Protected)':\r\n      case 'BTC (PIN-Protected)':\r\n        currencyView = 'BTC'\r\n        break\r\n    }\r\n\r\n    if (itemData.infoAboutCurrency && itemData.infoAboutCurrency.price_fiat) {\r\n      currencyFiatBalance = new BigNumber(balance).multipliedBy(itemData.infoAboutCurrency.price_fiat).dp(2, BigNumber.ROUND_FLOOR).toNumber()\r\n    }\r\n\r\n    let hasHowToWithdraw = false\r\n    if (\r\n      config &&\r\n      config.erc20 &&\r\n      config.erc20[this.props.currency.currency.toLowerCase()] &&\r\n      config.erc20[this.props.currency.currency.toLowerCase()].howToWithdraw\r\n    ) {\r\n      hasHowToWithdraw = true\r\n    }\r\n\r\n    const isSafari = 'safari' in window\r\n\r\n    const mnemonic = localStorage.getItem(constants.privateKeyNames.twentywords)\r\n    const mnemonicSaved = (mnemonic === `-`)\r\n\r\n    type DropDownItem = {\r\n      action: () => void\r\n      disabled?: boolean\r\n      title: JSX.Element\r\n      id: number\r\n    }\r\n\r\n    let dropDownMenuItems: DropDownItem[] = [\r\n      {\r\n        id: 1001,\r\n        title: (\r\n          <FormattedMessage\r\n            id=\"WalletRow_Menu_Deposit\"\r\n            defaultMessage=\"Deposit\"\r\n          />\r\n        ),\r\n        action: this.handleReceive,\r\n        disabled: false,\r\n      },\r\n      ...(hasHowToWithdraw\r\n        ? [\r\n          {\r\n            id: 10021,\r\n            title: (\r\n              <FormattedMessage\r\n                id=\"WalletRow_Menu_HowToWithdraw\"\r\n                defaultMessage=\"How to withdraw\"\r\n              />\r\n            ),\r\n            action: this.handleHowToWithdraw,\r\n          },\r\n        ]\r\n        : []),\r\n      {\r\n        id: 1002,\r\n        title: (\r\n          <FormattedMessage id=\"WalletRow_Menu_Send\" defaultMessage=\"Send\" />\r\n        ),\r\n        action: this.handleWithdraw,\r\n        disabled: isBalanceEmpty,\r\n      },\r\n      !config.opts.exchangeDisabled && {\r\n        id: 1004,\r\n        title: (\r\n          <FormattedMessage\r\n            id=\"WalletRow_Menu_Exchange\"\r\n            defaultMessage=\"Exchange\"\r\n          />\r\n        ),\r\n        action: this.goToExchange,\r\n        disabled: false,\r\n      },\r\n      {\r\n        id: 1003,\r\n        title: (\r\n          <FormattedMessage\r\n            id=\"WalletRow_Menu_History\"\r\n            defaultMessage=\"History\"\r\n          />\r\n        ),\r\n        action: this.goToCurrencyHistory,\r\n        disabled: !mnemonicSaved,\r\n      },\r\n      !isSafari && {\r\n        id: 1012,\r\n        title: (\r\n          <FormattedMessage\r\n            id=\"WalletRow_Menu_Сopy\"\r\n            defaultMessage=\"Copy address\"\r\n          />\r\n        ),\r\n        action: this.copy,\r\n        disabled: !mnemonicSaved,\r\n      },\r\n      !config.opts.hideShowPrivateKey && {\r\n        id: 1012,\r\n        title: (\r\n          <FormattedMessage\r\n            id=\"WalletRow_Menu_Сopy_PrivateKey\"\r\n            defaultMessage=\"Copy Private Key\"\r\n          />\r\n        ),\r\n        action: this.copyPrivateKey,\r\n        disabled: false,\r\n      },\r\n      {\r\n        id: 1011,\r\n        title: (\r\n          <FormattedMessage id=\"WalletRow_Menu_Hide\" defaultMessage=\"Hide\" />\r\n        ),\r\n        action: this.hideCurrency,\r\n        disabled: false,\r\n      },\r\n    ].filter((el) => el)\r\n\r\n    if (\r\n      config.opts.invoiceEnabled\r\n    ) {\r\n      dropDownMenuItems.push({\r\n        id: 1004,\r\n        title: (\r\n          <FormattedMessage\r\n            id=\"WalletRow_Menu_Invoice\"\r\n            defaultMessage=\"Выставить счет\"\r\n          />\r\n        ),\r\n        action: this.handleCreateInvoice,\r\n        disabled: false,\r\n      })\r\n      dropDownMenuItems.push({\r\n        id: 1005,\r\n        title: (\r\n          <FormattedMessage\r\n            id=\"WalletRow_Menu_InvoiceLink\"\r\n            defaultMessage=\"Получить ссылку для выставления счета\"\r\n          />\r\n        ),\r\n        action: this.handleCreateInvoiceLink,\r\n        disabled: false,\r\n      })\r\n    }\r\n\r\n    if (itemData.isMetamask\r\n      && !itemData.isConnected\r\n    ) {\r\n      dropDownMenuItems = [{\r\n        id: 1,\r\n        title: (\r\n          <FormattedMessage\r\n            id=\"WalletRow_MetamaskConnect\"\r\n            defaultMessage=\"Подключить\"\r\n          />\r\n        ),\r\n        action: this.handleConnectMetamask,\r\n        disabled: false,\r\n      }]\r\n    }\r\n\r\n    if (itemData.isMetamask\r\n      && itemData.isConnected\r\n    ) {\r\n      dropDownMenuItems = [\r\n        {\r\n          id: 1123,\r\n          title: (\r\n            <FormattedMessage\r\n              id=\"WalletRow_MetamaskDisconnect\"\r\n              defaultMessage=\"Отключить кошелек\"\r\n            />\r\n          ),\r\n          action: this.handleDisconnectWallet,\r\n          disabled: false\r\n        },\r\n        ...dropDownMenuItems\r\n      ]\r\n    }\r\n\r\n    let showBalance = true\r\n    let statusInfo = ''\r\n\r\n    if (\r\n      itemData.isPinProtected &&\r\n      !itemData.isRegistered\r\n    ) {\r\n      statusInfo = 'Not activated'\r\n      showBalance = false\r\n      nodeDownErrorShow = false\r\n      dropDownMenuItems = [\r\n        {\r\n          id: 1,\r\n          title: (\r\n            <FormattedMessage\r\n              id=\"WalletRow_Menu_ActivatePinProtected\"\r\n              defaultMessage=\"Activate\"\r\n            />\r\n          ),\r\n          action: this.handleActivatePinProtected,\r\n          disabled: false,\r\n        },\r\n        {\r\n          id: 1011,\r\n          title: (\r\n            <FormattedMessage id=\"WalletRow_Menu_Hide\" defaultMessage=\"Hide\" />\r\n          ),\r\n          action: this.hideCurrency,\r\n          disabled: false,\r\n        },\r\n      ]\r\n    }\r\n\r\n    const msConfirmCount = (\r\n      itemData.isUserProtected\r\n      && multisigStatus\r\n      && multisigStatus[itemData.address]\r\n      && multisigStatus[itemData.address].count\r\n    ) ? multisigStatus[itemData.address].count : false\r\n\r\n    if (\r\n      itemData.isSmsProtected &&\r\n      !itemData.isRegistered\r\n    ) {\r\n      statusInfo = 'Not activated'\r\n      showBalance = false\r\n      nodeDownErrorShow = false\r\n      dropDownMenuItems = [\r\n        {\r\n          id: 1,\r\n          title: (\r\n            <FormattedMessage\r\n              id=\"WalletRow_Menu_ActivateSMSProtected\"\r\n              defaultMessage=\"Activate\"\r\n            />\r\n          ),\r\n          action: this.handleActivateProtected,\r\n          disabled: false,\r\n        },\r\n        {\r\n          id: 1011,\r\n          title: (\r\n            <FormattedMessage id=\"WalletRow_Menu_Hide\" defaultMessage=\"Hide\" />\r\n          ),\r\n          action: this.hideCurrency,\r\n          disabled: false,\r\n        },\r\n      ]\r\n    }\r\n\r\n    if (itemData.isUserProtected) {\r\n      if (!itemData.active) {\r\n        statusInfo = 'Not joined'\r\n        showBalance = false\r\n        nodeDownErrorShow = false\r\n        dropDownMenuItems = []\r\n      } else {\r\n        dropDownMenuItems.push({\r\n          id: 1105,\r\n          title: (\r\n            <FormattedMessage\r\n              id=\"WalletRow_Menu_BTCMS_SwitchMenu\"\r\n              defaultMessage=\"Switch wallet\"\r\n            />\r\n          ),\r\n          action: this.handleSwitchMultisign,\r\n          disabled: false,\r\n        })\r\n      }\r\n      dropDownMenuItems.push({\r\n        id: 3,\r\n        title: (\r\n          <FormattedMessage\r\n            id=\"WalletRow_Menu_BTCMS_GenerateJoinLink\"\r\n            defaultMessage=\"Generate join link\"\r\n          />\r\n        ),\r\n        action: this.handleGenerateMultisignLink,\r\n        disabled: false,\r\n      })\r\n      if (!itemData.active) {\r\n        dropDownMenuItems.push({\r\n          id: 1011,\r\n          title: (\r\n            <FormattedMessage id=\"WalletRow_Menu_Hide\" defaultMessage=\"Hide\" />\r\n          ),\r\n          action: this.hideCurrency,\r\n          disabled: false,\r\n        })\r\n      }\r\n    }\r\n\r\n    const ethRowWithoutExternalProvider = itemData.address.toLowerCase() === 'not connected' && !metamask.web3connect.isInjectedEnabled()\r\n    const web3Type = metamask.web3connect.getInjectedType()\r\n    const web3Icon = (web3Icons[web3Type] && web3Type !== `UNKNOWN` && web3Type !== `NONE`) ? web3Icons[web3Type] : false\r\n    \r\n    const isMetamask = itemData.isMetamask\r\n    const metamaskIsConnected = isMetamask && itemData.isConnected\r\n    const metamaskDisconnected = isMetamask && !metamaskIsConnected\r\n\r\n    return (\r\n      !ethRowWithoutExternalProvider\r\n      && <tr>\r\n        <td styleName={`assetsTableRow ${isDark ? 'dark' : ''}`}>\r\n          <div styleName=\"assetsTableCurrency\">\r\n            {/* Currency icon */}\r\n            <Coin className={styles.assetsTableIcon} name={currency} />\r\n            <div styleName=\"assetsTableInfo\">\r\n              <div styleName=\"nameRow\">\r\n                <a onClick={metamaskDisconnected\r\n                    ? this.handleConnectMetamask\r\n                    : mnemonicSaved || metamaskIsConnected\r\n                      ? this.goToCurrencyHistory\r\n                      : () => null\r\n                  }\r\n                  styleName={`${\r\n                    mnemonicSaved && isMobile\r\n                      ? 'linkToHistory mobile'\r\n                      : mnemonicSaved || (isMetamask && metamaskIsConnected)\r\n                        ? 'linkToHistory desktop'\r\n                        : ''\r\n                  }`}\r\n                  title={`Online ${fullName} wallet`}\r\n                >\r\n                  {fullName}\r\n                </a>\r\n              </div>\r\n              {title ? <strong>{title}</strong> : ''}\r\n            </div>\r\n            {balanceError && nodeDownErrorShow && (\r\n              <div className={styles.errorMessage}>\r\n                <ApiEndpoint\r\n                  contractAddress={itemData.contractAddress}\r\n                  address={itemData.address}\r\n                  symbol={itemData.currency}\r\n                  isERC20={itemData.isERC20}\r\n                  isBTC={itemData.isBTC}\r\n                >\r\n                  <FormattedMessage\r\n                    id=\"RowWallet276\"\r\n                    defaultMessage=\"Node is down\"\r\n                  />\r\n                </ApiEndpoint>\r\n                {' '}\r\n                <Tooltip id=\"WalletRowNodeIsDownTooltip\">\r\n                  <div style={{ textAlign: 'center' }}>\r\n                    <FormattedMessage\r\n                      id=\"WalletRowNodeIsDownTooltipMessage\"\r\n                      defaultMessage=\"You can not perform transactions\"\r\n                    />\r\n                  </div>\r\n                </Tooltip>\r\n              </div>\r\n            )}\r\n            <span styleName=\"assetsTableCurrencyWrapper\">\r\n              {showBalance && (\r\n                <Fragment>\r\n                  {/*\r\n                  If it's a metamask and it disconnected then showing connect button\r\n                  else if balance fetched or fetching then showing loader\r\n                  else showing fetch-button and currency balance\r\n                  */}\r\n                  {metamaskDisconnected ? (\r\n                      <Button small empty onClick={this.handleConnectMetamask}>\r\n                        {web3Icon && <img styleName=\"web3ProviderIcon\" src={web3Icon} />}\r\n                        <FormattedMessage id=\"CommonTextConnect\" defaultMessage=\"Connect\" />\r\n                      </Button>\r\n                    ) : !isBalanceFetched || isBalanceFetching ? (\r\n                        itemData.isUserProtected &&\r\n                          !itemData.active ? (\r\n                            <span>\r\n                              <FormattedMessage\r\n                                id=\"walletMultisignNotJoined\"\r\n                                defaultMessage=\"Not joined\"\r\n                              />\r\n                            </span>\r\n                          ) : (\r\n                            <div styleName=\"loader\">\r\n                              {!(balanceError && nodeDownErrorShow) && <InlineLoader />}\r\n                            </div>\r\n                          )\r\n                      ) : (\r\n                          <div styleName=\"no-select-inline\" onClick={this.handleReloadBalance}>\r\n                            <i className=\"fas fa-sync-alt\" styleName=\"icon\" />\r\n                            <span>\r\n                              {balanceError\r\n                                ? '?'\r\n                                : new BigNumber(balance)\r\n                                  .dp(5, BigNumber.ROUND_FLOOR)\r\n                                  .toString()}{' '}\r\n                            </span>\r\n                            <span styleName=\"assetsTableCurrencyBalance\">\r\n                              {currencyView}\r\n                            </span>\r\n                            {unconfirmedBalance !== 0 && (\r\n                              <Fragment>\r\n                                <br />\r\n                                <span\r\n                                  styleName=\"unconfirmedBalance\"\r\n                                  title={intl.formatMessage(\r\n                                    langLabels.unconfirmedBalance\r\n                                  )}\r\n                                >\r\n                                  {unconfirmedBalance > 0 && <>{'+'}</>}\r\n                                  {unconfirmedBalance}{' '}\r\n                                </span>\r\n                              </Fragment>\r\n                            )}\r\n                          </div>\r\n                        )\r\n                  }\r\n                </Fragment>\r\n              )}\r\n            </span>\r\n\r\n            <Fragment>\r\n              {statusInfo ?\r\n                <p styleName=\"statusStyle\">{statusInfo}</p>\r\n                :\r\n                !mnemonicSaved && !itemData.isMetamask ?\r\n                  <p styleName=\"showAddressStyle\" onClick={this.handleShowMnemonic}>\r\n                    <FormattedMessage\r\n                      id=\"WalletRow_ShowAddress\"\r\n                      defaultMessage=\"Show address\"\r\n                    />\r\n                  </p>\r\n                  : // only for metamask\r\n                  metamaskDisconnected ?\r\n                    <p styleName=\"addressStyle\">\r\n                      <FormattedMessage\r\n                        id=\"WalletRow_MetamaskNotConnected\"\r\n                        defaultMessage=\"Not connected\"\r\n                      />\r\n                    </p>\r\n                    : // Address shows \r\n                    <div styleName=\"addressStyle\">\r\n                      <Copy text={itemData.address}>\r\n                        {isMobile ? (\r\n                            <PartOfAddress\r\n                              withoutLink\r\n                              currency={itemData.currency}\r\n                              contractAddress={itemData.contractAddress}\r\n                              address={itemData.address}\r\n                              isERC20={itemData.isERC20}\r\n                              isBTC={itemData.isBTC}\r\n                              style={{\r\n                                position: 'relative',\r\n                                bottom: '13px',\r\n                              }} \r\n                            />\r\n                          ) : <p>{itemData.address}</p>\r\n                        }\r\n                      </Copy>\r\n                    </div>\r\n              }\r\n            </Fragment>\r\n\r\n            {(currencyFiatBalance && showBalance && !balanceError) || msConfirmCount ? (\r\n              <div styleName=\"assetsTableValue\">\r\n                {msConfirmCount && !isMobile && (\r\n                  <p styleName=\"txWaitConfirm\" onClick={this.goToCurrencyHistory}>\r\n                    {intl.formatMessage(\r\n                      langLabels.msConfirmCount,\r\n                      {\r\n                        count: msConfirmCount,\r\n                      }\r\n                    )}\r\n                  </p>\r\n                )}  \r\n                {currencyFiatBalance && showBalance && !balanceError && (\r\n                  <>\r\n                    <p>{currencyFiatBalance}</p>\r\n                    <strong>{activeFiat}</strong>\r\n                  </>\r\n                )}\r\n              </div>\r\n            ) : (\r\n                ''\r\n              )}\r\n          </div>\r\n\r\n          { !metamaskDisconnected &&\r\n            <div onClick={this.handleOpenDropdown} styleName=\"assetsTableDots\">\r\n              <DropdownMenu\r\n                size=\"regular\"\r\n                className=\"walletControls\"\r\n                items={dropDownMenuItems}\r\n              />\r\n            </div>\r\n          }\r\n        </td>\r\n      </tr>\r\n    )\r\n  }\r\n}\r\n"]}]}