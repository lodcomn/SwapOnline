{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\helpers\\transactions.ts","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\helpers\\transactions.ts","mtime":1614842914119},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gIkBiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yIjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmltcG9ydCBoZWxwZXJzIGZyb20gJ2hlbHBlcnMnOwppbXBvcnQgYWN0aW9ucyBmcm9tICdyZWR1eC9hY3Rpb25zJzsKaW1wb3J0IGFwaUxvb3BlciBmcm9tICdoZWxwZXJzL2FwaUxvb3Blcic7Ci8qKg0KICog0JfQsNC/0YDQsNGI0LjQstCw0LXRgiDQuNC90YTQvtGA0LzQsNGG0LjRjiDQviB0eCAoZmluYWwgYmFsYW5jZXMpDQogKi8KCnZhciBmZXRjaFR4QmFsYW5jZXMgPSBmdW5jdGlvbiBmZXRjaFR4QmFsYW5jZXMoY3VycmVuY3ksIHR4SWQpIHsKICB2YXIgY3VyTmFtZSA9IGhlbHBlcnMuZ2V0Q3VycmVuY3lLZXkoY3VycmVuY3ksIHRydWUpOwogIHJldHVybiBhcGlMb29wZXIuZ2V0KCd0eGluZm8nLCAiL3R4LyIuY29uY2F0KGN1ck5hbWUsICIvIikuY29uY2F0KHR4SWQpLCB7CiAgICBjaGVja1N0YXR1czogZnVuY3Rpb24gY2hlY2tTdGF0dXMocmVzKSB7CiAgICAgIHRyeSB7CiAgICAgICAgaWYgKHJlcyAmJiByZXMuYW5zd2VyICE9PSB1bmRlZmluZWQpIHJldHVybiB0cnVlOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgLyogKi8KICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgaWYgKHJlcyAmJiByZXMuYW5zd2VyICYmIHJlcy5hbnN3ZXIgPT09ICdvaycgJiYgcmVzLmRhdGEpIHsKICAgICAgcmV0dXJuIHJlcy5kYXRhOwogICAgfQoKICAgIHJldHVybiBmYWxzZTsKICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0pOwp9OwovKioNCiAqINCh0L7RhdGA0LDQvdGP0LXRgiDQuNC90YTQvtGA0LzQsNGG0LjRjiDQviDQsdCw0LvQsNC90YHQsNGFINC90LAg0LzQvtC80LXQvdGCINCy0YvQv9C+0LvQvdC10L3QuNGPINGC0YDQsNC90LfQsNC60YbQuNC4INC90LAgYmFja2VuZA0KICovCgoKdmFyIHB1bGxUeEJhbGFuY2VzID0gZnVuY3Rpb24gcHVsbFR4QmFsYW5jZXModHhJZCwgYW1vdW50LCBiYWxhbmNlcywgYWRtaW5GZWUpIHsKICByZXR1cm4gYXBpTG9vcGVyLnBvc3QoJ3R4aW5mbycsICIvcHVsbCIsIHsKICAgIGJvZHk6IF9vYmplY3RTcHJlYWQoewogICAgICB0eElkOiB0eElkLAogICAgICBhbW91bnQ6IGFtb3VudCwKICAgICAgYWRtaW5GZWU6IGFkbWluRmVlCiAgICB9LCBiYWxhbmNlcyksCiAgICBjaGVja1N0YXR1czogZnVuY3Rpb24gY2hlY2tTdGF0dXMocmVzKSB7CiAgICAgIHRyeSB7CiAgICAgICAgaWYgKHJlcyAmJiByZXMuYW5zd2VyICE9PSB1bmRlZmluZWQpIHJldHVybiB0cnVlOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgLyogKi8KICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0pLnRoZW4oZnVuY3Rpb24gKF9yZWYpIHsKICAgIHZhciBhbnN3ZXIgPSBfcmVmLmFuc3dlcjsKICAgIHJldHVybiBhbnN3ZXI7CiAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGUpIHsKICAgIHJldHVybiBmYWxzZTsKICB9KTsKfTsKLyoqDQogKiDQktGB0L/QvtC80L7Qs9Cw0YLQtdC70YzQvdCw0Y8g0YTRg9C90LrRhtC40Y8sINC+0L/RgNCw0YjQuNCy0LDQtdGCINCx0LDQu9Cw0L3RgdGLINC/0LXRgNC10LQg0LLRi9C/0L7Qu9C90LXQvdC40LXQvCDRgtGA0LDQvdC30LDQutGG0LjQuA0KICog0JTQu9GPINGA0LDRgdGH0LXRgtCwINGE0LjQvdCw0LvRjNC90YvRhSDQsdCw0LvQsNC90YHQvtCyINC90LAg0LDQtNGA0LXRgdC1INC+0YLQv9GA0LDQstC70LXQvdC40Y8g0Lgg0LDQtNGA0LXRgdC1INC/0L7Qu9GD0YfQsNGC0LXQu9GPDQogKiDQndCwINC80L7QvNC10L3RgiDQstGL0L/QvtC70L3QtdC90LjRjyDRgtGA0LDQvdC30LDQutGG0LjQuA0KICovCgoKdmFyIGdldFR4QmFsYW5jZXMgPSBmdW5jdGlvbiBnZXRUeEJhbGFuY2VzKGN1cnJlbmN5LCBmcm9tLCB0bykgewogIHZhciBwcmVmaXggPSBoZWxwZXJzLmdldEN1cnJlbmN5S2V5KGN1cnJlbmN5LCBmYWxzZSk7CiAgdmFyIGN1ck5hbWUgPSBoZWxwZXJzLmdldEN1cnJlbmN5S2V5KGN1cnJlbmN5LCB0cnVlKTsKCiAgaWYgKGFjdGlvbnNbcHJlZml4XSkgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHJlc29sdmUpIHsKICAgICAgICB2YXIgZnJvbUJhbGFuY2UsIHRvQmFsYW5jZSwgdG9rZW5EYXRhOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBmcm9tQmFsYW5jZSA9IDA7CiAgICAgICAgICAgICAgICB0b0JhbGFuY2UgPSAwOwoKICAgICAgICAgICAgICAgIGlmICghaGVscGVycy5ldGhUb2tlbi5pc0V0aFRva2VuKHsKICAgICAgICAgICAgICAgICAgbmFtZTogY3VyTmFtZQogICAgICAgICAgICAgICAgfSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0b2tlbkRhdGEgPSBhY3Rpb25zW3ByZWZpeF0ud2l0aFRva2VuKGN1ck5hbWUpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gYWN0aW9uc1twcmVmaXhdLmZldGNoQmFsYW5jZShmcm9tLCB0b2tlbkRhdGEuY29udHJhY3RBZGRyZXNzLCB0b2tlbkRhdGEuZGVjaW1hbHMpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBmcm9tQmFsYW5jZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIHJldHVybiBhY3Rpb25zW3ByZWZpeF0uZmV0Y2hCYWxhbmNlKHRvLCB0b2tlbkRhdGEuY29udHJhY3RBZGRyZXNzLCB0b2tlbkRhdGEuZGVjaW1hbHMpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICB0b0JhbGFuY2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICByZXR1cm4gYWN0aW9uc1twcmVmaXhdLmZldGNoQmFsYW5jZShmcm9tKTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIGZyb21CYWxhbmNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgIHJldHVybiBhY3Rpb25zW3ByZWZpeF0uZmV0Y2hCYWxhbmNlKHRvKTsKCiAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgIHRvQmFsYW5jZSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICByZXNvbHZlKHsKICAgICAgICAgICAgICAgICAgY3VyTmFtZTogY3VyTmFtZSwKICAgICAgICAgICAgICAgICAgZnJvbTogZnJvbSwKICAgICAgICAgICAgICAgICAgdG86IHRvLAogICAgICAgICAgICAgICAgICBmcm9tQmFsYW5jZTogZnJvbUJhbGFuY2UsCiAgICAgICAgICAgICAgICAgIHRvQmFsYW5jZTogdG9CYWxhbmNlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCkpOwogIH0KCiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICByZXNvbHZlKGZhbHNlKTsKICB9KTsKfTsKCnZhciBnZXRUeFJvdXRlciA9IGZ1bmN0aW9uIGdldFR4Um91dGVyKGN1cnJlbmN5LCB0eElkKSB7CiAgdmFyIHByZWZpeCA9IGhlbHBlcnMuZ2V0Q3VycmVuY3lLZXkoY3VycmVuY3ksIGZhbHNlKTsKCiAgaWYgKGFjdGlvbnNbcHJlZml4XSAmJiB0eXBlb2YgYWN0aW9uc1twcmVmaXhdLmdldFR4Um91dGVyID09PSAnZnVuY3Rpb24nKSB7CiAgICByZXR1cm4gYWN0aW9uc1twcmVmaXhdLmdldFR4Um91dGVyKHR4SWQsIGN1cnJlbmN5LnRvTG93ZXJDYXNlKCkpOwogIH0KCiAgY29uc29sZS53YXJuKCJGdW5jdGlvbiBnZXRUeFJvdXRlciBmb3IgIi5jb25jYXQocHJlZml4LCAiIG5vdCBkZWZpbmVkIChjdXJyZW5jeTogIikuY29uY2F0KGN1cnJlbmN5LCAiKSIpKTsKfTsKCnZhciBnZXRMaW5rID0gZnVuY3Rpb24gZ2V0TGluayhjdXJyZW5jeSwgdHhJZCkgewogIHZhciBwcmVmaXggPSBoZWxwZXJzLmdldEN1cnJlbmN5S2V5KGN1cnJlbmN5LCBmYWxzZSk7CgogIGlmIChhY3Rpb25zW3ByZWZpeF0gJiYgdHlwZW9mIGFjdGlvbnNbcHJlZml4XS5nZXRMaW5rVG9JbmZvID09PSAnZnVuY3Rpb24nKSB7CiAgICByZXR1cm4gYWN0aW9uc1twcmVmaXhdLmdldExpbmtUb0luZm8odHhJZCk7CiAgfQoKICBjb25zb2xlLndhcm4oIkZ1bmN0aW9uIGdldExpbmtUb0luZm8gZm9yICIuY29uY2F0KHByZWZpeCwgIiBub3QgZGVmaW5lZCIpKTsKfTsKCnZhciBnZXRJbmZvID0gZnVuY3Rpb24gZ2V0SW5mbyhjdXJyZW5jeSwgdHhSYXcpIHsKICB2YXIgcHJlZml4ID0gaGVscGVycy5nZXRDdXJyZW5jeUtleShjdXJyZW5jeSwgZmFsc2UpOwoKICBpZiAoYWN0aW9uc1twcmVmaXhdICYmIHR5cGVvZiBhY3Rpb25zW3ByZWZpeF0uZ2V0VHggPT09ICdmdW5jdGlvbicpIHsKICAgIHZhciB0eCA9IGFjdGlvbnNbcHJlZml4XS5nZXRUeCh0eFJhdyk7CiAgICB2YXIgbGluayA9IGdldExpbmsocHJlZml4LCB0eCk7CiAgICByZXR1cm4gewogICAgICB0eDogdHgsCiAgICAgIGxpbms6IGxpbmsKICAgIH07CiAgfQoKICBjb25zb2xlLndhcm4oIkZ1bmN0aW9uIGdldFR4IGZvciAiLmNvbmNhdChwcmVmaXgsICIgbm90IGRlZmluZWQiKSk7CiAgcmV0dXJuIHsKICAgIHR4OiAnJywKICAgIGxpbms6ICcnCiAgfTsKfTsKCmV4cG9ydCBkZWZhdWx0IHsKICBnZXRJbmZvOiBnZXRJbmZvLAogIGdldExpbms6IGdldExpbmssCiAgZ2V0VHhSb3V0ZXI6IGdldFR4Um91dGVyLAogIGdldFR4QmFsYW5jZXM6IGdldFR4QmFsYW5jZXMsCiAgcHVsbFR4QmFsYW5jZXM6IHB1bGxUeEJhbGFuY2VzLAogIGZldGNoVHhCYWxhbmNlczogZmV0Y2hUeEJhbGFuY2VzCn07"},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/front/shared/helpers/transactions.ts"],"names":["helpers","actions","apiLooper","fetchTxBalances","currency","txId","curName","getCurrencyKey","get","checkStatus","res","answer","undefined","e","then","data","pullTxBalances","amount","balances","adminFee","post","body","getTxBalances","from","to","prefix","Promise","resolve","fromBalance","toBalance","ethToken","isEthToken","name","tokenData","withToken","fetchBalance","contractAddress","decimals","getTxRouter","toLowerCase","console","warn","getLink","getLinkToInfo","getInfo","txRaw","getTx","tx","link"],"mappings":"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","sourcesContent":["import helpers from 'helpers'\r\nimport actions from 'redux/actions'\r\nimport config from 'helpers/externalConfig'\r\nimport apiLooper from 'helpers/apiLooper'\r\n\r\n\r\n/**\r\n * Запрашивает информацию о tx (final balances)\r\n */\r\nconst fetchTxBalances = (currency, txId) => {\r\n  const curName = helpers.getCurrencyKey(currency, true)\r\n  return apiLooper.get('txinfo', `/tx/${curName}/${txId}`, {\r\n    checkStatus: (res) => {\r\n      try {\r\n        if (res && res.answer !== undefined) return true\r\n      } catch (e) { /* */ }\r\n      return false\r\n    },\r\n  }).then((res: any) => {\r\n    if (res\r\n      && res.answer\r\n      && res.answer === 'ok'\r\n      && res.data\r\n    ) {\r\n      return res.data\r\n    }\r\n    return false\r\n\r\n  }).catch((e) => false)\r\n}\r\n\r\n/**\r\n * Сохраняет информацию о балансах на момент выполнения транзакции на backend\r\n */\r\nconst pullTxBalances = (txId, amount, balances, adminFee) => apiLooper.post('txinfo', `/pull`, {\r\n  body: {\r\n    txId,\r\n    amount,\r\n    adminFee,\r\n    ...balances,\r\n  },\r\n  checkStatus: (res) => {\r\n    try {\r\n      if (res && res.answer !== undefined) return true\r\n    } catch (e) { /* */ }\r\n    return false\r\n  },\r\n}).then(({ answer }) => answer).catch((e) => false)\r\n\r\n/**\r\n * Вспомогательная функция, опрашивает балансы перед выполнением транзакции\r\n * Для расчета финальных балансов на адресе отправления и адресе получателя\r\n * На момент выполнения транзакции\r\n */\r\nconst getTxBalances = (currency, from, to) => {\r\n  const prefix = helpers.getCurrencyKey(currency, false)\r\n  const curName = helpers.getCurrencyKey(currency, true)\r\n\r\n  if (actions[prefix]) {\r\n    return new Promise(async (resolve) => {\r\n      let fromBalance = 0\r\n      let toBalance = 0\r\n      if (helpers.ethToken.isEthToken({ name: curName })) {\r\n        const tokenData = actions[prefix].withToken(curName)\r\n        fromBalance = await actions[prefix].fetchBalance(from, tokenData.contractAddress, tokenData.decimals)\r\n        toBalance = await actions[prefix].fetchBalance(to, tokenData.contractAddress, tokenData.decimals)\r\n      } else {\r\n        fromBalance = await actions[prefix].fetchBalance(from)\r\n        toBalance = await actions[prefix].fetchBalance(to)\r\n      }\r\n\r\n      resolve({\r\n        curName,\r\n        from,\r\n        to,\r\n        fromBalance,\r\n        toBalance,\r\n      })\r\n    })\r\n  }\r\n  return new Promise((resolve) => { resolve(false) })\r\n\r\n}\r\n\r\nconst getTxRouter = (currency, txId) => {\r\n  const prefix = helpers.getCurrencyKey(currency, false)\r\n\r\n  if (actions[prefix]\r\n    && typeof actions[prefix].getTxRouter === 'function'\r\n  ) {\r\n    return actions[prefix].getTxRouter(txId, currency.toLowerCase())\r\n  }\r\n  console.warn(`Function getTxRouter for ${prefix} not defined (currency: ${currency})`)\r\n\r\n}\r\n\r\nconst getLink = (currency, txId) => {\r\n  const prefix = helpers.getCurrencyKey(currency, false)\r\n\r\n  if (actions[prefix]\r\n    && typeof actions[prefix].getLinkToInfo === 'function'\r\n  ) {\r\n    return actions[prefix].getLinkToInfo(txId)\r\n  }\r\n  console.warn(`Function getLinkToInfo for ${prefix} not defined`)\r\n\r\n}\r\n\r\nconst getInfo = (currency, txRaw) => {\r\n  const prefix = helpers.getCurrencyKey(currency, false)\r\n\r\n  if (actions[prefix]\r\n    && typeof actions[prefix].getTx === 'function'\r\n  ) {\r\n    const tx = actions[prefix].getTx(txRaw)\r\n    const link =  getLink(prefix, tx)\r\n    return {\r\n      tx,\r\n      link,\r\n    }\r\n  }\r\n  console.warn(`Function getTx for ${prefix} not defined`)\r\n  return {\r\n    tx: '',\r\n    link: '',\r\n  }\r\n\r\n}\r\n\r\nexport default {\r\n  getInfo,\r\n  getLink,\r\n  getTxRouter,\r\n  getTxBalances,\r\n  pullTxBalances,\r\n  fetchTxBalances,\r\n}\r\n"]}]}