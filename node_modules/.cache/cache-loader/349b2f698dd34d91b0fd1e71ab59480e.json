{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\helpers\\wpLogoutModal.ts","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\helpers\\wpLogoutModal.ts","mtime":1614851966940},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8gQHRzLW5vY2hlY2sKaW1wb3J0IHsgZGVmaW5lTWVzc2FnZXMgfSBmcm9tICdyZWFjdC1pbnRsJzsKaW1wb3J0IGFjdGlvbnMgZnJvbSAncmVkdXgvYWN0aW9ucyc7CmltcG9ydCB7IGNvbnN0YW50cyB9IGZyb20gJ2hlbHBlcnMnOwp2YXIgYWxlcnRUZXh0cyA9IGRlZmluZU1lc3NhZ2VzKHsKICB0aXRsZTogewogICAgaWQ6ICdXaWRnZXRFeGl0QWxlcnRUaXRsZScsCiAgICBkZWZhdWx0TWVzc2FnZTogJ09uZSBtb3JlIHN0ZXAnCiAgfSwKICBtZXNzYWdlOiB7CiAgICBpZDogJ3dpZGdldEV4aXRBbGVydE1lc3NhZ2UnLAogICAgZGVmYXVsdE1lc3NhZ2U6ICdTYXZlIHlvdXIgc2VjcmV0IHBocmFzZSBiZWZvcmUgZXhpdCEnCiAgfQp9KTsKdmFyIGNvbmZpcm1UZXh0cyA9IGRlZmluZU1lc3NhZ2VzKHsKICB0aXRsZTogewogICAgaWQ6ICdXaWRnZXRFeGl0VGl0bGUzJywKICAgIGRlZmF1bHRNZXNzYWdlOiAnQ29uZmlybSBleGl0JwogIH0sCiAgbWVzc2FnZTogewogICAgaWQ6ICd3aWRnZXRBcHByb3ZlTWVzc2FnZScsCiAgICBkZWZhdWx0TWVzc2FnZTogJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBsb2dvdXQ/JwogIH0sCiAgbm86IHsKICAgIGlkOiAnd2lkZ2V0QXBwcm92ZUNhbmNlbCcsCiAgICBkZWZhdWx0TWVzc2FnZTogJ0NhbmNlbCcKICB9LAogIHllczogewogICAgaWQ6ICd3aWRnZXRBcHByb3ZlQXBwcm92ZScsCiAgICBkZWZhdWx0TWVzc2FnZTogJ1llcycKICB9Cn0pOwoKdmFyIGhhbmRsZVNob3dNbmVtb25pYyA9IGZ1bmN0aW9uIGhhbmRsZVNob3dNbmVtb25pYygpIHsKICBhY3Rpb25zLm1vZGFscy5vcGVuKGNvbnN0YW50cy5tb2RhbHMuU2F2ZU1uZW1vbmljTW9kYWwpOwp9OwoKdmFyIGhhbmRsZUNvbmZpcm0gPSBmdW5jdGlvbiBoYW5kbGVDb25maXJtKCkgewogIC8vQAogIGFjdGlvbnMuYmFja3VwTWFuYWdlci5zZXJ2ZXJCYWNrdXAoKS50aGVuKGZ1bmN0aW9uIChiYWNrdXBSZWFkeSwgaGFzQmFja3VwUGx1Z2luKSB7CiAgICBjb25zb2xlLmxvZygnQmFja3VwIHJlYWR5JywgYmFja3VwUmVhZHkpOwoKICAgIGlmIChoYXNCYWNrdXBQbHVnaW4pIHsKICAgICAgaWYgKGJhY2t1cFJlYWR5KSB3aW5kb3cubG9jYWxTdG9yYWdlLmNsZWFyKCk7CiAgICB9IGVsc2UgewogICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmNsZWFyKCk7CiAgICB9CgogICAgd2luZG93LmxvY2F0aW9uID0gd2luZG93ICYmIHdpbmRvdy5sb2dvdXRVcmwgPyB3aW5kb3cubG9nb3V0VXJsIDogJy93cC1sb2dpbi5waHA/YWN0aW9uPWxvZ291dCc7CiAgfSk7Cn07Cgp2YXIgd3BMb2dvdXRNb2RhbCA9IGZ1bmN0aW9uIHdwTG9nb3V0TW9kYWwob25DYW5jZWxIYW5kbGUsIGludGwpIHsKICB2YXIgbW5lbW9uaWMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShjb25zdGFudHMucHJpdmF0ZUtleU5hbWVzLnR3ZW50eXdvcmRzKTsKICB2YXIgbW5lbW9uaWNTYXZlZCA9IG1uZW1vbmljID09PSAiLSI7CgogIGlmICghbW5lbW9uaWNTYXZlZCkgewogICAgYWN0aW9ucy5tb2RhbHMub3Blbihjb25zdGFudHMubW9kYWxzLkFsZXJ0TW9kYWwsIHsKICAgICAgdGl0bGU6IGludGwuZm9ybWF0TWVzc2FnZShhbGVydFRleHRzLnRpdGxlKSwKICAgICAgbWVzc2FnZTogaW50bC5mb3JtYXRNZXNzYWdlKGFsZXJ0VGV4dHMubWVzc2FnZSksCiAgICAgIG9uQ2xvc2U6IGZ1bmN0aW9uIG9uQ2xvc2UoKSB7CiAgICAgICAgcmV0dXJuIGhhbmRsZVNob3dNbmVtb25pYygpOwogICAgICB9CiAgICB9KTsKICB9IGVsc2UgewogICAgYWN0aW9ucy5tb2RhbHMub3Blbihjb25zdGFudHMubW9kYWxzLkNvbmZpcm0sIHsKICAgICAgdGl0bGU6IGludGwuZm9ybWF0TWVzc2FnZShjb25maXJtVGV4dHMudGl0bGUpLAogICAgICBtZXNzYWdlOiBpbnRsLmZvcm1hdE1lc3NhZ2UoY29uZmlybVRleHRzLm1lc3NhZ2UpLAogICAgICBsYWJlbE5vOiBpbnRsLmZvcm1hdE1lc3NhZ2UoY29uZmlybVRleHRzLm5vKSwKICAgICAgbGFiZWxZZXM6IGludGwuZm9ybWF0TWVzc2FnZShjb25maXJtVGV4dHMueWVzKSwKICAgICAgb25DYW5jZWw6IG9uQ2FuY2VsSGFuZGxlLAogICAgICBvbkNsb3NlOiBvbkNhbmNlbEhhbmRsZSwKICAgICAgb25BY2NlcHQ6IGZ1bmN0aW9uIG9uQWNjZXB0KCkgewogICAgICAgIHJldHVybiBoYW5kbGVDb25maXJtKCk7CiAgICAgIH0KICAgIH0pOwogIH0KfTsKCmV4cG9ydCBkZWZhdWx0IHdwTG9nb3V0TW9kYWw7"},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/front/shared/helpers/wpLogoutModal.ts"],"names":["defineMessages","actions","constants","alertTexts","title","id","defaultMessage","message","confirmTexts","no","yes","handleShowMnemonic","modals","open","SaveMnemonicModal","handleConfirm","backupManager","serverBackup","then","backupReady","hasBackupPlugin","console","log","window","localStorage","clear","location","logoutUrl","wpLogoutModal","onCancelHandle","intl","mnemonic","getItem","privateKeyNames","twentywords","mnemonicSaved","AlertModal","formatMessage","onClose","Confirm","labelNo","labelYes","onCancel","onAccept"],"mappings":"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","sourcesContent":["// @ts-nocheck\r\nimport { FormattedMessage, injectIntl, defineMessages } from 'react-intl'\r\nimport actions from 'redux/actions'\r\nimport { constants } from 'helpers'\r\n\r\n\r\nconst alertTexts = defineMessages({\r\n  title: {\r\n    id: 'WidgetExitAlertTitle',\r\n    defaultMessage: 'One more step',\r\n  },\r\n  message: {\r\n    id: 'widgetExitAlertMessage',\r\n    defaultMessage: 'Save your secret phrase before exit!',\r\n  },\r\n})\r\n\r\n\r\nconst confirmTexts = defineMessages({\r\n  title: {\r\n    id: 'WidgetExitTitle3',\r\n    defaultMessage: 'Confirm exit',\r\n  },\r\n  message: {\r\n    id: 'widgetApproveMessage',\r\n    defaultMessage: 'Are you sure you want to logout?',\r\n  },\r\n  no: {\r\n    id: 'widgetApproveCancel',\r\n    defaultMessage: 'Cancel',\r\n  },\r\n  yes: {\r\n    id: 'widgetApproveApprove',\r\n    defaultMessage: 'Yes',\r\n  },\r\n})\r\n\r\nconst handleShowMnemonic = () => {\r\n  actions.modals.open(constants.modals.SaveMnemonicModal)\r\n}\r\n\r\nconst handleConfirm = () => {\r\n  //@\r\n  actions.backupManager.serverBackup().then((backupReady, hasBackupPlugin) => {\r\n    console.log('Backup ready', backupReady)\r\n    if (hasBackupPlugin) {\r\n      if (backupReady) window.localStorage.clear()\r\n    } else {\r\n      window.localStorage.clear()\r\n    }\r\n\r\n    window.location = (window && window.logoutUrl) ? window.logoutUrl : '/wp-login.php?action=logout'\r\n  })\r\n}\r\n\r\nconst wpLogoutModal = (onCancelHandle, intl) => {\r\n  const mnemonic = localStorage.getItem(constants.privateKeyNames.twentywords)\r\n  const mnemonicSaved = (mnemonic === `-`)\r\n  if (!mnemonicSaved)  {\r\n    actions.modals.open(constants.modals.AlertModal, {\r\n      title: intl.formatMessage(alertTexts.title),\r\n      message: intl.formatMessage(alertTexts.message),\r\n      onClose: () => handleShowMnemonic(),\r\n    })\r\n  } else {\r\n    actions.modals.open(constants.modals.Confirm, {\r\n      title: intl.formatMessage(confirmTexts.title),\r\n      message: intl.formatMessage(confirmTexts.message),\r\n      labelNo: intl.formatMessage(confirmTexts.no),\r\n      labelYes: intl.formatMessage(confirmTexts.yes),\r\n      onCancel: onCancelHandle,\r\n      onClose: onCancelHandle,\r\n      onAccept: () => handleConfirm(),\r\n    })\r\n  }\r\n}\r\n\r\n\r\nexport default wpLogoutModal"]}]}