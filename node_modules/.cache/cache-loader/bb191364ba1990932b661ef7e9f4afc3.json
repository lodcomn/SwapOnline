{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\components\\modals\\RestoryMnemonicWallet\\RestoryMnemonicWallet.tsx","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\components\\modals\\RestoryMnemonicWallet\\RestoryMnemonicWallet.tsx","mtime":1614850725266},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI7CmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXNzZXJ0VGhpc0luaXRpYWxpemVkIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9nZXRQcm90b3R5cGVPZiI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSI7Cgp2YXIgX2RlYywgX2RlYzIsIF9jbGFzcywgX3RlbXA7CgppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICJAYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvciI7CgpmdW5jdGlvbiBfY3JlYXRlU3VwZXIoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfQoKZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSAidW5kZWZpbmVkIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gImZ1bmN0aW9uIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCi8vIEB0cy1ub2NoZWNrCmltcG9ydCBSZWFjdCwgeyBGcmFnbWVudCB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgY29uc3RhbnRzIH0gZnJvbSAnaGVscGVycyc7CmltcG9ydCBhY3Rpb25zIGZyb20gJ3JlZHV4L2FjdGlvbnMnOwppbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVkYWN0aW9uJzsKaW1wb3J0IGNvbmZpZyBmcm9tICdhcHAtY29uZmlnJzsKaW1wb3J0IGNzc01vZHVsZXMgZnJvbSAncmVhY3QtY3NzLW1vZHVsZXMnOwppbXBvcnQgZGVmYXVsdFN0eWxlcyBmcm9tICcuLi9TdHlsZXMvZGVmYXVsdC5zY3NzJzsKaW1wb3J0IHN0eWxlcyBmcm9tICcuL1Jlc3RvcnlNbmVtb25pY1dhbGxldC5zY3NzJzsKaW1wb3J0IG9rU3ZnIGZyb20gJ3NoYXJlZC9pbWFnZXMvb2suc3ZnJzsKaW1wb3J0IE1vZGFsIGZyb20gJ2NvbXBvbmVudHMvbW9kYWwvTW9kYWwvTW9kYWwnOwppbXBvcnQgRmllbGRMYWJlbCBmcm9tICdjb21wb25lbnRzL2Zvcm1zL0ZpZWxkTGFiZWwvRmllbGRMYWJlbCc7CmltcG9ydCBCdXR0b24gZnJvbSAnY29tcG9uZW50cy9jb250cm9scy9CdXR0b24vQnV0dG9uJzsKaW1wb3J0IFRvb2x0aXAgZnJvbSAnY29tcG9uZW50cy91aS9Ub29sdGlwL1Rvb2x0aXAnOwppbXBvcnQgeyBGb3JtYXR0ZWRNZXNzYWdlLCBpbmplY3RJbnRsLCBkZWZpbmVNZXNzYWdlcyB9IGZyb20gJ3JlYWN0LWludGwnOwppbXBvcnQgbGlua3MgZnJvbSAnaGVscGVycy9saW5rcyc7CmltcG9ydCBNbmVtb25pY0lucHV0IGZyb20gJ2NvbXBvbmVudHMvZm9ybXMvTW5lbW9uaWNJbnB1dC9NbmVtb25pY0lucHV0JzsKaW1wb3J0IGZlZWRiYWNrIGZyb20gJ3NoYXJlZC9oZWxwZXJzL2ZlZWRiYWNrJzsKdmFyIGxhbmdQcmVmaXggPSAiUmVzdG9yeU1uZW1vbmljV2FsbGV0IjsKdmFyIGxhbmdMYWJlbHMgPSBkZWZpbmVNZXNzYWdlcyh7CiAgdGl0bGU6IHsKICAgIGlkOiAiIi5jb25jYXQobGFuZ1ByZWZpeCwgIl9UaXRsZSIpLAogICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MTJcdTA0M0VcdTA0NDFcdTA0NDFcdTA0NDJcdTA0MzBcdTA0M0RcdTA0M0VcdTA0MzJcdTA0M0JcdTA0MzVcdTA0M0RcdTA0MzhcdTA0MzUgXHUwNDNBXHUwNDNFXHUwNDQ4XHUwNDM1XHUwNDNCXHUwNDNBXHUwNDMwIFx1MDQzOFx1MDQzNyBcdTA0NDFcdTA0MzVcdTA0M0FcdTA0NDBcdTA0MzVcdTA0NDJcdTA0M0RcdTA0M0VcdTA0MzkgXHUwNDQ0XHUwNDQwXHUwNDMwXHUwNDM3XHUwNDRCIgogIH0sCiAgbW5lbW9uaWNMYWJlbDogewogICAgaWQ6ICIiLmNvbmNhdChsYW5nUHJlZml4LCAiX01uZW1vbmljRmllbGQiKSwKICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDIxXHUwNDM1XHUwNDNBXHUwNDQwXHUwNDM1XHUwNDQyXHUwNDNEXHUwNDMwXHUwNDRGIFx1MDQ0NFx1MDQ0MFx1MDQzMFx1MDQzN1x1MDQzMCAoMTIgXHUwNDQxXHUwNDNCXHUwNDNFXHUwNDMyKToiCiAgfSwKICBtbmVtb25pY1BsYWNlaG9sZGVyOiB7CiAgICBpZDogIiIuY29uY2F0KGxhbmdQcmVmaXgsICJfTW5lbW9uaWNQbGFjZWhvbGRlciIpLAogICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MTJcdTA0MzJcdTA0MzVcdTA0MzRcdTA0MzhcdTA0NDJcdTA0MzUgXHUwNDQxXHUwNDNFXHUwNDQ1XHUwNDQwXHUwNDMwXHUwNDNEXHUwNDM1XHUwNDNEXHUwNDNEXHUwNDQzXHUwNDRFIFx1MDQ0NFx1MDQ0MFx1MDQzMFx1MDQzN1x1MDQ0MywgXHUwNDM0XHUwNDNCXHUwNDRGIFx1MDQzMlx1MDQzRVx1MDQ0MVx1MDQ0MVx1MDQ0Mlx1MDQzMFx1MDQzRFx1MDQzRVx1MDQzMlx1MDQzQlx1MDQzNVx1MDQzRFx1MDQzOFx1MDQ0RiBcdTA0M0FcdTA0M0VcdTA0NDhcdTA0MzVcdTA0M0JcdTA0NENcdTA0M0FcdTA0MzAiCiAgfSwKICByZWFkeU5vdGljZTogewogICAgaWQ6ICIiLmNvbmNhdChsYW5nUHJlZml4LCAiX1JlYWR5Tm90aWNlIiksCiAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQyMlx1MDQzNVx1MDQzRlx1MDQzNVx1MDQ0MFx1MDQ0QyBcdTA0MzJcdTA0NEIgXHUwNDNDXHUwNDNFXHUwNDM2XHUwNDM1XHUwNDQyXHUwNDM1IFx1MDQzNFx1MDQzRVx1MDQzMVx1MDQzMFx1MDQzMlx1MDQzOFx1MDQ0Mlx1MDQ0QyBCVEMsIEVUSCBcdTA0MzggXHUwNDM0XHUwNDQwXHUwNDQzXHUwNDMzXHUwNDM4XHUwNDM1IFx1MDQzMlx1MDQzMFx1MDQzQlx1MDQ0RVx1MDQ0Mlx1MDQ0QiIKICB9LAogIFJlYWR5OiB7CiAgICBpZDogIiIuY29uY2F0KGxhbmdQcmVmaXgsICJfUmVhZHkiKSwKICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDEzXHUwNDNFXHUwNDQyXHUwNDNFXHUwNDMyXHUwNDNFIgogIH0sCiAgcmVzdG9yaW5nV2FsbGV0OiB7CiAgICBpZDogIiIuY29uY2F0KGxhbmdQcmVmaXgsICJfUmVzdHJvcmluZ1dhbGxldCIpLAogICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MTJcdTA0M0VcdTA0NDFcdTA0NDFcdTA0NDJcdTA0MzBcdTA0M0RcdTA0MzBcdTA0MzJcdTA0M0JcdTA0MzhcdTA0MzJcdTA0MzBcdTA0MzVcdTA0M0MuLi4iCiAgfSwKICByZXN0b3J5V2FsbGV0OiB7CiAgICBpZDogIiIuY29uY2F0KGxhbmdQcmVmaXgsICJfUmVzdG9yeVdhbGxldCIpLAogICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MTJcdTA0M0VcdTA0NDFcdTA0NDFcdTA0NDJcdTA0MzBcdTA0M0RcdTA0M0VcdTA0MzJcdTA0MzhcdTA0NDJcdTA0NEMiCiAgfSwKICBjYW5jZWxSZXN0b3J5OiB7CiAgICBpZDogIiIuY29uY2F0KGxhbmdQcmVmaXgsICJfQ2FuY2VsUmVzdG9yeSIpLAogICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MUVcdTA0NDJcdTA0M0NcdTA0MzVcdTA0M0RcdTA0MzAiCiAgfSwKICBtbmVtb25pY0ludmFsaWQ6IHsKICAgIGlkOiAiIi5jb25jYXQobGFuZ1ByZWZpeCwgIl9NbmVtb25pY0ludmFsaWQiKSwKICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDEyXHUwNDRCIFx1MDQ0M1x1MDQzQVx1MDQzMFx1MDQzN1x1MDQzMFx1MDQzQlx1MDQzOCBcdTA0M0RcdTA0MzUgXHUwNDMyXHUwNDMwXHUwNDNCXHUwNDM4XHUwNDM0XHUwNDNEXHUwNDRCXHUwNDM5IFx1MDQzRFx1MDQzMFx1MDQzMVx1MDQzRVx1MDQ0MCBcdTA0NDFcdTA0M0JcdTA0M0VcdTA0MzIiCiAgfQp9KTsKdmFyIFJlc3RvcnlNbmVtb25pY1dhbGxldCA9IChfZGVjID0gY29ubmVjdChmdW5jdGlvbiAoX3JlZikgewogIHZhciBfcmVmJHVzZXIgPSBfcmVmLnVzZXIsCiAgICAgIGJ0Y0RhdGEgPSBfcmVmJHVzZXIuYnRjRGF0YSwKICAgICAgYnRjTXVsdGlzaWdTTVNEYXRhID0gX3JlZiR1c2VyLmJ0Y011bHRpc2lnU01TRGF0YSwKICAgICAgYnRjTXVsdGlzaWdVc2VyRGF0YSA9IF9yZWYkdXNlci5idGNNdWx0aXNpZ1VzZXJEYXRhLAogICAgICBldGhEYXRhID0gX3JlZiR1c2VyLmV0aERhdGEsCiAgICAgIGdob3N0RGF0YSA9IF9yZWYkdXNlci5naG9zdERhdGEsCiAgICAgIG5leHREYXRhID0gX3JlZiR1c2VyLm5leHREYXRhOwogIHJldHVybiB7CiAgICBhbGxDdXJyZW5zaWVzOiBbYnRjRGF0YSwgYnRjRGF0YSwgYnRjTXVsdGlzaWdTTVNEYXRhLCBidGNNdWx0aXNpZ1VzZXJEYXRhLCBldGhEYXRhLCBnaG9zdERhdGEsIG5leHREYXRhXQogIH07Cn0pLCBfZGVjMiA9IGNzc01vZHVsZXMoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkZWZhdWx0U3R5bGVzKSwgc3R5bGVzKSwgewogIGFsbG93TXVsdGlwbGU6IHRydWUKfSksIGluamVjdEludGwoX2NsYXNzID0gX2RlYyhfY2xhc3MgPSBfZGVjMihfY2xhc3MgPSAoX3RlbXAgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHsKICBfaW5oZXJpdHMoUmVzdG9yeU1uZW1vbmljV2FsbGV0LCBfUmVhY3QkQ29tcG9uZW50KTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihSZXN0b3J5TW5lbW9uaWNXYWxsZXQpOwoKICBmdW5jdGlvbiBSZXN0b3J5TW5lbW9uaWNXYWxsZXQocHJvcHMpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVzdG9yeU1uZW1vbmljV2FsbGV0KTsKCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJwcm9wcyIsIHZvaWQgMCk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAic3RhdGUiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImZldGNoRGF0YSIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgYWxsQ3VycmVuc2llcywgX2FsbEN1cnJlbnNpZXMkcmVkdWNlLCBidGNCYWxhbmNlLCB1c2RCYWxhbmNlOwoKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBhbGxDdXJyZW5zaWVzID0gX3RoaXMucHJvcHMuYWxsQ3VycmVuc2llczsKICAgICAgICAgICAgICBfYWxsQ3VycmVuc2llcyRyZWR1Y2UgPSBhbGxDdXJyZW5zaWVzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBjdXJyKSB7CiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGN1cnIubmFtZSwKICAgICAgICAgICAgICAgICAgICBpbmZvQWJvdXRDdXJyZW5jeSA9IGN1cnIuaW5mb0Fib3V0Q3VycmVuY3ksCiAgICAgICAgICAgICAgICAgICAgYmFsYW5jZSA9IGN1cnIuYmFsYW5jZTsKCiAgICAgICAgICAgICAgICBpZiAoIC8vQAogICAgICAgICAgICAgICAgKCFpc1dpZGdldEJ1aWxkIHx8IHdpZGdldEN1cnJlbmNpZXMuaW5jbHVkZXMobmFtZSkpICYmIGluZm9BYm91dEN1cnJlbmN5ICYmIGJhbGFuY2UgIT09IDApIHsKICAgICAgICAgICAgICAgICAgYWNjLmJ0Y0JhbGFuY2UgKz0gYmFsYW5jZSAqIGluZm9BYm91dEN1cnJlbmN5LnByaWNlX2J0YzsKICAgICAgICAgICAgICAgICAgYWNjLnVzZEJhbGFuY2UgKz0gYmFsYW5jZSAqIChpbmZvQWJvdXRDdXJyZW5jeS5wcmljZV9maWF0ID8gaW5mb0Fib3V0Q3VycmVuY3kucHJpY2VfZmlhdCA6IDEpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBhY2M7CiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgYnRjQmFsYW5jZTogMCwKICAgICAgICAgICAgICAgIHVzZEJhbGFuY2U6IDAKICAgICAgICAgICAgICB9KSwgYnRjQmFsYW5jZSA9IF9hbGxDdXJyZW5zaWVzJHJlZHVjZS5idGNCYWxhbmNlLCB1c2RCYWxhbmNlID0gX2FsbEN1cnJlbnNpZXMkcmVkdWNlLnVzZEJhbGFuY2U7CgogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICBkYXRhOiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgICAgICAgICBidGNCYWxhbmNlOiBidGNCYWxhbmNlLAogICAgICAgICAgICAgICAgICAgIHVzZEJhbGFuY2U6IHVzZEJhbGFuY2UKICAgICAgICAgICAgICAgICAgfSwgZGF0YSkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVDbG9zZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF90aGlzJHByb3BzID0gX3RoaXMucHJvcHMsCiAgICAgICAgICBuYW1lID0gX3RoaXMkcHJvcHMubmFtZSwKICAgICAgICAgIGRhdGEgPSBfdGhpcyRwcm9wcy5kYXRhLAogICAgICAgICAgb25DbG9zZSA9IF90aGlzJHByb3BzLm9uQ2xvc2U7CgogICAgICBpZiAodHlwZW9mIG9uQ2xvc2UgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICBvbkNsb3NlKCk7CiAgICAgIH0KCiAgICAgIGlmIChkYXRhICYmIHR5cGVvZiBkYXRhLm9uQ2xvc2UgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICBkYXRhLm9uQ2xvc2UoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB3aW5kb3cubG9jYXRpb24uYXNzaWduKGxpbmtzLmhhc2hIb21lKTsKICAgICAgfQoKICAgICAgYWN0aW9ucy5tb2RhbHMuY2xvc2UobmFtZSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVGaW5pc2giLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLmhhbmRsZUNsb3NlKCk7CgogICAgICB3aW5kb3cubG9jYXRpb24uYXNzaWduKGxpbmtzLmhhc2hIb21lKTsKICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlUmVzdG9yeVdhbGxldCIsIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG1uZW1vbmljID0gX3RoaXMuc3RhdGUubW5lbW9uaWM7CgogICAgICBpZiAoIW1uZW1vbmljIHx8ICFhY3Rpb25zLmJ0Yy52YWxpZGF0ZU1uZW1vbmljV29yZHMobW5lbW9uaWMpKSB7CiAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgbW5lbW9uaWNJc0ludmFsaWQ6IHRydWUsCiAgICAgICAgICBpc0ZldGNoaW5nOiBmYWxzZQogICAgICAgIH0pOwoKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICBpc0ZldGNoaW5nOiB0cnVlCiAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXMucmVzdG9yZVdhbGxldChtbmVtb25pYyk7CiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAicmVzdG9yZVdhbGxldCIsIGZ1bmN0aW9uIChtbmVtb25pYykgewogICAgICAvLyBjYWxsYmFjayBpbiB0aW1lb3V0IGlzJ3QgYmxvY2sgdWkKICAgICAgc2V0VGltZW91dCggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBiYWNrdXBNYXJrLCBidGNXYWxsZXQsIGV0aFdhbGxldCwgZ2hvc3RXYWxsZXQsIG5leHRXYWxsZXQsIHJlc3RvcnlNYXJrLCBidGNQcml2S2V5LCBidGNTbXNLZXk7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAvLyBCYWNrdXAgY3JpdGljYWwgbG9jYWxTdG9yYWdlCiAgICAgICAgICAgICAgICBiYWNrdXBNYXJrID0gYWN0aW9ucy5idGMuZ2V0TWFpblB1YmxpY0tleSgpOwogICAgICAgICAgICAgICAgYWN0aW9ucy5iYWNrdXBNYW5hZ2VyLmJhY2t1cChiYWNrdXBNYXJrLCBmYWxzZSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gYWN0aW9ucy5idGMuZ2V0V2FsbGV0QnlXb3JkcyhtbmVtb25pYyk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIGJ0Y1dhbGxldCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIGFjdGlvbnMuZXRoLmdldFdhbGxldEJ5V29yZHMobW5lbW9uaWMpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBldGhXYWxsZXQgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gYWN0aW9ucy5naG9zdC5nZXRXYWxsZXRCeVdvcmRzKG1uZW1vbmljKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIGdob3N0V2FsbGV0ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgcmV0dXJuIGFjdGlvbnMubmV4dC5nZXRXYWxsZXRCeVdvcmRzKG1uZW1vbmljKTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIG5leHRXYWxsZXQgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIC8vIGNsZWFuIG1uZW1vbmljLCBpZiBleGlzdHMKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGNvbnN0YW50cy5wcml2YXRlS2V5TmFtZXMudHdlbnR5d29yZHMsICctJyk7IC8vIENoZWNrIC0gaWYgZXhpc3RzIGJhY2t1cCBmb3IgdGhpcyBtbmVtb25pYwoKICAgICAgICAgICAgICAgIHJlc3RvcnlNYXJrID0gYnRjV2FsbGV0LnB1YmxpY0tleTsKCiAgICAgICAgICAgICAgICBpZiAoYWN0aW9ucy5iYWNrdXBNYW5hZ2VyLmV4aXN0cyhyZXN0b3J5TWFyaykpIHsKICAgICAgICAgICAgICAgICAgYWN0aW9ucy5iYWNrdXBNYW5hZ2VyLnJlc3RvcnkocmVzdG9yeU1hcmspOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICByZXR1cm4gYWN0aW9ucy5idGMubG9naW4oZmFsc2UsIG1uZW1vbmljKTsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIGJ0Y1ByaXZLZXkgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIGJ0Y1Ntc0tleSA9IGFjdGlvbnMuYnRjbXVsdGlzaWcuZ2V0U21zS2V5RnJvbU1uZW1vbmljKG1uZW1vbmljKTsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGNvbnN0YW50cy5wcml2YXRlS2V5TmFtZXMuYnRjU21zTW5lbW9uaWNLZXlHZW5lcmF0ZWQsIGJ0Y1Ntc0tleSk7IC8vQAoKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGNvbnN0YW50cy5sb2NhbFN0b3JhZ2UuaXNXYWxsZXRDcmVhdGUsIHRydWUpOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyNTsKICAgICAgICAgICAgICAgIHJldHVybiBhY3Rpb25zLmV0aC5sb2dpbihmYWxzZSwgbW5lbW9uaWMpOwoKICAgICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyNzsKICAgICAgICAgICAgICAgIHJldHVybiBhY3Rpb25zLmdob3N0LmxvZ2luKGZhbHNlLCBtbmVtb25pYyk7CgogICAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI5OwogICAgICAgICAgICAgICAgcmV0dXJuIGFjdGlvbnMubmV4dC5sb2dpbihmYWxzZSwgbW5lbW9uaWMpOwoKICAgICAgICAgICAgICBjYXNlIDI5OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzMTsKICAgICAgICAgICAgICAgIHJldHVybiBhY3Rpb25zLnVzZXIuc2lnbl9idGNfMmZhKGJ0Y1ByaXZLZXkpOwoKICAgICAgICAgICAgICBjYXNlIDMxOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzMzsKICAgICAgICAgICAgICAgIHJldHVybiBhY3Rpb25zLnVzZXIuc2lnbl9idGNfbXVsdGlzaWcoYnRjUHJpdktleSk7CgogICAgICAgICAgICAgIGNhc2UgMzM6CiAgICAgICAgICAgICAgICBhY3Rpb25zLmNvcmUubWFya0NvaW5Bc1Zpc2libGUoJ0JUQycsIHRydWUpOwogICAgICAgICAgICAgICAgYWN0aW9ucy5jb3JlLm1hcmtDb2luQXNWaXNpYmxlKCdFVEgnLCB0cnVlKTsKCiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIGlzRmV0Y2hpbmc6IGZhbHNlLAogICAgICAgICAgICAgICAgICBzdGVwOiAicmVhZHkiCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBmZWVkYmFjay5yZXN0b3JlLmZpbmlzaGVkKCk7CgogICAgICAgICAgICAgIGNhc2UgMzc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlTW5lbW9uaWNDaGFuZ2UiLCBmdW5jdGlvbiAobW5lbW9uaWMpIHsKICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgIG1uZW1vbmljOiBtbmVtb25pYwogICAgICB9KTsKICAgIH0pOwoKICAgIHZhciBfZGF0YSA9IHByb3BzLmRhdGE7CiAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgc3RlcDogImVudGVyIiwKICAgICAgbW5lbW9uaWM6ICcnLAogICAgICBtbmVtb25pY0lzSW52YWxpZDogZmFsc2UsCiAgICAgIGlzRmV0Y2hpbmc6IGZhbHNlLAogICAgICBkYXRhOiB7CiAgICAgICAgYnRjQmFsYW5jZTogX2RhdGEgPyBfZGF0YS5idGNCYWxhbmNlIDogMCwKICAgICAgICB1c2RCYWxhbmNlOiBfZGF0YSA/IF9kYXRhLnVzZEJhbGFuY2UgOiAwLAogICAgICAgIHNob3dDbG9zZUJ1dHRvbjogX2RhdGEgPyBfZGF0YS5zaG93Q2xvc2VCdXR0b24gOiB0cnVlCiAgICAgIH0KICAgIH07CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoUmVzdG9yeU1uZW1vbmljV2FsbGV0LCBbewogICAga2V5OiAiY29tcG9uZW50RGlkTW91bnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkgewogICAgICB0aGlzLmZldGNoRGF0YSgpOwogICAgICBmZWVkYmFjay5yZXN0b3JlLnN0YXJ0ZWQoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgdmFyIF90aGlzJHByb3BzMiA9IHRoaXMucHJvcHMsCiAgICAgICAgICBuYW1lID0gX3RoaXMkcHJvcHMyLm5hbWUsCiAgICAgICAgICBpbnRsID0gX3RoaXMkcHJvcHMyLmludGw7CiAgICAgIHZhciBfdGhpcyRzdGF0ZSA9IHRoaXMuc3RhdGUsCiAgICAgICAgICBzdGVwID0gX3RoaXMkc3RhdGUuc3RlcCwKICAgICAgICAgIG1uZW1vbmljID0gX3RoaXMkc3RhdGUubW5lbW9uaWMsCiAgICAgICAgICBtbmVtb25pY0lzSW52YWxpZCA9IF90aGlzJHN0YXRlLm1uZW1vbmljSXNJbnZhbGlkLAogICAgICAgICAgaXNGZXRjaGluZyA9IF90aGlzJHN0YXRlLmlzRmV0Y2hpbmcsCiAgICAgICAgICBfdGhpcyRzdGF0ZSRkYXRhID0gX3RoaXMkc3RhdGUuZGF0YSwKICAgICAgICAgIHNob3dDbG9zZUJ1dHRvbiA9IF90aGlzJHN0YXRlJGRhdGEuc2hvd0Nsb3NlQnV0dG9uLAogICAgICAgICAgX3RoaXMkc3RhdGUkZGF0YSRidGNCID0gX3RoaXMkc3RhdGUkZGF0YS5idGNCYWxhbmNlLAogICAgICAgICAgYnRjQmFsYW5jZSA9IF90aGlzJHN0YXRlJGRhdGEkYnRjQiA9PT0gdm9pZCAwID8gMCA6IF90aGlzJHN0YXRlJGRhdGEkYnRjQiwKICAgICAgICAgIF90aGlzJHN0YXRlJGRhdGEkdXNkQiA9IF90aGlzJHN0YXRlJGRhdGEudXNkQmFsYW5jZSwKICAgICAgICAgIHVzZEJhbGFuY2UgPSBfdGhpcyRzdGF0ZSRkYXRhJHVzZEIgPT09IHZvaWQgMCA/IDEgOiBfdGhpcyRzdGF0ZSRkYXRhJHVzZEI7CiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChNb2RhbCwgewogICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgdGl0bGU6ICIiLmNvbmNhdChpbnRsLmZvcm1hdE1lc3NhZ2UobGFuZ0xhYmVscy50aXRsZSkpLAogICAgICAgIG9uQ2xvc2U6IHRoaXMuaGFuZGxlQ2xvc2UsCiAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiBzaG93Q2xvc2VCdXR0b24KICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJyZXN0b3JlTW9kYWxIb2xkZXIiCiAgICAgIH0sIHN0ZXAgPT09ICJlbnRlciIgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRnJhZ21lbnQsIG51bGwsIG1uZW1vbmljICYmIG1uZW1vbmljSXNJbnZhbGlkICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAicmVkbm90ZXMgbW5lbW9uaWNOb3RpY2UiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIGxhbmdMYWJlbHMubW5lbW9uaWNJbnZhbGlkKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiaGlnaExldmVsIiwKICAgICAgICBjbGFzc05hbWU6ICJ5bS1oaWRlLWNvbnRlbnQgbm90cmFuc2xhdGUiLAogICAgICAgIHRyYW5zbGF0ZTogIm5vIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGaWVsZExhYmVsLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJ0b29sdGlwV3JhcHBlciIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgbGFuZ0xhYmVscy5tbmVtb25pY0xhYmVsKSwgIlx4QTAiLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUb29sdGlwLCB7CiAgICAgICAgaWQ6ICJJbXBvcnRLZXlzX1Jlc3RvcmVNbmVtb25pY190b29sdGlwIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIkltcG9ydEtleXNfUmVzdG9yZU1uZW1vbmljX1Rvb2x0aXAiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiMTItd29yZCBiYWNrdXAgcGhyYXNlIgogICAgICB9KSwgKGJ0Y0JhbGFuY2UgPiAwIHx8IHVzZEJhbGFuY2UgPiAwKSAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImJyIiwgbnVsbCksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJiciIsIG51bGwpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogImFsZXJ0VG9vbHRpcFdyYXBwZXIiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogIkltcG9ydEtleXNfUmVzdG9yZU1uZW1vbmljX1Rvb2x0aXBfd2l0aEJhbGFuY2UiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiUGxlYXNlLCBiZSBjYXVzaW91cyEiCiAgICAgIH0pKSkpKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChNbmVtb25pY0lucHV0LCB7CiAgICAgICAgYXV0b0ZpbGw6IGNvbmZpZy5lbnRyeSA9PT0gJ3Rlc3RuZXQnLAogICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZU1uZW1vbmljQ2hhbmdlCiAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJidXR0b25zSG9sZGVyIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHsKICAgICAgICBibHVlOiB0cnVlLAogICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ2xvc2UKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgbGFuZ0xhYmVscy5jYW5jZWxSZXN0b3J5KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwgewogICAgICAgIGJsdWU6IHRydWUsCiAgICAgICAgZGlzYWJsZWQ6ICFtbmVtb25pYyB8fCBtbmVtb25pYy5zcGxpdCgnICcpLmxlbmd0aCAhPT0gMTIgfHwgaXNGZXRjaGluZywKICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZVJlc3RvcnlXYWxsZXQKICAgICAgfSwgaXNGZXRjaGluZyA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIGxhbmdMYWJlbHMucmVzdG9yaW5nV2FsbGV0KSA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIGxhbmdMYWJlbHMucmVzdG9yeVdhbGxldCkpKSksIHN0ZXAgPT09ICJyZWFkeSIgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwIiwgewogICAgICAgIHN0eWxlTmFtZTogIm5vdGljZSBtbmVtb25pY05vdGljZSIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImltZyIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJmaW5pc2hJbWciLAogICAgICAgIHNyYzogb2tTdmcsCiAgICAgICAgYWx0OiAiZmluaXNoIgogICAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgbGFuZ0xhYmVscy5yZWFkeU5vdGljZSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogImxvd0xldmVsIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHsKICAgICAgICBzdHlsZU5hbWU6ICJidXR0b25DZW50ZXIgYnV0dG9uSGFsZkZ1bGxXaWR0aCIsCiAgICAgICAgYmx1ZTogdHJ1ZSwKICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUZpbmlzaAogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCBsYW5nTGFiZWxzLlJlYWR5KSkpKSkpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFJlc3RvcnlNbmVtb25pY1dhbGxldDsKfShSZWFjdC5Db21wb25lbnQpLCBfdGVtcCkpIHx8IF9jbGFzcykgfHwgX2NsYXNzKSB8fCBfY2xhc3MpOwpleHBvcnQgeyBSZXN0b3J5TW5lbW9uaWNXYWxsZXQgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/front/shared/components/modals/RestoryMnemonicWallet/RestoryMnemonicWallet.tsx"],"names":["React","Fragment","constants","actions","connect","config","cssModules","defaultStyles","styles","okSvg","Modal","FieldLabel","Button","Tooltip","FormattedMessage","injectIntl","defineMessages","links","MnemonicInput","feedback","langPrefix","langLabels","title","id","defaultMessage","mnemonicLabel","mnemonicPlaceholder","readyNotice","Ready","restoringWallet","restoryWallet","cancelRestory","mnemonicInvalid","RestoryMnemonicWallet","user","btcData","btcMultisigSMSData","btcMultisigUserData","ethData","ghostData","nextData","allCurrensies","allowMultiple","props","reduce","acc","curr","name","infoAboutCurrency","balance","isWidgetBuild","widgetCurrencies","includes","btcBalance","price_btc","usdBalance","price_fiat","setState","data","onClose","window","location","assign","hashHome","modals","close","handleClose","reload","mnemonic","state","btc","validateMnemonicWords","mnemonicIsInvalid","isFetching","restoreWallet","setTimeout","backupMark","getMainPublicKey","backupManager","backup","getWalletByWords","btcWallet","eth","ethWallet","ghost","ghostWallet","next","nextWallet","localStorage","setItem","privateKeyNames","twentywords","restoryMark","publicKey","exists","restory","login","btcPrivKey","btcSmsKey","btcmultisig","getSmsKeyFromMnemonic","btcSmsMnemonicKeyGenerated","isWalletCreate","sign_btc_2fa","sign_btc_multisig","core","markCoinAsVisible","step","restore","finished","showCloseButton","fetchData","started","intl","formatMessage","entry","handleMnemonicChange","split","length","handleRestoryWallet","handleFinish","Component"],"mappings":"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","sourcesContent":["// @ts-nocheck\r\nimport React, { Fragment } from 'react'\r\nimport helpers, { constants } from 'helpers'\r\nimport actions from 'redux/actions'\r\nimport Link from 'local_modules/sw-valuelink'\r\nimport { connect } from 'redaction'\r\nimport config from 'app-config'\r\n\r\nimport cssModules from 'react-css-modules'\r\n\r\nimport defaultStyles from '../Styles/default.scss'\r\nimport styles from './RestoryMnemonicWallet.scss'\r\nimport okSvg from 'shared/images/ok.svg'\r\n\r\nimport { BigNumber } from 'bignumber.js'\r\nimport Modal from 'components/modal/Modal/Modal'\r\nimport FieldLabel from 'components/forms/FieldLabel/FieldLabel'\r\nimport Input from 'components/forms/Input/Input'\r\nimport Button from 'components/controls/Button/Button'\r\nimport Tooltip from 'components/ui/Tooltip/Tooltip'\r\nimport { FormattedMessage, injectIntl, defineMessages } from 'react-intl'\r\nimport { isMobile } from 'react-device-detect'\r\n\r\nimport links from 'helpers/links'\r\n\r\nimport MnemonicInput from 'components/forms/MnemonicInput/MnemonicInput'\r\nimport feedback from 'shared/helpers/feedback'\r\n\r\nconst langPrefix = `RestoryMnemonicWallet`\r\nconst langLabels = defineMessages({\r\n  title: {\r\n    id: `${langPrefix}_Title`,\r\n    defaultMessage: `Восстановление кошелка из секретной фразы`,\r\n  },\r\n  mnemonicLabel: {\r\n    id: `${langPrefix}_MnemonicField`,\r\n    defaultMessage: `Секретная фраза (12 слов):`,\r\n  },\r\n  mnemonicPlaceholder: {\r\n    id: `${langPrefix}_MnemonicPlaceholder`,\r\n    defaultMessage: `Введите сохраненную фразу, для восстановления кошелька`,\r\n  },\r\n  readyNotice: {\r\n    id: `${langPrefix}_ReadyNotice`,\r\n    defaultMessage: `Теперь вы можете добавить BTC, ETH и другие валюты`,\r\n  },\r\n  Ready: {\r\n    id: `${langPrefix}_Ready`,\r\n    defaultMessage: `Готово`,\r\n  },\r\n  restoringWallet: {\r\n    id: `${langPrefix}_RestroringWallet`,\r\n    defaultMessage: `Восстанавливаем...`,\r\n  },\r\n  restoryWallet: {\r\n    id: `${langPrefix}_RestoryWallet`,\r\n    defaultMessage: `Восстановить`,\r\n  },\r\n  cancelRestory: {\r\n    id: `${langPrefix}_CancelRestory`,\r\n    defaultMessage: `Отмена`,\r\n  },\r\n  mnemonicInvalid: {\r\n    id: `${langPrefix}_MnemonicInvalid`,\r\n    defaultMessage: `Вы указали не валидный набор слов`,\r\n  },\r\n})\r\n\r\ntype RestoryMnemonicWalletProps = {\r\n  name: string\r\n  onClose: () => void\r\n  intl: { [key: string]: any }\r\n  allCurrensies: { [key: string]: any }[]\r\n\r\n  data: {\r\n    btcBalance: number\r\n    fiatBalance: number\r\n    onClose: () => void\r\n  }\r\n}\r\n\r\ntype RestoryMnemonicWalletState = {\r\n  mnemonic: string\r\n  step: string\r\n  mnemonicIsInvalid: boolean\r\n  isFetching: boolean\r\n  data: {\r\n    btcBalance: number\r\n    usdBalance: number\r\n    showCloseButton: boolean\r\n  }\r\n}\r\n\r\n@injectIntl\r\n@connect(\r\n  ({\r\n    user: { btcData, btcMultisigSMSData, btcMultisigUserData, ethData, ghostData, nextData },\r\n  }) => ({\r\n    allCurrensies: [\r\n      btcData,\r\n      btcData,\r\n      btcMultisigSMSData,\r\n      btcMultisigUserData,\r\n      ethData,\r\n      ghostData,\r\n      nextData,\r\n    ],\r\n  })\r\n)\r\n@cssModules({ ...defaultStyles, ...styles }, { allowMultiple: true })\r\nexport default class RestoryMnemonicWallet extends React.Component {\r\n\r\n  props: RestoryMnemonicWalletProps\r\n  state: RestoryMnemonicWalletState\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    const { data } = props\r\n\r\n    this.state = {\r\n      step: `enter`,\r\n      mnemonic: '',\r\n      mnemonicIsInvalid: false,\r\n      isFetching: false,\r\n      data: {\r\n        btcBalance: data ? data.btcBalance : 0,\r\n        usdBalance: data ? data.usdBalance : 0,\r\n        showCloseButton: data ? data.showCloseButton : true,\r\n      },\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchData()\r\n    feedback.restore.started()\r\n  }\r\n\r\n  fetchData = async () => {\r\n    const { allCurrensies } = this.props\r\n\r\n    const { btcBalance, usdBalance } = allCurrensies.reduce(\r\n      (acc, curr) => {\r\n        const { name, infoAboutCurrency, balance } = curr\r\n        if (\r\n          //@\r\n          (!isWidgetBuild || widgetCurrencies.includes(name)) &&\r\n          infoAboutCurrency &&\r\n          balance !== 0\r\n        ) {\r\n          acc.btcBalance += balance * infoAboutCurrency.price_btc\r\n          acc.usdBalance +=\r\n            balance * (infoAboutCurrency.price_fiat ? infoAboutCurrency.price_fiat : 1)\r\n        }\r\n        return acc\r\n      },\r\n      { btcBalance: 0, usdBalance: 0 }\r\n    )\r\n\r\n    this.setState((data) => ({\r\n      data: { btcBalance, usdBalance, ...data },\r\n    }))\r\n  }\r\n\r\n  handleClose = () => {\r\n    const { name, data, onClose } = this.props\r\n\r\n    if (typeof onClose === 'function') {\r\n      onClose()\r\n    }\r\n\r\n    if (data && typeof data.onClose === 'function') {\r\n      data.onClose()\r\n    } else {\r\n      window.location.assign(links.hashHome)\r\n    }\r\n\r\n    actions.modals.close(name)\r\n  }\r\n\r\n  handleFinish = () => {\r\n    this.handleClose()\r\n\r\n    window.location.assign(links.hashHome)\r\n    window.location.reload()\r\n  }\r\n\r\n  handleRestoryWallet = () => {\r\n    const { mnemonic } = this.state\r\n\r\n    if (!mnemonic || !actions.btc.validateMnemonicWords(mnemonic)) {\r\n      this.setState({\r\n        mnemonicIsInvalid: true,\r\n        isFetching: false,\r\n      })\r\n      return\r\n    }\r\n\r\n    this.setState(\r\n      {\r\n        isFetching: true,\r\n      },\r\n      () => this.restoreWallet(mnemonic)\r\n    )\r\n  }\r\n\r\n  restoreWallet = (mnemonic) => {\r\n    // callback in timeout is't block ui\r\n    setTimeout(async () => {\r\n      // Backup critical localStorage\r\n      const backupMark = actions.btc.getMainPublicKey()\r\n\r\n      actions.backupManager.backup(backupMark, false, true)\r\n      const btcWallet = await actions.btc.getWalletByWords(mnemonic)\r\n      const ethWallet = await actions.eth.getWalletByWords(mnemonic)\r\n      const ghostWallet = await actions.ghost.getWalletByWords(mnemonic)\r\n      const nextWallet = await actions.next.getWalletByWords(mnemonic)\r\n\r\n      // clean mnemonic, if exists\r\n      localStorage.setItem(constants.privateKeyNames.twentywords, '-')\r\n\r\n      // Check - if exists backup for this mnemonic\r\n      const restoryMark = btcWallet.publicKey\r\n\r\n      if (actions.backupManager.exists(restoryMark)) {\r\n        actions.backupManager.restory(restoryMark)\r\n      }\r\n\r\n      const btcPrivKey = await actions.btc.login(false, mnemonic)\r\n      const btcSmsKey = actions.btcmultisig.getSmsKeyFromMnemonic(mnemonic)\r\n      localStorage.setItem(constants.privateKeyNames.btcSmsMnemonicKeyGenerated, btcSmsKey)\r\n      //@\r\n      localStorage.setItem(constants.localStorage.isWalletCreate, true)\r\n\r\n      await actions.eth.login(false, mnemonic)\r\n      await actions.ghost.login(false, mnemonic)\r\n      await actions.next.login(false, mnemonic)\r\n\r\n      await actions.user.sign_btc_2fa(btcPrivKey)\r\n      await actions.user.sign_btc_multisig(btcPrivKey)\r\n\r\n      actions.core.markCoinAsVisible('BTC', true)\r\n      actions.core.markCoinAsVisible('ETH', true)\r\n\r\n      this.setState({\r\n        isFetching: false,\r\n        step: `ready`,\r\n      })\r\n\r\n      feedback.restore.finished()\r\n    })\r\n  }\r\n\r\n  handleMnemonicChange = (mnemonic) => {\r\n    this.setState({\r\n      mnemonic,\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { name, intl } = this.props\r\n\r\n    const {\r\n      step,\r\n      mnemonic,\r\n      mnemonicIsInvalid,\r\n      isFetching,\r\n\r\n      data: { showCloseButton, btcBalance = 0, usdBalance = 1 },\r\n    } = this.state\r\n\r\n    return (\r\n      <Modal\r\n        name={name}\r\n        title={`${intl.formatMessage(langLabels.title)}`}\r\n        onClose={this.handleClose}\r\n        showCloseButton={showCloseButton}\r\n      >\r\n        <div styleName=\"restoreModalHolder\">\r\n          {step === `enter` && (\r\n            <Fragment>\r\n              {mnemonic && mnemonicIsInvalid && (\r\n                <div styleName=\"rednotes mnemonicNotice\">\r\n                  <FormattedMessage {...langLabels.mnemonicInvalid} />\r\n                </div>\r\n              )}\r\n              <div styleName=\"highLevel\" className=\"ym-hide-content notranslate\" translate=\"no\">\r\n                <FieldLabel>\r\n                  <span styleName=\"tooltipWrapper\">\r\n                    <FormattedMessage {...langLabels.mnemonicLabel} />\r\n                    &nbsp;\r\n                    <Tooltip id=\"ImportKeys_RestoreMnemonic_tooltip\">\r\n                      <span>\r\n                        <FormattedMessage\r\n                          id=\"ImportKeys_RestoreMnemonic_Tooltip\"\r\n                          defaultMessage=\"12-word backup phrase\"\r\n                        />\r\n                        {(btcBalance > 0 || usdBalance > 0) && (\r\n                          <React.Fragment>\r\n                            <br />\r\n                            <br />\r\n                            <div styleName=\"alertTooltipWrapper\">\r\n                              <FormattedMessage\r\n                                id=\"ImportKeys_RestoreMnemonic_Tooltip_withBalance\"\r\n                                defaultMessage=\"Please, be causious!\"\r\n                              />\r\n                            </div>\r\n                          </React.Fragment>\r\n                        )}\r\n                      </span>\r\n                    </Tooltip>\r\n                  </span>\r\n                </FieldLabel>\r\n                <MnemonicInput \r\n                  autoFill={config.entry === 'testnet'}\r\n                  onChange={this.handleMnemonicChange}\r\n                />\r\n              </div>\r\n              <div styleName=\"buttonsHolder\">\r\n                <Button blue onClick={this.handleClose}>\r\n                  <FormattedMessage {...langLabels.cancelRestory} />\r\n                </Button>\r\n                <Button\r\n                  blue\r\n                  disabled={!mnemonic || mnemonic.split(' ').length !== 12 || isFetching}\r\n                  onClick={this.handleRestoryWallet}\r\n                >\r\n                  {isFetching ? (\r\n                    <FormattedMessage {...langLabels.restoringWallet} />\r\n                  ) : (\r\n                    <FormattedMessage {...langLabels.restoryWallet} />\r\n                  )}\r\n                </Button>\r\n              </div>\r\n            </Fragment>\r\n          )}\r\n          {step === `ready` && (\r\n            <Fragment>\r\n              <p styleName=\"notice mnemonicNotice\">\r\n                <img styleName=\"finishImg\" src={okSvg} alt=\"finish\" />\r\n                <FormattedMessage {...langLabels.readyNotice} />\r\n              </p>\r\n              <div styleName=\"lowLevel\">\r\n                <Button\r\n                  styleName=\"buttonCenter buttonHalfFullWidth\"\r\n                  blue\r\n                  onClick={this.handleFinish}\r\n                >\r\n                  <FormattedMessage {...langLabels.Ready} />\r\n                </Button>\r\n              </div>\r\n            </Fragment>\r\n          )}\r\n        </div>\r\n      </Modal>\r\n    )\r\n  }\r\n}\r\n"]}]}