{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\components\\modals\\RegisterSMSProtected\\RegisterSMSProtected.tsx","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\components\\modals\\RegisterSMSProtected\\RegisterSMSProtected.tsx","mtime":1614842914018},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcyI7CmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXNzZXJ0VGhpc0luaXRpYWxpemVkIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaGVyaXRzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiI7CmltcG9ydCBfZ2V0UHJvdG90eXBlT2YgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9nZXRQcm90b3R5cGVPZiI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eSI7Cgp2YXIgX2RlYywgX2RlYzIsIF9jbGFzcywgX2NsYXNzMiwgX3RlbXA7CgppbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tICJAYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvciI7CgpmdW5jdGlvbiBfY3JlYXRlU3VwZXIoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfQoKZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSAidW5kZWZpbmVkIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gImZ1bmN0aW9uIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH0KCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmltcG9ydCBSZWFjdCwgeyBGcmFnbWVudCB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJzsKaW1wb3J0IHsgY29uc3RhbnRzIH0gZnJvbSAnaGVscGVycyc7CmltcG9ydCBhY3Rpb25zIGZyb20gJ3JlZHV4L2FjdGlvbnMnOwppbXBvcnQgTGluayBmcm9tICdsb2NhbF9tb2R1bGVzL3N3LXZhbHVlbGluayc7CmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWRhY3Rpb24nOwppbXBvcnQgY3NzTW9kdWxlcyBmcm9tICdyZWFjdC1jc3MtbW9kdWxlcyc7CmltcG9ydCBzdHlsZXMgZnJvbSAnLi4vU3R5bGVzL2RlZmF1bHQuc2Nzcyc7CmltcG9ydCBvd25TdHlsZSBmcm9tICcuL1JlZ2lzdGVyU01TUHJvdGVjdGVkLnNjc3MnOwppbXBvcnQgeyBpc1ZhbGlkUGhvbmVOdW1iZXIgfSBmcm9tICdyZWFjdC1waG9uZS1udW1iZXItaW5wdXQnOwppbXBvcnQgTW9kYWwgZnJvbSAnY29tcG9uZW50cy9tb2RhbC9Nb2RhbC9Nb2RhbCc7CmltcG9ydCBGaWVsZExhYmVsIGZyb20gJ2NvbXBvbmVudHMvZm9ybXMvRmllbGRMYWJlbC9GaWVsZExhYmVsJzsKaW1wb3J0IElucHV0IGZyb20gJ2NvbXBvbmVudHMvZm9ybXMvSW5wdXQvSW5wdXQnOwppbXBvcnQgeyBQaG9uZUlucHV0IH0gZnJvbSAnY29tcG9uZW50cy9mb3Jtcy9QaG9uZUlucHV0JzsKaW1wb3J0IEJ1dHRvbiBmcm9tICdjb21wb25lbnRzL2NvbnRyb2xzL0J1dHRvbi9CdXR0b24nOwppbXBvcnQgeyBGb3JtYXR0ZWRNZXNzYWdlLCBpbmplY3RJbnRsLCBkZWZpbmVNZXNzYWdlcyB9IGZyb20gJ3JlYWN0LWludGwnOwovLyBpbXBvcnQgeyBpc0NvaW5BZGRyZXNzIH0gZnJvbSAnc3dhcC5hcHAvdXRpbC90eXBlZm9yY2UnCmltcG9ydCBDb3B5VG9DbGlwYm9hcmQgZnJvbSAncmVhY3QtY29weS10by1jbGlwYm9hcmQnOwppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudC9tb21lbnQnOwppbXBvcnQgb2tTdmcgZnJvbSAnc2hhcmVkL2ltYWdlcy9vay5zdmcnOwp2YXIgUmVnaXN0ZXJTTVNQcm90ZWN0ZWQgPSAoX2RlYyA9IGNvbm5lY3QoZnVuY3Rpb24gKF9yZWYpIHsKICB2YXIgX3JlZiR1c2VyID0gX3JlZi51c2VyLAogICAgICBidGNEYXRhID0gX3JlZiR1c2VyLmJ0Y0RhdGEsCiAgICAgIGJ0Y011bHRpc2lnU01TRGF0YSA9IF9yZWYkdXNlci5idGNNdWx0aXNpZ1NNU0RhdGE7CiAgcmV0dXJuIHsKICAgIGJ0Y0RhdGE6IGJ0Y0RhdGEsCiAgICBidGNNdWx0aXNpZ1NNU0RhdGE6IGJ0Y011bHRpc2lnU01TRGF0YQogIH07Cn0pLCBfZGVjMiA9IGNzc01vZHVsZXMoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzdHlsZXMpLCBvd25TdHlsZSksIHsKICBhbGxvd011bHRpcGxlOiB0cnVlCn0pLCBpbmplY3RJbnRsKF9jbGFzcyA9IF9kZWMoX2NsYXNzID0gX2RlYzIoX2NsYXNzID0gKF90ZW1wID0gX2NsYXNzMiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkgewogIF9pbmhlcml0cyhSZWdpc3RlclNNU1Byb3RlY3RlZCwgX1JlYWN0JENvbXBvbmVudCk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoUmVnaXN0ZXJTTVNQcm90ZWN0ZWQpOwoKICBmdW5jdGlvbiBSZWdpc3RlclNNU1Byb3RlY3RlZChwcm9wcykgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZWdpc3RlclNNU1Byb3RlY3RlZCk7CgogICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcyk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAicHJvcHMiLCB2b2lkIDApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZVNlbmRTTVMiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIF90aGlzJHN0YXRlLCB2ZXJzaW9uLCBwaG9uZSwgbW5lbW9uaWMsIGdlbmVyYXRlZEtleSwgdXNlR2VuZXJhdGVkS2V5LCB1c2VHZW5lcmF0ZWRLZXlFbmFibGVkLCBtbmVtb25pY1dhbGxldCwgcmVzdWx0LCBzbXNTZXJ2ZXJPZmZsaW5lOwoKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfdGhpcyRzdGF0ZSA9IF90aGlzLnN0YXRlLCB2ZXJzaW9uID0gX3RoaXMkc3RhdGUudmVyc2lvbiwgcGhvbmUgPSBfdGhpcyRzdGF0ZS5waG9uZSwgbW5lbW9uaWMgPSBfdGhpcyRzdGF0ZS5tbmVtb25pYywgZ2VuZXJhdGVkS2V5ID0gX3RoaXMkc3RhdGUuZ2VuZXJhdGVkS2V5LCB1c2VHZW5lcmF0ZWRLZXkgPSBfdGhpcyRzdGF0ZS51c2VHZW5lcmF0ZWRLZXksIHVzZUdlbmVyYXRlZEtleUVuYWJsZWQgPSBfdGhpcyRzdGF0ZS51c2VHZW5lcmF0ZWRLZXlFbmFibGVkOwoKICAgICAgICAgICAgICBpZiAodXNlR2VuZXJhdGVkS2V5KSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKCEodmVyc2lvbiA9PT0gJzJvZjMnICYmICFhY3Rpb25zLmJ0Yy52YWxpZGF0ZU1uZW1vbmljV29yZHMobW5lbW9uaWMudHJpbSgpKSkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc01uZW1vbmljVmFsaWQ6IGZhbHNlLAogICAgICAgICAgICAgICAgZXJyb3I6IGZhbHNlCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIG1uZW1vbmljV2FsbGV0ID0gYWN0aW9ucy5idGMuZ2V0V2FsbGV0QnlXb3JkcyhtbmVtb25pYy50cmltKCksIDEpOwoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBtbmVtb25pY1dhbGxldDogbW5lbW9uaWNXYWxsZXQsCiAgICAgICAgICAgICAgICBpc01uZW1vbmljVmFsaWQ6IHRydWUKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBpZiAocGhvbmUpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgZXJyb3I6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICAgICAgICAgICAgaWQ6ICJyZWdpc3RlclNNU19Ob3RWYWxpZFBob25lIiwKICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MjNcdTA0M0FcdTA0MzBcdTA0MzZcdTA0MzhcdTA0NDJcdTA0MzUgXHUwNDNEXHUwNDNFXHUwNDNDXHUwNDM1XHUwNDQwIFx1MDQ0Mlx1MDQzNVx1MDQzQlx1MDQzNVx1MDQ0NFx1MDQzRVx1MDQzRFx1MDQzMCIKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc1NoaXBwZWQ6IHRydWUsCiAgICAgICAgICAgICAgICBlcnJvcjogZmFsc2UKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICAgIHJldHVybiBhY3Rpb25zLmJ0Y211bHRpc2lnLmJlZ2luUmVnaXN0ZXJTTVMocGhvbmUsIG1uZW1vbmljID8gbW5lbW9uaWMudHJpbSgpIDogZmFsc2UsIHVzZUdlbmVyYXRlZEtleSAmJiB1c2VHZW5lcmF0ZWRLZXlFbmFibGVkID8gZ2VuZXJhdGVkS2V5IDogZmFsc2UpOwoKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC5hbnN3ZXIgJiYgcmVzdWx0LmFuc3dlciA9PSAnb2snKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIGlzU2hpcHBlZDogZmFsc2UsCiAgICAgICAgICAgICAgICAgIHN0ZXA6ICdlbnRlckNvZGUnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ09uZSBzdGVwIHNldCcsIHJlc3VsdCk7CiAgICAgICAgICAgICAgICBzbXNTZXJ2ZXJPZmZsaW5lID0gcmVzdWx0ID09PSBmYWxzZTsKCiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgIGlzU2hpcHBlZDogZmFsc2UsCiAgICAgICAgICAgICAgICAgIGVycm9yOiByZXN1bHQgJiYgcmVzdWx0LmVycm9yID8gcmVzdWx0LmVycm9yIDogJ1Vua25vd24gZXJyb3InLAogICAgICAgICAgICAgICAgICBzbXNTZXJ2ZXJPZmZsaW5lOiBzbXNTZXJ2ZXJPZmZsaW5lCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlQ2hlY2tTTVMiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciBfdGhpcyRzdGF0ZTIsIHBob25lLCBzbXNDb2RlLCBtbmVtb25pYywgdXNlR2VuZXJhdGVkS2V5LCB1c2VHZW5lcmF0ZWRLZXlFbmFibGVkLCBnZW5lcmF0ZWRLZXksIHJlc3VsdCwgc21zU2VydmVyT2ZmbGluZTsKCiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzJHN0YXRlMiA9IF90aGlzLnN0YXRlLCBwaG9uZSA9IF90aGlzJHN0YXRlMi5waG9uZSwgc21zQ29kZSA9IF90aGlzJHN0YXRlMi5zbXNDb2RlLCBtbmVtb25pYyA9IF90aGlzJHN0YXRlMi5tbmVtb25pYywgdXNlR2VuZXJhdGVkS2V5ID0gX3RoaXMkc3RhdGUyLnVzZUdlbmVyYXRlZEtleSwgdXNlR2VuZXJhdGVkS2V5RW5hYmxlZCA9IF90aGlzJHN0YXRlMi51c2VHZW5lcmF0ZWRLZXlFbmFibGVkLCBnZW5lcmF0ZWRLZXkgPSBfdGhpcyRzdGF0ZTIuZ2VuZXJhdGVkS2V5OwoKICAgICAgICAgICAgICBpZiAoc21zQ29kZSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBlcnJvcjogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgICAgICAgICBpZDogIlJlZ2lzdGVyU01TUHJvdGVjdGVkX1Ntc0NvZGVSZXF1ZXJ5IiwKICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MTJcdTA0MzJcdTA0MzVcdTA0MzRcdTA0MzhcdTA0NDJcdTA0MzUgXHUwNDQxXHUwNDNDXHUwNDQxLVx1MDQzQVx1MDQzRVx1MDQzNCIKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc1NoaXBwZWQ6IHRydWUsCiAgICAgICAgICAgICAgICBlcnJvcjogZmFsc2UsCiAgICAgICAgICAgICAgICBzbXNTZXJ2ZXJPZmZsaW5lOiBmYWxzZSwKICAgICAgICAgICAgICAgIGlzV2FsbGV0TG9ja2VkT3RoZXJQaG9uZTogZmFsc2UKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiBhY3Rpb25zLmJ0Y211bHRpc2lnLmNvbmZpcm1SZWdpc3RlclNNUyhwaG9uZSwgc21zQ29kZSwgbW5lbW9uaWMgPyBtbmVtb25pYy50cmltKCkgOiBmYWxzZSwgdXNlR2VuZXJhdGVkS2V5ICYmIHVzZUdlbmVyYXRlZEtleUVuYWJsZWQgPyBnZW5lcmF0ZWRLZXkgOiBmYWxzZSk7CgogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0LmFuc3dlciAmJiByZXN1bHQuYW5zd2VyID09ICdvaycpIHsKICAgICAgICAgICAgICAgIF90aGlzLmdlbmVyYXRlUmVzdG9yZUluc3RydWN0aW9uKCk7CgogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICBpc1NoaXBwZWQ6IGZhbHNlLAogICAgICAgICAgICAgICAgICBzdGVwOiAncmVhZHknCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQuZXJyb3IgPT0gJ0FscmVhZHkgcmVnaXN0ZXJlZCcpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuZ2VuZXJhdGVSZXN0b3JlSW5zdHJ1Y3Rpb24oKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICBpc1NoaXBwZWQ6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIHN0ZXA6ICdyZWFkeScKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC5lcnJvciA9PSAnVGhpcyB3YWxsZXQgYWxyZWFkeSBsb2NrZWQgYnkgb3RoZXIgcGhvbmUgbnVtYmVyJykgewogICAgICAgICAgICAgICAgICAgIC8vINCa0L7RiNC10LvQtdC6INC30LDRgNC10LPQuNGB0YLRgNC40YDQvtCy0LDQvSDQvdCwINC00YDRg9Cz0L7QuSDQvdC+0LzQtdGAINGC0LXQu9C10YTQvtC90LAKICAgICAgICAgICAgICAgICAgICAvLyDQnNC+0LbQtdGCINCx0YvRgtGMINGC0LDQuiwg0YfRgtC+INGH0LXQu9C+0LLQtdC6INC/0L7RgtC10YDRj9C7INGC0LXQu9C10YTQvtC9INC40LvQuCDQt9Cw0LHRi9C7INC10LPQvgogICAgICAgICAgICAgICAgICAgIC8vINCU0LDQtdC8INCy0L7Qt9C80L7QttC90L7RgdGC0Ywg0L/QvtC00LrQu9GO0YfQuNGC0Ywg0LrQvtGI0LXQu9C10LosINGH0YLQvtCx0Ysg0LXRgdC70Lgg0YMg0LrQu9C40LXQvdGC0LAg0LXRgdGC0YwKICAgICAgICAgICAgICAgICAgICAvLyDQstCw0LvQuNC00L3Ri9C5IG1uZW1vbmljIC0g0L7QvSDQvNC+0LMg0YDQsNC30LHQu9C+0LrQuNGA0L7QstCw0YLRjCDRgdGA0LXQtNGB0YLQstCwCiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgaXNTaGlwcGVkOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIGlzV2FsbGV0TG9ja2VkT3RoZXJQaG9uZTogdHJ1ZQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHNtc1NlcnZlck9mZmxpbmUgPSByZXN1bHQgPT09IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICBpc1NoaXBwZWQ6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgc21zU2VydmVyT2ZmbGluZTogc21zU2VydmVyT2ZmbGluZSwKICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiByZXN1bHQgJiYgcmVzdWx0LmVycm9yID8gcmVzdWx0LmVycm9yIDogJ1Vua25vd24gZXJyb3InCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMik7CiAgICB9KSkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZVJlc3RvcmVXYWxsZXQiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHZhciBtbmVtb25pYywgbW5lbW9uaWNXYWxsZXQ7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIG1uZW1vbmljID0gX3RoaXMuc3RhdGUubW5lbW9uaWM7CgogICAgICAgICAgICAgIGlmICghKCFtbmVtb25pYyB8fCAhYWN0aW9ucy5idGMudmFsaWRhdGVNbmVtb25pY1dvcmRzKG1uZW1vbmljLnRyaW0oKSkpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDY7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGlzTW5lbW9uaWNWYWxpZDogZmFsc2UsCiAgICAgICAgICAgICAgICBlcnJvcjogZmFsc2UKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIG1uZW1vbmljV2FsbGV0ID0gYWN0aW9ucy5idGMuZ2V0V2FsbGV0QnlXb3JkcyhtbmVtb25pYy50cmltKCksIDEpOwoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBtbmVtb25pY1dhbGxldDogbW5lbW9uaWNXYWxsZXQsCiAgICAgICAgICAgICAgICBpc1NoaXBwZWQ6IHRydWUsCiAgICAgICAgICAgICAgICBpc01uZW1vbmljVmFsaWQ6IHRydWUKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEwOwogICAgICAgICAgICAgIHJldHVybiBhY3Rpb25zLmJ0Y211bHRpc2lnLmFkZFNNU1dhbGxldChtbmVtb25pYy50cmltKCkpOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBfdGhpcy5nZW5lcmF0ZVJlc3RvcmVJbnN0cnVjdGlvbigpOwoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc1NoaXBwZWQ6IGZhbHNlLAogICAgICAgICAgICAgICAgc3RlcDogJ3JlYWR5JwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzKTsKICAgIH0pKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlQ29weU1uZW1vbmljIiwgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpc01uZW1vbmljQ29waWVkOiB0cnVlCiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICBpc01uZW1vbmljQ29waWVkOiBmYWxzZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTQpOwogICAgfSkpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVDb3B5SW5zdHJ1Y3Rpb24iLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGlzSW5zdHJ1Y3Rpb25Db3BpZWQ6IHRydWUKICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgIGlzSW5zdHJ1Y3Rpb25Db3BpZWQ6IGZhbHNlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlNSk7CiAgICB9KSkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZURvd25sb2FkSW5zdHJ1Y3Rpb24iLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgIHZhciByZXN0b3JlSW5zdHJ1Y3Rpb247CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHJlc3RvcmVJbnN0cnVjdGlvbiA9IF90aGlzLnN0YXRlLnJlc3RvcmVJbnN0cnVjdGlvbjsKCiAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgaXNJbnN0cnVjdGlvbkRvd25sb2FkZWQ6IHRydWUKICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gJ0NoZWNrIHlvdXIgYnJvd3NlciBkb3dubG9hZHMnOwogICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCAiZGF0YTp0ZXh0L3BsYWluY2hhcnNldD11dGYtOCwiLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQocmVzdG9yZUluc3RydWN0aW9uKSkpOwogICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rvd25sb2FkJywgIiIuY29uY2F0KHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSwgIl9idGNfc21zX3Byb3RlY3RlZF9rZXlzXyIpLmNvbmNhdChtb21lbnQoKS5mb3JtYXQoJ0RELk1NLllZWVknKSwgIi50eHQiKSk7CiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsZW1lbnQpOwogICAgICAgICAgICAgICAgZWxlbWVudC5jbGljaygpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbGVtZW50KTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgaXNJbnN0cnVjdGlvbkRvd25sb2FkZWQ6IGZhbHNlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlNik7CiAgICB9KSkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZUdlbmVyYXRlTW5lbW9uaWMiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcoKSB7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGlzTW5lbW9uaWNHZW5lcmF0ZWQ6IHRydWUsCiAgICAgICAgICAgICAgICBpc01uZW1vbmljVmFsaWQ6IHRydWUsCiAgICAgICAgICAgICAgICBtbmVtb25pYzogYWN0aW9ucy5idGMuZ2V0UmFuZG9tTW5lbW9uaWNXb3JkcygpCiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICBpc01uZW1vbmljR2VuZXJhdGVkOiBmYWxzZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTcpOwogICAgfSkpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJoYW5kbGVGaW5pc2giLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoKSB7CiAgICAgIHZhciBuYW1lOwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBuYW1lID0gX3RoaXMucHJvcHMubmFtZTsKICAgICAgICAgICAgICBhY3Rpb25zLmJ0Y211bHRpc2lnLmVuYWJsZVdhbGxldFNNUygpOwogICAgICAgICAgICAgIGFjdGlvbnMubW9kYWxzLmNsb3NlKG5hbWUpOwoKICAgICAgICAgICAgICBpZiAoX3RoaXMucHJvcHMuZGF0YS5jYWxsYmFjaykgewogICAgICAgICAgICAgICAgX3RoaXMucHJvcHMuZGF0YS5jYWxsYmFjaygpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU4KTsKICAgIH0pKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlU2hhcmVJbnN0cnVjdGlvbiIsIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOSgpIHsKICAgICAgdmFyIHJlc3RvcmVJbnN0cnVjdGlvbjsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOSQoX2NvbnRleHQ5KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgcmVzdG9yZUluc3RydWN0aW9uID0gX3RoaXMuc3RhdGUucmVzdG9yZUluc3RydWN0aW9uOwogICAgICAgICAgICAgIGFjdGlvbnMubW9kYWxzLm9wZW4oY29uc3RhbnRzLm1vZGFscy5TaGFyZSwgewogICAgICAgICAgICAgICAgdGl0bGU6ICJCVEMgU21zLXByb3RlY3RlZCB3YWxsZXQgcmVzdG9yeSBpbnN0cnVjdGlvbiIsCiAgICAgICAgICAgICAgICBsaW5rOiByZXN0b3JlSW5zdHJ1Y3Rpb24KICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU5KTsKICAgIH0pKSk7CgogICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAiaGFuZGxlQmVnaW5TYXZlTW5lbW9uaWMiLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKCkgewogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgYWN0aW9ucy5tb2RhbHMub3Blbihjb25zdGFudHMubW9kYWxzLlNhdmVNbmVtb25pY01vZGFsLCB7CiAgICAgICAgICAgICAgICBvbkNsb3NlOiBmdW5jdGlvbiBvbkNsb3NlKCkgewogICAgICAgICAgICAgICAgICB2YXIgbW5lbW9uaWMgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShjb25zdGFudHMucHJpdmF0ZUtleU5hbWVzLnR3ZW50eXdvcmRzKTsKICAgICAgICAgICAgICAgICAgdmFyIG1uZW1vbmljU2F2ZWQgPSBtbmVtb25pYyA9PT0gIi0iOwogICAgICAgICAgICAgICAgICB2YXIgc3RlcCA9IG1uZW1vbmljU2F2ZWQgPyAnZW50ZXJQaG9uZUFuZE1uZW1vbmljJyA6ICdzYXZlTW5lbW9uaWNXb3Jkcyc7CgogICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgbW5lbW9uaWNTYXZlZDogbW5lbW9uaWNTYXZlZCwKICAgICAgICAgICAgICAgICAgICBzdGVwOiBzdGVwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUxMCk7CiAgICB9KSkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImhhbmRsZUNsb3NlIiwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3RoaXMkcHJvcHMgPSBfdGhpcy5wcm9wcywKICAgICAgICAgIG5hbWUgPSBfdGhpcyRwcm9wcy5uYW1lLAogICAgICAgICAgZGF0YSA9IF90aGlzJHByb3BzLmRhdGEsCiAgICAgICAgICBvbkNsb3NlID0gX3RoaXMkcHJvcHMub25DbG9zZTsKCiAgICAgIGlmICh0eXBlb2Ygb25DbG9zZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIG9uQ2xvc2UoKTsKICAgICAgfQoKICAgICAgaWYgKHR5cGVvZiBkYXRhLm9uQ2xvc2UgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICBkYXRhLm9uQ2xvc2UoKTsKICAgICAgfQoKICAgICAgYWN0aW9ucy5tb2RhbHMuY2xvc2UobmFtZSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJnZW5lcmF0ZVJlc3RvcmVJbnN0cnVjdGlvbiIsIGZ1bmN0aW9uICgpIHsvLyBAVG9EbyAtIHRlbXAgY29tbWVudCAtIGZpbmQgZXJyb3IsIGZpeCwgYW5kIHVuY29tbWVudAoKICAgICAgLyoNCiAgICAgIGNvbnN0IHsgbW5lbW9uaWMsIG1uZW1vbmljV2FsbGV0LCB1c2VHZW5lcmF0ZWRLZXkgfSA9IHRoaXMuc3RhdGUNCiAgICAgICAgY29uc3QgeyBidGNEYXRhLCBidGNNdWx0aXNpZ1NNU0RhdGEgfSA9IHRoaXMucHJvcHMNCiAgICAgICAgbGV0IHJlc3RvcmVJbnN0cnVjdGlvbiA9ICcnDQogICAgICAgIHJlc3RvcmVJbnN0cnVjdGlvbiA9IGBXYWxsZXQgYWRkcmVzczpcclxuYA0KICAgICAgcmVzdG9yZUluc3RydWN0aW9uICs9IGAke2J0Y011bHRpc2lnU01TRGF0YS5hZGRyZXNzfVxyXG5gDQogICAgICByZXN0b3JlSW5zdHJ1Y3Rpb24gKz0gYFRvIHdpdGhkcmF3IGZ1bmRzIGNyZWF0ZSB0cmFuc2FjdGlvbiB1c2luZyB0aGlzIGNvZGUgaHR0cHM6Ly9naXRodWIuY29tL2JpdGNvaW5qcy9iaXRjb2luanMtbGliL2Jsb2IvbWFzdGVyL3Rlc3QvaW50ZWdyYXRpb24vdHJhbnNhY3Rpb25zLnNwZWMudHMjTDE5M1xyXG5gDQogICAgICByZXN0b3JlSW5zdHJ1Y3Rpb24gKz0gYFxyXG5gDQogICAgICByZXN0b3JlSW5zdHJ1Y3Rpb24gKz0gYFB1YmxpYyBrZXlzIGZvciBjcmVhdGUgTXVsdGlzaWcgKDJvZjMpIHdhbGxldDpcclxuYA0KICAgICAgaWYgKGJ0Y011bHRpc2lnU01TRGF0YS5wdWJsaWNLZXlzWzBdKQ0KICAgICAgICByZXN0b3JlSW5zdHJ1Y3Rpb24gKz0gYCR7YnRjTXVsdGlzaWdTTVNEYXRhLnB1YmxpY0tleXNbMF0udG9TdHJpbmcoJ0hleCcpfVxyXG5gDQogICAgICBpZiAoYnRjTXVsdGlzaWdTTVNEYXRhLnB1YmxpY0tleXNbMV0pDQogICAgICAgIHJlc3RvcmVJbnN0cnVjdGlvbiArPSBgJHtidGNNdWx0aXNpZ1NNU0RhdGEucHVibGljS2V5c1sxXS50b1N0cmluZygnSGV4Jyl9XHJcbmANCiAgICAgIGlmIChidGNNdWx0aXNpZ1NNU0RhdGEucHVibGljS2V5c1syXSkNCiAgICAgICAgcmVzdG9yZUluc3RydWN0aW9uICs9IGAke2J0Y011bHRpc2lnU01TRGF0YS5wdWJsaWNLZXlzWzJdLnRvU3RyaW5nKCdIZXgnKX1cclxuYA0KICAgICAgcmVzdG9yZUluc3RydWN0aW9uICs9IGBcclxuYA0KICAgICAgcmVzdG9yZUluc3RydWN0aW9uICs9IGBIb3Qgd2FsbGV0IHByaXZhdGUga2V5IChXSUYpIChmaXJzdCBvZiB0aHJlZSBmb3Igc2lnbiB0eCk6XHJcbmANCiAgICAgIHJlc3RvcmVJbnN0cnVjdGlvbiArPSBgV2FsbGV0IGRlbGl2ZXJ5IHBhdGggZnJvbSB5b3VyIHNlY3JldCBwaHJhc2U6XHJcbmANCiAgICAgIHJlc3RvcmVJbnN0cnVjdGlvbiArPSBgbS80NCcvMCcvMCcvMC8wXHJcbmANCiAgICAgIHJlc3RvcmVJbnN0cnVjdGlvbiArPSBgJHtidGNEYXRhLnByaXZhdGVLZXl9XHJcbmANCiAgICAgIHJlc3RvcmVJbnN0cnVjdGlvbiArPSBgKioqICh0aGlzIHByaXZhdGUga2V5IHN0b3JlZCBpbiB5b3VyIGJyb3dzZXIpXHJcbmANCiAgICAgIHJlc3RvcmVJbnN0cnVjdGlvbiArPSBgXHJcbmANCiAgICAgIGlmICghdXNlR2VuZXJhdGVkS2V5KSB7DQogICAgICAgIHJlc3RvcmVJbnN0cnVjdGlvbiArPSBgU2VjcmV0IG1uZW1vbmljOlxyXG5gDQogICAgICAgIHJlc3RvcmVJbnN0cnVjdGlvbiArPSBgJHttbmVtb25pY31cclxuYA0KICAgICAgICByZXN0b3JlSW5zdHJ1Y3Rpb24gKz0gYFdhbGxldCBkZWxpdmVyeSBwYXRoIGZvciBtbmVtb25pYzpcclxuYA0KICAgICAgICByZXN0b3JlSW5zdHJ1Y3Rpb24gKz0gYG0vNDQnLzAnLzAnLzAvMFxyXG5gDQogICAgICAgIHJlc3RvcmVJbnN0cnVjdGlvbiArPSBgUHJpdmF0ZSBrZXkgKFdJRikgb2Ygd2FsbGV0LCBnZW5lcmF0ZWQgZnJvbSBtbmVtb25pYzpcclxuYA0KICAgICAgICByZXN0b3JlSW5zdHJ1Y3Rpb24gKz0gYChERUxFVEUgVEhJUyBMSU5FISkgJHttbmVtb25pY1dhbGxldC5XSUZ9XHJcbmANCiAgICAgICAgcmVzdG9yZUluc3RydWN0aW9uICs9IGAqKiogKHRoaXMgcHJpdmF0ZSBrZXkgZG9lcyBub3Qgc3RvcmVkIGFueXdoZXJlISBidXQgaW4gY2FzZSBpZiBvdXIgIDJmYSBzZXJ2ZXIgZG9lcyBkb3duLCB5b3UgY2FuIHdpdGhkcmF3IHlvdXIgZm9uZCB1c2luZyB0aGlzIHByaXZhdGUga2V5KVxyXG5gDQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXN0b3JlSW5zdHJ1Y3Rpb24gKz0gYFNlY29uZCBvZiB0aHJlZSBmb3Igc2lnbiB0eDpcclxuYA0KICAgICAgICByZXN0b3JlSW5zdHJ1Y3Rpb24gKz0gYFdhbGxldCBkZWxpdmVyeSBwYXRoIGZyb20geW91ciBzZWNyZXQgcGhyYXNlOlxyXG5gDQogICAgICAgIHJlc3RvcmVJbnN0cnVjdGlvbiArPSBgbS80NCcvMCcvMCcvMC8xXHJcbmANCiAgICAgICAgcmVzdG9yZUluc3RydWN0aW9uICs9IGBcclxuYA0KICAgICAgfQ0KICAgICAgcmVzdG9yZUluc3RydWN0aW9uICs9IGBJZiBvdXIgc2VydmljZSBpcyB1bmF2YWlsYWJsZSwgdXNlIGEgbG9jYWwgY29weSBvZiB0aGUgd2FsbGV0LlxyXG5gDQogICAgICByZXN0b3JlSW5zdHJ1Y3Rpb24gKz0gYGh0dHBzOi8vc3dhcG9ubGluZS5naXRodWIuaW8vMmZhX3dhbGxldC56aXBcclxuYA0KICAgICAgICB0aGlzLnNldFN0YXRlKHsNCiAgICAgICAgcmVzdG9yZUluc3RydWN0aW9uLA0KICAgICAgfSkNCiAgICAgICovCiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJvblBob25lQ2hhbmdlIiwgZnVuY3Rpb24gKHBob25lKSB7CiAgICAgIF90aGlzLnNldFN0YXRlKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgcGhvbmU6IHBob25lCiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9KTsKCiAgICB2YXIgX3Byb3BzJGRhdGEgPSBwcm9wcy5kYXRhLAogICAgICAgIF92ZXJzaW9uID0gX3Byb3BzJGRhdGEudmVyc2lvbiwKICAgICAgICBpbml0U3RlcCA9IF9wcm9wcyRkYXRhLmluaXRTdGVwOwogICAgX3ZlcnNpb24gPSBfdmVyc2lvbiA/IF92ZXJzaW9uIDogJzJvZjMnOyAvLyAyb2YyCgogICAgdmFyIF9nZW5lcmF0ZWRLZXkgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShjb25zdGFudHMucHJpdmF0ZUtleU5hbWVzLmJ0Y1Ntc01uZW1vbmljS2V5R2VuZXJhdGVkKTsKCiAgICB2YXIgX21uZW1vbmljID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oY29uc3RhbnRzLnByaXZhdGVLZXlOYW1lcy50d2VudHl3b3Jkcyk7CgogICAgdmFyIF9tbmVtb25pY1NhdmVkID0gX21uZW1vbmljID09PSAiLSI7CgogICAgdmFyIF91c2VHZW5lcmF0ZWRLZXlFbmFibGVkID0gISFfZ2VuZXJhdGVkS2V5OwoKICAgIHZhciBfc3RlcCA9ICdlbnRlclBob25lQW5kTW5lbW9uaWMnOyAvLyAiZW50ZXJQaG9uZSIsCgogICAgaWYgKF91c2VHZW5lcmF0ZWRLZXlFbmFibGVkICYmICFfbW5lbW9uaWNTYXZlZCkgX3N0ZXAgPSAnc2F2ZU1uZW1vbmljV29yZHMnOwogICAgdmFyIHNob3dGaW5hbEluc3RydWN0aW9uID0gZmFsc2U7CgogICAgaWYgKGluaXRTdGVwID09PSAnZXhwb3J0JykgewogICAgICBzaG93RmluYWxJbnN0cnVjdGlvbiA9IHRydWU7CiAgICAgIF9zdGVwID0gJ3JlYWR5JzsKICAgIH0KCiAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgdmVyc2lvbjogX3ZlcnNpb24sCiAgICAgIHBob25lOiB3aW5kb3cuRGVmYXVsdENvdW50cnlDb2RlIHx8ICcnLAogICAgICBzdGVwOiBfc3RlcCwKICAgICAgZXJyb3I6IGZhbHNlLAogICAgICBzbXNDb2RlOiAnJywKICAgICAgc21zQ29uZmlybWVkOiBmYWxzZSwKICAgICAgaXNTaGlwcGVkOiBmYWxzZSwKICAgICAgc2hvd0ZpbmFsSW5zdHJ1Y3Rpb246IHNob3dGaW5hbEluc3RydWN0aW9uLAogICAgICB1c2VHZW5lcmF0ZWRLZXk6IF91c2VHZW5lcmF0ZWRLZXlFbmFibGVkLAogICAgICBnZW5lcmF0ZWRLZXk6IF9nZW5lcmF0ZWRLZXksCiAgICAgIHVzZUdlbmVyYXRlZEtleUVuYWJsZWQ6IF91c2VHZW5lcmF0ZWRLZXlFbmFibGVkLAogICAgICBtbmVtb25pY1NhdmVkOiBfbW5lbW9uaWNTYXZlZCwKICAgICAgbW5lbW9uaWM6IF92ZXJzaW9uID09PSAnMm9mMycgPyBhY3Rpb25zLmJ0Yy5nZXRSYW5kb21NbmVtb25pY1dvcmRzKCkgOiBmYWxzZSwKICAgICAgbW5lbW9uaWNXYWxsZXQ6IGZhbHNlLAogICAgICBpc01uZW1vbmljQ29waWVkOiBmYWxzZSwKICAgICAgaXNNbmVtb25pY0dlbmVyYXRlZDogZmFsc2UsCiAgICAgIGlzTW5lbW9uaWNWYWxpZDogdHJ1ZSwKICAgICAgaXNXYWxsZXRMb2NrZWRPdGhlclBob25lOiBmYWxzZSwKICAgICAgaXNJbnN0cnVjdGlvbkNvcGllZDogZmFsc2UsCiAgICAgIGlzSW5zdHJ1Y3Rpb25Eb3dubG9hZGVkOiBmYWxzZQogICAgfTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhSZWdpc3RlclNNU1Byb3RlY3RlZCwgW3sKICAgIGtleTogImNvbXBvbmVudERpZE1vdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHsKICAgICAgdGhpcy5nZW5lcmF0ZVJlc3RvcmVJbnN0cnVjdGlvbigpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMkc3RhdGUzID0gdGhpcy5zdGF0ZSwKICAgICAgICAgIHN0ZXAgPSBfdGhpcyRzdGF0ZTMuc3RlcCwKICAgICAgICAgIGVycm9yID0gX3RoaXMkc3RhdGUzLmVycm9yLAogICAgICAgICAgcGhvbmUgPSBfdGhpcyRzdGF0ZTMucGhvbmUsCiAgICAgICAgICBpc1NoaXBwZWQgPSBfdGhpcyRzdGF0ZTMuaXNTaGlwcGVkLAogICAgICAgICAgdXNlR2VuZXJhdGVkS2V5RW5hYmxlZCA9IF90aGlzJHN0YXRlMy51c2VHZW5lcmF0ZWRLZXlFbmFibGVkLAogICAgICAgICAgbW5lbW9uaWMgPSBfdGhpcyRzdGF0ZTMubW5lbW9uaWMsCiAgICAgICAgICBpc01uZW1vbmljQ29waWVkID0gX3RoaXMkc3RhdGUzLmlzTW5lbW9uaWNDb3BpZWQsCiAgICAgICAgICBpc01uZW1vbmljR2VuZXJhdGVkID0gX3RoaXMkc3RhdGUzLmlzTW5lbW9uaWNHZW5lcmF0ZWQsCiAgICAgICAgICBpc01uZW1vbmljVmFsaWQgPSBfdGhpcyRzdGF0ZTMuaXNNbmVtb25pY1ZhbGlkLAogICAgICAgICAgc21zU2VydmVyT2ZmbGluZSA9IF90aGlzJHN0YXRlMy5zbXNTZXJ2ZXJPZmZsaW5lLAogICAgICAgICAgaXNXYWxsZXRMb2NrZWRPdGhlclBob25lID0gX3RoaXMkc3RhdGUzLmlzV2FsbGV0TG9ja2VkT3RoZXJQaG9uZSwKICAgICAgICAgIGlzSW5zdHJ1Y3Rpb25Db3BpZWQgPSBfdGhpcyRzdGF0ZTMuaXNJbnN0cnVjdGlvbkNvcGllZCwKICAgICAgICAgIGlzSW5zdHJ1Y3Rpb25Eb3dubG9hZGVkID0gX3RoaXMkc3RhdGUzLmlzSW5zdHJ1Y3Rpb25Eb3dubG9hZGVkLAogICAgICAgICAgcmVzdG9yZUluc3RydWN0aW9uID0gX3RoaXMkc3RhdGUzLnJlc3RvcmVJbnN0cnVjdGlvbiwKICAgICAgICAgIHNob3dGaW5hbEluc3RydWN0aW9uID0gX3RoaXMkc3RhdGUzLnNob3dGaW5hbEluc3RydWN0aW9uOwogICAgICB2YXIgX3RoaXMkcHJvcHMyID0gdGhpcy5wcm9wcywKICAgICAgICAgIG5hbWUgPSBfdGhpcyRwcm9wczIubmFtZSwKICAgICAgICAgIGludGwgPSBfdGhpcyRwcm9wczIuaW50bDsKICAgICAgdmFyIGxpbmtlZCA9IExpbmsuYWxsKHRoaXMsICdzbXNDb2RlJywgJ21uZW1vbmljJyk7CiAgICAgIHZhciBsYW5ncyA9IGRlZmluZU1lc3NhZ2VzKHsKICAgICAgICByZWdpc3RlclNNU01vZGFsOiB7CiAgICAgICAgICBpZDogJ3JlZ2lzdGVyU01TUHJvdGVjdGVkVGl0bGUnLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJBY3RpdmF0ZSBTTVMgUHJvdGVjdGVkIFdhbGxldCIKICAgICAgICB9LAogICAgICAgIG1uZW1vbmljUGxhY2Vob2xkZXI6IHsKICAgICAgICAgIGlkOiAncmVnaXN0ZXJTTVNNUGxhY2VIb2xkZXInLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICIxMiBcdTA0NDFcdTA0M0JcdTA0M0VcdTA0MzIiCiAgICAgICAgfSwKICAgICAgICBwaG9uZVBsYWNlSG9sZGVyOiB7CiAgICAgICAgICBpZDogJ3JlZ2lzdGVyU01TTW9kYWxQaG9uZVBsYWNlaG9sZGVyJywKICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiRW50ZXIgeW91ciBwaG9uZSIKICAgICAgICB9LAogICAgICAgIHNtc1BsYWNlSG9sZGVyOiB7CiAgICAgICAgICBpZDogJ3JlZ2lzdGVyU01TTW9kYWxTbXNDb2RlUGxhY2Vob2xkZXInLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJFbnRlciBjb2RlIGZyb20gU01TIgogICAgICAgIH0sCiAgICAgICAgbmVlZFNhdmVNbmVtb25pY1RvQ29udGludWU6IHsKICAgICAgICAgIGlkOiAncmVnaXN0ZXJTTVNfWW91TmVlZFNhdmVNbmVtb25pYycsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxNFx1MDQzQlx1MDQ0RiBcdTA0MzBcdTA0M0FcdTA0NDJcdTA0MzhcdTA0MzJcdTA0MzBcdTA0NDZcdTA0MzhcdTA0MzggMmZhIFx1MDQzMlx1MDQ0QiBcdTA0MzRcdTA0M0VcdTA0M0JcdTA0MzZcdTA0M0RcdTA0NEIgXHUwNDQxXHUwNDNFXHUwNDQ1XHUwNDQwXHUwNDMwXHUwNDNEXHUwNDM4XHUwNDQyXHUwNDRDIDEyIFx1MDQ0MVx1MDQzQlx1MDQzRVx1MDQzMi4iCiAgICAgICAgfSwKICAgICAgICBwbGVhc2VTYXZlTW5lbW9uaWNUb0NvbnRpbnVlOiB7CiAgICAgICAgICBpZDogJ3JlZ2lzdGVyU01TX1NhdmVZb3VyTW5lbW9uaWMnLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MUZcdTA0M0VcdTA0MzZcdTA0MzBcdTA0M0JcdTA0NDNcdTA0MzlcdTA0NDFcdTA0NDJcdTA0MzAgXHUwNDQxXHUwNDNFXHUwNDQ1XHUwNDQwXHUwNDMwXHUwNDNEXHUwNDM4XHUwNDQyXHUwNDM1IFx1MDQ0MVx1MDQzMlx1MDQzRVx1MDQ0RSBcdTA0NDFcdTA0MzVcdTA0M0FcdTA0NDBcdTA0MzVcdTA0NDJcdTA0M0RcdTA0NDNcdTA0NEUgXHUwNDQ0XHUwNDQwXHUwNDMwXHUwNDM3XHUwNDQzLiIKICAgICAgICB9LAogICAgICAgIGJ1dHRvblNhdmVNbmVtb25pYzogewogICAgICAgICAgaWQ6ICdyZWdpc3RlclNNU19CdXR0b25TYXZlTW5lbW9uaWMnLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTYXZlIgogICAgICAgIH0sCiAgICAgICAgYnV0dG9uQ2FuY2VsOiB7CiAgICAgICAgICBpZDogJ3JlZ2lzdGVyU01TX0J1dHRvbkNhbmNlbCcsCiAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkNhbmNlbCIKICAgICAgICB9CiAgICAgIH0pOwogICAgICB2YXIgc2VudEJ0bkRpc2FibGVkID0gaXNTaGlwcGVkIHx8ICFwaG9uZSB8fCBwaG9uZSAmJiAhaXNWYWxpZFBob25lTnVtYmVyKHBob25lKTsKICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE1vZGFsLCB7CiAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICB0aXRsZTogIiIuY29uY2F0KGludGwuZm9ybWF0TWVzc2FnZShsYW5ncy5yZWdpc3RlclNNU01vZGFsKSkKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJyZWdpc3RlclNNU01vZGFsSG9sZGVyIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3R5bGUiLCB7CiAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHsKICAgICAgICAgIF9faHRtbDogIlxuICAgICAgICAgICAgLlBob25lSW5wdXRDb3VudHJ5SWNvbiB7XG4gICAgICAgICAgICAgIHdpZHRoOiAyNnB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgIgogICAgICAgIH0KICAgICAgfSksIHN0ZXAgPT09ICdzYXZlTW5lbW9uaWNXb3JkcycgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiY29udGVudC1vdmVybGF5IgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicCIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJjZW50ZXJJbmZvQmxvY2siCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzdHJvbmciLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCBsYW5ncy5uZWVkU2F2ZU1uZW1vbmljVG9Db250aW51ZSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYnIiLCBudWxsKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgbGFuZ3MucGxlYXNlU2F2ZU1uZW1vbmljVG9Db250aW51ZSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJidXR0b25zSG9sZGVyIGJ1dHRvbnNIb2xkZXJfMl9idXR0b25zIGJ1dHRvbi1vdmVybGF5IgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHsKICAgICAgICBibHVlOiB0cnVlLAogICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQmVnaW5TYXZlTW5lbW9uaWMKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgbGFuZ3MuYnV0dG9uU2F2ZU1uZW1vbmljKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwgewogICAgICAgIGdyYXk6IHRydWUsCiAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVDbG9zZQogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCBsYW5ncy5idXR0b25DYW5jZWwpKSkpLCBzdGVwID09PSAnZW50ZXJQaG9uZUFuZE1uZW1vbmljJyAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGcmFnbWVudCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUGhvbmVJbnB1dCwgewogICAgICAgIHZhbHVlOiBwaG9uZSwKICAgICAgICBlcnJvcjogZXJyb3IsCiAgICAgICAgbG9jYWxlOiBpbnRsLmxvY2FsZSwKICAgICAgICBvbkNoYW5nZTogdGhpcy5vblBob25lQ2hhbmdlLAogICAgICAgIHBsYWNlaG9sZGVyOiAiIi5jb25jYXQoaW50bC5mb3JtYXRNZXNzYWdlKGxhbmdzLnBob25lUGxhY2VIb2xkZXIpKSwKICAgICAgICBsYWJlbDogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRmllbGRMYWJlbCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJyZWdpc3RlclNNU01vZGFsUGhvbmUiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJZb3VyIHBob25lOiIKICAgICAgICB9KSkKICAgICAgfSksICF1c2VHZW5lcmF0ZWRLZXlFbmFibGVkICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZyYWdtZW50LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogImhpZ2hMZXZlbCIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJpbmZvQ2FwdGlvbiIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAicmVnaXN0ZXJTTVNXb3Jkc0luZm9CbG9jayIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MjFcdTA0MzNcdTA0MzVcdTA0M0RcdTA0MzVcdTA0NDBcdTA0MzhcdTA0NDBcdTA0NDNcdTA0MzlcdTA0NDJcdTA0MzUgXHUwNDQxXHUwNDM1XHUwNDNBXHUwNDQwXHUwNDM1XHUwNDQyXHUwNDNEXHUwNDQzXHUwNDRFIFx1MDQ0NFx1MDQ0MFx1MDQzMFx1MDQzN1x1MDQ0MyBcdTA0MzhcdTA0M0JcdTA0MzggXHUwNDQzXHUwNDNBXHUwNDMwXHUwNDM2XHUwNDM4XHUwNDQyXHUwNDM1IFx1MDQ0MFx1MDQzMFx1MDQzRFx1MDQzNVx1MDQzNSBcdTA0NDFcdTA0M0VcdTA0NDVcdTA0NDBcdTA0MzBcdTA0M0RcdTA0MzVcdTA0M0RcdTA0M0RcdTA0NDNcdTA0NEUgXHUwNDM0XHUwNDNCXHUwNDRGIFx1MDQzMlx1MDQzRVx1MDQ0MVx1MDQ0MVx1MDQ0Mlx1MDQzMFx1MDQzRFx1MDQzRVx1MDQzMlx1MDQzQlx1MDQzNVx1MDQzRFx1MDQzOFx1MDQ0RiBcdTA0NDFcdTA0NDJcdTA0MzBcdTA0NDBcdTA0M0VcdTA0MzNcdTA0M0UgXHUwNDNBXHUwNDNFXHUwNDQ4XHUwNDM1XHUwNDNCXHUwNDRDXHUwNDNBXHUwNDMwIgogICAgICB9KSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogImhpZ2hMZXZlbCIsCiAgICAgICAgY2xhc3NOYW1lOiAieW0taGlkZS1jb250ZW50IgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGaWVsZExhYmVsLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJyZWdpc3RlclNNU01vZGFsV29yZHMiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDIxXHUwNDM1XHUwNDNBXHUwNDQwXHUwNDM1XHUwNDQyXHUwNDNEXHUwNDMwXHUwNDRGIFx1MDQ0NFx1MDQ0MFx1MDQzMFx1MDQzN1x1MDQzMCAoMTIgXHUwNDQxXHUwNDNCXHUwNDNFXHUwNDMyKToiCiAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJtbmVtb25pY0J1dHRvbnNIb2xkZXIiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwgewogICAgICAgIGJsdWU6IHRydWUsCiAgICAgICAgZnVsbFdpZHRoOiB0cnVlLAogICAgICAgIGRpc2FibGVkOiBpc01uZW1vbmljR2VuZXJhdGVkLAogICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlR2VuZXJhdGVNbmVtb25pYwogICAgICB9LCBpc01uZW1vbmljR2VuZXJhdGVkID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAicmVnaXN0ZXJTTVNNb2RhbE1uZW1vbmljR2VuZXJhdGVOZXdHZW5lcmF0ZWQiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDIxXHUwNDNFXHUwNDM3XHUwNDM0XHUwNDMwXHUwNDNEXHUwNDMwIgogICAgICB9KSA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInJlZ2lzdGVyU01TTW9kYWxNbmVtb25pY0dlbmVyYXRlTmV3IiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQyMVx1MDQzRVx1MDQzN1x1MDQzNFx1MDQzMFx1MDQ0Mlx1MDQ0QyBcdTA0M0RcdTA0M0VcdTA0MzJcdTA0NDNcdTA0NEUiCiAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ29weVRvQ2xpcGJvYXJkLCB7CiAgICAgICAgdGV4dDogbW5lbW9uaWMsCiAgICAgICAgb25Db3B5OiB0aGlzLmhhbmRsZUNvcHlNbmVtb25pYwogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHsKICAgICAgICBibHVlOiB0cnVlLAogICAgICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgICAgICBkaXNhYmxlZDogaXNNbmVtb25pY0NvcGllZCwKICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUNvcHlNbmVtb25pYwogICAgICB9LCBpc01uZW1vbmljQ29waWVkID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAicmVnaXN0ZXJTTVNNb2RhbE1uZW1vbmljQ29waWVkIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQyNFx1MDQ0MFx1MDQzMFx1MDQzN1x1MDQzMCBcdTA0NDFcdTA0M0FcdTA0M0VcdTA0M0ZcdTA0MzhcdTA0NDBcdTA0M0VcdTA0MzJcdTA0MzBcdTA0M0RcdTA0MzAiCiAgICAgIH0pIDogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAicmVnaXN0ZXJTTVNNb2RhbE1uZW1vbmljQ29weSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MjFcdTA0M0FcdTA0M0VcdTA0M0ZcdTA0MzhcdTA0NDBcdTA0M0VcdTA0MzJcdTA0MzBcdTA0NDJcdTA0NEMiCiAgICAgIH0pKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogIm5vdGljZSBtbmVtb25pY05vdGljZSIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAicmVnaXN0ZXJTTVNNbmVtb25pY05vdGljZSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MUVcdTA0M0RcdTA0MzAgXHUwNDNGXHUwNDNFXHUwNDNDXHUwNDNFXHUwNDM2XHUwNDM1XHUwNDQyIFx1MDQ0MFx1MDQzMFx1MDQzN1x1MDQzMVx1MDQzQlx1MDQzRVx1MDQzQVx1MDQzOFx1MDQ0MFx1MDQzRVx1MDQzMlx1MDQzMFx1MDQ0Mlx1MDQ0QyBcdTA0NDFcdTA0NDBcdTA0MzVcdTA0MzRcdTA0NDFcdTA0NDJcdTA0MzJcdTA0MzAgXHUwNDNEXHUwNDMwIFx1MDQzQVx1MDQzRVx1MDQ0OFx1MDQzNVx1MDQzQlx1MDQ0Q1x1MDQzQVx1MDQzNSwgXHUwNDM1XHUwNDQxXHUwNDNCXHUwNDM4IFx1MDQ0MVx1MDQzNVx1MDQ0MFx1MDQzMlx1MDQzNVx1MDQ0MCAyZmEgXHUwNDMxXHUwNDQzXHUwNDM0XHUwNDM1XHUwNDQyIFx1MDQzRFx1MDQzNSBcdTA0MzRcdTA0M0VcdTA0NDFcdTA0NDJcdTA0NDNcdTA0M0ZcdTA0MzVcdTA0M0QiCiAgICAgIH0pKSwgIWlzTW5lbW9uaWNWYWxpZCAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogInJlZG5vdGVzIG1uZW1vbmljTm90aWNlIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJyZWdpc3RlclNNU01uZW1vbmljRXJyb3IiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDEyXHUwNDRCIFx1MDQ0M1x1MDQzQVx1MDQzMFx1MDQzN1x1MDQzMFx1MDQzQlx1MDQzOCBcdTA0M0RcdTA0MzUgXHUwNDMyXHUwNDMwXHUwNDNCXHUwNDM4XHUwNDM0XHUwNDNEXHUwNDRCXHUwNDM5IFx1MDQzRFx1MDQzMFx1MDQzMVx1MDQzRVx1MDQ0MCBcdTA0NDFcdTA0M0JcdTA0M0VcdTA0MzIiCiAgICAgIH0pKSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgc21zU2VydmVyT2ZmbGluZSA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZyYWdtZW50LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHsKICAgICAgICBibHVlOiB0cnVlLAogICAgICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgICAgICBkaXNhYmxlZDogaXNTaGlwcGVkLAogICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlUmVzdG9yZVdhbGxldAogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJyZWdpc3RlclNNU0FkZE9mZmxpbmUiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDEyXHUwNDNFXHUwNDQxXHUwNDQxXHUwNDQyXHUwNDMwXHUwNDNEXHUwNDNFXHUwNDMyXHUwNDM4XHUwNDQyXHUwNDRDIFx1MDQzQVx1MDQzRVx1MDQ0OFx1MDQzNVx1MDQzQlx1MDQzNVx1MDQzQSIKICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiaHIiLCBudWxsKSkgOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGcmFnbWVudCwgbnVsbCwgZXJyb3IgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJyZWRub3RlcyBtbmVtb25pY05vdGljZSIKICAgICAgfSwgZXJyb3IpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwgewogICAgICAgIGJsdWU6IHRydWUsCiAgICAgICAgYmlnOiB0cnVlLAogICAgICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgICAgICBkaXNhYmxlZDogc2VudEJ0bkRpc2FibGVkLAogICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlU2VuZFNNUwogICAgICB9LCBpc1NoaXBwZWQgPyAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGcmFnbWVudCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAicmVnaXN0ZXJTTVNNb2RhbFByb2Nlc3MiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiUHJvY2Vzc2luZyAuLi4iCiAgICAgIH0pKSA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZyYWdtZW50LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJyZWdpc3RlclNNU01vZGFsU2VuZFNNUyIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTZW5kIFNNUyIKICAgICAgfSkpKSksIHN0ZXAgPT09ICdlbnRlclBob25lJyAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGcmFnbWVudCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUGhvbmVJbnB1dCwgewogICAgICAgIHZhbHVlOiBwaG9uZSwKICAgICAgICBlcnJvcjogZXJyb3IsCiAgICAgICAgbG9jYWxlOiBpbnRsLmxvY2FsZSwKICAgICAgICBvbkNoYW5nZTogdGhpcy5vblBob25lQ2hhbmdlLAogICAgICAgIHBsYWNlaG9sZGVyOiAiIi5jb25jYXQoaW50bC5mb3JtYXRNZXNzYWdlKGxhbmdzLnBob25lUGxhY2VIb2xkZXIpKSwKICAgICAgICBsYWJlbDogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRmllbGRMYWJlbCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgICAgaWQ6ICJyZWdpc3RlclNNU01vZGFsUGhvbmUiLAogICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJZb3VyIHBob25lOiIKICAgICAgICB9KSkKICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwgewogICAgICAgIGJsdWU6IHRydWUsCiAgICAgICAgYmlnOiB0cnVlLAogICAgICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgICAgICBkaXNhYmxlZDogc2VudEJ0bkRpc2FibGVkLAogICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlU2VuZFNNUwogICAgICB9LCBpc1NoaXBwZWQgPyAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGcmFnbWVudCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAicmVnaXN0ZXJTTVNNb2RhbFByb2Nlc3MiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiUHJvY2Vzc2luZyAuLi4iCiAgICAgIH0pKSA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZyYWdtZW50LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJyZWdpc3RlclNNU01vZGFsU2VuZFNNUyIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTZW5kIFNNUyIKICAgICAgfSkpKSksIHN0ZXAgPT09ICdlbnRlckNvZGUnICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZyYWdtZW50LCBudWxsLCBlcnJvciAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogInJlZG5vdGVzIHNtc0luZm9CbG9jayIKICAgICAgfSwgZXJyb3IpLCBpc1dhbGxldExvY2tlZE90aGVyUGhvbmUgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJyZWRub3RlcyBzbXNJbmZvQmxvY2siCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInJlZ2lzdGVyU01TX1dhbGxldExvY2tlZCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MkRcdTA0NDJcdTA0M0VcdTA0NDIgXHUwNDQxXHUwNDQ3XHUwNDM1XHUwNDQyIFx1MDQzRlx1MDQ0MFx1MDQzOFx1MDQzMlx1MDQ0Rlx1MDQzN1x1MDQzMFx1MDQzRCBcdTA0M0EgXHUwNDM0XHUwNDQwXHUwNDQzXHUwNDMzXHUwNDNFXHUwNDNDXHUwNDQzIFx1MDQzRFx1MDQzRVx1MDQzQ1x1MDQzNVx1MDQ0MFx1MDQ0MyBcdTA0NDJcdTA0MzVcdTA0M0JcdTA0MzVcdTA0NDRcdTA0M0VcdTA0M0RcdTA0MzAiCiAgICAgIH0pKSwgc21zU2VydmVyT2ZmbGluZSAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgIHN0eWxlTmFtZTogInJlZG5vdGVzIHNtc0luZm9CbG9jayIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAicmVnaXN0ZXJTTVNfQ29uZmlnU2VydmVyT2ZmbGluZSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MjFcdTA0MzVcdTA0NDBcdTA0MzJcdTA0MzVcdTA0NDAgXHUwNDMwXHUwNDMyXHUwNDQyXHUwNDNFXHUwNDQwXHUwNDM4XHUwNDM3XHUwNDMwXHUwNDQ2XHUwNDM4XHUwNDM4IFx1MDQzRFx1MDQzNSBcdTA0MzRcdTA0M0VcdTA0NDFcdTA0NDJcdTA0NDNcdTA0M0ZcdTA0MzVcdTA0M0QuIFx1MDQxRlx1MDQzRVx1MDQzRlx1MDQ0MFx1MDQzRVx1MDQzMVx1MDQ0M1x1MDQzOVx1MDQ0Mlx1MDQzNSBcdTA0M0ZcdTA0M0VcdTA0MzdcdTA0MzZcdTA0MzUgXHUwNDM4XHUwNDNCXHUwNDM4IFx1MDQzOFx1MDQ0MVx1MDQzRlx1MDQzRVx1MDQzQlx1MDQ0Q1x1MDQzN1x1MDQ0M1x1MDQzOVx1MDQ0Mlx1MDQzNSBcdTA0NDFcdTA0MzVcdTA0M0FcdTA0NDBcdTA0MzVcdTA0NDJcdTA0M0RcdTA0NDNcdTA0NEUgXHUwNDQ0XHUwNDQwXHUwNDMwXHUwNDM3XHUwNDMwIFx1MDQzNFx1MDQzQlx1MDQ0RiBcdTA0NDBcdTA0MzBcdTA0MzdcdTA0MzFcdTA0M0JcdTA0M0VcdTA0M0FcdTA0MzhcdTA0NDBcdTA0M0VcdTA0MzJcdTA0M0FcdTA0MzggXHUwNDQxXHUwNDQ3XHUwNDM1XHUwNDQyXHUwNDMwIgogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiaGlnaExldmVsIHNtc0NvZGVIb2xkZXIiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZpZWxkTGFiZWwsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInJlZ2lzdGVyU01TTW9kYWxDb2RlIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIkVudGVyIGNvZGUgZnJvbSBTTVM6IgogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KElucHV0LCB7CiAgICAgICAgc3R5bGVOYW1lOiAiaW5wdXQgaW5wdXRNYXJnaW4yNSIsCiAgICAgICAgdmFsdWVMaW5rOiBsaW5rZWQuc21zQ29kZSwKICAgICAgICBmb2N1c09uSW5pdDogdHJ1ZSwKICAgICAgICBwbGFjZWhvbGRlcjogIiIuY29uY2F0KGludGwuZm9ybWF0TWVzc2FnZShsYW5ncy5zbXNQbGFjZUhvbGRlcikpCiAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiY29uZmlybVNtc0NvZGUiLAogICAgICAgIGJpZzogdHJ1ZSwKICAgICAgICBibHVlOiB0cnVlLAogICAgICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgICAgICBkaXNhYmxlZDogaXNTaGlwcGVkLAogICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ2hlY2tTTVMKICAgICAgfSwgaXNTaGlwcGVkID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAicmVnaXN0ZXJTTVNNb2RhbFByb2Nlc3MiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiUHJvY2Vzc2luZyAuLi4iCiAgICAgIH0pIDogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAicmVnaXN0ZXJTTVNNb2RhbFNlbmRTTVMxNjUiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiQ29uZmlybSIKICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiaHIiLCBudWxsKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInAiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAibm90aWNlIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJyZWdpc3RlclNNU19NbmVtb25pY1Jlc3RvcmVOb3RlcyIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MTVcdTA0NDFcdTA0M0JcdTA0MzggXHUwNDNEXHUwNDM1IFx1MDQzRlx1MDQ0MFx1MDQzOFx1MDQ0NVx1MDQzRVx1MDQzNFx1MDQzOFx1MDQ0MiBcdTA0M0FcdTA0M0VcdTA0MzQgXHUwNDNGXHUwNDNFXHUwNDM0XHUwNDQyXHUwNDMyXHUwNDM1XHUwNDQwXHUwNDM2XHUwNDM0XHUwNDM1XHUwNDNEXHUwNDM4XHUwNDRGIFx1MDQzOFx1MDQzQlx1MDQzOCBcdTA0NDMgXHUwNDMyXHUwNDMwXHUwNDQxIFx1MDQzRFx1MDQzNVx1MDQ0MiBcdTA0MzRcdTA0M0VcdTA0NDFcdTA0NDJcdTA0NDNcdTA0M0ZcdTA0MzAgXHUwNDNBIFx1MDQ0M1x1MDQzQVx1MDQzMFx1MDQzN1x1MDQzMFx1MDQzRFx1MDQzRVx1MDQzQ1x1MDQ0MyBcdTA0M0RcdTA0M0VcdTA0M0NcdTA0MzVcdTA0NDBcdTA0NDMgXHUwNDQyXHUwNDM1XHUwNDNCXHUwNDM1XHUwNDQ0XHUwNDNFXHUwNDNEXHUwNDMwLCBcdTA0MzJcdTA0NEIgXHUwNDNDXHUwNDNFXHUwNDM2XHUwNDM1XHUwNDQyXHUwNDM1IFx1MDQzMlx1MDQzRVx1MDQ0MVx1MDQ0MVx1MDQ0Mlx1MDQzMFx1MDQzRFx1MDQzRVx1MDQzMlx1MDQzOFx1MDQ0Mlx1MDQ0QyBcdTA0M0FcdTA0M0VcdTA0NDhcdTA0MzVcdTA0M0JcdTA0MzVcdTA0M0EgXHUwNDM4XHUwNDQxXHUwNDNGXHUwNDNFXHUwNDNCXHUwNDRDXHUwNDM3XHUwNDQzXHUwNDRGIFx1MDQ0MVx1MDQzNVx1MDQzQVx1MDQ0MFx1MDQzNVx1MDQ0Mlx1MDQzRFx1MDQ0M1x1MDQ0RSBcdTA0NDRcdTA0NDBcdTA0MzBcdTA0MzdcdTA0NDMiCiAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInAiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAibm90aWNlIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtYXR0ZWRNZXNzYWdlLCB7CiAgICAgICAgaWQ6ICJyZWdpc3RlclNNU19NbmVtb25pY1VzZU5vdGVzIiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIlx1MDQxOFx1MDQ0MVx1MDQzRlx1MDQzRVx1MDQzQlx1MDQ0Q1x1MDQzN1x1MDQ0M1x1MDQ0RiBcdTA0NDFcdTA0MzVcdTA0M0FcdTA0NDBcdTA0MzVcdTA0NDJcdTA0M0RcdTA0NDNcdTA0NEUgXHUwNDQ0XHUwNDQwXHUwNDMwXHUwNDM3XHUwNDQzLCBcdTA0MzJcdTA0NEIgXHUwNDQxXHUwNDNDXHUwNDNFXHUwNDM2XHUwNDM1XHUwNDQyXHUwNDM1IFx1MDQ0MFx1MDQzMFx1MDQzN1x1MDQzMVx1MDQzQlx1MDQzRVx1MDQzQVx1MDQzOFx1MDQ0MFx1MDQzRVx1MDQzMlx1MDQzMFx1MDQ0Mlx1MDQ0QyBcdTA0NDFcdTA0NDBcdTA0MzVcdTA0MzRcdTA0NDFcdTA0NDJcdTA0MzJcdTA0MzAgXHUwNDNEXHUwNDMwIFx1MDQ0MVx1MDQ0N1x1MDQzNVx1MDQ0Mlx1MDQzNSIKICAgICAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicCIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJidXR0b25Db250YWluZXIiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwgewogICAgICAgIGJsdWU6IHRydWUsCiAgICAgICAgZnVsbFdpZHRoOiB0cnVlLAogICAgICAgIGF1dG9IZWlnaHQ6IHRydWUsCiAgICAgICAgZGlzYWJsZWQ6IGlzU2hpcHBlZCwKICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZVJlc3RvcmVXYWxsZXQKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAicmVnaXN0ZXJTTVNSZXN0b3J5TW5lbW9uaWMiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDEyXHUwNDNFXHUwNDQxXHUwNDQxXHUwNDQyXHUwNDMwXHUwNDNEXHUwNDNFXHUwNDMyXHUwNDM4XHUwNDQyXHUwNDRDIFx1MDQzQVx1MDQzRVx1MDQ0OFx1MDQzNVx1MDQzQlx1MDQzNVx1MDQzQSBcdTA0MzhcdTA0NDFcdTA0M0ZcdTA0M0VcdTA0M0JcdTA0NENcdTA0MzdcdTA0NDNcdTA0NEYgXHUwNDQxXHUwNDM1XHUwNDNBXHUwNDQwXHUwNDM1XHUwNDQyXHUwNDNEXHUwNDQzXHUwNDRFIFx1MDQ0NFx1MDQ0MFx1MDQzMFx1MDQzN1x1MDQ0MyIKICAgICAgfSkpKSksIHN0ZXAgPT09ICdyZWFkeScgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiaGlnaExldmVsIgogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImltZyIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJmaW5pc2hJbWciLAogICAgICAgIHNyYzogb2tTdmcsCiAgICAgICAgYWx0OiAiZmluaXNoIgogICAgICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgewogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICBmb250U2l6ZTogJzI1cHgnLAogICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJywKICAgICAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICBtYXJnaW5Cb3R0b206ICc0MHB4JwogICAgICAgIH0KICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAicmVnaXN0ZXJTTVNNb2RhbFJlYWR5IiwKICAgICAgICBkZWZhdWx0TWVzc2FnZTogIllvdXIgcHJvdGVjdGVkIHdhbGxldCBhY3RpdmF0ZWQiCiAgICAgIH0pKSksIHNob3dGaW5hbEluc3RydWN0aW9uICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAicmVzdG9yZUluc3RydWN0aW9uIiwKICAgICAgICBjbGFzc05hbWU6ICJ5bS1oaWRlLWNvbnRlbnQiCiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJoMSIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInJlZ2lzdGVyU01TTW9kYWxGaW5pc2hTYXZlVGhpc0luZm8iLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDE4XHUwNDNEXHUwNDQ0XHUwNDNFXHUwNDQwXHUwNDNDXHUwNDMwXHUwNDQ2XHUwNDM4XHUwNDRGIFx1MDQzRFx1MDQzMCBcdTA0NDFcdTA0M0JcdTA0NDNcdTA0NDdcdTA0MzBcdTA0MzkgXHUwNDNEXHUwNDM1XHUwNDM0XHUwNDNFXHUwNDQxXHUwNDQyXHUwNDQzXHUwNDNGXHUwNDNEXHUwNDNFXHUwNDQxXHUwNDQyXHUwNDM4IFx1MDQzRFx1MDQzMFx1MDQ0OFx1MDQzNVx1MDQzM1x1MDQzRSBcdTA0NDFcdTA0MzVcdTA0NDBcdTA0MzJcdTA0MzhcdTA0NDFcdTA0MzAiCiAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwcmUiLCBudWxsLCByZXN0b3JlSW5zdHJ1Y3Rpb24pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiYSIsIHsKICAgICAgICBzdHlsZU5hbWU6ICJsaW5rIiwKICAgICAgICB0YXJnZXQ6ICJfYmxhbmsiLAogICAgICAgIGhyZWY6ICJodHRwczovL2dpdGh1Yi5jb20vYml0Y29pbmpzL2JpdGNvaW5qcy1saWIvYmxvYi9tYXN0ZXIvdGVzdC9pbnRlZ3JhdGlvbi9hZGRyZXNzZXMuc3BlYy50cyIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAicmVnaXN0ZXJTTVNfTGlua1RvTWFudWFsUmVzdG9yZSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJIb3cgdG8gd2l0aGRyYXcgbW9uZXkgbWFudWFsbHkiCiAgICAgIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgc3R5bGVOYW1lOiAiYnV0dG9uc0hvbGRlciIKICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ29weVRvQ2xpcGJvYXJkLCB7CiAgICAgICAgdGV4dDogcmVzdG9yZUluc3RydWN0aW9uLAogICAgICAgIG9uQ29weTogdGhpcy5oYW5kbGVDb3B5SW5zdHJ1Y3Rpb24KICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7CiAgICAgICAgYmx1ZTogdHJ1ZSwKICAgICAgICBkaXNhYmxlZDogaXNJbnN0cnVjdGlvbkNvcGllZCwKICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUNvcHlJbnN0cnVjdGlvbgogICAgICB9LCBpc0luc3RydWN0aW9uQ29waWVkID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAicmVnaXN0ZXJTTVNNb2RhbEluc3RDb3BpZWQiLAogICAgICAgIGRlZmF1bHRNZXNzYWdlOiAiXHUwNDIxXHUwNDNBXHUwNDNFXHUwNDNGXHUwNDM4XHUwNDQwXHUwNDNFXHUwNDMyXHUwNDMwXHUwNDNEXHUwNDNFIgogICAgICB9KSA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInJlZ2lzdGVyU01TTW9kYWxJbnN0Q29weSIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MjFcdTA0M0FcdTA0M0VcdTA0M0ZcdTA0MzhcdTA0NDBcdTA0M0VcdTA0MzJcdTA0MzBcdTA0NDJcdTA0NEMiCiAgICAgIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwgewogICAgICAgIGJsdWU6IHRydWUsCiAgICAgICAgZGlzYWJsZWQ6IGlzSW5zdHJ1Y3Rpb25Eb3dubG9hZGVkLAogICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlRG93bmxvYWRJbnN0cnVjdGlvbgogICAgICB9LCBpc0luc3RydWN0aW9uRG93bmxvYWRlZCA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1hdHRlZE1lc3NhZ2UsIHsKICAgICAgICBpZDogInJlZ2lzdGVyU01TTW9kYWxJbnN0RG93bmxvYWRlZCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MTdcdTA0MzBcdTA0MzNcdTA0NDBcdTA0NDNcdTA0MzZcdTA0MzBcdTA0MzVcdTA0NDJcdTA0NDFcdTA0NEYiCiAgICAgIH0pIDogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAicmVnaXN0ZXJTTVNNb2RhbEluc3REb3dubG9hZCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJcdTA0MjFcdTA0M0FcdTA0MzBcdTA0NDdcdTA0MzBcdTA0NDJcdTA0NEMiCiAgICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7CiAgICAgICAgYmx1ZTogdHJ1ZSwKICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZVNoYXJlSW5zdHJ1Y3Rpb24KICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAicmVnaXN0ZXJTTVNfU2hhcmVJbnN0cnVjdGlvbiIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJTaGFyZSIKICAgICAgfSkpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwgewogICAgICAgIGJpZzogdHJ1ZSwKICAgICAgICBibHVlOiB0cnVlLAogICAgICAgIGZ1bGxXaWR0aDogdHJ1ZSwKICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUZpbmlzaAogICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChGcmFnbWVudCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybWF0dGVkTWVzc2FnZSwgewogICAgICAgIGlkOiAicmVnaXN0ZXJTTVNNb2RhbEZpbmlzaCIsCiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICJGaW5pc2giCiAgICAgIH0pKSkpKSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUmVnaXN0ZXJTTVNQcm90ZWN0ZWQ7Cn0oUmVhY3QuQ29tcG9uZW50KSwgX2RlZmluZVByb3BlcnR5KF9jbGFzczIsICJwcm9wVHlwZXMiLCB7CiAgbmFtZTogUHJvcFR5cGVzLnN0cmluZywKICBkYXRhOiBQcm9wVHlwZXMub2JqZWN0Cn0pLCBfdGVtcCkpIHx8IF9jbGFzcykgfHwgX2NsYXNzKSB8fCBfY2xhc3MpOwpleHBvcnQgeyBSZWdpc3RlclNNU1Byb3RlY3RlZCBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/front/shared/components/modals/RegisterSMSProtected/RegisterSMSProtected.tsx"],"names":["React","Fragment","PropTypes","constants","actions","Link","connect","cssModules","styles","ownStyle","isValidPhoneNumber","Modal","FieldLabel","Input","PhoneInput","Button","FormattedMessage","injectIntl","defineMessages","CopyToClipboard","moment","okSvg","RegisterSMSProtected","user","btcData","btcMultisigSMSData","allowMultiple","props","state","version","phone","mnemonic","generatedKey","useGeneratedKey","useGeneratedKeyEnabled","btc","validateMnemonicWords","trim","setState","isMnemonicValid","error","mnemonicWallet","getWalletByWords","isShipped","btcmultisig","beginRegisterSMS","result","answer","step","console","log","smsServerOffline","smsCode","isWalletLockedOtherPhone","confirmRegisterSMS","generateRestoreInstruction","addSMSWallet","isMnemonicCopied","setTimeout","isInstructionCopied","restoreInstruction","isInstructionDownloaded","element","document","createElement","message","setAttribute","encodeURIComponent","window","location","hostname","format","style","display","body","appendChild","click","removeChild","isMnemonicGenerated","getRandomMnemonicWords","name","enableWalletSMS","modals","close","data","callback","open","Share","title","link","SaveMnemonicModal","onClose","localStorage","getItem","privateKeyNames","twentywords","mnemonicSaved","initStep","btcSmsMnemonicKeyGenerated","showFinalInstruction","DefaultCountryCode","smsConfirmed","intl","linked","all","langs","registerSMSModal","id","defaultMessage","mnemonicPlaceholder","phonePlaceHolder","smsPlaceHolder","needSaveMnemonicToContinue","pleaseSaveMnemonicToContinue","buttonSaveMnemonic","buttonCancel","sentBtnDisabled","formatMessage","__html","handleBeginSaveMnemonic","handleClose","locale","onPhoneChange","handleGenerateMnemonic","handleCopyMnemonic","handleRestoreWallet","handleSendSMS","handleCheckSMS","fontSize","textAlign","marginBottom","handleCopyInstruction","handleDownloadInstruction","handleShareInstruction","handleFinish","Component","string","object"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,SAAT,QAA0B,SAA1B;AACA,OAAOC,OAAP,MAAoB,eAApB;AACA,OAAOC,IAAP,MAAiB,4BAAjB;AACA,SAASC,OAAT,QAAwB,WAAxB;AAEA,OAAOC,UAAP,MAAuB,mBAAvB;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AACA,OAAOC,QAAP,MAAqB,6BAArB;AAEA,SAASC,kBAAT,QAAmC,0BAAnC;AAEA,OAAOC,KAAP,MAAkB,8BAAlB;AACA,OAAOC,UAAP,MAAuB,wCAAvB;AACA,OAAOC,KAAP,MAAkB,8BAAlB;AACA,SAASC,UAAT,QAA2B,6BAA3B;AACA,OAAOC,MAAP,MAAmB,mCAAnB;AACA,SAASC,gBAAT,EAA2BC,UAA3B,EAAuCC,cAAvC,QAA6D,YAA7D;AAGA;AACA,OAAOC,eAAP,MAA4B,yBAA5B;AACA,OAAOC,MAAP,MAAmB,eAAnB;AACA,OAAOC,KAAP,MAAkB,sBAAlB;IAQqBC,oB,WALpBhB,OAAO,CAAC;AAAA,uBAAGiB,IAAH;AAAA,MAAWC,OAAX,aAAWA,OAAX;AAAA,MAAoBC,kBAApB,aAAoBA,kBAApB;AAAA,SAAgD;AACvDD,IAAAA,OAAO,EAAPA,OADuD;AAEvDC,IAAAA,kBAAkB,EAAlBA;AAFuD,GAAhD;AAAA,CAAD,C,UAIPlB,UAAU,iCAAMC,MAAN,GAAiBC,QAAjB,GAA6B;AAAEiB,EAAAA,aAAa,EAAE;AAAjB,CAA7B,C,EALVT,U;;;;;AAcC,gCAAYU,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AADiB;;AAAA,0IAoDH;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,4BAQV,MAAKC,KARK,EAEZC,OAFY,eAEZA,OAFY,EAGZC,KAHY,eAGZA,KAHY,EAIZC,QAJY,eAIZA,QAJY,EAKZC,YALY,eAKZA,YALY,EAMZC,eANY,eAMZA,eANY,EAOZC,sBAPY,eAOZA,sBAPY;;AAAA,kBAUTD,eAVS;AAAA;AAAA;AAAA;;AAAA,oBAYRJ,OAAO,KAAK,MAAZ,IAAsB,CAACzB,OAAO,CAAC+B,GAAR,CAAYC,qBAAZ,CAAkCL,QAAQ,CAACM,IAAT,EAAlC,CAZf;AAAA;AAAA;AAAA;;AAaV,oBAAKC,QAAL,CAAc;AACZC,gBAAAA,eAAe,EAAE,KADL;AAEZC,gBAAAA,KAAK,EAAE;AAFK,eAAd;;AAbU;;AAAA;AAmBJC,cAAAA,cAnBI,GAmBarC,OAAO,CAAC+B,GAAR,CAAYO,gBAAZ,CAA6BX,QAAQ,CAACM,IAAT,EAA7B,EAA8C,CAA9C,CAnBb;;AAoBV,oBAAKC,QAAL,CAAc;AACZG,gBAAAA,cAAc,EAAdA,cADY;AAEZF,gBAAAA,eAAe,EAAE;AAFL,eAAd;;AApBU;AAAA,kBA2BTT,KA3BS;AAAA;AAAA;AAAA;;AA4BZ,oBAAKQ,QAAL,CAAc;AACZE,gBAAAA,KAAK,eACH,oBAAC,gBAAD;AACE,kBAAA,EAAE,EAAC,2BADL;AAEE,kBAAA,cAAc,EAAC;AAFjB;AAFU,eAAd;;AA5BY;;AAAA;AAuCd,oBAAKF,QAAL,CAAc;AACZK,gBAAAA,SAAS,EAAE,IADC;AAEZH,gBAAAA,KAAK,EAAE;AAFK,eAAd;;AAvCc;AAAA,qBA4COpC,OAAO,CAACwC,WAAR,CAAoBC,gBAApB,CACnBf,KADmB,EAEnBC,QAAQ,GAAGA,QAAQ,CAACM,IAAT,EAAH,GAAqB,KAFV,EAGnBJ,eAAe,IAAIC,sBAAnB,GAA4CF,YAA5C,GAA2D,KAHxC,CA5CP;;AAAA;AA4CRc,cAAAA,MA5CQ;;AAkDd,kBAAIA,MAAM,IAAIA,MAAM,CAACC,MAAjB,IAA2BD,MAAM,CAACC,MAAP,IAAiB,IAAhD,EAAsD;AACpD,sBAAKT,QAAL,CAAc;AACZK,kBAAAA,SAAS,EAAE,KADC;AAEZK,kBAAAA,IAAI,EAAE;AAFM,iBAAd;AAID,eALD,MAKO;AACLC,gBAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BJ,MAA5B;AACMK,gBAAAA,gBAFD,GAEoBL,MAAM,KAAK,KAF/B;;AAGL,sBAAKR,QAAL,CAAc;AACZK,kBAAAA,SAAS,EAAE,KADC;AAEZH,kBAAAA,KAAK,EAAEM,MAAM,IAAIA,MAAM,CAACN,KAAjB,GAAyBM,MAAM,CAACN,KAAhC,GAAwC,eAFnC;AAGZW,kBAAAA,gBAAgB,EAAhBA;AAHY,iBAAd;AAKD;;AA/Da;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KApDG;;AAAA,2IAsHF;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,6BAQX,MAAKvB,KARM,EAEbE,KAFa,gBAEbA,KAFa,EAGbsB,OAHa,gBAGbA,OAHa,EAIbrB,QAJa,gBAIbA,QAJa,EAKbE,eALa,gBAKbA,eALa,EAMbC,sBANa,gBAMbA,sBANa,EAObF,YAPa,gBAObA,YAPa;;AAAA,kBAUVoB,OAVU;AAAA;AAAA;AAAA;;AAWb,oBAAKd,QAAL,CAAc;AACZE,gBAAAA,KAAK,eACH,oBAAC,gBAAD;AACE,kBAAA,EAAE,EAAC,qCADL;AAEE,kBAAA,cAAc,EAAC;AAFjB;AAFU,eAAd;;AAXa;;AAAA;AAsBf,oBAAKF,QAAL,CAAc;AACZK,gBAAAA,SAAS,EAAE,IADC;AAEZH,gBAAAA,KAAK,EAAE,KAFK;AAGZW,gBAAAA,gBAAgB,EAAE,KAHN;AAIZE,gBAAAA,wBAAwB,EAAE;AAJd,eAAd;;AAtBe;AAAA,qBA6BMjD,OAAO,CAACwC,WAAR,CAAoBU,kBAApB,CACnBxB,KADmB,EAEnBsB,OAFmB,EAGnBrB,QAAQ,GAAGA,QAAQ,CAACM,IAAT,EAAH,GAAqB,KAHV,EAInBJ,eAAe,IAAIC,sBAAnB,GAA4CF,YAA5C,GAA2D,KAJxC,CA7BN;;AAAA;AA6BTc,cAAAA,MA7BS;;AAoCf,kBAAIA,MAAM,IAAIA,MAAM,CAACC,MAAjB,IAA2BD,MAAM,CAACC,MAAP,IAAiB,IAAhD,EAAsD;AACpD,sBAAKQ,0BAAL;;AACA,sBAAKjB,QAAL,CAAc;AACZK,kBAAAA,SAAS,EAAE,KADC;AAEZK,kBAAAA,IAAI,EAAE;AAFM,iBAAd;AAID,eAND,MAMO;AACL,oBAAIF,MAAM,IAAIA,MAAM,CAACN,KAAP,IAAgB,oBAA9B,EAAoD;AAClD,wBAAKe,0BAAL;;AACA,wBAAKjB,QAAL,CAAc;AACZK,oBAAAA,SAAS,EAAE,KADC;AAEZK,oBAAAA,IAAI,EAAE;AAFM,mBAAd;AAID,iBAND,MAMO;AACL,sBAAIF,MAAM,IAAIA,MAAM,CAACN,KAAP,IAAgB,kDAA9B,EAAkF;AAChF;AACA;AACA;AACA;AACA,0BAAKF,QAAL,CAAc;AACZK,sBAAAA,SAAS,EAAE,KADC;AAEZU,sBAAAA,wBAAwB,EAAE;AAFd,qBAAd;AAID,mBATD,MASO;AACCF,oBAAAA,gBADD,GACoBL,MAAM,KAAK,KAD/B;;AAEL,0BAAKR,QAAL,CAAc;AACZK,sBAAAA,SAAS,EAAE,KADC;AAEZQ,sBAAAA,gBAAgB,EAAhBA,gBAFY;AAGZX,sBAAAA,KAAK,EAAEM,MAAM,IAAIA,MAAM,CAACN,KAAjB,GAAyBM,MAAM,CAACN,KAAhC,GAAwC;AAHnC,qBAAd;AAKD;AACF;AACF;;AApEc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAtHE;;AAAA,gJA6LG;AAAA;AAAA;AAAA;AAAA;AAAA;AACZT,cAAAA,QADY,GACC,MAAKH,KADN,CACZG,QADY;;AAAA,oBAGhB,CAACA,QAAD,IAAa,CAAC3B,OAAO,CAAC+B,GAAR,CAAYC,qBAAZ,CAAkCL,QAAQ,CAACM,IAAT,EAAlC,CAHE;AAAA;AAAA;AAAA;;AAIlB,oBAAKC,QAAL,CAAc;AACZC,gBAAAA,eAAe,EAAE,KADL;AAEZC,gBAAAA,KAAK,EAAE;AAFK,eAAd;;AAJkB;;AAAA;AAUZC,cAAAA,cAVY,GAUKrC,OAAO,CAAC+B,GAAR,CAAYO,gBAAZ,CAA6BX,QAAQ,CAACM,IAAT,EAA7B,EAA8C,CAA9C,CAVL;;AAWlB,oBAAKC,QAAL,CAAc;AACZG,gBAAAA,cAAc,EAAdA,cADY;AAEZE,gBAAAA,SAAS,EAAE,IAFC;AAGZJ,gBAAAA,eAAe,EAAE;AAHL,eAAd;;AAXkB;AAAA;AAAA,qBAkBdnC,OAAO,CAACwC,WAAR,CAAoBY,YAApB,CAAiCzB,QAAQ,CAACM,IAAT,EAAjC,CAlBc;;AAAA;AAoBpB,oBAAKkB,0BAAL;;AAEA,oBAAKjB,QAAL,CAAc;AACZK,gBAAAA,SAAS,EAAE,KADC;AAEZK,gBAAAA,IAAI,EAAE;AAFM,eAAd;;AAtBoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA7LH;;AAAA,+IAyNE;AAAA;AAAA;AAAA;AAAA;AACnB,oBAAKV,QAAL,CACE;AACEmB,gBAAAA,gBAAgB,EAAE;AADpB,eADF,EAIE,YAAM;AACJC,gBAAAA,UAAU,CAAC,YAAM;AACf,wBAAKpB,QAAL,CAAc;AACZmB,oBAAAA,gBAAgB,EAAE;AADN,mBAAd;AAGD,iBAJS,EAIP,IAJO,CAAV;AAKD,eAVH;;AADmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAzNF;;AAAA,kJAwOK;AAAA;AAAA;AAAA;AAAA;AACtB,oBAAKnB,QAAL,CACE;AACEqB,gBAAAA,mBAAmB,EAAE;AADvB,eADF,EAIE,YAAM;AACJD,gBAAAA,UAAU,CAAC,YAAM;AACf,wBAAKpB,QAAL,CAAc;AACZqB,oBAAAA,mBAAmB,EAAE;AADT,mBAAd;AAGD,iBAJS,EAIP,IAJO,CAAV;AAKD,eAVH;;AADsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAxOL;;AAAA,sJAuPS;AAAA;AAAA;AAAA;AAAA;AAAA;AAClBC,cAAAA,kBADkB,GACK,MAAKhC,KADV,CAClBgC,kBADkB;;AAG1B,oBAAKtB,QAAL,CACE;AACEuB,gBAAAA,uBAAuB,EAAE;AAD3B,eADF,EAIE,YAAM;AACJ,oBAAMC,OAAO,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAhB;AACA,oBAAMC,OAAO,GAAG,8BAAhB;AAEAH,gBAAAA,OAAO,CAACI,YAAR,CACE,MADF,yCAEkCC,kBAAkB,CAACP,kBAAD,CAFpD;AAIAE,gBAAAA,OAAO,CAACI,YAAR,CACE,UADF,YAEKE,MAAM,CAACC,QAAP,CAAgBC,QAFrB,qCAEwDlD,MAAM,GAAGmD,MAAT,CAAgB,YAAhB,CAFxD;AAKAT,gBAAAA,OAAO,CAACU,KAAR,CAAcC,OAAd,GAAwB,MAAxB;AACAV,gBAAAA,QAAQ,CAACW,IAAT,CAAcC,WAAd,CAA0Bb,OAA1B;AACAA,gBAAAA,OAAO,CAACc,KAAR;AACAb,gBAAAA,QAAQ,CAACW,IAAT,CAAcG,WAAd,CAA0Bf,OAA1B;AAEAJ,gBAAAA,UAAU,CAAC,YAAM;AACf,wBAAKpB,QAAL,CAAc;AACZuB,oBAAAA,uBAAuB,EAAE;AADb,mBAAd;AAGD,iBAJS,EAIP,IAJO,CAAV;AAKD,eA3BH;;AAH0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAvPT;;AAAA,mJAyRM;AAAA;AAAA;AAAA;AAAA;AACvB,oBAAKvB,QAAL,CACE;AACEwC,gBAAAA,mBAAmB,EAAE,IADvB;AAEEvC,gBAAAA,eAAe,EAAE,IAFnB;AAGER,gBAAAA,QAAQ,EAAE3B,OAAO,CAAC+B,GAAR,CAAY4C,sBAAZ;AAHZ,eADF,EAME,YAAM;AACJrB,gBAAAA,UAAU,CAAC,YAAM;AACf,wBAAKpB,QAAL,CAAc;AACZwC,oBAAAA,mBAAmB,EAAE;AADT,mBAAd;AAGD,iBAJS,EAIP,IAJO,CAAV;AAKD,eAZH;;AADuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAzRN;;AAAA,yIA0SJ;AAAA;AAAA;AAAA;AAAA;AAAA;AACLE,cAAAA,IADK,GACI,MAAKrD,KADT,CACLqD,IADK;AAGb5E,cAAAA,OAAO,CAACwC,WAAR,CAAoBqC,eAApB;AACA7E,cAAAA,OAAO,CAAC8E,MAAR,CAAeC,KAAf,CAAqBH,IAArB;;AACA,kBAAI,MAAKrD,KAAL,CAAWyD,IAAX,CAAgBC,QAApB,EAA8B;AAC5B,sBAAK1D,KAAL,CAAWyD,IAAX,CAAgBC,QAAhB;AACD;;AAPY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA1SI;;AAAA,mJAoTM;AAAA;AAAA;AAAA;AAAA;AAAA;AACfzB,cAAAA,kBADe,GACQ,MAAKhC,KADb,CACfgC,kBADe;AAGvBxD,cAAAA,OAAO,CAAC8E,MAAR,CAAeI,IAAf,CAAoBnF,SAAS,CAAC+E,MAAV,CAAiBK,KAArC,EAA4C;AAC1CC,gBAAAA,KAAK,gDADqC;AAE1CC,gBAAAA,IAAI,EAAE7B;AAFoC,eAA5C;;AAHuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KApTN;;AAAA,oJA6TO;AAAA;AAAA;AAAA;AAAA;AACxBxD,cAAAA,OAAO,CAAC8E,MAAR,CAAeI,IAAf,CAAoBnF,SAAS,CAAC+E,MAAV,CAAiBQ,iBAArC,EAAwD;AACtDC,gBAAAA,OAAO,EAAE,mBAAM;AACb,sBAAM5D,QAAQ,GAAG6D,YAAY,CAACC,OAAb,CAAqB1F,SAAS,CAAC2F,eAAV,CAA0BC,WAA/C,CAAjB;AACA,sBAAMC,aAAa,GAAGjE,QAAQ,QAA9B;AACA,sBAAMiB,IAAI,GAAGgD,aAAa,GAAG,uBAAH,GAA6B,mBAAvD;;AAEA,wBAAK1D,QAAL,CAAc;AACZ0D,oBAAAA,aAAa,EAAbA,aADY;AAEZhD,oBAAAA,IAAI,EAAJA;AAFY,mBAAd;AAID;AAVqD,eAAxD;;AADwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA7TP;;AAAA,kEA4UL,YAAM;AAAA,wBACc,MAAKrB,KADnB;AAAA,UACVqD,IADU,eACVA,IADU;AAAA,UACJI,IADI,eACJA,IADI;AAAA,UACEO,OADF,eACEA,OADF;;AAGlB,UAAI,OAAOA,OAAP,KAAmB,UAAvB,EAAmC;AACjCA,QAAAA,OAAO;AACR;;AAED,UAAI,OAAOP,IAAI,CAACO,OAAZ,KAAwB,UAA5B,EAAwC;AACtCP,QAAAA,IAAI,CAACO,OAAL;AACD;;AAEDvF,MAAAA,OAAO,CAAC8E,MAAR,CAAeC,KAAf,CAAqBH,IAArB;AACD,KAxVkB;;AAAA,iFA0VU,YAAM,CACjC;;AACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKG,KA1YkB;;AAAA,oEA4YH,UAAClD,KAAD,EAAW;AACzB,YAAKQ,QAAL,CAAc;AAAA,eAAO;AAAER,UAAAA,KAAK,EAALA;AAAF,SAAP;AAAA,OAAd;AACD,KA9YkB;;AAAA,sBAKbH,KALa,CAIfyD,IAJe;AAAA,QAIPvD,QAJO,eAIPA,OAJO;AAAA,QAIEoE,QAJF,eAIEA,QAJF;AAOjBpE,IAAAA,QAAO,GAAGA,QAAO,GAAGA,QAAH,GAAa,MAA9B,CAPiB,CAOoB;;AAErC,QAAMG,aAAY,GAAG4D,YAAY,CAACC,OAAb,CAAqB1F,SAAS,CAAC2F,eAAV,CAA0BI,0BAA/C,CAArB;;AAEA,QAAMnE,SAAQ,GAAG6D,YAAY,CAACC,OAAb,CAAqB1F,SAAS,CAAC2F,eAAV,CAA0BC,WAA/C,CAAjB;;AACA,QAAMC,cAAa,GAAGjE,SAAQ,QAA9B;;AACA,QAAMG,uBAAsB,GAAG,CAAC,CAACF,aAAjC;;AAEA,QAAIgB,KAAI,GAAG,uBAAX,CAfiB,CAekB;;AACnC,QAAId,uBAAsB,IAAI,CAAC8D,cAA/B,EAA8ChD,KAAI,GAAG,mBAAP;AAE9C,QAAImD,oBAAoB,GAAG,KAA3B;;AACA,QAAIF,QAAQ,KAAK,QAAjB,EAA2B;AACzBE,MAAAA,oBAAoB,GAAG,IAAvB;AACAnD,MAAAA,KAAI,GAAG,OAAP;AACD;;AAED,UAAKpB,KAAL,GAAa;AACXC,MAAAA,OAAO,EAAPA,QADW;AAEXC,MAAAA,KAAK,EAAEsC,MAAM,CAACgC,kBAAP,IAA6B,EAFzB;AAGXpD,MAAAA,IAAI,EAAJA,KAHW;AAIXR,MAAAA,KAAK,EAAE,KAJI;AAKXY,MAAAA,OAAO,EAAE,EALE;AAMXiD,MAAAA,YAAY,EAAE,KANH;AAOX1D,MAAAA,SAAS,EAAE,KAPA;AAQXwD,MAAAA,oBAAoB,EAApBA,oBARW;AASXlE,MAAAA,eAAe,EAAEC,uBATN;AAUXF,MAAAA,YAAY,EAAZA,aAVW;AAWXE,MAAAA,sBAAsB,EAAtBA,uBAXW;AAYX8D,MAAAA,aAAa,EAAbA,cAZW;AAaXjE,MAAAA,QAAQ,EAAEF,QAAO,KAAK,MAAZ,GAAqBzB,OAAO,CAAC+B,GAAR,CAAY4C,sBAAZ,EAArB,GAA4D,KAb3D;AAcXtC,MAAAA,cAAc,EAAE,KAdL;AAeXgB,MAAAA,gBAAgB,EAAE,KAfP;AAgBXqB,MAAAA,mBAAmB,EAAE,KAhBV;AAiBXvC,MAAAA,eAAe,EAAE,IAjBN;AAkBXc,MAAAA,wBAAwB,EAAE,KAlBf;AAmBXM,MAAAA,mBAAmB,EAAE,KAnBV;AAoBXE,MAAAA,uBAAuB,EAAE;AApBd,KAAb;AAxBiB;AA8ClB;;;;WAED,6BAAoB;AAClB,WAAKN,0BAAL;AACD;;;WA8VD,kBAAS;AAAA,yBAkBH,KAAK3B,KAlBF;AAAA,UAELoB,IAFK,gBAELA,IAFK;AAAA,UAGLR,KAHK,gBAGLA,KAHK;AAAA,UAILV,KAJK,gBAILA,KAJK;AAAA,UAKLa,SALK,gBAKLA,SALK;AAAA,UAOLT,sBAPK,gBAOLA,sBAPK;AAAA,UAQLH,QARK,gBAQLA,QARK;AAAA,UASL0B,gBATK,gBASLA,gBATK;AAAA,UAULqB,mBAVK,gBAULA,mBAVK;AAAA,UAWLvC,eAXK,gBAWLA,eAXK;AAAA,UAYLY,gBAZK,gBAYLA,gBAZK;AAAA,UAaLE,wBAbK,gBAaLA,wBAbK;AAAA,UAcLM,mBAdK,gBAcLA,mBAdK;AAAA,UAeLE,uBAfK,gBAeLA,uBAfK;AAAA,UAgBLD,kBAhBK,gBAgBLA,kBAhBK;AAAA,UAiBLuC,oBAjBK,gBAiBLA,oBAjBK;AAAA,yBAoBgB,KAAKxE,KApBrB;AAAA,UAoBCqD,IApBD,gBAoBCA,IApBD;AAAA,UAoBOsB,IApBP,gBAoBOA,IApBP;AAsBP,UAAMC,MAAM,GAAGlG,IAAI,CAACmG,GAAL,CAAS,IAAT,EAAe,SAAf,EAA0B,UAA1B,CAAf;AAEA,UAAMC,KAAK,GAAGvF,cAAc,CAAC;AAC3BwF,QAAAA,gBAAgB,EAAE;AAChBC,UAAAA,EAAE,EAAE,2BADY;AAEhBC,UAAAA,cAAc;AAFE,SADS;AAK3BC,QAAAA,mBAAmB,EAAE;AACnBF,UAAAA,EAAE,EAAE,yBADe;AAEnBC,UAAAA,cAAc;AAFK,SALM;AAS3BE,QAAAA,gBAAgB,EAAE;AAChBH,UAAAA,EAAE,EAAE,kCADY;AAEhBC,UAAAA,cAAc;AAFE,SATS;AAa3BG,QAAAA,cAAc,EAAE;AACdJ,UAAAA,EAAE,EAAE,oCADU;AAEdC,UAAAA,cAAc;AAFA,SAbW;AAiB3BI,QAAAA,0BAA0B,EAAE;AAC1BL,UAAAA,EAAE,EAAE,iCADsB;AAE1BC,UAAAA,cAAc;AAFY,SAjBD;AAqB3BK,QAAAA,4BAA4B,EAAE;AAC5BN,UAAAA,EAAE,EAAE,8BADwB;AAE5BC,UAAAA,cAAc;AAFc,SArBH;AAyB3BM,QAAAA,kBAAkB,EAAE;AAClBP,UAAAA,EAAE,EAAE,gCADc;AAElBC,UAAAA,cAAc;AAFI,SAzBO;AA6B3BO,QAAAA,YAAY,EAAE;AACZR,UAAAA,EAAE,EAAE,0BADQ;AAEZC,UAAAA,cAAc;AAFF;AA7Ba,OAAD,CAA5B;AAmCA,UAAMQ,eAAe,GAAGzE,SAAS,IAAI,CAACb,KAAd,IAAwBA,KAAK,IAAI,CAACpB,kBAAkB,CAACoB,KAAD,CAA5E;AACA,0BACE,oBAAC,KAAD;AAAO,QAAA,IAAI,EAAEkD,IAAb;AAAmB,QAAA,KAAK,YAAKsB,IAAI,CAACe,aAAL,CAAmBZ,KAAK,CAACC,gBAAzB,CAAL;AAAxB,sBACE;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE;AACE,QAAA,uBAAuB,EAAE;AACvBY,UAAAA,MAAM;AADiB;AAD3B,QADF,EAUGtE,IAAI,KAAK,mBAAT,iBACC,oBAAC,QAAD,qBACE;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE;AAAG,QAAA,SAAS,EAAC;AAAb,sBACE,iDACE,oBAAC,gBAAD,EAAsByD,KAAK,CAACO,0BAA5B,CADF,CADF,eAIE,+BAJF,eAKE,oBAAC,gBAAD,EAAsBP,KAAK,CAACQ,4BAA5B,CALF,CADF,CADF,eAWE;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,oBAAC,MAAD;AAAQ,QAAA,IAAI,MAAZ;AAAa,QAAA,OAAO,EAAE,KAAKM;AAA3B,sBACE,oBAAC,gBAAD,EAAsBd,KAAK,CAACS,kBAA5B,CADF,CADF,eAIE,oBAAC,MAAD;AAAQ,QAAA,IAAI,MAAZ;AAAa,QAAA,OAAO,EAAE,KAAKM;AAA3B,sBACE,oBAAC,gBAAD,EAAsBf,KAAK,CAACU,YAA5B,CADF,CAJF,CAXF,CAXJ,EAgCGnE,IAAI,KAAK,uBAAT,iBACC,oBAAC,QAAD,qBACE,oBAAC,UAAD;AACE,QAAA,KAAK,EAAElB,KADT;AAEE,QAAA,KAAK,EAAEU,KAFT;AAGE,QAAA,MAAM,EAAE8D,IAAI,CAACmB,MAHf;AAIE,QAAA,QAAQ,EAAE,KAAKC,aAJjB;AAKE,QAAA,WAAW,YAAKpB,IAAI,CAACe,aAAL,CAAmBZ,KAAK,CAACK,gBAAzB,CAAL,CALb;AAME,QAAA,KAAK,eACH,oBAAC,UAAD,qBACE,oBAAC,gBAAD;AAAkB,UAAA,EAAE,EAAC,uBAArB;AAA6C,UAAA,cAAc,EAAC;AAA5D,UADF;AAPJ,QADF,EAaG,CAAC5E,sBAAD,iBACC,oBAAC,QAAD,qBACE;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,2BADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADF,CADF,CADF,eASE;AAAK,QAAA,SAAS,EAAC,WAAf;AAA2B,QAAA,SAAS,EAAC;AAArC,sBACE,oBAAC,UAAD,qBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,uBADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADF,CADF,eAQE;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,oBAAC,MAAD;AACE,QAAA,IAAI,MADN;AAEE,QAAA,SAAS,MAFX;AAGE,QAAA,QAAQ,EAAE4C,mBAHZ;AAIE,QAAA,OAAO,EAAE,KAAK6C;AAJhB,SAMG7C,mBAAmB,gBAClB,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,8CADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADkB,gBAMlB,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,qCADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QAZJ,CADF,eAmBE,oBAAC,eAAD;AAAiB,QAAA,IAAI,EAAE/C,QAAvB;AAAiC,QAAA,MAAM,EAAE,KAAK6F;AAA9C,sBACE,oBAAC,MAAD;AACE,QAAA,IAAI,MADN;AAEE,QAAA,SAAS,MAFX;AAGE,QAAA,QAAQ,EAAEnE,gBAHZ;AAIE,QAAA,OAAO,EAAE,KAAKmE;AAJhB,SAMGnE,gBAAgB,gBACf,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,gCADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADe,gBAMf,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,8BADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QAZJ,CADF,CAnBF,CARF,eAgDE;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,2BADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADF,CAhDF,EAsDG,CAAClB,eAAD,iBACC;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,0BADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADF,CAvDJ,CATF,CAdJ,eAwFE,iCACGY,gBAAgB,gBACf,oBAAC,QAAD,qBACE,oBAAC,MAAD;AAAQ,QAAA,IAAI,MAAZ;AAAa,QAAA,SAAS,MAAtB;AAAuB,QAAA,QAAQ,EAAER,SAAjC;AAA4C,QAAA,OAAO,EAAE,KAAKkF;AAA1D,sBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,uBADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADF,CADF,eAOE,+BAPF,CADe,gBAWf,oBAAC,QAAD,QACGrF,KAAK,iBAAI;AAAK,QAAA,SAAS,EAAC;AAAf,SAA0CA,KAA1C,CADZ,CAZJ,CAxFF,eAyGE,oBAAC,MAAD;AAAQ,QAAA,IAAI,MAAZ;AAAa,QAAA,GAAG,MAAhB;AAAiB,QAAA,SAAS,MAA1B;AAA2B,QAAA,QAAQ,EAAE4E,eAArC;AAAsD,QAAA,OAAO,EAAE,KAAKU;AAApE,SACGnF,SAAS,gBACR,oBAAC,QAAD,qBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,yBADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADF,CADQ,gBAQR,oBAAC,QAAD,qBACE,oBAAC,gBAAD;AAAkB,QAAA,EAAE,EAAC,yBAArB;AAA+C,QAAA,cAAc,EAAC;AAA9D,QADF,CATJ,CAzGF,CAjCJ,EA0JGK,IAAI,KAAK,YAAT,iBACC,oBAAC,QAAD,qBACE,oBAAC,UAAD;AACE,QAAA,KAAK,EAAElB,KADT;AAEE,QAAA,KAAK,EAAEU,KAFT;AAGE,QAAA,MAAM,EAAE8D,IAAI,CAACmB,MAHf;AAIE,QAAA,QAAQ,EAAE,KAAKC,aAJjB;AAKE,QAAA,WAAW,YAAKpB,IAAI,CAACe,aAAL,CAAmBZ,KAAK,CAACK,gBAAzB,CAAL,CALb;AAME,QAAA,KAAK,eACH,oBAAC,UAAD,qBACE,oBAAC,gBAAD;AAAkB,UAAA,EAAE,EAAC,uBAArB;AAA6C,UAAA,cAAc,EAAC;AAA5D,UADF;AAPJ,QADF,eAaE,oBAAC,MAAD;AAAQ,QAAA,IAAI,MAAZ;AAAa,QAAA,GAAG,MAAhB;AAAiB,QAAA,SAAS,MAA1B;AAA2B,QAAA,QAAQ,EAAEM,eAArC;AAAsD,QAAA,OAAO,EAAE,KAAKU;AAApE,SACGnF,SAAS,gBACR,oBAAC,QAAD,qBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,yBADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADF,CADQ,gBAQR,oBAAC,QAAD,qBACE,oBAAC,gBAAD;AAAkB,QAAA,EAAE,EAAC,yBAArB;AAA+C,QAAA,cAAc,EAAC;AAA9D,QADF,CATJ,CAbF,CA3JJ,EAwLGK,IAAI,KAAK,WAAT,iBACC,oBAAC,QAAD,QACGR,KAAK,iBAAI;AAAK,QAAA,SAAS,EAAC;AAAf,SAAwCA,KAAxC,CADZ,EAEGa,wBAAwB,iBACvB;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,0BADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADF,CAHJ,EAUGF,gBAAgB,iBACf;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,iCADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADF,CAXJ,eAkBE;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,oBAAC,UAAD,qBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,sBADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADF,CADF,eAOE,oBAAC,KAAD;AACE,QAAA,SAAS,EAAC,qBADZ;AAEE,QAAA,SAAS,EAAEoD,MAAM,CAACnD,OAFpB;AAGE,QAAA,WAAW,MAHb;AAIE,QAAA,WAAW,YAAKkD,IAAI,CAACe,aAAL,CAAmBZ,KAAK,CAACM,cAAzB,CAAL;AAJb,QAPF,CAlBF,eAgCE,oBAAC,MAAD;AACE,QAAA,SAAS,EAAC,gBADZ;AAEE,QAAA,GAAG,MAFL;AAGE,QAAA,IAAI,MAHN;AAIE,QAAA,SAAS,MAJX;AAKE,QAAA,QAAQ,EAAEpE,SALZ;AAME,QAAA,OAAO,EAAE,KAAKoF;AANhB,SAQGpF,SAAS,gBACR,oBAAC,gBAAD;AAAkB,QAAA,EAAE,EAAC,yBAArB;AAA+C,QAAA,cAAc,EAAC;AAA9D,QADQ,gBAGR,oBAAC,gBAAD;AAAkB,QAAA,EAAE,EAAC,4BAArB;AAAkD,QAAA,cAAc,EAAC;AAAjE,QAXJ,CAhCF,eA8CE,+BA9CF,eA+CE;AAAG,QAAA,SAAS,EAAC;AAAb,sBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,kCADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADF,CA/CF,eAqDE;AAAG,QAAA,SAAS,EAAC;AAAb,sBACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,8BADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADF,CArDF,eA2DE;AAAG,QAAA,SAAS,EAAC;AAAb,sBACE,oBAAC,MAAD;AACE,QAAA,IAAI,MADN;AAEE,QAAA,SAAS,MAFX;AAGE,QAAA,UAAU,MAHZ;AAIE,QAAA,QAAQ,EAAEA,SAJZ;AAKE,QAAA,OAAO,EAAE,KAAKkF;AALhB,sBAOE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,4BADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QAPF,CADF,CA3DF,CAzLJ,EAoQG7E,IAAI,KAAK,OAAT,iBACC,oBAAC,QAAD,qBACE;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,8CACE;AAAK,QAAA,SAAS,EAAC,WAAf;AAA2B,QAAA,GAAG,EAAE3B,KAAhC;AAAuC,QAAA,GAAG,EAAC;AAA3C,QADF,CADF,eAIE;AACE,QAAA,KAAK,EAAE;AACL2G,UAAAA,QAAQ,EAAE,MADL;AAELvD,UAAAA,OAAO,EAAE,OAFJ;AAGLwD,UAAAA,SAAS,EAAE,QAHN;AAILC,UAAAA,YAAY,EAAE;AAJT;AADT,sBAQE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,uBADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QARF,CAJF,CADF,EAmBG/B,oBAAoB,iBACnB;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAoC,QAAA,SAAS,EAAC;AAA9C,sBACE,6CACE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,oCADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADF,CADF,eAOE,8CACE,iCAAMvC,kBAAN,CADF,eAEE;AACE,QAAA,SAAS,EAAC,MADZ;AAEE,QAAA,MAAM,EAAC,QAFT;AAGE,QAAA,IAAI,EAAC;AAHP,sBAKE,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,iCADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QALF,CAFF,CAPF,eAoBE;AAAK,QAAA,SAAS,EAAC;AAAf,sBACE,oBAAC,eAAD;AAAiB,QAAA,IAAI,EAAEA,kBAAvB;AAA2C,QAAA,MAAM,EAAE,KAAKuE;AAAxD,sBACE,oBAAC,MAAD;AACE,QAAA,IAAI,MADN;AAEE,QAAA,QAAQ,EAAExE,mBAFZ;AAGE,QAAA,OAAO,EAAE,KAAKwE;AAHhB,SAKGxE,mBAAmB,gBAClB,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,4BADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADkB,gBAMlB,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,0BADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QAXJ,CADF,CADF,eAoBE,oBAAC,MAAD;AACE,QAAA,IAAI,MADN;AAEE,QAAA,QAAQ,EAAEE,uBAFZ;AAGE,QAAA,OAAO,EAAE,KAAKuE;AAHhB,SAKGvE,uBAAuB,gBACtB,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,gCADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QADsB,gBAMtB,oBAAC,gBAAD;AACE,QAAA,EAAE,EAAC,8BADL;AAEE,QAAA,cAAc,EAAC;AAFjB,QAXJ,CApBF,eAqCE,oBAAC,MAAD;AAAQ,QAAA,IAAI,MAAZ;AAAa,QAAA,OAAO,EAAE,KAAKwE;AAA3B,sBACE,oBAAC,gBAAD;AAAkB,QAAA,EAAE,EAAC,8BAArB;AAAoD,QAAA,cAAc,EAAC;AAAnE,QADF,CArCF,CApBF,CApBJ,eAmFE,oBAAC,MAAD;AAAQ,QAAA,GAAG,MAAX;AAAY,QAAA,IAAI,MAAhB;AAAiB,QAAA,SAAS,MAA1B;AAA2B,QAAA,OAAO,EAAE,KAAKC;AAAzC,sBACE,oBAAC,QAAD,qBACE,oBAAC,gBAAD;AAAkB,QAAA,EAAE,EAAC,wBAArB;AAA8C,QAAA,cAAc,EAAC;AAA7D,QADF,CADF,CAnFF,CArQJ,CADF,CADF;AAoWD;;;;EAxzB+CtI,KAAK,CAACuI,S,yCAGnC;AACjBvD,EAAAA,IAAI,EAAE9E,SAAS,CAACsI,MADC;AAEjBpD,EAAAA,IAAI,EAAElF,SAAS,CAACuI;AAFC,C;SAHAnH,oB","sourcesContent":["import React, { Fragment } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { constants } from 'helpers'\r\nimport actions from 'redux/actions'\r\nimport Link from 'local_modules/sw-valuelink'\r\nimport { connect } from 'redaction'\r\n\r\nimport cssModules from 'react-css-modules'\r\nimport styles from '../Styles/default.scss'\r\nimport ownStyle from './RegisterSMSProtected.scss'\r\n\r\nimport { isValidPhoneNumber } from 'react-phone-number-input'\r\n\r\nimport Modal from 'components/modal/Modal/Modal'\r\nimport FieldLabel from 'components/forms/FieldLabel/FieldLabel'\r\nimport Input from 'components/forms/Input/Input'\r\nimport { PhoneInput } from 'components/forms/PhoneInput'\r\nimport Button from 'components/controls/Button/Button'\r\nimport { FormattedMessage, injectIntl, defineMessages } from 'react-intl'\r\n\r\nimport typeforce from 'swap.app/util/typeforce'\r\n// import { isCoinAddress } from 'swap.app/util/typeforce'\r\nimport CopyToClipboard from 'react-copy-to-clipboard'\r\nimport moment from 'moment/moment'\r\nimport okSvg from 'shared/images/ok.svg'\r\n\r\n@injectIntl\r\n@connect(({ user: { btcData, btcMultisigSMSData } }) => ({\r\n  btcData,\r\n  btcMultisigSMSData,\r\n}))\r\n@cssModules({ ...styles, ...ownStyle }, { allowMultiple: true })\r\nexport default class RegisterSMSProtected extends React.Component<any, any> {\r\n  props: any\r\n\r\n  static propTypes = {\r\n    name: PropTypes.string,\r\n    data: PropTypes.object,\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    let {\r\n      data: { version, initStep },\r\n    } = props\r\n\r\n    version = version ? version : '2of3' // 2of2\r\n\r\n    const generatedKey = localStorage.getItem(constants.privateKeyNames.btcSmsMnemonicKeyGenerated)\r\n\r\n    const mnemonic = localStorage.getItem(constants.privateKeyNames.twentywords)\r\n    const mnemonicSaved = mnemonic === `-`\r\n    const useGeneratedKeyEnabled = !!generatedKey\r\n\r\n    let step = 'enterPhoneAndMnemonic' // \"enterPhone\",\r\n    if (useGeneratedKeyEnabled && !mnemonicSaved) step = 'saveMnemonicWords'\r\n\r\n    let showFinalInstruction = false\r\n    if (initStep === 'export') {\r\n      showFinalInstruction = true\r\n      step = 'ready'\r\n    }\r\n\r\n    this.state = {\r\n      version,\r\n      phone: window.DefaultCountryCode || '',\r\n      step,\r\n      error: false,\r\n      smsCode: '',\r\n      smsConfirmed: false,\r\n      isShipped: false,\r\n      showFinalInstruction,\r\n      useGeneratedKey: useGeneratedKeyEnabled,\r\n      generatedKey,\r\n      useGeneratedKeyEnabled,\r\n      mnemonicSaved,\r\n      mnemonic: version === '2of3' ? actions.btc.getRandomMnemonicWords() : false,\r\n      mnemonicWallet: false,\r\n      isMnemonicCopied: false,\r\n      isMnemonicGenerated: false,\r\n      isMnemonicValid: true,\r\n      isWalletLockedOtherPhone: false,\r\n      isInstructionCopied: false,\r\n      isInstructionDownloaded: false,\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.generateRestoreInstruction()\r\n  }\r\n\r\n  handleSendSMS = async () => {\r\n    const {\r\n      version,\r\n      phone,\r\n      mnemonic,\r\n      generatedKey,\r\n      useGeneratedKey,\r\n      useGeneratedKeyEnabled,\r\n    } = this.state\r\n\r\n    if (!useGeneratedKey) {\r\n      // Old - own mnemonic for unlock\r\n      if (version === '2of3' && !actions.btc.validateMnemonicWords(mnemonic.trim())) {\r\n        this.setState({\r\n          isMnemonicValid: false,\r\n          error: false,\r\n        })\r\n        return\r\n      } else {\r\n        const mnemonicWallet = actions.btc.getWalletByWords(mnemonic.trim(), 1)\r\n        this.setState({\r\n          mnemonicWallet,\r\n          isMnemonicValid: true,\r\n        })\r\n      }\r\n    }\r\n\r\n    if (!phone) {\r\n      this.setState({\r\n        error: (\r\n          <FormattedMessage\r\n            id=\"registerSMS_NotValidPhone\"\r\n            defaultMessage=\"Укажите номер телефона\"\r\n          />\r\n        ),\r\n      })\r\n      return\r\n    }\r\n\r\n    this.setState({\r\n      isShipped: true,\r\n      error: false,\r\n    })\r\n\r\n    const result = await actions.btcmultisig.beginRegisterSMS(\r\n      phone,\r\n      mnemonic ? mnemonic.trim() : false,\r\n      useGeneratedKey && useGeneratedKeyEnabled ? generatedKey : false\r\n    )\r\n\r\n    if (result && result.answer && result.answer == 'ok') {\r\n      this.setState({\r\n        isShipped: false,\r\n        step: 'enterCode',\r\n      })\r\n    } else {\r\n      console.log('One step set', result)\r\n      const smsServerOffline = result === false\r\n      this.setState({\r\n        isShipped: false,\r\n        error: result && result.error ? result.error : 'Unknown error',\r\n        smsServerOffline,\r\n      })\r\n    }\r\n  }\r\n\r\n  handleCheckSMS = async () => {\r\n    const {\r\n      phone,\r\n      smsCode,\r\n      mnemonic,\r\n      useGeneratedKey,\r\n      useGeneratedKeyEnabled,\r\n      generatedKey,\r\n    } = this.state\r\n\r\n    if (!smsCode) {\r\n      this.setState({\r\n        error: (\r\n          <FormattedMessage\r\n            id=\"RegisterSMSProtected_SmsCodeRequery\"\r\n            defaultMessage=\"Введите смс-код\"\r\n          />\r\n        ),\r\n      })\r\n      return\r\n    }\r\n\r\n    this.setState({\r\n      isShipped: true,\r\n      error: false,\r\n      smsServerOffline: false,\r\n      isWalletLockedOtherPhone: false,\r\n    })\r\n\r\n    const result = await actions.btcmultisig.confirmRegisterSMS(\r\n      phone,\r\n      smsCode,\r\n      mnemonic ? mnemonic.trim() : false,\r\n      useGeneratedKey && useGeneratedKeyEnabled ? generatedKey : false\r\n    )\r\n\r\n    if (result && result.answer && result.answer == 'ok') {\r\n      this.generateRestoreInstruction()\r\n      this.setState({\r\n        isShipped: false,\r\n        step: 'ready',\r\n      })\r\n    } else {\r\n      if (result && result.error == 'Already registered') {\r\n        this.generateRestoreInstruction()\r\n        this.setState({\r\n          isShipped: false,\r\n          step: 'ready',\r\n        })\r\n      } else {\r\n        if (result && result.error == 'This wallet already locked by other phone number') {\r\n          // Кошелек зарегистрирован на другой номер телефона\r\n          // Может быть так, что человек потерял телефон или забыл его\r\n          // Даем возможность подключить кошелек, чтобы если у клиента есть\r\n          // валидный mnemonic - он мог разблокировать средства\r\n          this.setState({\r\n            isShipped: false,\r\n            isWalletLockedOtherPhone: true,\r\n          })\r\n        } else {\r\n          const smsServerOffline = result === false\r\n          this.setState({\r\n            isShipped: false,\r\n            smsServerOffline,\r\n            error: result && result.error ? result.error : 'Unknown error',\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  handleRestoreWallet = async () => {\r\n    const { mnemonic } = this.state\r\n\r\n    if (!mnemonic || !actions.btc.validateMnemonicWords(mnemonic.trim())) {\r\n      this.setState({\r\n        isMnemonicValid: false,\r\n        error: false,\r\n      })\r\n      return\r\n    } else {\r\n      const mnemonicWallet = actions.btc.getWalletByWords(mnemonic.trim(), 1)\r\n      this.setState({\r\n        mnemonicWallet,\r\n        isShipped: true,\r\n        isMnemonicValid: true,\r\n      })\r\n    }\r\n\r\n    await actions.btcmultisig.addSMSWallet(mnemonic.trim())\r\n\r\n    this.generateRestoreInstruction()\r\n\r\n    this.setState({\r\n      isShipped: false,\r\n      step: 'ready',\r\n    })\r\n  }\r\n\r\n  handleCopyMnemonic = async () => {\r\n    this.setState(\r\n      {\r\n        isMnemonicCopied: true,\r\n      },\r\n      () => {\r\n        setTimeout(() => {\r\n          this.setState({\r\n            isMnemonicCopied: false,\r\n          })\r\n        }, 1000)\r\n      }\r\n    )\r\n  }\r\n\r\n  handleCopyInstruction = async () => {\r\n    this.setState(\r\n      {\r\n        isInstructionCopied: true,\r\n      },\r\n      () => {\r\n        setTimeout(() => {\r\n          this.setState({\r\n            isInstructionCopied: false,\r\n          })\r\n        }, 1000)\r\n      }\r\n    )\r\n  }\r\n\r\n  handleDownloadInstruction = async () => {\r\n    const { restoreInstruction } = this.state\r\n\r\n    this.setState(\r\n      {\r\n        isInstructionDownloaded: true,\r\n      },\r\n      () => {\r\n        const element = document.createElement('a')\r\n        const message = 'Check your browser downloads'\r\n\r\n        element.setAttribute(\r\n          'href',\r\n          `data:text/plaincharset=utf-8,${encodeURIComponent(restoreInstruction)}`\r\n        )\r\n        element.setAttribute(\r\n          'download',\r\n          `${window.location.hostname}_btc_sms_protected_keys_${moment().format('DD.MM.YYYY')}.txt`\r\n        )\r\n\r\n        element.style.display = 'none'\r\n        document.body.appendChild(element)\r\n        element.click()\r\n        document.body.removeChild(element)\r\n\r\n        setTimeout(() => {\r\n          this.setState({\r\n            isInstructionDownloaded: false,\r\n          })\r\n        }, 1000)\r\n      }\r\n    )\r\n  }\r\n\r\n  handleGenerateMnemonic = async () => {\r\n    this.setState(\r\n      {\r\n        isMnemonicGenerated: true,\r\n        isMnemonicValid: true,\r\n        mnemonic: actions.btc.getRandomMnemonicWords(),\r\n      },\r\n      () => {\r\n        setTimeout(() => {\r\n          this.setState({\r\n            isMnemonicGenerated: false,\r\n          })\r\n        }, 1000)\r\n      }\r\n    )\r\n  }\r\n\r\n  handleFinish = async () => {\r\n    const { name } = this.props\r\n\r\n    actions.btcmultisig.enableWalletSMS()\r\n    actions.modals.close(name)\r\n    if (this.props.data.callback) {\r\n      this.props.data.callback()\r\n    }\r\n  }\r\n\r\n  handleShareInstruction = async () => {\r\n    const { restoreInstruction } = this.state\r\n\r\n    actions.modals.open(constants.modals.Share, {\r\n      title: `BTC Sms-protected wallet restory instruction`,\r\n      link: restoreInstruction,\r\n    })\r\n  }\r\n\r\n  handleBeginSaveMnemonic = async () => {\r\n    actions.modals.open(constants.modals.SaveMnemonicModal, {\r\n      onClose: () => {\r\n        const mnemonic = localStorage.getItem(constants.privateKeyNames.twentywords)\r\n        const mnemonicSaved = mnemonic === `-`\r\n        const step = mnemonicSaved ? 'enterPhoneAndMnemonic' : 'saveMnemonicWords'\r\n\r\n        this.setState({\r\n          mnemonicSaved,\r\n          step,\r\n        })\r\n      },\r\n    })\r\n  }\r\n\r\n  handleClose = () => {\r\n    const { name, data, onClose } = this.props\r\n\r\n    if (typeof onClose === 'function') {\r\n      onClose()\r\n    }\r\n\r\n    if (typeof data.onClose === 'function') {\r\n      data.onClose()\r\n    }\r\n\r\n    actions.modals.close(name)\r\n  }\r\n\r\n  generateRestoreInstruction = () => {\r\n    // @ToDo - temp comment - find error, fix, and uncomment\r\n    /*\r\n    const { mnemonic, mnemonicWallet, useGeneratedKey } = this.state\r\n\r\n    const { btcData, btcMultisigSMSData } = this.props\r\n\r\n    let restoreInstruction = ''\r\n\r\n    restoreInstruction = `Wallet address:\\r\\n`\r\n    restoreInstruction += `${btcMultisigSMSData.address}\\r\\n`\r\n    restoreInstruction += `To withdraw funds create transaction using this code https://github.com/bitcoinjs/bitcoinjs-lib/blob/master/test/integration/transactions.spec.ts#L193\\r\\n`\r\n    restoreInstruction += `\\r\\n`\r\n    restoreInstruction += `Public keys for create Multisig (2of3) wallet:\\r\\n`\r\n    if (btcMultisigSMSData.publicKeys[0])\r\n      restoreInstruction += `${btcMultisigSMSData.publicKeys[0].toString('Hex')}\\r\\n`\r\n    if (btcMultisigSMSData.publicKeys[1])\r\n      restoreInstruction += `${btcMultisigSMSData.publicKeys[1].toString('Hex')}\\r\\n`\r\n    if (btcMultisigSMSData.publicKeys[2])\r\n      restoreInstruction += `${btcMultisigSMSData.publicKeys[2].toString('Hex')}\\r\\n`\r\n    restoreInstruction += `\\r\\n`\r\n    restoreInstruction += `Hot wallet private key (WIF) (first of three for sign tx):\\r\\n`\r\n    restoreInstruction += `Wallet delivery path from your secret phrase:\\r\\n`\r\n    restoreInstruction += `m/44'/0'/0'/0/0\\r\\n`\r\n    restoreInstruction += `${btcData.privateKey}\\r\\n`\r\n    restoreInstruction += `*** (this private key stored in your browser)\\r\\n`\r\n    restoreInstruction += `\\r\\n`\r\n    if (!useGeneratedKey) {\r\n      restoreInstruction += `Secret mnemonic:\\r\\n`\r\n      restoreInstruction += `${mnemonic}\\r\\n`\r\n      restoreInstruction += `Wallet delivery path for mnemonic:\\r\\n`\r\n      restoreInstruction += `m/44'/0'/0'/0/0\\r\\n`\r\n      restoreInstruction += `Private key (WIF) of wallet, generated from mnemonic:\\r\\n`\r\n      restoreInstruction += `(DELETE THIS LINE!) ${mnemonicWallet.WIF}\\r\\n`\r\n      restoreInstruction += `*** (this private key does not stored anywhere! but in case if our  2fa server does down, you can withdraw your fond using this private key)\\r\\n`\r\n    } else {\r\n      restoreInstruction += `Second of three for sign tx:\\r\\n`\r\n      restoreInstruction += `Wallet delivery path from your secret phrase:\\r\\n`\r\n      restoreInstruction += `m/44'/0'/0'/0/1\\r\\n`\r\n      restoreInstruction += `\\r\\n`\r\n    }\r\n    restoreInstruction += `If our service is unavailable, use a local copy of the wallet.\\r\\n`\r\n    restoreInstruction += `https://swaponline.github.io/2fa_wallet.zip\\r\\n`\r\n\r\n    this.setState({\r\n      restoreInstruction,\r\n    })\r\n    */\r\n  }\r\n\r\n  onPhoneChange = (phone) => {\r\n    this.setState(() => ({ phone }))\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      step,\r\n      error,\r\n      phone,\r\n      isShipped,\r\n      // useGeneratedKey,\r\n      useGeneratedKeyEnabled,\r\n      mnemonic,\r\n      isMnemonicCopied,\r\n      isMnemonicGenerated,\r\n      isMnemonicValid,\r\n      smsServerOffline,\r\n      isWalletLockedOtherPhone,\r\n      isInstructionCopied,\r\n      isInstructionDownloaded,\r\n      restoreInstruction,\r\n      showFinalInstruction,\r\n    } = this.state\r\n\r\n    const { name, intl } = this.props\r\n\r\n    const linked = Link.all(this, 'smsCode', 'mnemonic')\r\n\r\n    const langs = defineMessages({\r\n      registerSMSModal: {\r\n        id: 'registerSMSProtectedTitle',\r\n        defaultMessage: `Activate SMS Protected Wallet`,\r\n      },\r\n      mnemonicPlaceholder: {\r\n        id: 'registerSMSMPlaceHolder',\r\n        defaultMessage: `12 слов`,\r\n      },\r\n      phonePlaceHolder: {\r\n        id: 'registerSMSModalPhonePlaceholder',\r\n        defaultMessage: `Enter your phone`,\r\n      },\r\n      smsPlaceHolder: {\r\n        id: 'registerSMSModalSmsCodePlaceholder',\r\n        defaultMessage: `Enter code from SMS`,\r\n      },\r\n      needSaveMnemonicToContinue: {\r\n        id: 'registerSMS_YouNeedSaveMnemonic',\r\n        defaultMessage: `Для активации 2fa вы должны сохранить 12 слов.`,\r\n      },\r\n      pleaseSaveMnemonicToContinue: {\r\n        id: 'registerSMS_SaveYourMnemonic',\r\n        defaultMessage: `Пожалуйста сохраните свою секретную фразу.`,\r\n      },\r\n      buttonSaveMnemonic: {\r\n        id: 'registerSMS_ButtonSaveMnemonic',\r\n        defaultMessage: `Save`,\r\n      },\r\n      buttonCancel: {\r\n        id: 'registerSMS_ButtonCancel',\r\n        defaultMessage: `Cancel`,\r\n      },\r\n    })\r\n\r\n    const sentBtnDisabled = isShipped || !phone || (phone && !isValidPhoneNumber(phone))\r\n    return (\r\n      <Modal name={name} title={`${intl.formatMessage(langs.registerSMSModal)}`}>\r\n        <div styleName=\"registerSMSModalHolder\">\r\n          <style\r\n            dangerouslySetInnerHTML={{\r\n              __html: `\r\n            .PhoneInputCountryIcon {\r\n              width: 26px !important;\r\n            }\r\n          `,\r\n            }}\r\n          />\r\n          {step === 'saveMnemonicWords' && (\r\n            <Fragment>\r\n              <div styleName=\"content-overlay\">\r\n                <p styleName=\"centerInfoBlock\">\r\n                  <strong>\r\n                    <FormattedMessage {...langs.needSaveMnemonicToContinue} />\r\n                  </strong>\r\n                  <br />\r\n                  <FormattedMessage {...langs.pleaseSaveMnemonicToContinue} />\r\n                </p>\r\n              </div>\r\n\r\n              <div styleName=\"buttonsHolder buttonsHolder_2_buttons button-overlay\">\r\n                <Button blue onClick={this.handleBeginSaveMnemonic}>\r\n                  <FormattedMessage {...langs.buttonSaveMnemonic} />\r\n                </Button>\r\n                <Button gray onClick={this.handleClose}>\r\n                  <FormattedMessage {...langs.buttonCancel} />\r\n                </Button>\r\n              </div>\r\n            </Fragment>\r\n          )}\r\n          {step === 'enterPhoneAndMnemonic' && (\r\n            <Fragment>\r\n              <PhoneInput\r\n                value={phone}\r\n                error={error}\r\n                locale={intl.locale}\r\n                onChange={this.onPhoneChange}\r\n                placeholder={`${intl.formatMessage(langs.phonePlaceHolder)}`}\r\n                label={\r\n                  <FieldLabel>\r\n                    <FormattedMessage id=\"registerSMSModalPhone\" defaultMessage=\"Your phone:\" />\r\n                  </FieldLabel>\r\n                }\r\n              />\r\n              {!useGeneratedKeyEnabled && (\r\n                <Fragment>\r\n                  <div styleName=\"highLevel\">\r\n                    <div styleName=\"infoCaption\">\r\n                      <FormattedMessage\r\n                        id=\"registerSMSWordsInfoBlock\"\r\n                        defaultMessage=\"Сгенерируйте секретную фразу или укажите ранее сохраненную для восстановления старого кошелька\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div styleName=\"highLevel\" className=\"ym-hide-content\">\r\n                    <FieldLabel>\r\n                      <FormattedMessage\r\n                        id=\"registerSMSModalWords\"\r\n                        defaultMessage=\"Секретная фраза (12 слов):\"\r\n                      />\r\n                    </FieldLabel>\r\n\r\n                    <div styleName=\"mnemonicButtonsHolder\">\r\n                      <Button\r\n                        blue\r\n                        fullWidth\r\n                        disabled={isMnemonicGenerated}\r\n                        onClick={this.handleGenerateMnemonic}\r\n                      >\r\n                        {isMnemonicGenerated ? (\r\n                          <FormattedMessage\r\n                            id=\"registerSMSModalMnemonicGenerateNewGenerated\"\r\n                            defaultMessage=\"Создана\"\r\n                          />\r\n                        ) : (\r\n                          <FormattedMessage\r\n                            id=\"registerSMSModalMnemonicGenerateNew\"\r\n                            defaultMessage=\"Создать новую\"\r\n                          />\r\n                        )}\r\n                      </Button>\r\n                      <CopyToClipboard text={mnemonic} onCopy={this.handleCopyMnemonic}>\r\n                        <Button\r\n                          blue\r\n                          fullWidth\r\n                          disabled={isMnemonicCopied}\r\n                          onClick={this.handleCopyMnemonic}\r\n                        >\r\n                          {isMnemonicCopied ? (\r\n                            <FormattedMessage\r\n                              id=\"registerSMSModalMnemonicCopied\"\r\n                              defaultMessage=\"Фраза скопирована\"\r\n                            />\r\n                          ) : (\r\n                            <FormattedMessage\r\n                              id=\"registerSMSModalMnemonicCopy\"\r\n                              defaultMessage=\"Скопировать\"\r\n                            />\r\n                          )}\r\n                        </Button>\r\n                      </CopyToClipboard>\r\n                    </div>\r\n                    <div styleName=\"notice mnemonicNotice\">\r\n                      <FormattedMessage\r\n                        id=\"registerSMSMnemonicNotice\"\r\n                        defaultMessage=\"Она поможет разблокировать средства на кошельке, если сервер 2fa будет не доступен\"\r\n                      />\r\n                    </div>\r\n                    {!isMnemonicValid && (\r\n                      <div styleName=\"rednotes mnemonicNotice\">\r\n                        <FormattedMessage\r\n                          id=\"registerSMSMnemonicError\"\r\n                          defaultMessage=\"Вы указали не валидный набор слов\"\r\n                        />\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </Fragment>\r\n              )}\r\n              <div>\r\n                {smsServerOffline ? (\r\n                  <Fragment>\r\n                    <Button blue fullWidth disabled={isShipped} onClick={this.handleRestoreWallet}>\r\n                      <FormattedMessage\r\n                        id=\"registerSMSAddOffline\"\r\n                        defaultMessage=\"Восстановить кошелек\"\r\n                      />\r\n                    </Button>\r\n                    <hr />\r\n                  </Fragment>\r\n                ) : (\r\n                  <Fragment>\r\n                    {error && <div styleName=\"rednotes mnemonicNotice\">{error}</div>}\r\n                  </Fragment>\r\n                )}\r\n              </div>\r\n              <Button blue big fullWidth disabled={sentBtnDisabled} onClick={this.handleSendSMS}>\r\n                {isShipped ? (\r\n                  <Fragment>\r\n                    <FormattedMessage\r\n                      id=\"registerSMSModalProcess\"\r\n                      defaultMessage=\"Processing ...\"\r\n                    />\r\n                  </Fragment>\r\n                ) : (\r\n                  <Fragment>\r\n                    <FormattedMessage id=\"registerSMSModalSendSMS\" defaultMessage=\"Send SMS\" />\r\n                  </Fragment>\r\n                )}\r\n              </Button>\r\n            </Fragment>\r\n          )}\r\n          {step === 'enterPhone' && (\r\n            <Fragment>\r\n              <PhoneInput\r\n                value={phone}\r\n                error={error}\r\n                locale={intl.locale}\r\n                onChange={this.onPhoneChange}\r\n                placeholder={`${intl.formatMessage(langs.phonePlaceHolder)}`}\r\n                label={\r\n                  <FieldLabel>\r\n                    <FormattedMessage id=\"registerSMSModalPhone\" defaultMessage=\"Your phone:\" />\r\n                  </FieldLabel>\r\n                }\r\n              />\r\n              <Button blue big fullWidth disabled={sentBtnDisabled} onClick={this.handleSendSMS}>\r\n                {isShipped ? (\r\n                  <Fragment>\r\n                    <FormattedMessage\r\n                      id=\"registerSMSModalProcess\"\r\n                      defaultMessage=\"Processing ...\"\r\n                    />\r\n                  </Fragment>\r\n                ) : (\r\n                  <Fragment>\r\n                    <FormattedMessage id=\"registerSMSModalSendSMS\" defaultMessage=\"Send SMS\" />\r\n                  </Fragment>\r\n                )}\r\n              </Button>\r\n            </Fragment>\r\n          )}\r\n          {step === 'enterCode' && (\r\n            <Fragment>\r\n              {error && <div styleName=\"rednotes smsInfoBlock\">{error}</div>}\r\n              {isWalletLockedOtherPhone && (\r\n                <div styleName=\"rednotes smsInfoBlock\">\r\n                  <FormattedMessage\r\n                    id=\"registerSMS_WalletLocked\"\r\n                    defaultMessage=\"Этот счет привязан к другому номеру телефона\"\r\n                  />\r\n                </div>\r\n              )}\r\n              {smsServerOffline && (\r\n                <div styleName=\"rednotes smsInfoBlock\">\r\n                  <FormattedMessage\r\n                    id=\"registerSMS_ConfigServerOffline\"\r\n                    defaultMessage=\"Сервер авторизации не доступен. Попробуйте позже или используйте секретную фраза для разблокировки счета\"\r\n                  />\r\n                </div>\r\n              )}\r\n              <div styleName=\"highLevel smsCodeHolder\">\r\n                <FieldLabel>\r\n                  <FormattedMessage\r\n                    id=\"registerSMSModalCode\"\r\n                    defaultMessage=\"Enter code from SMS:\"\r\n                  />\r\n                </FieldLabel>\r\n                <Input\r\n                  styleName=\"input inputMargin25\"\r\n                  valueLink={linked.smsCode}\r\n                  focusOnInit\r\n                  placeholder={`${intl.formatMessage(langs.smsPlaceHolder)}`}\r\n                />\r\n              </div>\r\n              <Button\r\n                styleName=\"confirmSmsCode\"\r\n                big\r\n                blue\r\n                fullWidth\r\n                disabled={isShipped}\r\n                onClick={this.handleCheckSMS}\r\n              >\r\n                {isShipped ? (\r\n                  <FormattedMessage id=\"registerSMSModalProcess\" defaultMessage=\"Processing ...\" />\r\n                ) : (\r\n                  <FormattedMessage id=\"registerSMSModalSendSMS165\" defaultMessage=\"Confirm\" />\r\n                )}\r\n              </Button>\r\n              <hr />\r\n              <p styleName=\"notice\">\r\n                <FormattedMessage\r\n                  id=\"registerSMS_MnemonicRestoreNotes\"\r\n                  defaultMessage=\"Если не приходит код подтверждения или у вас нет доступа к указаному номеру телефона, вы можете восстановить кошелек используя секретную фразу\"\r\n                />\r\n              </p>\r\n              <p styleName=\"notice\">\r\n                <FormattedMessage\r\n                  id=\"registerSMS_MnemonicUseNotes\"\r\n                  defaultMessage=\"Используя секретную фразу, вы сможете разблокировать средства на счете\"\r\n                />\r\n              </p>\r\n              <p styleName=\"buttonContainer\">\r\n                <Button\r\n                  blue\r\n                  fullWidth\r\n                  autoHeight\r\n                  disabled={isShipped}\r\n                  onClick={this.handleRestoreWallet}\r\n                >\r\n                  <FormattedMessage\r\n                    id=\"registerSMSRestoryMnemonic\"\r\n                    defaultMessage=\"Восстановить кошелек используя секретную фразу\"\r\n                  />\r\n                </Button>\r\n              </p>\r\n            </Fragment>\r\n          )}\r\n          {step === 'ready' && (\r\n            <Fragment>\r\n              <div styleName=\"highLevel\">\r\n                <div>\r\n                  <img styleName=\"finishImg\" src={okSvg} alt=\"finish\" />\r\n                </div>\r\n                <span\r\n                  style={{\r\n                    fontSize: '25px',\r\n                    display: 'block',\r\n                    textAlign: 'center',\r\n                    marginBottom: '40px',\r\n                  }}\r\n                >\r\n                  <FormattedMessage\r\n                    id=\"registerSMSModalReady\"\r\n                    defaultMessage=\"Your protected wallet activated\"\r\n                  />\r\n                </span>\r\n              </div>\r\n              {showFinalInstruction && (\r\n                <div styleName=\"restoreInstruction\" className=\"ym-hide-content\">\r\n                  <h1>\r\n                    <FormattedMessage\r\n                      id=\"registerSMSModalFinishSaveThisInfo\"\r\n                      defaultMessage=\"Информация на случай недоступности нашего сервиса\"\r\n                    />\r\n                  </h1>\r\n                  <div>\r\n                    <pre>{restoreInstruction}</pre>\r\n                    <a\r\n                      styleName=\"link\"\r\n                      target=\"_blank\"\r\n                      href=\"https://github.com/bitcoinjs/bitcoinjs-lib/blob/master/test/integration/addresses.spec.ts\"\r\n                    >\r\n                      <FormattedMessage\r\n                        id=\"registerSMS_LinkToManualRestore\"\r\n                        defaultMessage=\"How to withdraw money manually\"\r\n                      />\r\n                    </a>\r\n                  </div>\r\n                  <div styleName=\"buttonsHolder\">\r\n                    <CopyToClipboard text={restoreInstruction} onCopy={this.handleCopyInstruction}>\r\n                      <Button\r\n                        blue\r\n                        disabled={isInstructionCopied}\r\n                        onClick={this.handleCopyInstruction}\r\n                      >\r\n                        {isInstructionCopied ? (\r\n                          <FormattedMessage\r\n                            id=\"registerSMSModalInstCopied\"\r\n                            defaultMessage=\"Скопировано\"\r\n                          />\r\n                        ) : (\r\n                          <FormattedMessage\r\n                            id=\"registerSMSModalInstCopy\"\r\n                            defaultMessage=\"Скопировать\"\r\n                          />\r\n                        )}\r\n                      </Button>\r\n                    </CopyToClipboard>\r\n                    <Button\r\n                      blue\r\n                      disabled={isInstructionDownloaded}\r\n                      onClick={this.handleDownloadInstruction}\r\n                    >\r\n                      {isInstructionDownloaded ? (\r\n                        <FormattedMessage\r\n                          id=\"registerSMSModalInstDownloaded\"\r\n                          defaultMessage=\"Загружается\"\r\n                        />\r\n                      ) : (\r\n                        <FormattedMessage\r\n                          id=\"registerSMSModalInstDownload\"\r\n                          defaultMessage=\"Скачать\"\r\n                        />\r\n                      )}\r\n                    </Button>\r\n                    <Button blue onClick={this.handleShareInstruction}>\r\n                      <FormattedMessage id=\"registerSMS_ShareInstruction\" defaultMessage=\"Share\" />\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              <Button big blue fullWidth onClick={this.handleFinish}>\r\n                <Fragment>\r\n                  <FormattedMessage id=\"registerSMSModalFinish\" defaultMessage=\"Finish\" />\r\n                </Fragment>\r\n              </Button>\r\n            </Fragment>\r\n          )}\r\n        </div>\r\n      </Modal>\r\n    )\r\n  }\r\n}\r\n"]}]}