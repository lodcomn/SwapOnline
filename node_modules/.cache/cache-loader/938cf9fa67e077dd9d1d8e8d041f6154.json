{"remainingRequest":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js??ref--9-1!C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\helpers\\localStorage.ts","dependencies":[{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\src\\front\\shared\\helpers\\localStorage.ts","mtime":1614852565609},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Alexei\\MultiCurrencyWallet\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8gQHRzLW5vY2hlY2sKLy9ACmltcG9ydCBwbHVnaW5zIGZyb20gJ3BsdWdpbnMnOwppbXBvcnQgY29uZmlnIGZyb20gJ2hlbHBlcnMvZXh0ZXJuYWxDb25maWcnOwp2YXIgaXNMb2NhbFN0b3JhZ2VFbmFibGVkOwoKdHJ5IHsKICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rlc3QnLCAndGVzdCcpOwogIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndGVzdCcpOwogIGlzTG9jYWxTdG9yYWdlRW5hYmxlZCA9IHRydWU7Cn0gY2F0Y2ggKGUpIHsKICBpc0xvY2FsU3RvcmFnZUVuYWJsZWQgPSBmYWxzZTsKfQoKdmFyIGdldFBsdWdpbk1ldGhvZCA9IGZ1bmN0aW9uIGdldFBsdWdpbk1ldGhvZChuYW1lLCBkYXRhKSB7CiAgaWYgKHBsdWdpbnMgJiYgcGx1Z2luc1tuYW1lXSAmJiB0eXBlb2YgcGx1Z2luc1tuYW1lXSA9PT0gJ2Z1bmN0aW9uJykgewogICAgcmV0dXJuIHBsdWdpbnNbbmFtZV0oZGF0YSk7CiAgfQoKICB0aHJvdyBuZXcgRXJyb3IoInBsdWdpbiBjb2RlIGVycm9yIG9yIHBsdWdpbiBmdW5jdGlvbiBpcyBub3QgZXhpc3QsIGNoZWNrICIuY29uY2F0KG5hbWUsICIgZnVuY3Rpb24gaW4gcGx1Z2lucyBkZXJlY3RvcnkiKSk7Cn07Cgp2YXIgc2V0SXRlbSA9IGZ1bmN0aW9uIHNldEl0ZW0oa2V5LCB2YWx1ZSkgewogIGlmIChpc0xvY2FsU3RvcmFnZUVuYWJsZWQpIHsKICAgIHZhciBzZXRJdGVtUGx1Z2luID0gY29uZmlnICYmIGNvbmZpZy5vcHRzICYmIGNvbmZpZy5vcHRzLnBsdWdpbnMgJiYgY29uZmlnLm9wdHMucGx1Z2lucy5zZXRJdGVtUGx1Z2luID8gY29uZmlnLm9wdHMucGx1Z2lucy5zZXRJdGVtUGx1Z2luIDogZmFsc2U7CgogICAgaWYgKHNldEl0ZW1QbHVnaW4pIHsKICAgICAgZ2V0UGx1Z2luTWV0aG9kKHNldEl0ZW1QbHVnaW4sIHsKICAgICAgICBrZXk6IGtleSwKICAgICAgICB2YWx1ZTogdmFsdWUKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpOwogICAgfQogIH0KfTsKCnZhciBnZXRJdGVtID0gZnVuY3Rpb24gZ2V0SXRlbShrZXkpIHsKICBpZiAoaXNMb2NhbFN0b3JhZ2VFbmFibGVkKSB7CiAgICB2YXIgX3dpbmRvdyA9IHdpbmRvdywKICAgICAgICBsb2NhbFN0b3JhZ2UgPSBfd2luZG93LmxvY2FsU3RvcmFnZTsKICAgIHZhciBnZXRJdGVtUGx1Z2luID0gY29uZmlnICYmIGNvbmZpZy5vcHRzICYmIGNvbmZpZy5vcHRzLnBsdWdpbnMgJiYgY29uZmlnLm9wdHMucGx1Z2lucy5nZXRJdGVtUGx1Z2luID8gY29uZmlnLm9wdHMucGx1Z2lucy5nZXRJdGVtUGx1Z2luIDogZmFsc2U7CgogICAgaWYgKGdldEl0ZW1QbHVnaW4pIHsKICAgICAgcmV0dXJuIGdldFBsdWdpbk1ldGhvZChnZXRJdGVtUGx1Z2luLCB7CiAgICAgICAga2V5OiBrZXkKICAgICAgfSk7CiAgICB9CgogICAgdmFyIHZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTsKCiAgICB0cnkgewogICAgICByZXR1cm4gSlNPTi5wYXJzZSh2YWx1ZSk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgY29uc29sZS5sb2coJ2xvY2FsU3RvcmFnZS5nZXRJdGVtOiBwYXJzZSBlcnJvcicpOwogICAgICByZXR1cm4gdmFsdWU7CiAgICB9CiAgfQoKICByZXR1cm4gdW5kZWZpbmVkOwp9OwoKdmFyIHJlbW92ZUl0ZW0gPSBmdW5jdGlvbiByZW1vdmVJdGVtKGtleSkgewogIGlmIChpc0xvY2FsU3RvcmFnZUVuYWJsZWQpIHsKICAgIHJldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTsKICB9Cn07Cgp2YXIgY2xlYXIgPSBmdW5jdGlvbiBjbGVhcigpIHsKICBpZiAoaXNMb2NhbFN0b3JhZ2VFbmFibGVkKSB7CiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmNsZWFyKCk7CiAgfQp9OwoKdmFyIHN1YnNjcmliZSA9IGZ1bmN0aW9uIHN1YnNjcmliZShrZXksIG9yaWdpbmFsTGlzdGVuZXIpIHsKICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbiBsaXN0ZW5lcihldmVudCkgewogICAgaWYgKGV2ZW50LnN0b3JhZ2VBcmVhID09PSB3aW5kb3cubG9jYWxTdG9yYWdlICYmIGV2ZW50LmtleSA9PT0ga2V5KSB7CiAgICAgIG9yaWdpbmFsTGlzdGVuZXIoZXZlbnQubmV3VmFsdWUsIGV2ZW50Lm9sZFZhbHVlKTsKICAgIH0KICB9OwoKICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc3RvcmFnZScsIGxpc3RlbmVyLCBmYWxzZSk7CiAgcmV0dXJuIGxpc3RlbmVyOwp9OwoKdmFyIHVuc3Vic2NyaWJlID0gZnVuY3Rpb24gdW5zdWJzY3JpYmUobGlzdGVuZXIpIHsKICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3RvcmFnZScsIGxpc3RlbmVyLCBmYWxzZSk7Cn07CgpleHBvcnQgZGVmYXVsdCB7CiAgc2V0SXRlbTogc2V0SXRlbSwKICBnZXRJdGVtOiBnZXRJdGVtLAogIHJlbW92ZUl0ZW06IHJlbW92ZUl0ZW0sCiAgY2xlYXI6IGNsZWFyLAogIHN1YnNjcmliZTogc3Vic2NyaWJlLAogIHVuc3Vic2NyaWJlOiB1bnN1YnNjcmliZQp9Ow=="},{"version":3,"sources":["C:/Users/Alexei/MultiCurrencyWallet/src/front/shared/helpers/localStorage.ts"],"names":["plugins","config","isLocalStorageEnabled","window","localStorage","setItem","removeItem","e","getPluginMethod","name","data","Error","key","value","setItemPlugin","opts","JSON","stringify","getItem","getItemPlugin","parse","err","console","log","undefined","clear","subscribe","originalListener","listener","event","storageArea","newValue","oldValue","addEventListener","unsubscribe","removeEventListener"],"mappings":"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","sourcesContent":["// @ts-nocheck\r\n//@\r\nimport plugins from 'plugins';\r\nimport config from 'helpers/externalConfig'\r\n\r\n\r\nlet isLocalStorageEnabled\r\n\r\ntry {\r\n  window.localStorage.setItem('test', 'test')\r\n  window.localStorage.removeItem('test')\r\n  isLocalStorageEnabled = true\r\n}\r\ncatch (e) {\r\n  isLocalStorageEnabled = false\r\n}\r\n\r\nconst getPluginMethod = (name, data) => {\r\n  if (plugins && plugins[name] && typeof plugins[name] === 'function') {\r\n    return plugins[name](data)\r\n  }\r\n  throw new Error(`plugin code error or plugin function is not exist, check ${name} function in plugins derectory`)\r\n}\r\n\r\nconst setItem = (key, value) => {\r\n  if (isLocalStorageEnabled) {\r\n    const setItemPlugin = (\r\n      config\r\n      && config.opts\r\n      && config.opts.plugins\r\n      && config.opts.plugins.setItemPlugin\r\n    ) ? config.opts.plugins.setItemPlugin : false\r\n\r\n    if (setItemPlugin) {\r\n      getPluginMethod(setItemPlugin, { key, value })\r\n    } else {\r\n      window.localStorage.setItem(key, JSON.stringify(value))\r\n    }\r\n  }\r\n}\r\n\r\nconst getItem = (key) => {\r\n  if (isLocalStorageEnabled) {\r\n    const { localStorage } = window\r\n    const getItemPlugin = (\r\n      config\r\n      && config.opts\r\n      && config.opts.plugins\r\n      && config.opts.plugins.getItemPlugin\r\n    ) ? config.opts.plugins.getItemPlugin : false\r\n\r\n    if (getItemPlugin) {\r\n      return getPluginMethod(getItemPlugin, { key })\r\n    }\r\n    const value = localStorage.getItem(key)\r\n\r\n    try {\r\n      return JSON.parse(value)\r\n    }\r\n    catch (err) {\r\n      console.log('localStorage.getItem: parse error')\r\n      return value\r\n    }\r\n  }\r\n  return undefined\r\n}\r\n\r\nconst removeItem = (key) => {\r\n  if (isLocalStorageEnabled) {\r\n    return window.localStorage.removeItem(key)\r\n  }\r\n}\r\n\r\nconst clear = () => {\r\n  if (isLocalStorageEnabled) {\r\n    window.localStorage.clear()\r\n  }\r\n}\r\n\r\nconst subscribe = (key, originalListener) => {\r\n  const listener = (event) => {\r\n    if (event.storageArea === window.localStorage && event.key === key) {\r\n      originalListener(event.newValue, event.oldValue)\r\n    }\r\n  }\r\n  window.addEventListener('storage', listener, false)\r\n  return listener\r\n}\r\n\r\nconst unsubscribe = (listener) => {\r\n  window.removeEventListener('storage', listener, false)\r\n}\r\n\r\nexport default {\r\n  setItem,\r\n  getItem,\r\n  removeItem,\r\n  clear,\r\n  subscribe,\r\n  unsubscribe,\r\n}\r\n"]}]}